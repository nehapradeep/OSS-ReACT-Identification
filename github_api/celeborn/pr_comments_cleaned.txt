Since 0.6.0, Celeborn has introduced a new RESTful API namespace: /api/v1, which uses the application/json media type for requests and responses. The celeborn-openapi-client SDK is also available to help users interact with the new RESTful APIs. The legacy RESTful APIs have been deprecated and will be removed in future releases. Access the full [RESTful API documentation](https://celeborn.apache.org/docs/latest/restapi/) for detailed information.

OK, I see. Thanks.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3103?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `84.61538%` with `2 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.77%. Comparing base [(`fdf1883`)](https://app.codecov.io/gh/apache/celeborn/commit/fdf1883f2520f4e7a18f7bd934dece7f2cb5b2b3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ee6c78b`)](https://app.codecov.io/gh/apache/celeborn/commit/ee6c78b6714641cc25ad185a312a329eca1cc8f0?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 14 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/3103?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/celeborn/pull/3103?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fclient%2FTransportClient.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 88.89% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3103?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/celeborn/pull/3103?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fclient%2FTransportResponseHandler.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | 75.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3103?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3103      +/-   ##\n==========================================\n+ Coverage   32.62%   32.77%   +0.15%     \n==========================================\n  Files         336      337       +1     \n  Lines       20083    20120      +37     \n  Branches     1798     1802       +4     \n==========================================\n+ Hits         6551     6592      +41     \n+ Misses      13165    13162       -3     \n+ Partials      367      366       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3103?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

OperationComplete does not guarantee that the RPC was received and processed correctly by the server. For RpcRequest methods such as addCredit and notifyRequiredSegment, the client needs to ensure and verify Worker correctly ack.

@aidar-stripe Hi, PR #2986 "[CELEBORN-1769] Fix packed partition location cause GetReducerFileGroupResponse lose location" fixed the scenario you might have encountered. \r\n\r\nIs the PR in your distribution or can you provide your worker\

@TheodoreLx, please use `dev/reformat` to format code style.

@SteNicholas The code has been reformatted

Could you fix the ut `[CELEBORN-1792] Test MemoryManager resume by pinned memory`? @TheodoreLx 

@FMX @RexXiong Could you kindly help review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

Ping @FMX, @RexXiong.

Unit-test fails seem unrelated to this patch. Not very familiar with Flink, correct me if I have any misunderstandings.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3093?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.67%. Comparing base [(`fdf1883`)](https://app.codecov.io/gh/apache/celeborn/commit/fdf1883f2520f4e7a18f7bd934dece7f2cb5b2b3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`35e0cc6`)](https://app.codecov.io/gh/apache/celeborn/commit/35e0cc64b688467b7e552465179a244327466c16?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 14 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3093      +/-   ##\n==========================================\n+ Coverage   32.62%   32.67%   +0.05%     \n==========================================\n  Files         336      337       +1     \n  Lines       20083    20109      +26     \n  Branches     1798     1800       +2     \n==========================================\n+ Hits         6551     6569      +18     \n- Misses      13165    13174       +9     \n+ Partials      367      366       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3093?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.6.0) and branch-0.5(v0.5.4)

Merge to main(v0.6.0)

According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n\r\nDo you have these two PRs for your Celeborn client?

> According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n> \r\n> Do you have these two PRs for your Celeborn client?\r\n\r\nNo.We mainly use branch-0.5.Would you please consider that merging these two pr into branch-0.5-rc?Those are important features and many users using branch-0.5 may need them.

> > According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n> > Do you have these two PRs for your Celeborn client?\r\n> \r\n> No.We mainly use branch-0.5.Would you please consider that merging these two pr into branch-0.5-rc?Those are important features and many users using branch-0.5 may need them.\r\n\r\nAs for this pr, it occurs to me that when a task of a stage throws fetchFail exception, in the small duration between fetchFail exception reported and the stage is aborted, following read tasks cans still get appId  and finish shuffle reading.Then when stage retrying, these tasks may not re compute, which save resources.If following tasks fail due to failing to get appId, then they will be recomputed in the next stage-retry inevitablely.\r\nI think this pr has a tiny influence when we have those two prs you mentioned, so it seems an unnecessary pr.

> > According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n> > Do you have these two PRs for your Celeborn client?\r\n> \r\n> No.We mainly use branch-0.5.Would you please consider that merging these two pr into branch-0.5-rc?Those are important features and many users using branch-0.5 may need them.\r\n\r\nThis PR can be helpful in branch-0.5 because branch-0.5 doesn\

> > > According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n> > > Do you have these two PRs for your Celeborn client?\r\n> > \r\n> > \r\n> > No.We mainly use branch-0.5.Would you please consider that merging these two pr into branch-0.5-rc?Those are important features and many users using branch-0.5 may need them.\r\n> \r\n> This PR can be helpful in branch-0.5 because branch-0.5 doesn\

> > > > According to your Jira ticket, "that shuffle fetch fails does not lead to stage fail because task speculation and another attempts succeed", I think the quoted scenario should not happen if you have PR #3080 and #2921.\r\n> > > > Do you have these two PRs for your Celeborn client?\r\n> > > \r\n> > > \r\n> > > No.We mainly use branch-0.5.Would you please consider that merging these two pr into branch-0.5-rc?Those are important features and many users using branch-0.5 may need them.\r\n> > \r\n> > \r\n> > This PR can be helpful in branch-0.5 because branch-0.5 doesn\

@buska88 It would be better to check the validity of a shuffle Id after you get it instead of using a shuffle ID that marked as invalid.\r\n\r\nYou can add the check here https://github.com/apache/celeborn/blob/6a836f9523b7eb03d3eff4bf1c23349bf8270064/client/src/main/java/org/apache/celeborn/client/ShuffleClientImpl.java#L612-L630

+1, lgtm 

Make sense 👍, we can also disable event logs as well for tests - `spark.eventLog.enabled: false`

> Make sense 👍, we can also disable event logs as well for tests - `spark.eventLog.enabled: false`\r\n\r\nThe default value for this configuration is false. So there is no need to change the value to false explicitly.

I think we can also put a safeguard check in `Controller#receiveAndReply` and throw if we receive messages before controller is intialized.

@FMX for porting this PR to 0.5, do i need to raise another PR on that branch?

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3083?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.65%. Comparing base [(`45450e7`)](https://app.codecov.io/gh/apache/celeborn/commit/45450e793cbf28706f03ea2d385930e12cc2e776?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e19bb65`)](https://app.codecov.io/gh/apache/celeborn/commit/e19bb65fdad4832b75125c4df8e6f0175a12e97e?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 17 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3083      +/-   ##\n==========================================\n+ Coverage   32.53%   32.65%   +0.13%     \n==========================================\n  Files         336      336              \n  Lines       20055    20083      +28     \n  Branches     1796     1798       +2     \n==========================================\n+ Hits         6522     6556      +34     \n+ Misses      13168    13162       -6     \n  Partials      365      365              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3083?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to main(v0.6.0)

Merge to main(v0.6.0)

thanks, merging(backport) to main

Nice catch...

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.4)

@FMX @RexXiong Could you kindly help review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

This PR looks good to me, but it should be subject to performance tests to ensure that nothing unexpected happens. The slot distribution will affect the performance. 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Thanks merge to main(v0.6.0)

Ping @turboFei, @FMX, @RexXiong.

Thanks, do not use Tez client before branch-0.6 is released. There shall be more tests for tez client.

Ping @pan3793.

Merged to main(v0.6.0).

Merge to main(v0.6.0)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3070?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 41.22%. Comparing base [(`2c7847e`)](https://app.codecov.io/gh/apache/celeborn/commit/2c7847e80225977b2462f9c3ed8eafb5b8744fae?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`db0108c`)](https://app.codecov.io/gh/apache/celeborn/commit/db0108cb4f4941a55c62526bb1ec23ddeacde474?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 9 commits behind head on branch-0.5.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.5    #3070      +/-   ##\n==============================================\n+ Coverage       41.16%   41.22%   +0.06%     \n==============================================\n  Files             226      226              \n  Lines           14503    14503              \n  Branches         1312     1312              \n==============================================\n+ Hits             5969     5977       +8     \n+ Misses           8193     8184       -9     \n- Partials          341      342       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3070?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merged to branch-0.5

Supplement the ServingState change log on the test machine, corresponding to the machine with pausePushDataAndReplicate shown in Figure 2 (the blue line)：\r\n\r\n```\r\n25/01/16 22:26:22,681 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from NONE_PAUSED to PUSH_PAUSED\r\n25/01/16 22:26:25,830 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from PUSH_PAUSED to PUSH_AND_REPLICATE_PAUSED\r\n25/01/16 22:26:47,176 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from PUSH_AND_REPLICATE_PAUSED to PUSH_PAUSED\r\n25/01/16 22:26:47,846 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from PUSH_PAUSED to NONE_PAUSED\r\n25/01/16 22:28:57,435 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from NONE_PAUSED to PUSH_PAUSED\r\n25/01/16 22:29:01,098 INFO [worker-memory-manager-checker] MemoryManager: Serving state transformed from PUSH_PAUSED to NONE_PAUSED\r\n```

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

it is impossible to add UT for speculation.\r\n\r\nhttps://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSchedulerImpl.scala#L236-L244\r\n\r\n<img width="867" alt="image" src="https://github.com/user-attachments/assets/f93bd14f-0f34-4c81-a8db-13be511405d9">\r\n\r\nFor local master, it would not start the speculationScheduler. \r\n\r\nhttps://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSetManager.scala#L322-L346\r\n\r\n<img width="1010" alt="image" src="https://github.com/user-attachments/assets/477729a4-2fc1-47e9-b128-522c6e2ceb48">\r\n\r\n\r\nand it is also not allowed to launch speculative task on the same host.

Thanks for your remind, there will be manual tests for this.\r\n\r\n> it is impossible to add UT for speculation.\r\n> \r\n> https://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSchedulerImpl.scala#L236-L244\r\n> \r\n> <img alt="image" width="867" src="https://private-user-images.githubusercontent.com/6757692/389046303-f93bd14f-0f34-4c81-a8db-13be511405d9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcwODQ2MzYsIm5iZiI6MTczNzA4NDMzNiwicGF0aCI6Ii82NzU3NjkyLzM4OTA0NjMwMy1mOTNiZDE0Zi0wZjM0LTRjODEtYThkYi0xM2JlNTExNDA1ZDkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDExNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMTdUMDMyNTM2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTAwNTE1YTU5MjE0OWFiOWY4N2RhN2E5YTA3ZWNlNjA4MWE5Mzk5Y2U2OTAyZDg3Yjk0NTFjNWE2MjI1ODViNCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.xpEYhEDmAd8cPdoJBMPjodObHMyvGv45nRleyeFgcaA">\r\n> For local master, it would not start the speculationScheduler.\r\n> \r\n> https://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSetManager.scala#L322-L346\r\n> \r\n> <img alt="image" width="1010" src="https://private-user-images.githubusercontent.com/6757692/389127451-477729a4-2fc1-47e9-b128-522c6e2ceb48.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzcwODQ2MzYsIm5iZiI6MTczNzA4NDMzNiwicGF0aCI6Ii82NzU3NjkyLzM4OTEyNzQ1MS00Nzc3MjlhNC0yZmMxLTQ3ZTktYjEyOC01MjJjNmUyY2ViNDgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDExNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMTdUMDMyNTM2WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzgxMTlkMDQ3NGU4ZjFhNjU2MThhZjgwN2EzMzUwNTlkNjk1NmE1NGY3YjFhZDRmNmFkYTFhMTRkOGNiOTc1ZiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.tR0TAxRmtyQrhuTe7ZgnClkgDKgQ0NmwKNV115j62jI">\r\n> and it is also not allowed to launch speculative task on the same host.\r\n\r\n

Maybe need to align it for entire code base.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@FMX @RexXiong Could you kindly review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

Thanks merge to main(v0.6.0)

Ping @FMX, @RexXiong.

Thanks merge to main(V0.6.0)

@zaynt4606, is it better to introduce ratis metrics to cover ha metrics?

@zaynt4606, ratis supports metrics which refers to https://github.com/apache/ratis/blob/master/ratis-docs/src/site/markdown/metrics.md.

> @zaynt4606, ratis supports metrics which refers to https://github.com/apache/ratis/blob/master/ratis-docs/src/site/markdown/metrics.md.\r\n\r\nReplace commitIndex with applyCompletedIndex in Ratis~

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3063?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.54%. Comparing base [(`61c90e3`)](https://app.codecov.io/gh/apache/celeborn/commit/61c90e3a078c59eab2573a2d89254c4f27894bdb?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`5f21d95`)](https://app.codecov.io/gh/apache/celeborn/commit/5f21d9583eed570fe9c9b6180cfc171e1f811c2e?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 9 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3063      +/-   ##\n==========================================\n+ Coverage   32.52%   32.54%   +0.02%     \n==========================================\n  Files         336      336              \n  Lines       20053    20055       +2     \n  Branches     1796     1796              \n==========================================\n+ Hits         6520     6524       +4     \n+ Misses      13168    13167       -1     \n+ Partials      365      364       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3063?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to main(v0.6.0)

Hi @FMX \r\nCould you please take a look? I removed the draft tag.

> the\r\n\r\nCode review will be done within this week.

@FMX @RexXiong Could you kindly help review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

Thanks. merge to main(v0.6.0)

Thanks. merge to main(v0.6.0)

Lots of CI failure usually means that your PR has something wrong. Please fix them first.

@zhaostu4 Can you provide more information about the scenarios that will cause data inconsistency? For example, what is the server version and client version? 

Ping @reswqa, @FMX.

Ping @reswqa, @FMX.

Merge to main(v0.6.0)

@FMX @RexXiong Could you kindly help review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

Merged into main(v0.6.0).

Merged into main(v0.6.0).

@FMX @RexXiong Could you kindly review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

Merge to main(v0.6.0) and branch-0.5(v0.5.4)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3048?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.52%. Comparing base [(`fde6365`)](https://app.codecov.io/gh/apache/celeborn/commit/fde6365f68ce8b589bcc639e96476ed618249257?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`37c6aa1`)](https://app.codecov.io/gh/apache/celeborn/commit/37c6aa1f8b1163ab07d7aa7b219232d0cf0d777c?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 17 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3048      +/-   ##\n==========================================\n- Coverage   32.68%   32.52%   -0.16%     \n==========================================\n  Files         336      336              \n  Lines       20032    20053      +21     \n  Branches     1792     1796       +4     \n==========================================\n- Hits         6546     6520      -26     \n- Misses      13123    13168      +45     \n- Partials      363      365       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3048?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.6.0).

@CodingCat, please add the metric in `monitoring.md` and `celeborn-dashboard.json`.

@SteNicholas sure, updated both

thank you @turboFei and @FMX ! updated the PR, would you mind taking another look?

should this also go to branch-0.5?

> should this also go to branch-0.5?\r\n\r\n@FMX Could you cherry pick to branch-0.5?

This PR is cherry-picked to branch-0.5.

Merged to main(v0.6.0).

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3043?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `28.39506%` with `58 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.67%. Comparing base [(`fde6365`)](https://app.codecov.io/gh/apache/celeborn/commit/fde6365f68ce8b589bcc639e96476ed618249257?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`b3d569a`)](https://app.codecov.io/gh/apache/celeborn/commit/b3d569a3ee6685bb6ba17b088a8d8b7674531fb1?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 11 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/3043?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...leborn/common/network/util/NettyMemoryMetrics.java](https://app.codecov.io/gh/apache/celeborn/pull/3043?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Futil%2FNettyMemoryMetrics.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5TWVtb3J5TWV0cmljcy5qYXZh) | 0.00% | [42 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3043?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/celeborn/pull/3043?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Futil%2FNettyUtils.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | 40.75% | [9 Missing and 7 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3043?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3043      +/-   ##\n==========================================\n- Coverage   32.68%   32.67%   -0.00%     \n==========================================\n  Files         336      336              \n  Lines       20032    20053      +21     \n  Branches     1792     1796       +4     \n==========================================\n+ Hits         6546     6551       +5     \n- Misses      13123    13137      +14     \n- Partials      363      365       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3043?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main(0.6)

@FMX @RexXiong Could you kindly help review this PR? Thanks a lot.\r\nAny suggestion is welcome.

@FMX @RexXiong The nested namespace and STATIC declaration is added to TransportMessage part. I will refactor other modules with nested namespace in the following commit rather than this commit to avoid polluting the commit message.\r\n\r\nAny suggestion is welcome.

> @FMX @RexXiong The nested namespace and STATIC declaration is added to TransportMessage part. I will refactor other modules with nested namespace in the following commit rather than this commit to avoid polluting the commit message.\r\n> \r\n> Any suggestion is welcome.\r\n\r\nThanks for your efforts @HolyLow 

 Merged to main(v0.6.0)

merge to main(v0.6.0)

Please update `migration.md` to describe the change for the default value.

@pan3793 @SteNicholas This PR is ready. How about now?

> Please update `migration.md` to describe the change for the default value.\r\n\r\n@FMX same request

The migration guide has been updated.

LGTM. Merged to main(v0.6.0).

Will change the description for exclude worker after https://github.com/apache/celeborn/pull/3023 merged.

merge to main(v0.6.0)

@FMX Could you kindly review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.\r\n\r\nAlso note that the latest java code uses packedPb to transfer the PartitionLocation message, but the code should work with other messages, so we leave the packedPb translation to later commits.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3034?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.67%. Comparing base [(`fde6365`)](https://app.codecov.io/gh/apache/celeborn/commit/fde6365f68ce8b589bcc639e96476ed618249257?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d93af83`)](https://app.codecov.io/gh/apache/celeborn/commit/d93af838ae5319b14f08e1a86ddc8a6406dde4fd?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3034      +/-   ##\n==========================================\n- Coverage   32.68%   32.67%   -0.00%     \n==========================================\n  Files         336      336              \n  Lines       20032    20032              \n  Branches     1792     1792              \n==========================================\n- Hits         6546     6544       -2     \n- Misses      13123    13124       +1     \n- Partials      363      364       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3034?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main(v0.6.0).

LGTM. Merged to main(v0.6.0) and branch-0.5(0.5.3).

Merged to main(v0.6.0)

Maybe I can use the below commands in systemctl.d/supervisor.d directly.\r\n\r\n```\r\n$CELEBORN_HOME/sbin/celeborn-daemon.sh --config $CELEBORN_CONF_DIR start org.apache.celeborn.service.deploy.master.Master\r\n\r\n$CELEBORN_HOME/sbin/celeborn-daemon.sh --config $CELEBORN_CONF_DIR start org.apache.celeborn.service.deploy.master.Worker 1\r\n\r\n```

reopen it incase someone think it is necessary 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3029?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.67%. Comparing base [(`2eb4c23`)](https://app.codecov.io/gh/apache/celeborn/commit/2eb4c23eb8c87788daea66caa8e331e024d160b5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`299a43b`)](https://app.codecov.io/gh/apache/celeborn/commit/299a43b8a59f4d3e10dd25fec7bb390e2321fec5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 12 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3029      +/-   ##\n==========================================\n- Coverage   32.99%   32.67%   -0.31%     \n==========================================\n  Files         331      336       +5     \n  Lines       19842    20032     +190     \n  Branches     1787     1792       +5     \n==========================================\n- Hits         6545     6544       -1     \n- Misses      12933    13124     +191     \n  Partials      364      364              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3029?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks for driving this, merged to main for 0.6

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3028?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.68%. Comparing base [(`2eb4c23`)](https://app.codecov.io/gh/apache/celeborn/commit/2eb4c23eb8c87788daea66caa8e331e024d160b5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a470611`)](https://app.codecov.io/gh/apache/celeborn/commit/a470611959e5dcb6525a5701b24c7d0c34bb1351?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3028      +/-   ##\n==========================================\n- Coverage   32.99%   32.68%   -0.30%     \n==========================================\n  Files         331      336       +5     \n  Lines       19842    20032     +190     \n  Branches     1787     1792       +5     \n==========================================\n+ Hits         6545     6546       +1     \n- Misses      12933    13123     +190     \n+ Partials      364      363       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3028?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX Could you kindly review this PR? Thanks a lot.\r\n\r\nAny suggestion is welcome.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3027?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.68%. Comparing base [(`2eb4c23`)](https://app.codecov.io/gh/apache/celeborn/commit/2eb4c23eb8c87788daea66caa8e331e024d160b5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`f9e3602`)](https://app.codecov.io/gh/apache/celeborn/commit/f9e3602eb7b18547e861faf00c427217435e19eb?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3027      +/-   ##\n==========================================\n- Coverage   32.99%   32.68%   -0.30%     \n==========================================\n  Files         331      336       +5     \n  Lines       19842    20032     +190     \n  Branches     1787     1792       +5     \n==========================================\n+ Hits         6545     6546       +1     \n- Misses      12933    13123     +190     \n+ Partials      364      363       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3027?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3026?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `10 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.66%. Comparing base [(`2eb4c23`)](https://app.codecov.io/gh/apache/celeborn/commit/2eb4c23eb8c87788daea66caa8e331e024d160b5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`95503c3`)](https://app.codecov.io/gh/apache/celeborn/commit/95503c36f9c269efc67a9cfd63bb663866367baa?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/3026?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/3026?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3026?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/3026?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3026?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3026      +/-   ##\n==========================================\n- Coverage   32.99%   32.66%   -0.33%     \n==========================================\n  Files         331      336       +5     \n  Lines       19842    20042     +200     \n  Branches     1787     1792       +5     \n==========================================\n- Hits         6545     6544       -1     \n- Misses      12933    13134     +201     \n  Partials      364      364              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3026?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @turboFei, @codenohup, @reswqa, @FMX.

Ping @pan3793, @FMX, @RexXiong.

@RexXiong, PTAL.\r\nBTW, the layout of ApplicationTotalCount and ApplicationFallbackCount metrics are as follows:\r\n<img width="1438" alt="image" src="https://github.com/user-attachments/assets/63fe1523-98b3-4fb5-ad5f-5545c581200f" />\r\n

Merged to main(v0.6.0).

UT passed, cc @RexXiong 

Is this PR needed for release 0.5.3?

> Is this PR needed for release 0.5.3?\n\n\nno, only for 0.6.0

Thanks, merge to main(v0.6.0)

LGTM, Thanks @turboFei , change log level at runtime is very useful for debugging. 

This pr will be very helpful especially since Celeborn workers can not restart frequently to change the loggers.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Before optimization \r\n\r\n![image](https://github.com/user-attachments/assets/f4d5269f-54ab-4f1e-b78b-9a8161e4b191)\r\n\r\n\r\nAfter optimization\r\n\r\n![image](https://github.com/user-attachments/assets/20dc62a0-2b45-426e-9d5b-a5234b0f0967)\r\n

I have a question. Will the worker OOM when the pinned memory is high? In our previous implementations, the direct memory counter will count all direct memory allocated, whether or not the allocator can allocate. \r\nCan you do a pressure test for this scenario?

I discussed this with FMX offline, and we believe it might be better to use pinnedDirectMemory for worker resumption while keeping usedDirectMemory for trimming. @leixm @AngersZhuuuu WDYT?\r\n\r\n

Don\

Thanks, merge to main(v0.6.0)

@leixm I have a question. After the resumeByPinnedMemory method is called, all Channels are resumed. However, 10 milliseconds later, the memoryUsage may still be greater than the pausePushDataThreshold, and the switchServingState method will pause all Channels again. Is this what will happen? It seems that we only get a very short resume.

ping @RexXiong Pls take a look

> LGTM, thanks @leixm ,could you fix the code conflict?\r\n\r\nSure.

Merge to main(v0.6.0)

@FMX Could you kindly review this PR? Thanks a lot.\r\n\r\nThe BaseConf is the building block for CelebornConf, which will be added in next PR.\r\n\r\nAny suggestion is welcome.

@FMX thanks a lot, refactored as advised. Any suggestion is welcome.

Ping @reswqa, @codenohup.

Hi, @SteNicholas \r\n\r\nThis PR LGTM, but I have a minor question. It seems that the decision to fall back to the built-in shuffle is based on `job` granularity rather than `Shuffle` granularity. I think it would be beneficial to have a fallback count metric that reflects `job` granularity.

@codenohup, The difference of implementation that Flink only supports job granular fallback but Spark supports shuffle granular fallback causes above fallback metric situation. I would like to support job granular fallback metrics in another pull request.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3011?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 41.15%. Comparing base [(`5c6a2c8`)](https://app.codecov.io/gh/apache/celeborn/commit/5c6a2c85fcac0fc232ad7b108335d2c963a5a6ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`cd551ce`)](https://app.codecov.io/gh/apache/celeborn/commit/cd551cead95c1ab4377f7aa0c64cb9aacb17fe76?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 29 commits behind head on branch-0.5.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.5    #3011      +/-   ##\n==============================================\n- Coverage       41.19%   41.15%   -0.04%     \n==============================================\n  Files             226      226              \n  Lines           14488    14503      +15     \n  Branches         1308     1312       +4     \n==============================================\n  Hits             5967     5967              \n- Misses           8179     8194      +15     \n  Partials          342      342              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3011?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3010?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.01%. Comparing base [(`4aabe37`)](https://app.codecov.io/gh/apache/celeborn/commit/4aabe377651ad5bca7cf159d2fd204258c2b97ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c058f3e`)](https://app.codecov.io/gh/apache/celeborn/commit/c058f3ec5d1adbabe177ec47ac2e15ba2843fe0b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 25 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3010      +/-   ##\n==========================================\n+ Coverage   32.88%   33.01%   +0.13%     \n==========================================\n  Files         331      331              \n  Lines       19800    19842      +42     \n  Branches     1780     1787       +7     \n==========================================\n+ Hits         6510     6548      +38     \n- Misses      12929    12931       +2     \n- Partials      361      363       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3010?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX plz help review. Thanks  

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3008?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `35.55556%` with `29 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.55%. Comparing base [(`4aabe37`)](https://app.codecov.io/gh/apache/celeborn/commit/4aabe377651ad5bca7cf159d2fd204258c2b97ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`09a7cdb`)](https://app.codecov.io/gh/apache/celeborn/commit/09a7cdb700add410ccce0cd89ea510ef7d68082d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 78 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/3008?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/common/rpc/RpcEndpointRef.scala](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2FRpcEndpointRef.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbmRwb2ludFJlZi5zY2FsYQ==) | 6.25% | [15 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/rpc/RpcEnv.scala](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2FRpcEnv.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbnYuc2NhbGE=) | 0.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 93.75% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3008?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #3008      +/-   ##\n==========================================\n- Coverage   32.88%   32.55%   -0.33%     \n==========================================\n  Files         331      336       +5     \n  Lines       19800    20102     +302     \n  Branches     1780     1800      +20     \n==========================================\n+ Hits         6510     6542      +32     \n- Misses      12929    13195     +266     \n- Partials      361      365       +4     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3008?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Comments have been Updated.\r\ncc @turboFei @RexXiong @mridulm 

thanks, merged into main/0.6.0

@SteNicholas  @RexXiong  @AngersZhuuuu  PTAL.

I will daft it, we should ensure that in all places where getPooledByteBufAllocator is called, the source passed in is not null.

how does this affect grafana dashboard?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Merged into main(v0.6.0).

cherry-pick [](https://github.com/apache/celeborn/pull/2956)  to branch-0.5

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/3005?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `51 lines` in your changes missing coverage. Please review.\n> Project coverage is 41.16%. Comparing base [(`5c6a2c8`)](https://app.codecov.io/gh/apache/celeborn/commit/5c6a2c85fcac0fc232ad7b108335d2c963a5a6ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a45c089`)](https://app.codecov.io/gh/apache/celeborn/commit/a45c0893fca3aefaa104433c1f7b419884b2411f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 26 commits behind head on branch-0.5.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/3005?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/celeborn/pull/3005?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmetrics%2Fsource%2FAbstractSource.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | 0.00% | [51 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/3005?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.5    #3005      +/-   ##\n==============================================\n- Coverage       41.19%   41.16%   -0.02%     \n==============================================\n  Files             226      226              \n  Lines           14488    14503      +15     \n  Branches         1308     1312       +4     \n==============================================\n+ Hits             5967     5969       +2     \n- Misses           8179     8193      +14     \n+ Partials          342      341       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/3005?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong   PTAL.

Merge to main(v0.6.0) and v(0.5.3)

@waitinfuture  @AngersZhuuuu  @RexXiong  PTAL.

![image](https://github.com/user-attachments/assets/44423735-6999-4752-9e5e-7071e8878723)\r\n

Related https://github.com/apache/celeborn/pull/2626

> Related #2626\r\n\r\n@leixm It’s obvious that we missed this PR. Can you take a look to see if this PR fix the problem?

I have already reopened https://github.com/apache/celeborn/pull/2626, and closed this one.

Merge to main(v0.6.0)

Merge to main(v0.6.0)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2999?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.88%. Comparing base [(`259dfcd`)](https://app.codecov.io/gh/apache/celeborn/commit/259dfcd988408e64f83e539b6469b8f87ca4a9f7?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7b27f06`)](https://app.codecov.io/gh/apache/celeborn/commit/7b27f066caaa38f879896490fc070526a651a0bb?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 43 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2999      +/-   ##\n==========================================\n- Coverage   32.99%   32.88%   -0.10%     \n==========================================\n  Files         330      331       +1     \n  Lines       19683    19800     +117     \n  Branches     1766     1780      +14     \n==========================================\n+ Hits         6492     6510      +18     \n- Misses      12830    12929      +99     \n  Partials      361      361              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2999?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.6.0)

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@FMX Could you kindly review this PR? Thanks a lot.\r\nAny suggestion is welcome.

> @FMX Could you kindly review this PR? Thanks a lot. Any suggestion is welcome.\r\n\r\nThis module is critical, so it will take some time to review. However, it will be completed before next Wednesday.

BTW, what memory allocator will you use?

Ping @pan3793, @RexXiong, @FMX.

@FMX, @RexXiong, could you take a look?

@RexXiong, thanks for review. I have found the epoll bug for `Utils#isBindCollision`, which error message refers to [Errors.java#L87](https://github.com/netty/netty/blob/netty-4.1.109.Final/transport-native-unix-common/src/main/java/io/netty/channel/unix/Errors.java#L87). PTAL. cc @turboFei, @pan3793.

Merge to main(v0.6.0)

@RexXiong  @AngersZhuuuu  PTAL.

Duplicated with https://github.com/apache/celeborn/pull/2992

Merge to main(v0.6.0) and branch-0.5(v0.5.3) and branch-0.4(v0.4.4)

cc @AngersZhuuuu as well

Dut to this PR has been tested on the cluster, this PR is merged.

cc @ErikFang @FMX @RexXiong @SteNicholas 

gentle ping @SteNicholas @ErikFang \r\n

Cool. Do test this PR on the cluster, if something is missing, it will cause data correctness problems which are important.

@zwangsheng Hi, How are your tests? 

> @zwangsheng Hi, How are your tests?\r\n\r\nTested on yarn cluster, passing normal Terasort tests, as well as abnormal random task failure tests.\r\n\r\nBut for the sake of correctness, I still need time to continue testing.

 Test the normal case(with terasort test) and the abnormal case(RDD with task fail), seems this change is safe.\r\n\r\n@FMX plz take a review

> Test the normal case(with terasort test) and the abnormal case(RDD with task fail), seems this change is safe.\r\n> \r\n> @FMX plz take a review\r\n\r\nOK, please solve the conflicts. The review will be done soon.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

This pr seems will make UT fail faster, why can it fix occasional UT failures?

> This pr seems will make UT fail faster, why can it fix occasional UT failures?\r\n\r\nIf `worker.registered.get()` is false, This pr will wait for the worker to register While assertionError will make the UT job aborted.\r\n

Merge to main(v0.6.0)

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.3)

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@mridulm the current impl allows the old client to communicate with the newer server, because it uses the highest bit of an int in the chuck header(which represents the data size, so the highest bit always is zero) to indicate whether the checksum is enabled, so old clients always perform as checksum disabled. this design is backward compatible and efficient, but also means we can not ship checksum algo info, so choosing an efficient algo is also important.

> Possible solutions include selecting the appropriate way to read the data based on the PartitionType or adding a new field, byteOrder, to explicitly inform the server of the endianness used in writing. Personally I prefer the first solution.\r\n\r\nread data based on `PartitionType` sounds good to me.

@pan3793 thanks for clarifying, will go over the PR later this week - have been a bit swamped lately.\r\nMy general comment would be - nothing stands the test of time :-) So having the ability to evolve the checksum algo would help long term !

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

gentle ping @mridulm 

thanks, merged to 0.6.0, 0.5.3 and branch-0.4

After some tests, I discovered that the Celeborn protobuf is not built as expected.  As you can see that \r\n<img width="383" alt="截屏2024-12-05 11 37 09" src="https://github.com/user-attachments/assets/cff25bfc-e983-42ff-a389-5b3fd3acb508">\r\n\r\n\r\nhttps://cmake.org/cmake/help/latest/module/FindProtobuf.html\r\nCMake has a function that compiles the proto and gets the generated source and header. I used it in another project and got the expected result.

After some more tests, the build failure is related to the CLION remote development. Building the Celeborn native SDK in the docker container is fine.

```\r\n24/11/27 01:44:36,396 WARN [push-server-6-14] TransportChannelHandler: Exception in connection from /10.217.150.42:27112\r\nio.netty.util.internal.OutOfDirectMemoryError: failed to allocate 4194304 byte(s) of direct memory (used: 10733223943, max: 10737418240)\r\n        at io.netty.util.internal.PlatformDependent.incrementMemoryCounter(PlatformDependent.java:843)\r\n        at io.netty.util.internal.PlatformDependent.allocateDirectNoCleaner(PlatformDependent.java:772)\r\n        at io.netty.buffer.PoolArena$DirectArena.allocateDirect(PoolArena.java:717)\r\n        at io.netty.buffer.PoolArena$DirectArena.newChunk(PoolArena.java:692)\r\n        at io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:215)\r\n        at io.netty.buffer.PoolArena.tcacheAllocateNormal(PoolArena.java:197)\r\n        at io.netty.buffer.PoolArena.allocate(PoolArena.java:139)\r\n        at io.netty.buffer.PoolArena.allocate(PoolArena.java:129)\r\n        at io.netty.buffer.PooledByteBufAllocator.newDirectBuffer(PooledByteBufAllocator.java:395)\r\n        at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:188)\r\n        at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:179)\r\n        at io.netty.buffer.CompositeByteBuf.allocBuffer(CompositeByteBuf.java:1879)\r\n        at io.netty.buffer.CompositeByteBuf.consolidate0(CompositeByteBuf.java:1758)\r\n        at io.netty.buffer.CompositeByteBuf.consolidateIfNeeded(CompositeByteBuf.java:571)\r\n        at io.netty.buffer.CompositeByteBuf.addComponent(CompositeByteBuf.java:266)\r\n        at io.netty.buffer.CompositeByteBuf.addComponent(CompositeByteBuf.java:222)\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.write(FileWriter.java:224)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.writeData$1(PushDataHandler.scala:1235)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.writeLocalData(PushDataHandler.scala:1278)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.handlePushMergedData(PushDataHandler.scala:636)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.$anonfun$receive$2(PushDataHandler.scala:146)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.handleCore(PushDataHandler.scala:743)\r\n        at org.apache.celeborn.service.deploy.worker.PushDataHandler.receive(PushDataHandler.scala:147)\r\n        at org.apache.celeborn.common.network.server.TransportRequestHandler.processOtherMessages(TransportRequestHandler.java:132)\r\n        at org.apache.celeborn.common.network.server.TransportRequestHandler.handle(TransportRequestHandler.java:88)\r\n        at org.apache.celeborn.common.network.server.TransportChannelHandler.channelRead(TransportChannelHandler.java:151)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n        at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n        at org.apache.celeborn.common.network.util.TransportFrameDecoder.channelRead(TransportFrameDecoder.java:74)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\n\r\n24/11/27 01:44:38,385 WARN [push-server-6-8] TransportChannelHandler: Exception in connection from /10.217.113.154:31790\r\nio.netty.util.internal.OutOfDirectMemoryError: failed to allocate 4194304 byte(s) of direct memory (used: 10733223943, max: 10737418240)\r\n        at io.netty.util.internal.PlatformDependent.incrementMemoryCounter(PlatformDependent.java:843)\r\n        at io.netty.util.internal.PlatformDependent.allocateDirectNoCleaner(PlatformDependent.java:772)\r\n        at io.netty.buffer.PoolArena$DirectArena.allocateDirect(PoolArena.java:717)\r\n        at io.netty.buffer.PoolArena$DirectArena.newChunk(PoolArena.java:692)\r\n        at io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:215)\r\n        at io.netty.buffer.PoolArena.tcacheAllocateNormal(PoolArena.java:197)\r\n        at io.netty.buffer.PoolArena.allocate(PoolArena.java:139)\r\n        at io.netty.buffer.PoolArena.allocate(PoolArena.java:129)\r\n        at io.netty.buffer.PooledByteBufAllocator.newDirectBuffer(PooledByteBufAllocator.java:395)\r\n        at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:188)\r\n        at io.netty.buffer.AbstractByteBufAllocator.directBuffer(AbstractByteBufAllocator.java:179)\r\n        at io.netty.buffer.AbstractByteBufAllocator.ioBuffer(AbstractByteBufAllocator.java:140)\r\n        at io.netty.channel.DefaultMaxMessagesRecvByteBufAllocator$MaxMessageHandle.allocate(DefaultMaxMessagesRecvByteBufAllocator.java:120)\r\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:150)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n\r\n```\r\n4/11/27 01:50:49,825 ERROR [worker-files-committer-34907] Controller: Commit file for application_1727161546827_15995292_1-205 1765-0 failed.\r\njava.io.IOException: Wait pending actions timeout.\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.waitOnNoPending(FileWriter.java:359)\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.close(FileWriter.java:271)\r\n        at org.apache.celeborn.service.deploy.worker.storage.ReducePartitionFileWriter.close(ReducePartitionFileWriter.java:93)\r\n        at org.apache.celeborn.service.deploy.worker.Controller$$anon$1.run(Controller.scala:306)\r\n        at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1640)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n24/11/27 01:50:49,825 ERROR [worker-files-committer-34908] Controller: Commit file for application_1727161546827_15995292_1-205 415-0 failed.\r\njava.io.IOException: Wait pending actions timeout.\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.waitOnNoPending(FileWriter.java:359)\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.close(FileWriter.java:271)\r\n        at org.apache.celeborn.service.deploy.worker.storage.ReducePartitionFileWriter.close(ReducePartitionFileWriter.java:93)\r\n        at org.apache.celeborn.service.deploy.worker.Controller$$anon$1.run(Controller.scala:306)\r\n        at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1640)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n24/11/27 01:50:49,825 ERROR [worker-files-committer-34909] Controller: Commit file for application_1727161546827_15995292_1-205 1090-0 failed.\r\njava.io.IOException: Wait pending actions timeout.\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.waitOnNoPending(FileWriter.java:359)\r\n        at org.apache.celeborn.service.deploy.worker.storage.FileWriter.close(FileWriter.java:271)\r\n        at org.apache.celeborn.service.deploy.worker.storage.ReducePartitionFileWriter.close(ReducePartitionFileWriter.java:93)\r\n        at org.apache.celeborn.service.deploy.worker.Controller$$anon$1.run(Controller.scala:306)\r\n        at java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1640)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n\r\n24/11/27 03:05:19,880 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout.\r\n24/11/27 03:05:19,881 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout.\r\n24/11/27 03:05:19,881 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout.\r\n24/11/27 03:05:19,881 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout.\r\n24/11/27 03:05:19,881 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout.\r\n24/11/27 03:05:19,881 WARN [worker-memory-manager-actor] StorageManager: Skip flushOnMemoryPressure because LocalFlusher@93798665-/mnt/ssd/0 has error: Wait pending actions timeout\r\n```\r\n\r\n![image](https://github.com/user-attachments/assets/8da8a3ce-23c5-4dc2-8d3c-e762b6735a66)\r\n

@RexXiong  @AngersZhuuuu  PTAL.

@leixm Can you provide some memory metrics with this PR after a worker is OOM?   

```\r\n24/11/27 01:43:22,290 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 2.2 GiB/10.0 GiB, disk buffer size: 651.4 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:43:32,290 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 2.5 GiB/10.0 GiB, disk buffer size: 287.9 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:43:42,290 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 2.3 GiB/10.0 GiB, disk buffer size: 299.9 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:43:52,290 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 3.7 GiB/10.0 GiB, disk buffer size: 272.4 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:02,453 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 3.2 GiB/10.0 GiB, disk buffer size: 284.2 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:13,184 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 5.5 GiB/10.0 GiB, disk buffer size: 1998.8 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:23,185 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 4.8 GiB/10.0 GiB, disk buffer size: 1269.2 MiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:33,418 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 10.0 GiB/10.0 GiB, disk buffer size: 6.8 GiB, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:44,008 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 9.2 GiB/10.0 GiB, disk buffer size: 0.0 B, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:44:54,008 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 9.2 GiB/10.0 GiB, disk buffer size: 0.0 B, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n24/11/27 01:45:04,008 INFO [worker-memory-manager-reporter] MemoryManager: Direct memory usage: 9.2 GiB/10.0 GiB, disk buffer size: 0.0 B, sort memory size: 0.0 B, read buffer size: 0.0 B\r\n```

It seems that the diskBufferCount has decreased, but the total off-heap memory still cannot be released.

The catch Exception here will cause fileWriter.decrementPendingWrites() to not be called, but I am not sure whether it will indirectly cause the off-heap memory to not be released. I will investigate further.

The off-heap memory is not released if the disk buffer counter is decreased. This PR failed to complete its purpose. There is more to investigate to find out what happened before merging into main.

There are three problems in total\r\n1. PartitionDataWriter#write flushBuffer.addComponent(true, data) After OOM occurs, data is not released.\r\n2. After OOM occurs in PushDataHandler#writeLocalData fileWriter.write(body), fileWriter.decrementPendingWrites() is not called, which will cause some fileWriters to wait for a period of time when call close().\r\n3. For the failed shuffle, commit was not called and the PartitionDataWriter was not closed, so there was no returnBuffer. The PartitionDataWriter should be closed when the shuffle expires.

I did some tests. 2 of the nodes did not have this PR, and the memory of these two nodes could not be released. 1 node had this PR, and the memory could be released. It was obviously much lower than the previous 2 nodes.\r\n![image](https://github.com/user-attachments/assets/3fe846ec-6ee8-432a-be7a-a7efb7c102d0)\r\n

@FMX  @turboFei  @RexXiong  Can you help review again?

@leixm would you mind updating the PR description to summarize the conclusion?

> @leixm would you mind updating the PR description to summarize the conclusion?\r\n\r\nDone,

ping  @FMX 

Thanks merge to main(v0.6.0) and branch-0.5(v0.5.3)

which branches does this patch target?

and this should introduce "any user-facing change"

> which branches does this patch target?\r\n\r\nPbPackedPartitionLocations is a feature introduced in 0.5. I am not sure whether it is necessary to ensure compatibility between 0.4 client and 0.6 worker. If not, I think it is better to target 0.5 and remove the compatibility code in main(0.6).\r\n\r\n

> and this should introduce "any user-facing change"\r\n\r\nThanks, done.

previously, we kept the compatibility between the adjacent feature versions, to simplify the rolling upgrading. that means, we should ensure that 0.4 client supports 0.3 to 0.5 server, and 0.5 client supports 0.4 to 0.6 server

Merged into main(v0.6.0), branch-0.5(v0.5.3).

Merged to main(v0.6.0).

@FMX Could you kindly help review this PR? Thanks a lot.\r\nBesides the exceptions and checking logic, the UT framework is supported now, so the uts are added.\r\n\r\nAlso note that the prebuild dev image is updated to holylow/celeborn-cpp-dev:0.2 to add gtest module dependency.\r\n\r\nAny suggestion is welcome.

@HolyLow I found out that I can run the UTs successfully.\r\n\r\nIf I run the UTs in Clion, I got following error.\r\n```\r\n1: Test command: /tmp/cpp/cmake-build-debug/celeborn/utils/tests/celeborn_utils_test\r\n1: Working Directory: /tmp/cpp/cmake-build-debug/celeborn/utils/tests\r\n1: Test timeout computed to be: 1500\r\nException: Illegal\r\n```\r\n\r\nIf I run the UTs in Docker container, I got following errors.\r\n```\r\nroot@82f7ea7a535c:/celeborn/cpp/build# ctest\r\nTest project /celeborn/cpp/build\r\n    Start 1: celeborn_utils_test\r\n1/1 Test #1: celeborn_utils_test ..............***Exception: Illegal  0.02 sec\r\n0% tests passed, 1 tests failed out of 1\r\n\r\n\r\nTotal Test time (real) =   0.04 sec\r\n\r\nThe following tests FAILED:\r\n\t  1 - celeborn_utils_test (ILLEGAL)\r\nErrors while running CTest\r\nOutput from these tests are in: /celeborn/cpp/build/Testing/Temporary/LastTest.log\r\nUse "--rerun-failed --output-on-failure" to re-run the failed cases verbosely.\r\nroot@82f7ea7a535c:/celeborn/cpp/build# cat /celeborn/cpp/build/Testing/Temporary/LastTest.log\r\nStart testing: Dec 04 02:55 UTC\r\n----------------------------------------------------------\r\n1/1 Testing: celeborn_utils_test\r\n1/1 Test: celeborn_utils_test\r\nCommand: "/celeborn/cpp/build/celeborn/utils/tests/celeborn_utils_test"\r\nDirectory: /celeborn/cpp/build/celeborn/utils/tests\r\n"celeborn_utils_test" start time: Dec 04 02:55 UTC\r\nOutput:\r\n----------------------------------------------------------\r\n<end of output>\r\nTest time =   0.02 sec\r\n----------------------------------------------------------\r\nTest Failed.\r\n"celeborn_utils_test" end time: Dec 04 02:55 UTC\r\n"celeborn_utils_test" time elapsed: 00:00:00\r\n----------------------------------------------------------\r\n\r\nEnd testing: Dec 04 02:55 UTC\r\n```

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2964?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `47.50000%` with `21 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.89%. Comparing base [(`259dfcd`)](https://app.codecov.io/gh/apache/celeborn/commit/259dfcd988408e64f83e539b6469b8f87ca4a9f7?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`25224a0`)](https://app.codecov.io/gh/apache/celeborn/commit/25224a0804bf43df60abf82c2a5a28cb23f7cbe2?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 110 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2964?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/celeborn/pull/2964?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmetrics%2Fsource%2FAbstractSource.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | 36.37% | [19 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2964?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2964      +/-   ##\n==========================================\n- Coverage   32.99%   32.89%   -0.09%     \n==========================================\n  Files         330      331       +1     \n  Lines       19683    19837     +154     \n  Branches     1766     1781      +15     \n==========================================\n+ Hits         6492     6524      +32     \n- Misses      12830    12951     +121     \n- Partials      361      362       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2964?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@FMX  plz help review. Thanks.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2962?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.89%. Comparing base [(`a2d3972`)](https://app.codecov.io/gh/apache/celeborn/commit/a2d39723180468fb9bdd7c36c0344c982292b302?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`82f1a57`)](https://app.codecov.io/gh/apache/celeborn/commit/82f1a57be82b24d3b3cedbf161d9dcc7241e2359?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 47 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2962      +/-   ##\n==========================================\n+ Coverage   32.53%   32.89%   +0.37%     \n==========================================\n  Files         334      331       -3     \n  Lines       19946    19800     -146     \n  Branches     1798     1780      -18     \n==========================================\n+ Hits         6487     6512      +25     \n+ Misses      13098    12928     -170     \n+ Partials      361      360       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2962?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Discuss: One thing to consider is if we want to memoize toUniqueId in WorkerInfo.\r\n\r\nIt is a good idea.\r\n\r\nI think we can memoize the workerUniqueId, \r\n1.  the workerUniqueId is used to find workerInfo in master end: https://github.com/apache/celeborn/pull/2870\r\n2. the workerUniqueId is used to find workerInfo in client end in this PR.

Merge to main(v0.6.0)

cc @SteNicholas 

Merged to main(v0.6.0) and branch-0.5(v0.5.3).

You can add a new PR to fix all similar code snippets. There are still some more `exists` codes. \r\nFor example, there are similar codes in `ReducePartitionCommitHandler`.

> You can add a new PR to fix all similar code snippets. There are still some more `exists` codes. For example, there are similar codes in `ReducePartitionCommitHandler`.\r\n\r\nOk, thx

> Thanks! I think this code fragment could be polished too . https://github.com/apache/celeborn/blob/main/worker/src/main/scala/org/apache/celeborn/service/deploy/worker/Controller.scala#L455-L466\r\n\r\nThanks for the suggestion, will address it in CELEBORN-1753 for `exists` and `find`

Thanks, merge to main(V0.6.0) and branch-0.5(v0.5.3) and branch-0.4(v0.4.3)

@FMX Could you help review this PR? Thanks a lot.\r\nNote that the exception utils are still not complete so still no UT is available for now.\r\nThe complete exception utils and related uts would be added in the next PR.\r\nAny suggestion is welcome.

How about using threadLocal? 

> How about using threadLocal?\r\n\r\nTo store the contents of the hashmap or else ?\r\nThese hashMaps have just been moved together from under the code, not created.

> > How about using threadLocal?\r\n> \r\n> To store the contents of the hashmap or else ? These hashMaps have just been moved together from under the code, not created.\r\n\r\nMake the `innerMetrics` be ThreadLocal.

> > > How about using threadLocal?\r\n> > \r\n> > \r\n> > To store the contents of the hashmap or else ? These hashMaps have just been moved together from under the code, not created.\r\n> \r\n> Make the `innerMetrics` be ThreadLocal.\r\n\r\n`innerMetrics` appears to only be used to limit capacity in the code and I think it can be removed directly. The original code retrieves data from the hashmap and puts it into `innerMetrics`, which affects the intended order of the queue.

With threadLocal, just need little code change.\r\n\r\nhttps://github.com/turboFei/incubator-celeborn/commit/a2089312a1be268dd01b2545f0704ee73222b06d

> With threadLocal, just need little code change.\r\n> \r\n> [turboFei@7384ca6](https://github.com/turboFei/incubator-celeborn/commit/7384ca6304b99bc4bc197811e7b1cb8f828d5aa5)\r\n\r\nLooks good. It can replace the lock. And change the `innerMetrics.remove()` to `return` can avoids ineffective repeated queue updates when capacity is exceeded.  Ordering can also be added to this part of the code.\r\nDoes `innerMetrics` need to be preserved？\r\ncc @FMX @RexXiong 

Do we need to global sort the metrics?\r\n\r\nSeems the issue mentioned in the ticket is just caused by lock?

> Do we need to global sort the metrics?\r\n> \r\n> Seems the issue mentioned in the ticket is just caused by lock?\r\n\r\nThere are a significant number of application metrics, and I want to minimize them as they approach capacity. \r\n\r\nThis issue is unrelated to the current Jira task, so I removed the sorting code and will create another pull request to address it without sorting.

@zaynt4606 Thank you for your code contribution. will there be any code changes？ Can I cherry pick this submission to my company now?

> @zaynt4606 Thank you for your code contribution. will there be any code changes？ Can I cherry pick this submission to my company now?\r\n\r\nThe code will change in [followUp](https://github.com/apache/celeborn/pull/2964) . To solve the jira problem you can cherry pick this pr (dont need to cherry pick the followUp).\r\n

@zaynt4606 Thank you very much, your response and code bug fixes are so fast, thumbs up to you 👍

@zaynt4606 After I cherry-pick the code to our company, do I just need to replace the client of the worker node and restart it to solve the problem? Do I need to replace the client of the master node and restart it?

> LGTM, Could you add ut to check whether the capacity limit is effective?\r\n\r\nMore ut tests are in the  [followup](https://github.com/apache/celeborn/pull/2964) 

Ok, merge to main(v0.6.0)

If no more comments, I will merge it to go ahead(the downstream development depends on this feature), thanks.  

thanks, merged to 0.6.0

Merged to main(v0.6.0).

can we see the worker tags with RESTful API `/api/v1/workers` both in master and worker end?

> can we see the worker tags with RESTful API `/api/v1/workers` both in master and worker end?\r\n\r\n@turboFei Not yet, i am working it. Workers tags will be available on Master API only.

cc: @SteNicholas @FMX wdyt?

Merge to main(v0.6.0)

@FMX Could you kindly review this PR? Thanks a lot.

Can you add some unit tests for this PR?

@FMX It is hard to add uts to StackTrace util code along, as it is the building block for Exception utils in later commits.\n We separate the util codes to avoid large commits though this brings test issues.\n\nWe could add uts when the exception utils are ready, what do you think?

> @FMX It is hard to add uts to StackTrace util code along, as it is the building block for Exception utils in later commits. We separate the util codes to avoid large commits though this brings test issues.\r\n> \r\n> We could add uts when the exception utils are ready, what do you think?\r\n\r\nThat sounds great to me.

Merged to main(v0.6.0).

@turboFei, this interface should only remove from worker side. The master side does not support application dimension resource consumption.

> @turboFei, this interface should only remove from worker side. The master side does not support application dimension resource consumption.\r\n\r\nBut currently, the result of master end seems meaningless. \r\n\r\n\r\n

Merged to main(v0.6.0).

Due to the application dimension resource consumption, this feature should be included in the deprecated features.  Maybe you can remove the codes for application top disk usage.\r\ncc @RexXiong 

> Maybe you can remove the codes for application top disk usage.\r\n\r\nRemove the code both in master and worker end? @FMX 

Yes, it should be removed. Thanks.\r\n\r\n> 2024年11月26日 11:29，Fei Wang ***@***.***> 写道：\r\n> \r\n> \r\n> Maybe you can remove the codes for application top disk usage.\r\n> \r\n> Remove the code both in master and worker end? @FMX <https://github.com/FMX>\r\n> —\r\n> Reply to this email directly, view it on GitHub <https://github.com/apache/celeborn/pull/2947#issuecomment-2499577290>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AA7VNUP23BIXXEF7ENWCYSD2CPTLNAVCNFSM6AAAAABSPHPDJWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIOJZGU3TOMRZGA>.\r\n> You are receiving this because you were mentioned.\r\n> \r\n\r\n

gentle ping @SteNicholas @FMX 

Roger that. Will review it tonight.\r\n\r\n> 2024年11月26日 15:07，Fei Wang ***@***.***> 写道：\r\n> \r\n> \r\n> gentle ping @SteNicholas <https://github.com/SteNicholas> @FMX <https://github.com/FMX>\r\n> —\r\n> Reply to this email directly, view it on GitHub <https://github.com/apache/celeborn/pull/2946#issuecomment-2499822879>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AA7VNUPUIAGYNZB7KGDFAN32CQM37AVCNFSM6AAAAABSPCD3XSVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIOJZHAZDEOBXHE>.\r\n> You are receiving this because you were mentioned.\r\n> \r\n\r\n

Will address the applicationId label metrics in another pr.\r\n\r\n<img width="1912" alt="image" src="https://github.com/user-attachments/assets/f6a73f27-8a61-4508-bf9d-d76ed6159409">\r\n\r\n<img width="1915" alt="image" src="https://github.com/user-attachments/assets/b1ebc270-d057-47d7-9883-7518fbe681e3">\r\n\r\n

Raised https://github.com/apache/celeborn/pull/2954 to fix the incorrect app metrics.

it should be resolved by https://github.com/apache/celeborn/pull/2954, closing this one.

@FMX  plz help review

Would you like some help creating a new issue to track this PR?

Look like there are dependency check failures, plz fix them.

@CodingCat, please fix the failed test case `RpcEnvSuite`.

Was this bug introduced by https://github.com/apache/celeborn/pull/2366?

> Was this bug introduced by https://github.com/apache/celeborn/pull/2366?\n\nyes

@FMX Could you kindly help review this PR? Thanks a lot.

@FMX Thanks for your comment , and a clang-format definition file is added. I try to avoid adding too many codes to a single PR, otherwise the commit would be too huge to review.\r\nAny suggestion is welcome.

Looks like there is a license issue here. Add `cpp/cmake/FindSodium.cmake`  to the `.rat-excludes` file and add a line to describe that we have contained some works of CC0 license in the LICENSE file.\r\n\r\nYou can refer this article.\r\nhttps://www.apache.org/legal/resolved.html#handling-public-domain-licensed-works

@FMX I updated the mentioned files as what you instructed, but I am still not sure if I made it right. Let me know if there are more reqiurements, thanks a lot.

> License\r\n\r\nYou can refer to the CI checks, you can see that the license check is passed. 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2938?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.55%. Comparing base [(`aa62549`)](https://app.codecov.io/gh/apache/celeborn/commit/aa625496ee6d760108532ee42b2b9a618f9352ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`3ca3729`)](https://app.codecov.io/gh/apache/celeborn/commit/3ca3729c38436d8387c41f627f4c83a7086dcd02?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 25 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2938      +/-   ##\n==========================================\n+ Coverage   32.07%   32.55%   +0.49%     \n==========================================\n  Files         331      333       +2     \n  Lines       19749    19912     +163     \n  Branches     1778     1796      +18     \n==========================================\n+ Hits         6332     6481     +149     \n+ Misses      13071    13070       -1     \n- Partials      346      361      +15     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2938?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n----\n🚨 Try these New Features:\n\n- [Flaky Tests Detection](https://docs.codecov.com/docs/test-result-ingestion-beta) - Detect and resolve failed and flaky tests\n- [JS Bundle Analysis](https://docs.codecov.com/docs/javascript-bundle-analysis) - Avoid shipping oversized bundles

Merged to main(v0.6.0) and branch-0.5(v0.5.2).

Merge to main(v0.6.0) and branch-0.5(v0.5.2)

Test failures seems unrelated.

cc @ErikFang 

looks good~

thanks, merging to main(v0.6.0).

Ping @reswqa, @codenohup, @RexXiong.

Ping @RexXiong, @FMX.

Thanks, merge to main(v0.6.0)

Seems need to fix many UT failures. @onebox-li \r\n```\r\n- celeborn spark integration test - hash-checkDiskFull *** FAILED ***\r\n  235 was not less than or equal to 0 (CelebornHashCheckDiskSuite.scala:83)\r\n```

cc @bowenliang123 

thanks, merging to branch-0.4(v0.4.3).

cc @SteNicholas @FMX 

thanks, merging to branch-0.4(v0.4.3).

After some tests, I believe this docker image can be used as valid toolchain.\r\n<img width="586" alt="截屏2024-11-22 19 54 11" src="https://github.com/user-attachments/assets/d2a51a83-2c4a-4caa-a271-d307123f9414">\r\n

cc @cxzl25 

IMO the NPE would occur if DataPusher is already terminated after calling waitOnTermination. Therefore, it would be better to check whether it has been terminated before calling waitOnTermination. WDYT

> LGTM. Merged to main(v0.6.0) and branch-0.5(v0.5.2).\r\n\r\n@SteNicholas Could you please backport this PR to branch-0.4?

backported to 0.4.3

cc: @FMX 

Thank you, @RexXiong and @FMX , for your review comments. I’ve made the necessary changes. Could you please take another look?

cc @cfmcgrady @ErikFang 

Thanks. Merged to main(v0.6.0).

Ping @turboFei.

Merged to main(v0.6.0).

Seems difficult to add UT, how do you think about? @FMX 

It is too difficult to add the UT.\r\n\r\nGentle ping @mridulm 

The UT is invalid, checking 

https://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSchedulerImpl.scala#L236-L244\r\n\r\n<img width="867" alt="image" src="https://github.com/user-attachments/assets/f93bd14f-0f34-4c81-a8db-13be511405d9">\r\n\r\nFor local master, it would not start the speculationScheduler. 

https://github.com/apache/spark/blob/d5da49d56d7dec5f8a96c5252384d865f7efd4d9/core/src/main/scala/org/apache/spark/scheduler/TaskSetManager.scala#L322-L346\r\n\r\n<img width="1010" alt="image" src="https://github.com/user-attachments/assets/477729a4-2fc1-47e9-b128-522c6e2ceb48">\r\n\r\n\r\nand it is also not allowed to launch speculative task on the same host.\r\n\r\n@FMX \r\n\r\nI have to give up the UT for speculation ...\r\n\r\nAnd only add UT for SparkUtils.

This PR is ready as it is impossible to add UT for speculation, see details in the PR description. And I have added UT for the SparkUtils.\r\n\r\ncc @FMX 

gentle ping @FMX @RexXiong 

could you help have a review? I think it is ready. @FMX @RexXiong 

Could you help take a look? @FMX thank you

ping @AngersZhuuuu 

rebased the code.\r\n\r\ncc @FMX and @RexXiong could you help take a look?

rebased the code and refined the UT.\r\n\r\ncc @FMX and @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2921?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.67%. Comparing base [(`fde6365`)](https://app.codecov.io/gh/apache/celeborn/commit/fde6365f68ce8b589bcc639e96476ed618249257?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c35172c`)](https://app.codecov.io/gh/apache/celeborn/commit/c35172c8e55b97c410075c02d6ba13c4f9055466?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2921      +/-   ##\n==========================================\n- Coverage   32.68%   32.67%   -0.00%     \n==========================================\n  Files         336      336              \n  Lines       20032    20032              \n  Branches     1792     1792              \n==========================================\n- Hits         6546     6544       -2     \n- Misses      13123    13124       +1     \n- Partials      363      364       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2921?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.6.0)

Thanks @turboFei  for this work.\r\nWe encountered an occasional problem recently. When the speculation conditions were loose, a speculation task was waiting for `updateFileGroup` result. Unfortunately, another attempt succeeded and the task was Interrupted. Since the load file group failed, a fetch failure was reported to LifecycleManager. \r\nOther newly started tasks would get an error below when they tried `getShuffleId`.\r\n```\r\nunexpected! there is no finished map stage associated with appShuffleId xx\r\n```\r\nThis may cause the whole job to fail. I think this PR is very help to solve this situation.

LGTM

Merged to main(v0.6.0).

Hi @FMX， I force pushed this fix to branch-0.5, it should be fine?

ok, thanks for the reminder.

thanks, merged to main

cc @FMX @RexXiong 

Thanks. Merged to main(v0.6.0) and branch-0.5(v0.5.3).

Ping @reswqa, @RexXiong.

Ping @RexXiong, @FMX.

Merged to main(v0.6.0).

merge to main(v0.6.0)

Ping @RexXiong.

Ping @FMX, @RexXiong. PTAL.

```\r\n[info] org.apache.celeborn.tests.spark.PushDataTimeoutTest *** ABORTED ***\r\n[info]   java.lang.AssertionError: assertion failed\r\n[info]   at scala.Predef$.assert(Predef.scala:208)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7(MiniClusterFeature.scala:234)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7$adapted(MiniClusterFeature.scala:234)\r\n[info]   at scala.collection.mutable.HashMap.$anonfun$foreach$1(HashMap.scala:149)\r\n[info]   at scala.collection.mutable.HashTable.foreachEntry(HashTable.scala:237)\r\n[info]   at scala.collection.mutable.HashTable.foreachEntry$(HashTable.scala:230)\r\n[info]   at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:44)\r\n[info]   at scala.collection.mutable.HashMap.foreach(HashMap.scala:149)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpWorkers(MiniClusterFeature.scala:234)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpWorkers$(MiniClusterFeature.scala:181)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.setUpWorkers(PushDataTimeoutTest.scala:34)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpMiniCluster(MiniClusterFeature.scala:254)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpMiniCluster$(MiniClusterFeature.scala:250)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.setUpMiniCluster(PushDataTimeoutTest.scala:34)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setupMiniClusterWithRandomPorts(MiniClusterFeature.scala:77)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setupMiniClusterWithRandomPorts$(MiniClusterFeature.scala:49)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.setupMiniClusterWithRandomPorts(PushDataTimeoutTest.scala:34)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.beforeAll(PushDataTimeoutTest.scala:47)\r\n[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.run(PushDataTimeoutTest.scala:34)\r\n[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)\r\n[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)\r\n[info]   at sbt.ForkMain$Run.lambda$runTest$1(ForkMain.java:414)\r\n[info]   at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n[info]   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n[info]   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n[info]   at java.lang.Thread.run(Thread.java:750)\r\n```

```\r\n[info] org.apache.celeborn.tests.spark.SkewJoinSuite *** ABORTED ***\r\n[info]   java.lang.AssertionError: assertion failed\r\n[info]   at scala.Predef$.assert(Predef.scala:208)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7(MiniClusterFeature.scala:234)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7$adapted(MiniClusterFeature.scala:234)\r\n[info]   at scala.collection.mutable.HashMap.$anonfun$foreach$1(HashMap.scala:149)\r\n[info]   at scala.collection.mutable.HashTable.foreachEntry(HashTable.scala:237)\r\n[info]   at scala.collection.mutable.HashTable.foreachEntry$(HashTable.scala:230)\r\n[info]   at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:44)\r\n[info]   at scala.collection.mutable.HashMap.foreach(HashMap.scala:149)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpWorkers(MiniClusterFeature.scala:234)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpWorkers$(MiniClusterFeature.scala:181)\r\n[info]   at org.apache.celeborn.tests.spark.SkewJoinSuite.setUpWorkers(SkewJoinSuite.scala:32)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpMiniCluster(MiniClusterFeature.scala:254)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setUpMiniCluster$(MiniClusterFeature.scala:250)\r\n[info]   at org.apache.celeborn.tests.spark.SkewJoinSuite.setUpMiniCluster(SkewJoinSuite.scala:32)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setupMiniClusterWithRandomPorts(MiniClusterFeature.scala:77)\r\n[info]   at org.apache.celeborn.service.deploy.MiniClusterFeature.setupMiniClusterWithRandomPorts$(MiniClusterFeature.scala:49)\r\n[info]   at org.apache.celeborn.tests.spark.SkewJoinSuite.setupMiniClusterWithRandomPorts(SkewJoinSuite.scala:32)\r\n[info]   at org.apache.celeborn.tests.spark.SparkTestBase.beforeAll(SparkTestBase.scala:47)\r\n[info]   at org.apache.celeborn.tests.spark.SparkTestBase.beforeAll$(SparkTestBase.scala:45)\r\n[info]   at org.apache.celeborn.tests.spark.SkewJoinSuite.beforeAll(SkewJoinSuite.scala:32)\r\n[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n[info]   at org.apache.celeborn.tests.spark.SkewJoinSuite.run(SkewJoinSuite.scala:32)\r\n[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)\r\n[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)\r\n[info]   at sbt.ForkMain$Run.lambda$runTest$1(ForkMain.java:414)\r\n```

```\r\n24/11/12 20:24:33,875 ERROR [ScalaTest-main-running-DiscoverySuite] ReusedExchangeSuite: cannot start all workers after 60000 ms\r\njava.lang.AssertionError: assertion failed\r\n\tat scala.Predef$.assert(Predef.scala:208)\r\n\tat org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7(MiniClusterFeature.scala:246)\r\n\tat org.apache.celeborn.service.deploy.MiniClusterFeature.$anonfun$setUpWorkers$7$adapted(MiniClusterFeature.scala:246)\r\n\tat scala.collection.mutable.HashMap.$anonfun$foreach$1(HashMap.scala:149)\r\n\tat scala.collection.mutable.HashTable.foreachEntry(HashTable.scala:237)\r\n\tat scala.collection.mutable.HashTable.foreachEntry$(HashTable.scala:230)\r\n\tat scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:44)\r\n\tat scala.collection.mutable.HashMap.foreach(HashMap.scala:149)\r\n\tat org.apache.celeborn.service.deploy.MiniClusterFeature.setUpWorkers(MiniClusterFeature.scala:246)\r\n```

cc @FMX @RexXiong @SteNicholas It is to reduce the flaky test failures.

gentle ping @FMX @RexXiong @SteNicholas 

Seems the port conflicts issue happen with high frequency recently. \r\n\r\nHope this patch can help reduce it.

interesting，so many failures recently\r\n\r\n<img width="602" alt="image" src="https://github.com/user-attachments/assets/054e34c8-252f-48e8-a55a-dbc149d6c2cc">\r\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2906?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.52%. Comparing base [(`aa62549`)](https://app.codecov.io/gh/apache/celeborn/commit/aa625496ee6d760108532ee42b2b9a618f9352ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c92199e`)](https://app.codecov.io/gh/apache/celeborn/commit/c92199e710592987657f8dcc58e9a01b170af386?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 70 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2906      +/-   ##\n==========================================\n+ Coverage   32.07%   32.52%   +0.46%     \n==========================================\n  Files         331      334       +3     \n  Lines       19749    19940     +191     \n  Branches     1778     1799      +21     \n==========================================\n+ Hits         6332     6484     +152     \n- Misses      13071    13096      +25     \n- Partials      346      360      +14     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2906?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

There is only change for testing code. It should be fine.\r\nIf no more comments, I plan to merge it tomorrow.\r\n\r\ncc @RexXiong \r\n\r\n

thanks all, I will merge this PR.

thanks, merged to main/0.5.3/0.4.3

Ping @reswqa, @mridulm.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@turboFei, #2901 should also change the flink-1.16 module.\r\n\r\nPing @mridulm, @reswqa.

The invalid port issue happen frequently recently. \r\nI plan to merge it and then rebase https://github.com/apache/celeborn/pull/2906 on this, thanks all for the review.

the recent protobuf java versions introduced "runtime jar version" and "generated code version" check, it may affect the case: if we pull a thrid-party dependency that contains the generated protobuf code, we should be careful on bumping protobuf runtime jars version. For the Celeborn case, please also test Ratis gRPC mode when bumping protobuf versions.

For ratis:\r\n\r\nThe protobuf is shaded and the `shaded.protobuf.version` is 3.24.4 in ratis 3.1.1 and 3.1.2\r\nhttps://github.com/apache/ratis/blob/45a30d890451a44ec918fdee2732c5fff80ea17c/pom.xml#L216C1-L217C1\r\n\r\nWill test `celeborn.master.ha.ratis.raft.rpc.type=grpc`.\r\n\r\n

@pan3793 how about adding the UT with grpc mode?\r\n\r\nThe protobuf is shaded in ratis and the shaded.protobuf.version is 3.24.4 in ratis 3.1.1 and 3.1.2.

it should has no issue if ratis uses a shaded protobuf

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2897?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.12%. Comparing base [(`165e914`)](https://app.codecov.io/gh/apache/celeborn/commit/165e914b9b747164b240c8a68896f3b38e67434d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c887037`)](https://app.codecov.io/gh/apache/celeborn/commit/c887037ada76deb36b32050b44ac7e4659ad0cea?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 24 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2897      +/-   ##\n==========================================\n- Coverage   32.35%   32.12%   -0.22%     \n==========================================\n  Files         329      329              \n  Lines       19511    19677     +166     \n  Branches     1752     1774      +22     \n==========================================\n+ Hits         6311     6320       +9     \n- Misses      12855    13011     +156     \n- Partials      345      346       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2897?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @FMX, @mridulm.

@FMX, I have rebased the main branch. PTAL.

> do we have the contribution guide for modifying the grafana dashboard template? \r\n\r\nNo, currently it is a little difficult to add a new metrics.

Thanks, merged to main

Thank you @FMX \r\nIt works as expected, the stage-0 rerun.\r\n\r\n<img width="1725" alt="image" src="https://github.com/user-attachments/assets/7b46c23e-5231-471d-9409-4c45f788a0e0">\r\n

Merge to main(v0.6.0) and branch-0.5(v0.5.2)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2893?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.11%. Comparing base [(`165e914`)](https://app.codecov.io/gh/apache/celeborn/commit/165e914b9b747164b240c8a68896f3b38e67434d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`2cd91d2`)](https://app.codecov.io/gh/apache/celeborn/commit/2cd91d205dbcce8af5f42972596a76865ba5d609?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 21 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2893      +/-   ##\n==========================================\n- Coverage   32.35%   32.11%   -0.24%     \n==========================================\n  Files         329      329              \n  Lines       19511    19686     +175     \n  Branches     1752     1776      +24     \n==========================================\n+ Hits         6311     6320       +9     \n- Misses      12855    13020     +165     \n- Partials      345      346       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2893?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@turboFei, thanks for update. Merged to main(v0.6.0).

@turboFei, is there any tool that could verify the consistency between generated openapi-client code and rest api model?

> @turboFei, is there any tool that could verify the consistency between generated openapi-client code and rest api model?\r\n\r\nNot yet now, maybe we can followup it to diff the generated RESTful modules in GA.\r\n\r\nRaised https://issues.apache.org/jira/browse/CELEBORN-1699 to track\r\n

> consistency between generated openapi-client code\r\n\r\n\r\n\r\n> > @turboFei, is there any tool that could verify the consistency between generated openapi-client code and rest api model?\r\n> \r\n> Not yet now, maybe we can followup it to diff the generated RESTful modules in GA.\r\n> \r\n> Raised https://issues.apache.org/jira/browse/CELEBORN-1699 to track\r\n\r\nAddressed in https://github.com/apache/celeborn/pull/2893 

Will move the ThreadStack part into https://github.com/apache/celeborn/pull/2893\r\n\r\nDone.

rebased the code.

Ping @turboFei, @FMX, @RexXiong.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2886?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.35%. Comparing base [(`165e914`)](https://app.codecov.io/gh/apache/celeborn/commit/165e914b9b747164b240c8a68896f3b38e67434d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c372969`)](https://app.codecov.io/gh/apache/celeborn/commit/c3729695f58c795ddc8030293c03c8914a02f57e?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 13 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2886      +/-   ##\n==========================================\n+ Coverage   32.35%   32.35%   +0.01%     \n==========================================\n  Files         329      329              \n  Lines       19511    19538      +27     \n  Branches     1752     1759       +7     \n==========================================\n+ Hits         6311     6320       +9     \n- Misses      12855    12873      +18     \n  Partials      345      345              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2886?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This surely improved the potential concurrent issue of the storage fetch pool. But are there any known issues related to this point?

> This surely improved the potential concurrent issue of the storage fetch pool. But are there any known issues related to this point?\r\n\r\nThere may be duplicate thread pools created, pls describe this @reswqa see:\r\n![image](https://github.com/user-attachments/assets/d48e4c15-f151-4b8e-8429-c78b620418ee)\r\n

> > This surely improved the potential concurrent issue of the storage fetch pool. But are there any known issues related to this point?\r\n> \r\n> There may be duplicate thread pools created, pls describe this @reswqa see: ![image](https://private-user-images.githubusercontent.com/28799061/383589758-d48e4c15-f151-4b8e-8429-c78b620418ee.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzA5NDg0MjYsIm5iZiI6MTczMDk0ODEyNiwicGF0aCI6Ii8yODc5OTA2MS8zODM1ODk3NTgtZDQ4ZTRjMTUtZjE1MS00YjhlLTg0MjktYzc4YjYyMDQxOGVlLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMDclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTA3VDAyNTUyNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWQ0ODA0YTgzZTg3MDkwNmZhNjhhNzFjN2M3ZGE1NDEwYjVjNjA2MjhkMGQ4MjMwODI3NzVjZmY2NDgyNDNlNDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.ynpNgyjn1jUa8Vm7qNR9Axfv4kztSMD5lVgvL7ESlLw)\r\n\r\nThanks, updated the description.

CC @SteNicholas 

Merged to main(v0.6.0) and branch-0.5(v0.5.3).

Merge to main(v0.6.0)

@akpatnam25, why not directly use ratis shell of ratis? The REST API of ratis is same as the ratis shell.

> @akpatnam25, why not directly use ratis shell of ratis? The REST API of ratis is same as the ratis shell.\r\n\r\nTo use ratis shell, you need to be on the host itself, and also have access to the distribution to run it. I think in most production deployments, it is not convenient (and sometimes not even possible) to access the host and run it within the host. I think from operational point of view, it is better to use the REST API  via the CLI since it can be accessed from anywhere outside host. Let me know what you think :) @SteNicholas 

@akpatnam25, we would use ratis-shell in master node for our production pratice. Meanwhile, CLI does not depend on the REST API, otherwise why not directly invoke the REST API?

> @akpatnam25, we would use ratis-shell in master node for our production pratice. Meanwhile, CLI does not depend on the REST API, otherwise why not directly invoke the REST API?\r\n\r\n@SteNicholas  CLI does depend on REST Api. It calls the REST api. Not all users would have access to their production host, and would only have access to REST api (CLI). 

cc @FMX 

cc @turboFei 

> > @akpatnam25, we would use ratis-shell in master node for our production pratice. Meanwhile, CLI does not depend on the REST API, otherwise why not directly invoke the REST API?\r\n> \r\n> @SteNicholas CLI does depend on REST Api. It calls the REST api. Not all users would have access to their production host, and would only have access to REST api (CLI).\r\n\r\n@akpatnam25, how does the users choose ratis-shell or this CLI? Meanwhile, not all users would have access to REST API, because CLI needs users to provide the host and port via `--hostport`. If we support this CLI, we should deprecate ratis-shell, unless we can ensure that the behavior of the two is consistent. Otherwise, the user may get the different behaviour using both ratis-shell and ratis cli.\r\nBTW, is the current CLI positioning to have corresponding commands for all Rest APIs?

@SteNicholas  I think for the ratis API it makes sense to have cli support for them and we can deprecate the ratis-shell if that is ok with the community later on. We don’t need to support for all rest api’s but I think this one is especially important given the only other way to do it is to log onto a production host. We do not need cli support for every single rest api, just the main ones that help with operational management. Let me know :) thanks. \r\n

spoke more with @SteNicholas - given that ratis shell is the source of truth, we  can just keep it like that. We would not need CLI support for these. Closing out this PR. thanks for the feedback to everyone

cc @SteNicholas @turboFei @FMX @RexXiong 

> why\r\n\r\nDisplay the version of spark compiled by the client as in client-flink

From a user perspective, I would think that `abc-spark-3.4.3-xyz.jar` is only applicable to Spark 3.4.3.

Ping @mridulm, @reswqa, @cxzl25.

org.apache.spark.shuffle.celeborn.SortBasedShuffleWriter#close\r\n```\r\npusher.close(true);  // returnPushTaskQueue\r\n\r\nshuffleClient.pushMergedData(shuffleId, mapId, encodedAttemptId); // limitMaxInFlight Interrupted\r\n\r\n```\r\n\r\n\r\norg.apache.spark.shuffle.celeborn.SortBasedShuffleWriter#write\r\n```\r\n    boolean needCleanupPusher = true;\r\n    try {\r\n      doWrite(records);\r\n      close();  // returnPushTaskQueue  and throw exception\r\n      needCleanupPusher = false;\r\n    } finally {\r\n      if (needCleanupPusher) {\r\n        cleanupPusher(); // returnPushTaskQueue\r\n      }\r\n    }\r\n\r\n```\r\n\r\n

> org.apache.spark.shuffle.celeborn.SortBasedShuffleWriter#close\r\n> \r\n> ```\r\n> pusher.close(true);  // returnPushTaskQueue\r\n> \r\n> shuffleClient.pushMergedData(shuffleId, mapId, encodedAttemptId); // limitMaxInFlight Interrupted\r\n> ```\r\n> \r\n> org.apache.spark.shuffle.celeborn.SortBasedShuffleWriter#write\r\n> \r\n> ```\r\n>     boolean needCleanupPusher = true;\r\n>     try {\r\n>       doWrite(records);\r\n>       close();  // returnPushTaskQueue  and throw exception\r\n>       needCleanupPusher = false;\r\n>     } finally {\r\n>       if (needCleanupPusher) {\r\n>         cleanupPusher(); // returnPushTaskQueue\r\n>       }\r\n>     }\r\n> ```\r\n\r\nOk, I see, thanks. IMO it would be better to avoid call return twice instead use hashSet, therefore, how about change getIdleQueue to getAndResetIdleQueue, which resets IdleQueue to null at the same time as returning it to the BufferPool?

Thanks. merge to main(v0.6.0), and branch-0.5(v0.5.3), and branch-0.4(v0.4.3)

This PR is to fix the problem missing read a shuffle.\r\n\r\n```\r\nshuffle records written: 3518\r\nremote blocks read: 3517\r\n```\r\n\r\n\r\n![image](https://github.com/user-attachments/assets/422e0c74-8541-49c9-9a6c-189e95031d28)\r\n\r\n\r\nAdd some logs to debug\r\n```java\r\n    pushTaskQueues.add(pushTaskQueue);\r\n    logger.info("Return push task queue to pool, size: {}, addr: {}", pushTaskQueues.size(), System.identityHashCode(pushTaskQueue));\r\n```\r\n```\r\n24/11/05 17:14:56,707 [Executor task launch worker for task 88.1 in stage 132.0 (TID 50078)] INFO SendBufferPool: Return push task queue to pool, size: 3, addr: 40130966\r\n24/11/05 17:14:56,734 [dispatcher-Executor] INFO Executor: Executor is trying to kill task 88.1 in stage 132.0 (TID 50078), reason: another attempt succeeded\r\n24/11/05 17:14:56,735 [Executor task launch worker for task 88.1 in stage 132.0 (TID 50078)] INFO DataPusher: DataPusher idle queue is full. remainingCapacity:0, exceptionRef:null, pushThread:false\r\n24/11/05 17:14:56,735 [Executor task launch worker for task 88.1 in stage 132.0 (TID 50078)] INFO SendBufferPool: Return push task queue to pool, size: 3, addr: 40130966\r\n24/11/05 17:14:56,735 [Executor task launch worker for task 88.1 in stage 132.0 (TID 50078)] INFO Executor: Executor interrupted and killed task 88.1 in stage 132.0 (TID 50078), reason: another attempt succeeded\r\n```\r\n

@zaynt4606, you should also update the changes in `README.md`.

README changed too.

cc @RexXiong.

Merged to main(v0.6.0).

@turboFei Does this PR belong to something big? Maybe we should propose the solution before this PR.

> Does this PR belong to something big?\r\n\r\nHi @FMX , seems not big change, just add a new `version` filed in the WorkerInfo object.

> > Does this PR belong to something big?\r\n> \r\n> Hi @FMX , seems not big change, just add a new `version` filed in the WorkerInfo object.\r\n\r\nWhy are you want to add this version field?\r\nAdding this field only makes no sense here, unless you want to make Celeborn master support multiple version worker sub-clusters or you want to make Celeborn cluster to upgrade its components. 

> Why are you want to add this version field?\r\n\r\nI am rolling upgrade the celeborn workers, want to get the overview of celeborn workers.\r\n\r\nJust like namenode UI shows the datanode versions:\r\n<img width="1257" alt="image" src="https://github.com/user-attachments/assets/dda4a977-e1af-4d94-9d88-739e4deb3fd9">\r\n

>Adding this field only makes no sense here\r\n\r\nHow about returning the worker version information within Worker RESTful `/api/v1/workers`?

will open it in the future on demand

Ping @akpatnam25, @RexXiong, @FMX.

Thanks. merge to main(v0.6.0)

thanks 

thanks all for the review!

> why not directly use Counter?\r\n\r\nHi @RexXiong, FYI: https://github.com/apache/celeborn/pull/2866#discussion_r1828996937

> > why not directly use Counter?\r\n> \r\n> Hi @RexXiong, FYI: [#2866 (comment)](https://github.com/apache/celeborn/pull/2866#discussion_r1828996937)\r\n\r\nIMO, the speed of fallback is not very significant, because the fallback itself is a somewhat random occurrence. cc @FMX 

> because the fallback itself is a somewhat random occurrence\r\n\r\nHi @RexXiong , I am fine for this, will just change the metrics type and reserve the code for Meter metrics in case we need it in the future.

> > because the fallback itself is a somewhat random occurrence\r\n> \r\n> Hi @RexXiong , I am fine for this, will just change the metrics type and reserve the code for Meter metrics in case we need it in the future.\r\n\r\nOkay, dashboard.json need change too.

> Okay, dashboard.json need change too.\r\n\r\nThanks for the reminder\r\n\r\n

cc @FMX 

Thanks for this PR but the assumption is not solid. Every worker will report its disk usage metrics to the master node by the worker heartbeat.\r\nYou can not multiply the worker count because all workers will report these metrics.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Thanks @Z1Wu , we plan to remove the code for old top app usages.\r\nhttps://github.com/apache/celeborn/pull/2949\r\n\r\nI think we can close this PR now.

cc @FMX @SteNicholas 

@akpatnam25, please update `mkdocs.yml` to add navigation for CLI user guide.

@SteNicholas  updated

cc @cfmcgrady @cxzl25 

Thanks. Merged to main(v0.6.0).

Thanks, merging to main(v0.6.0)/branch-0.5(v0.5.3)/branch-0.4(v0.4.3).\r\n\r\n

> LGTM! Please update the config docs to reflect the same.\r\n\r\nupdated

@Z1Wu You need to update the documentation as well using \r\n```\r\nUPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite\r\n```\r\n\r\nAlso, maintainers need to enable the PR workflows for this PR. ping @SteNicholas @RexXiong @FMX PTAL

> @Z1Wu You need to update the documentation as well using\r\n> \r\n> ```\r\n> UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite\r\n> ```\r\n> \r\n> Also, maintainers need to enable the PR workflows for this PR. ping @SteNicholas @RexXiong @FMX PTAL\r\n\r\nupdated, thanks for your review. 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Related patch with https://github.com/apache/celeborn/pull/2827, cc @FMX 

Can be covered by #2827 

Merged to main(v0.6.0) and branch-0.5(v0.5.3).

cc @FMX @RexXiong 

Thanks, merge to main(v0.6.0)

Merged into main(v0.6.0).

Could you please review this? ping @waitinfuture @RexXiong @FMX @SteNicholas 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

reopen this PR, cc @jiang13021 

Merge to main(V0.6.0)

cc: @SteNicholas @leixm PTAL

bumping this up^ @FMX @RexXiong 

Can we please merge this, this is blocking another PR - https://github.com/apache/celeborn/pull/2844

> Can we please merge this, this is blocking another PR - #2844\r\n\r\nSure, merge to main(v0.6.0) and branch-0.5(v0.5.3)

Thanks @RexXiong.

Hi @mridulm, please take a look at this PR. Merging the same to branch-0.5

Thanks, merge to branch-0.5(v0.5.2)

cc: @FMX PTAL

@FMX ping on this.

ping @FMX @zwangsheng @mridulm for review

> LGTM except for a nit. There will likely be more PRs to finish this feature. Thanks.\r\n\r\n@FMX Addressed. Yes, there will be couple more PRs.

Thanks. Merged into main(v0.6.0).

Can you explain how this NPE exception happens?\r\n\r\n

> Can you explain how this NPE exception happens?\r\n\r\nWhen a worker object is initialized, pushServer and fetchServer will be created first and provide services. When receiving a request, the server determines whether the handler is ready by checking registered. In the original implementation, although registered is assigned a value, the handler may still not be ready. The code after registered is assigned a value may not have been executed completely. Generally, the more EventLoopGroup threads there are, the greater the probability of this occurrence. In this PR, we place the assignment of registered at the end, which can avoid this situation.

> > Can you explain how this NPE exception happens?\r\n> \r\n> When a worker object is initialized, pushServer and fetchServer will be created first and provide services. When receiving a request, the server determines whether the handler is ready by checking registered. In the original implementation, although registered is assigned a value, the handler may still not be ready. The code after registered is assigned a value may not have been executed completely. Generally, the more EventLoopGroup threads there are, the greater the probability of this occurrence. In this PR, we place the assignment of registered at the end, which can avoid this situation.\r\n\r\nI see, Thanks!

thanks, merging to main(v0.6.0)/branch-0.5(v0.5.3)/branch-0.4(v0.4.3).

> Your changes look good to me. How about replacing these sets with unique IDs and extracting a worker info object pool?\r\n\r\n\r\nChecking

Checked all the operation for these collections, for add/remove/contains/get, all of them use workerId instead of WorkerInfo.\r\n\r\n<img width="792" alt="image" src="https://github.com/user-attachments/assets/50f91e1a-9ccc-4456-aaa7-02a746a9f949">\r\n<img width="752" alt="image" src="https://github.com/user-attachments/assets/cda68d6b-b1d1-4e9f-9fd3-151bac00d6b7">\r\n<img width="965" alt="image" src="https://github.com/user-attachments/assets/c73d0935-effa-4f10-8cf8-8ce1dd2254c9">\r\n<img width="874" alt="image" src="https://github.com/user-attachments/assets/b0bb4b7a-10a0-4dfd-bc7b-bc633163d1f2">\r\n<img width="848" alt="image" src="https://github.com/user-attachments/assets/2d59ef3f-843a-4fb5-8f6a-892f33afa747">\r\n<img width="834" alt="image" src="https://github.com/user-attachments/assets/1253cdc4-d8e3-4a9a-b7e2-409deeb1f02f">\r\n<img width="901" alt="image" src="https://github.com/user-attachments/assets/de9c9468-7a00-4109-9d12-53d4dad9b8d9">\r\n\r\n

rebased the code

Seems more and more operations rely on the available workers now, https://github.com/apache/celeborn/pull/2835\r\nIt is necessary to cache it to accelerate the operations for large celeborn cluster.\r\nWill cache the available workers based on this PR.\r\n\r\ngentle ping @FMX @RexXiong 

It should be absolute finished.\r\n\r\ngentle ping @FMX @RexXiong 

and we plan to setup a hybrid deployment Celeborn cluster with more than 6k nodes next month. 😅 This PR should be necessary.

thanks, closing this pr

Thanks. merge to main(v0.6.0) and branch-0.5(v0.5.2)

cc: @leixm @SteNicholas PTAL

bumping this up^ @SteNicholas @leixm 

LGTM, merge to main(v0.6.0)

@pan3793 , can you please review this

Thanks for contribution. Merged to main(v0.6.0) and branch-0.5(0.5.2).

Thanks, but also should modify spark-2 @s0nskar 

Thanks @zaynt4606 @RexXiong for the review. Raised the followup PR for spark 2 - https://github.com/apache/celeborn/pull/2837

Merge to main(v0.6.0) and branch-0.5(v0.5.2)

Thanks for this PR. Are there any test results?

> which is used to move a raft node to a new node.\r\n\r\nwill self review the logical again, we may need to allow to replace the existing peer.

Have update the logical to allow to replace the existing peers.\r\ngentle ping @SteNicholas again

<img width="1471" alt="image" src="https://github.com/user-attachments/assets/4bf090ba-c6f4-4f49-aa57-8dd2c897ff30">\r\n<img width="871" alt="image" src="https://github.com/user-attachments/assets/9959072c-5e96-48f5-911e-546c05a0c443">\r\n\r\ncc @RexXiong \r\n

Thanks, merge to main(v0.6.0)

I think we can cache available workers(we can manually update the cache when occur exclude/shutdown..), the current process of computing the list of available workers can be resource-intensive, especially in large clusters.

> I think we can cache available workers(we can manually update the cache when occur exclude/shutdown..), the current process of computing the list of available workers can be resource-intensive, especially in large clusters.\r\n\r\nBefore this, how about using map instead set for workers?\r\nhttps://github.com/apache/celeborn/pull/2839\r\ncc @RexXiong \r\n

This PR is ready. cc @FMX @RexXiong @zaynt4606 

will rebase the code

Hi @FMX and @RexXiong  by any chance to help review this PR, thanks very much

also cc @pan3793 to take a look

Merge to main(v0.6.0)

thanks all for the review!

still getting a JIRA for this. Meanwhile, do you mind taking a look @CodingCat @mridulm @waitinfuture @otterc, thank you! 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2826?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 32.46%. Comparing base [(`9b83587`)](https://app.codecov.io/gh/apache/celeborn/commit/9b83587dd58f7d905f86730498d275e350c2b0b3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e03235e`)](https://app.codecov.io/gh/apache/celeborn/commit/e03235e7982832e51d5dd6767db92cb3dfa57623?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 55 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2826      +/-   ##\n==========================================\n- Coverage   33.13%   32.46%   -0.66%     \n==========================================\n  Files         314      328      +14     \n  Lines       18435    19305     +870     \n  Branches     1691     1744      +53     \n==========================================\n+ Hits         6106     6265     +159     \n- Misses      11988    12699     +711     \n  Partials      341      341              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2826?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks for working on this @YutingWang98 ! This is a nice fix.

If we are taking that path, `MasterSecretRegistryImpl` need not extend `SecretRegistryImpl`

Hi @RexXiong @mridulm refactored the code to make it only use AbstractMetaManager to maintain the secrets. Also, think the metadataHandler should not be null in any case, thus removed the null check. Please take a look the change, will redo some testing on our end as well. Thanks!

Merged to master, can you please create a backport for 0.5 ? It ran into conflicts.\r\nThanks for working on this @YutingWang98 !\r\nThanks for the review @RexXiong, @waitinfuture, @CodingCat :)

Ping @akpatnam25.

ping @FMX 

How about adding the following properties?\r\n```\r\nBuild-Jdk-Spec: {JDK Version}\r\nBuild-Revision: {Git Hash}\r\nBuild-Branch: {Git Branch}\r\nBuild-Time: {ISO8601 Format}\r\n```

> How about adding the following properties?\r\n> \r\n> ```\r\n> Build-Jdk-Spec: {JDK Version}\r\n> Build-Revision: {Git Hash}\r\n> Build-Branch: {Git Branch}\r\n> Build-Time: {ISO8601 Format}\r\n> ```\r\n\r\naddressed.

@SteNicholas Thank you for your suggestions, i have modified the PR according to your comments, PTAL.\r\nAnd there may a unstable test case, could you rerun the ci?

Thanks. merge to main(v0.6.0)

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

I will fix above problems later.\r\n\r\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Can you help review? @RexXiong 

Ping @pan3793. Thanks for your review. Comments are addressed.

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.2)

![flakytest](https://github.com/user-attachments/assets/ecc6d1f8-e16b-451e-960e-f46ca134f8e7)\r\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Will update this PR next week.

Spark-4.0 profile can be compiled in JDK 17+ environment only.

I have already tested the implementation of Spark 4.0 integration in internal environment of Spark 4.0 and worked well for Spark 4.0.\r\n<img width="1437" alt="image" src="https://github.com/user-attachments/assets/fa45f648-701f-4173-9edf-1ef7ff8e9f55">\r\n<img width="1439" alt="image" src="https://github.com/user-attachments/assets/80945a85-d407-466b-94f1-c8e5e5a5f2b0">\r\n<img width="1225" alt="image" src="https://github.com/user-attachments/assets/c87ecbbf-f8e5-42f5-98a0-43c4869f0e21">\r\n<img width="1225" alt="image" src="https://github.com/user-attachments/assets/3fd3b6b1-2233-48db-88c5-cde38b3eebe8">\r\n

> QQ: Why are we moving spark-3 to spark-3-4 ? It is possible that spark-4 impl ends up evolving nontrivially in time, and in a manner which conflicts with spark-3.\r\n> \r\n> Do we want to simply keep spark-3 (which eventually goes away when support for spark-3.5 is dropped), and start with a new spark-4 ?\r\n> \r\n> I understand the duplication aspect could be nontrivial - wondering if there is a middle ground for 3.5 vs 4, which minimizes this.\r\n> \r\n> This would also minimize impact on existing spark-3 users (from dep pov)\r\n\r\nThe main reason to add a module to share within spark 3.5 and spark 4 is because the shuffle APIs are stable. The unstable APIs are in the columnar shuffle module which is separated from the module of spark 3.5.

Ping @FMX, @RexXiong.

Could you raise a jira ticket for this?

> Could you raise a jira ticket for this?\r\n\r\n@RexXiong Okay, I have created a [jira](https://issues.apache.org/jira/projects/CELEBORN/issues/CELEBORN-1652?filter=allopenissues) and renamed the commit.

Thanks. merged to main(v0.6.0) and branch-0.5(v0.5.2) and branch-0.4(v0.4.3)\r\n\r\n

Thanks, merge to main(v0.6.0)

Circling back to this - is this a case where multiple application attempts were involved ? (in which case, using appId + attemptId is the right approach) - or when different application;s application id actually collided?\r\n\r\nGiven spark (and MR ?) use application id + attempt id for a few things already (like event files), I am trying to understand why UUID was necessary.

Ping @FMX, @RexXiong.

it is Awsome @SteNicholas 

Thanks. merged to main(v0.6.0) and branch-0.5(v0.5.2) and branch-0.4(v0.4.3)

Thanks. merge to main(V0.6.0)

Ping @FMX, @RexXiong.

@AngersZhuuuu  @RexXiong  Can you help review?

cc @RexXiong  PTAL.

cc @RexXiong  Done, thanks for your review.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2801?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `35.29412%` with `11 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.27%. Comparing base [(`464a7c7`)](https://app.codecov.io/gh/apache/celeborn/commit/464a7c71a932e8c85a14afc50182bb7f38c084e8?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c6618a7`)](https://app.codecov.io/gh/apache/celeborn/commit/c6618a7672fa439da521e5417156972374dca099?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 11 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2801?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2801?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2801?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2801?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2801?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2801      +/-   ##\n==========================================\n- Coverage   32.37%   32.27%   -0.09%     \n==========================================\n  Files         328      329       +1     \n  Lines       19387    19483      +96     \n  Branches     1747     1749       +2     \n==========================================\n+ Hits         6275     6287      +12     \n- Misses      12769    12853      +84     \n  Partials      343      343              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2801?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Retest this please

Got it, thanks for the explanation @FMX @SteNicholas 

Flaky test.

@RexXiong  @AngersZhuuuu  Can you help review?

Ping @FMX, @waitinfuture.

cc @RexXiong\r\n\r\n\r\n

Ping @akpatnam25, @FMX, @mridulm.

@GH-Gloway Thanks for this PR. Have this PR been verified on the cluster environment?

After some offline discussion, this PR was tested as expected. This PR is merged.

@SteNicholas Thank you for your careful review. I have made modifications in this pull request based on your comments. PTAL.

Thanks, merge to main(v0.6.0)

all comments have been addressed

```\r\n24/11/12 19:43:05,899 INFO [ScalaTest-run-running-CelebornFetchFailureSuite] RpcMetricsTracker: RPC statistics for LifecycleManagerEndpoint\r\ncurrent queue size = 1\r\nmax queue length = 4\r\nhistogram for LifecycleManagerEndpoint RPC metrics: LifecycleManagerEndpoint_QueueTime\r\ncount: 24\r\nmin: 19792\r\nmean: 147154.58333333334\r\np50: 135312.5\r\np75: 181541.5\r\np95: 334562.75\r\np99: 338792.0\r\nmax: 338792\r\nhistogram for LifecycleManagerEndpoint RPC metrics: PbRegisterShuffle\r\ncount: 3\r\nmin: 149326083\r\nmean: 2.6625618E8\r\np50: 1.64685791E8\r\np75: 4.84756666E8\r\np95: 4.84756666E8\r\np99: 4.84756666E8\r\nmax: 484756666\r\nhistogram for LifecycleManagerEndpoint RPC metrics: LifecycleManagerEndpoint_ProcessTime\r\ncount: 24\r\nmin: 139041\r\nmean: 5.2411515583333336E7\r\np50: 7733084.0\r\np75: 5.992785425E7\r\np95: 4.0866102025E8\r\np99: 4.84756666E8\r\nmax: 484756666\r\nhistogram for LifecycleManagerEndpoint RPC metrics: class org.apache.celeborn.common.protocol.message.ControlMessages$MapperEnd\r\ncount: 6\r\nmin: 249000\r\nmean: 3067833.6666666665\r\np50: 1171312.5\r\np75: 7690146.5\r\np95: 7818959.0\r\np99: 7818959.0\r\nmax: 7818959\r\nhistogram for LifecycleManagerEndpoint RPC metrics: PbReportShuffleFetchFailure\r\ncount: 2\r\nmin: 11153666\r\nmean: 1.12940205E7\r\np50: 1.12940205E7\r\np75: 1.1434375E7\r\np95: 1.1434375E7\r\np99: 1.1434375E7\r\nmax: 11434375\r\nhistogram for LifecycleManagerEndpoint RPC metrics: class org.apache.celeborn.common.protocol.message.ControlMessages$StageEnd\r\ncount: 3\r\nmin: 69858875\r\nmean: 1.0791569433333333E8\r\np50: 7.3514125E7\r\np75: 1.80374083E8\r\np95: 1.80374083E8\r\np99: 1.80374083E8\r\nmax: 180374083\r\nhistogram for LifecycleManagerEndpoint RPC metrics: class org.apache.celeborn.common.protocol.message.ControlMessages$GetReducerFileGroup\r\ncount: 3\r\nmin: 929750\r\nmean: 8965833.666666666\r\np50: 3748042.0\r\np75: 2.2219709E7\r\np95: 2.2219709E7\r\np99: 2.2219709E7\r\nmax: 22219709\r\nhistogram for LifecycleManagerEndpoint RPC metrics: PbGetShuffleId\r\ncount: 7\r\nmin: 139041\r\nmean: 9638315.285714285\r\np50: 3027333.0\r\np75: 2.5389458E7\r\np95: 3.0134792E7\r\np99: 3.0134792E7\r\nmax: 30134792\r\n\r\n24/11/12 19:43:05,907 INFO [celeborn-dispatcher-9] RpcMetricsTracker: RPC statistics for endpoint-verifier\r\ncurrent queue size = 1\r\nmax queue length = 4\r\nhistogram for endpoint-verifier RPC metrics: endpoint-verifier_ProcessTime\r\ncount: 1\r\nmin: 1202625\r\nmean: 1202625.0\r\np50: 1202625.0\r\np75: 1202625.0\r\np95: 1202625.0\r\np99: 1202625.0\r\nmax: 1202625\r\nhistogram for endpoint-verifier RPC metrics: endpoint-verifier_QueueTime\r\ncount: 1\r\nmin: 3584\r\nmean: 3584.0\r\np50: 3584.0\r\np75: 3584.0\r\np95: 3584.0\r\np99: 3584.0\r\nmax: 3584\r\nhistogram for endpoint-verifier RPC metrics: CheckExistence\r\ncount: 1\r\nmin: 1202625\r\nmean: 1202625.0\r\np50: 1202625.0\r\np75: 1202625.0\r\np95: 1202625.0\r\np99: 1202625.0\r\nmax: 1202625\r\n```\r\n\r\nThis is the typical output from a LifecylceManager\r\n\r\nOriginally, this feature was developed to monitor master RPC performance, we also found it is very useful to measure LifecylceManager RPC bottleneck

> we also found it is very useful to measure LifecylceManager RPC bottleneck\r\n\r\nA very nice and helpful feature, and we also identified a performance bottleneck issue https://github.com/apache/celeborn/pull/2905 with `MapperEnd` RPC requests through this PR.

> @ErikFang, could you support grafana dashboard for RpcSource?\r\n\r\nwell, I can do that, but prefer in a separate PR

Thanks, merge to main(v0.6.0)

+CC @akpatnam25 FYI for CLI

It is done for ratis election apis.\r\n\r\ncc @mridulm 

cc @AngersZhuuuu I saw that you add the docs for ratis-shell.\r\n\r\nalso cc @waitinfuture @RexXiong 

> Could you also add the usage of the Ratis REST API in https://celeborn.apache.org/docs/latest/celeborn_ratis_shell\r\n\r\nSure, will add it later

Thanks. merge to main(v0.6.0)

TODO:\r\n\r\nUse `{{instance}}` as default `baseLegend` and add more labels for metrics likes:\r\n```\r\nmetrics_FlushWorkingQueueSize_Value -> $baseLegend mountpoint={{mountpoint}}\r\nmetrics_DeviceOSFreeBytes_Value -> $baseLegend device={{device}}\r\nmetrics_DeviceCelebornFreeBytes_Value -> $baseLegend device={{device}}\r\n```

Thanks. Merged into main(v.0.6.0).

@lianneli This is a great feature. On what metrics it will upscale/downscale. Is there any document for this?

@RexXiong The solution is great. I will follow up the discussion though mail list.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Ping @turboFei.

Ping @FMX.

Ping @akpatnam25, @FMX.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2771?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `80.00000%` with `4 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.17%. Comparing base [(`165e914`)](https://app.codecov.io/gh/apache/celeborn/commit/165e914b9b747164b240c8a68896f3b38e67434d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`41fba8d`)](https://app.codecov.io/gh/apache/celeborn/commit/41fba8d97bf8bf1c24783f8743602279215cb2fe?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 24 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2771?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2771?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2771?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2771      +/-   ##\n==========================================\n- Coverage   32.35%   32.17%   -0.17%     \n==========================================\n  Files         329      329              \n  Lines       19511    19697     +186     \n  Branches     1752     1774      +22     \n==========================================\n+ Hits         6311     6336      +25     \n- Misses      12855    13015     +160     \n- Partials      345      346       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2771?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

I dont think this CIP was discussed in the mailing list - was it ? I want to make sure I did not miss the details !\r\nEssentially I am trying to understand how much config tuning would help, what is the space of problems where map side grouping would benefit, and how we can transition from one to the other reasonably.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@FMX @zwangsheng Need help on how can i generate getter/setter methods for Protobuf messages.

ping @FMX @zwangsheng @mridulm 

@s0nskar Did you forget to update the transport messages proto files?

Thanks but this PR needs to reforge because the target branch for tez is "branch-tez-support" not the main branch.\r\nAnd in this PR the integration tez module is lost.

ping @FMX @zwangsheng @mridulm 

ping @FMX @SteNicholas @waitinfuture @mridulm 

After some digging,  this PR might not find the root cause.  The master class is a subclass of the Service class.\r\nThe master object creates a master instance and calls its initialize method.\r\n<img width="587" alt="截屏2024-09-27 16 04 03" src="https://github.com/user-attachments/assets/574f994f-0c5b-4db3-a1bd-79349fc4dd9c">\r\nMaster instance calls its superclass method of initialize.\r\n<img width="534" alt="截屏2024-09-27 16 04 44" src="https://github.com/user-attachments/assets/0585f14d-02e1-4494-8443-3b4cee2a1423">\r\nHttpService calls its superclass method of initialize.\r\n<img width="535" alt="截屏2024-09-27 16 12 53" src="https://github.com/user-attachments/assets/a8095793-36c6-4d6d-930f-f36ff298288d">\r\nInitialize method in service.\r\n<img width="477" alt="截屏2024-09-27 16 05 27" src="https://github.com/user-attachments/assets/00f1609f-11ed-4a87-b180-204544e57269">\r\n\r\nThose initialization methods are invoked in the same thread.\r\n\r\nWe should find out the root cause and fix this problem. 

Hi @waitinfuture \r\n\r\nI have changed the PR description and title.\r\n\r\nJust start to expose the RESTful server after all handlers initialization finished. 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Ping @kerwin-zk, @wForget.

Ping @turboFei.

In description, diff of changes between the two versions, would be https://github.com/apache/ratis/compare/release-3.1.0...release-3.1.1 ?\r\nOur changes look good to me ... the test failure looks relevant though.

@mridulm, Ratis 3.1.1 version will release this week. Therefore, I converted this pull request to draft. Meanwhile, I used Ratis v3.1.1-rc3 version to test this bumping firstly.

The test failures look related to RATIS-2135

> The test failures look related to RATIS-2135\r\n\r\n@mridulm, I have supported that `raft.grpc.message.size.max` must be 1m larger than `raft.server.log.appender.buffer.byte-limit` for RATIS-2135. PTAL.\r\nBTW, Release 3.1.1 is available: [Release 3.1.1 is available](https://ratis.apache.org/post/3.1.1.html).\r\ncc @FMX, @RexXiong, @szetszwo.

Merged to master.\r\nThanks for fixing it @SteNicholas !\r\nThanks for reviews @cxzl25 , @szetszwo :-)

ping @FMX @SteNicholas @waitinfuture @turboFei PTAL thanks.\r\nI am not sure regarding the dependency check issues failing above, I ran `./dev/dependencies.sh --replace` , but it is still failing. Is there anything else required to do? 

ping @mridulm 

> ping @FMX @SteNicholas @waitinfuture @turboFei PTAL thanks. I am not sure regarding the dependency check issues failing above, I ran `./dev/dependencies.sh --replace` , but it is still failing. Is there anything else required to do?\r\n\r\nYou need to fix dependencies for all modules.\r\nFor example `./dev/dependencies.sh --replace --module spark-3.3`

ping @FMX @SteNicholas  @mridulm  PTAL. thanks

China is celebrating its seven-day National Day holidays

> China is celebrating its seven-day National Day holidays\r\n\r\nsure, thanks for letting me know @turboFei 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2758?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `4.69799%` with `142 lines` in your changes missing coverage. Please review.\n> Project coverage is 33.05%. Comparing base [(`9b83587`)](https://app.codecov.io/gh/apache/celeborn/commit/9b83587dd58f7d905f86730498d275e350c2b0b3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1a9a2f5`)](https://app.codecov.io/gh/apache/celeborn/commit/1a9a2f5c9d67562baa92827f279b173fafb59f76?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 51 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2758?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...g/apache/celeborn/rest/v1/model/ContainerInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=openapi%2Fopenapi-client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Frest%2Fv1%2Fmodel%2FContainerInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-b3BlbmFwaS9vcGVuYXBpLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vcmVzdC92MS9tb2RlbC9Db250YWluZXJJbmZvLmphdmE=) | 0.00% | [76 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/rest/v1/master/DefaultApi.java](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=openapi%2Fopenapi-client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Frest%2Fv1%2Fmaster%2FDefaultApi.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-b3BlbmFwaS9vcGVuYXBpLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vcmVzdC92MS9tYXN0ZXIvRGVmYXVsdEFwaS5qYXZh) | 0.00% | [18 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/rest/v1/worker/DefaultApi.java](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=openapi%2Fopenapi-client%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Frest%2Fv1%2Fworker%2FDefaultApi.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-b3BlbmFwaS9vcGVuYXBpLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vcmVzdC92MS93b3JrZXIvRGVmYXVsdEFwaS5qYXZh) | 0.00% | [18 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ommon/container/DefaultContainerInfoProvider.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fcontainer%2FDefaultContainerInfoProvider.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vY29udGFpbmVyL0RlZmF1bHRDb250YWluZXJJbmZvUHJvdmlkZXIuc2NhbGE=) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...erver/common/container/ContainerInfoProvider.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fcontainer%2FContainerInfoProvider.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vY29udGFpbmVyL0NvbnRhaW5lckluZm9Qcm92aWRlci5zY2FsYQ==) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/identity/IdentityProvider.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fidentity%2FIdentityProvider.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L0lkZW50aXR5UHJvdmlkZXIuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../server/common/http/api/v1/ApiV1BaseResource.scala](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2FApiV1BaseResource.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvdjEvQXBpVjFCYXNlUmVzb3VyY2Uuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2758?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2758      +/-   ##\n==========================================\n- Coverage   33.13%   33.05%   -0.07%     \n==========================================\n  Files         314      317       +3     \n  Lines       18435    18730     +295     \n  Branches     1691     1719      +28     \n==========================================\n+ Hits         6106     6189      +83     \n- Misses      11988    12200     +212     \n  Partials      341      341              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2758?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX sorry for the delay in responding, I was out on vacation.  We need the reflection, because the `DefaultContainerInfoProvider` is the default impl. Users would supply their own implementation based on their environment and how they would retrieve the container info. For example, in a k8s env, retrieving the container info would involve hitting the k8s api server or getting it from env variables. This is different for each env, and is up to the user to provide. 

Thanks.  Merged into main(v0.6.0).

cc @mridulm @pan3793 @RexXiong @waitinfuture 

Thanks. merge to main(v0.6.0)

cc @pan3793 @cxzl25 @cfmcgrady 

cc @pan3793 @SteNicholas @akpatnam25 @mridulm 

> For EventTypeEnum, because its value is case sensitive, so we meet this issue.\r\n\r\n\r\nAs mentioned in the PR description, if it is not case sensitive, it should be fine:\r\n\r\nSolution 2:\r\n\r\n\r\nhttps://github.com/apache/celeborn/pull/2754\r\n

close this one and prefer #2754

PIng @pan3793, @FMX.

> `DEPLOY_ON_K8S.md` is replaced with `deploy_on_k8s.md`\r\n\r\nHmm, when did this happen? Windows and macOS file systems are case-insensitive by default, two files with the same words but different cases should fail the git clone ...

Ping @FMX, @RexXiong.

Is this related to https://cwiki.apache.org/confluence/display/CELEBORN/CIP-12+Support+HARD_SPLIT+in+PushMergedData ? cc @RexXiong @cfmcgrady 

@FMX, could you also support the corresponding cli command for the HTTP endpoint to revise lost shuffles?

@FMX, BTW, the HTTP endpoint should introduce the client api to invoke, which could follow [README.md](https://github.com/apache/celeborn/blob/main/openapi/openapi-client/README.md) to add.

@SteNicholas Thanks. I have added the CLI command and the API endpoint. Please review this PR when you have time.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Thanks. Merged to main(v0.6.0).

Hello! No, thanks, i sent request for creation jira account.\r\n

Thanks, it would be helpful to connect this PR to a Jira ticket.

@pan3793 @cfmcgrady @waitinfuture @turboFei 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2741?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.12%. Comparing base [(`59a3995`)](https://app.codecov.io/gh/apache/celeborn/commit/59a39952ddc7fc6f707e8e172034b7ede35f2bc6?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c0a9794`)](https://app.codecov.io/gh/apache/celeborn/commit/c0a97946afca684dc8c836977b7c6079db668333?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 21 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2741      +/-   ##\n==========================================\n+ Coverage   33.11%   33.12%   +0.01%     \n==========================================\n  Files         314      314              \n  Lines       18373    18435      +62     \n  Branches     1683     1691       +8     \n==========================================\n+ Hits         6082     6104      +22     \n- Misses      11951    11989      +38     \n- Partials      340      342       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2741?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@reswqa, could you provide the grafana metric dashboard renderings to help confirm whether the `celeborn-dashboard.json` is correct?

> could you provide the grafana metric dashboard renderings to help confirm whether the celeborn-dashboard.json is correct?\r\n\r\n![image](https://github.com/user-attachments/assets/0b1f9c44-77a9-47f8-91f5-79596240f366)\r\n\r\n![image](https://github.com/user-attachments/assets/819816b3-01f5-4b72-86ab-c0ba8c3ecd9f)\r\n\r\n

Thanks. merge to main(v0.6.0)

cc: @AngersZhuuuu @SteNicholas 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2739?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.13%. Comparing base [(`59a3995`)](https://app.codecov.io/gh/apache/celeborn/commit/59a39952ddc7fc6f707e8e172034b7ede35f2bc6?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`119adc3`)](https://app.codecov.io/gh/apache/celeborn/commit/119adc3826027dc842ad75429f9160241f07abf9?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 14 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2739      +/-   ##\n==========================================\n+ Coverage   33.11%   33.13%   +0.02%     \n==========================================\n  Files         314      314              \n  Lines       18373    18435      +62     \n  Branches     1683     1691       +8     \n==========================================\n+ Hits         6082     6106      +24     \n- Misses      11951    11988      +37     \n- Partials      340      341       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2739?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@mridulm @FMX @zwangsheng updated the PR, PTAL.

Merged into main(v0.6.0).

> Although this implementation may have performance issues\r\n\r\n@FMX can you mention the issues, i will try to address those in follow up PR.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2738?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `4 lines` in your changes missing coverage. Please review.\n> Project coverage is 33.12%. Comparing base [(`59a3995`)](https://app.codecov.io/gh/apache/celeborn/commit/59a39952ddc7fc6f707e8e172034b7ede35f2bc6?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`50475ca`)](https://app.codecov.io/gh/apache/celeborn/commit/50475cacf513c76893e1795db7a2faf43052354c?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 12 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2738?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/celeborn/pull/2738?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fservice%2Fconfig%2FFsConfigServiceImpl.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2738?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2738      +/-   ##\n==========================================\n+ Coverage   33.11%   33.12%   +0.01%     \n==========================================\n  Files         314      314              \n  Lines       18373    18435      +62     \n  Branches     1683     1691       +8     \n==========================================\n+ Hits         6082     6104      +22     \n- Misses      11951    11989      +38     \n- Partials      340      342       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2738?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks. merge to main(v0.6.0) and branch-0.5(v0.5.2)

ping @pan3793 

lgtm, @akpatnam25 thank you for updating it.

merged to main for 0.6

ping @SteNicholas @turboFei @FMX 

Hi @akpatnam25 , could you add your email to your github account so that github can track your commits?

@waitinfuture I think it seems to be taking my work email, which I am not allowed to add as an email. From now on before committing, I can run: `git config user.email` with my verified email address.  I amended the previous commits in this PR to be the correct email now: \r\n```\r\n$ git log\r\ncommit 57f1c6bad035f7a2dd334d83c745c507e6ae1054 (HEAD -> CELEBORN-1593, origin/CELEBORN-1593)\r\nAuthor: Aravind Patnam <akpatnam25@gmail.com>\r\nDate:   Thu Sep 12 00:32:26 2024 -0700\r\n\r\n    spotless\r\n\r\ncommit f17c06691fee76ab5766f40222c8e935ba866434\r\nAuthor: Aravind Patnam <akpatnam25@gmail.com>\r\nDate:   Thu Sep 12 00:27:04 2024 -0700\r\n\r\n    [CELEBORN-1593][FOLLOWUP] Add CLI support for removeWorkersUnavailableInfo\r\n\r\n```

ping @SteNicholas @RexXiong @FMX, thanks :) 

thanks, updated @FMX 

Thanks. Merged into main(v0.6.0).

Ping @akpatnam25, @mridulm.

Hi @SteNicholas \r\n\r\nCurrently the openapi sdk code is generated by openapi-tools.\r\n\r\nRefer: https://github.com/apache/celeborn/tree/main/openapi/openapi-client#readme\r\n

@turboFei, thanks for the reminder. I have updated `master_rest_v1.yaml` and used `build/mvn -pl openapi/openapi-client clean package -Pgenerate` to update `SendWorkerEventRequest`. PTAL.

> LGTM. Thanks. Please fix the conflict first.\r\n\r\n+1

@FMX, @RexXiong, I have already resolved conflicts. PTAL.

Thanks, merge to main(v0.6.0)

Ping @RexXiong, @waitinfuture.

> Ping @RexXiong, @waitinfuture.\r\n\r\nBetter only remove `statusSystem.handleWorkerRemove` from RegisterWorker as there may be compatibility problem when upgrade Celeborn. And we can remove left at Celeborn-0.7, WDYT

cc @turboFei @FMX @SteNicholas 

cc @waitinfuture 

Merged to main(v0.6.0).

Ping @cxzl25, @FMX, @mridulm.

Are there any benefits to this change?\r\n\r\nCeleborn respects the config "-XX:MaxDirectMemorySize" and does not want to use memory above the limit. This PR is not suitable in some ways.\r\n

Merged into main(v0.6.0), branch-0.5(v0.5.2).

IMO this configuration can be a dynamic configuration. Wdyt?

cc: @SteNicholas @waitinfuture @mridulm 

Also, IMO quota should be a hard limit any application breaching quota should get a `CelebornIOException`. We can improve the application heartbeat to check for current quota.

ping @SteNicholas @waitinfuture 

ping @FMX @SteNicholas @waitinfuture wdyt about this.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

I suggest do this:\r\n1. do not call `totalInflightReqs.reset();` in `InFlightRequestTracker.cleanup`\r\n2. check `mapperEnd` in `limitZeroInFlight` and return true immediately if already ended\r\n3. check `mapperEnd` in `pushMergedData` and return immediately if already ended\r\n\r\ncc @RexXiong @AngersZhuuuu @FMX 

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.2) and branch-0.4(v0.4.3)

Merge to main(v0.6.0)

Please review this, thank you. cc @waitinfuture @RexXiong @onebox-li

LGTM.

I rebased latest mater to make CI happy.

thank you, merging to branch-0.4(v0.4.3).

thank you, merging to branch-0.4(v0.4.3).

Ping @RexXiong.

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.2)

this is a duplicate of https://github.com/apache/celeborn/pull/2633 -- I had forgotten to update it for a long time and it became stale with a lot of conflicts, hence I just made a new branch/PR. 

cc @FMX @SteNicholas @pan3793 @RexXiong @turboFei please review, thank you :)

thanks @RexXiong , I have addressed your comments. Please take another look , thanks!! :) 

@RexXiong @SteNicholas  are we able to merge this? :) 

thanks everyone for the reviews!! 

@s0nskar, how did you use unreleased shuffle count in production practice?

@s0nskar, please add the `UnreleasedShuffleCount` metric in `celeborn-dashboard.json` file.

@s0nskar, any update for this metric?

Sorry messed up the commit history on this one, reopening the PR again.\r\n\r\n@SteNicholas updated the PR with dashboard changes.

@FMX @SteNicholas Getting below error in tests, how can we clean up the metrics cache.\r\n\r\n```\r\njava.lang.IllegalArgumentException: UnreleasedShuffleCount{role="Worker"} is already used for a different type of metric\r\n```

@s0nskar, you should not invoke `addCounter(UNRELEASED_SHUFFLE_COUNT)` in `WorkerSource`.

@FMX ping for review.

Merged into main(v0.6.0).

Ping @kerwin-zk, @mridulm, @zhouyifan279. PTAL.

Thanks. merge to main(v0.6.0) and branch-0.5(v0.5.2)

The ReadBufferDispatcher may encounter an exception when a Netty OutOfDirectMemoryError occurs. In this case, we should allow the map partition reader to retry; otherwise, the Flink Task Manager could hang. cc @SteNicholas @mridulm \r\n

@codenohup, thanks for contribution. Merged to main(v0.6.0) and branch-0.5(v0.5.2).

+CC @venkata91

@reswqa, thanks for contribution. Merged to main(v0.6.0) and branch-0.5(v0.5.2).

cc: @FMX for viz

@cxzl25, thanks for the contribution. Merged to main(v0.6.0), branch-0.5(v0.5.2) and branch-0.4(v0.4.3).

cc @pan3793 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @pan3793 

gentle ping @pan3793\r\n\r\n

@AngersZhuuuu  @boneanxs  @RexXiong   @SteNicholas  PTAL.

@leixm, thanks for contribution. Merged to main(v0.6.0), branch-0.5(v0.5.2) and branch-0.4(v0.4.3).

Please take a look at this PR. Thanks!\r\ncc @RexXiong @FMX 

Thanks, merge to main(v0.6.0)

cc @FMX @SteNicholas @mridulm @zhouyejoe\r\n

I think this change can make retrospective debugging hard as we will have no insight into which workers the shuffle data was written to and what was the behaviour of those workers during that time. \r\n\r\nInstead of making it completely a debug log IMO we should at least output some basic info about the worker host selected for shuffle this will reduce the noise but also leave some space for debugging issues.\r\n\r\nEx –\r\n```\r\nHost: 10.152.63.41\r\nWorkerStatus: WorkerStatus{state=Normal, stateStartTime=1724244049248}\r\nNumOfSlotsAllocated: 100\r\n```

> I think this change can make retrospective debugging hard as we will have no insight into which workers the shuffle data was written to and what was the behaviour of those workers during that time.\r\n> \r\n> Instead of making it completely a debug log IMO we should at least output some basic info about the worker host selected for shuffle this will reduce the noise but also leave some space for debugging issues.\r\n> \r\n> Ex –\r\n> \r\n> ```\r\n> Host: 10.152.63.41\r\n> WorkerStatus: WorkerStatus{state=Normal, stateStartTime=1724244049248}\r\n> NumOfSlotsAllocated: 100\r\n> ```\r\n\r\nI think this will still be noisy in a large fleet, especially in the driver logs where users might be looking for other logs/errors. I feel that if truly needed for debugging, the user can then enable debug logging for it. 

> > I think this change can make retrospective debugging hard as we will have no insight into which workers the shuffle data was written to and what was the behaviour of those workers during that time.\r\n> > Instead of making it completely a debug log IMO we should at least output some basic info about the worker host selected for shuffle this will reduce the noise but also leave some space for debugging issues.\r\n> > Ex –\r\n> > ```\r\n> > Host: 10.152.63.41\r\n> > WorkerStatus: WorkerStatus{state=Normal, stateStartTime=1724244049248}\r\n> > NumOfSlotsAllocated: 100\r\n> > ```\r\n> \r\n> I think this will still be noisy in a large fleet, especially in the driver logs where users might be looking for other logs/errors. I feel that if truly needed for debugging, the user can then enable debug logging for it.\r\n\r\nMaybe print this log to one line can be helpful.

> > > I think this change can make retrospective debugging hard as we will have no insight into which workers the shuffle data was written to and what was the behaviour of those workers during that time.\r\n> > > Instead of making it completely a debug log IMO we should at least output some basic info about the worker host selected for shuffle this will reduce the noise but also leave some space for debugging issues.\r\n> > > Ex –\r\n> > > ```\r\n> > > Host: 10.152.63.41\r\n> > > WorkerStatus: WorkerStatus{state=Normal, stateStartTime=1724244049248}\r\n> > > NumOfSlotsAllocated: 100\r\n> > > ```\r\n> > \r\n> > \r\n> > I think this will still be noisy in a large fleet, especially in the driver logs where users might be looking for other logs/errors. I feel that if truly needed for debugging, the user can then enable debug logging for it.\r\n> \r\n> Maybe print this log to one line can be helpful.\r\n\r\nSetting the logger levels for components could be the ultimate solution.

cc @waitinfuture @FMX @SteNicholas 

++ @turboFei @RexXiong @mridulm 

thanks for the review @RexXiong, I addressed your comments!! gentle ping for @FMX @SteNicholas @waitinfuture to review as well :) 

There is some work to be done for this PR.\r\n1. Build CLI in make-distribution.\r\n2. Add a description of how to use the CLI in README.

@akpatnam25 \r\nPlease add a doc about how to use Celeborn Cli.\r\nAfter build and try to use Celeborn Cli, I got errors as following,\r\n\r\n> /Users/ethanfeng/codes/wcode/apache-repo/main/apache-celeborn-0.6.0-SNAPSHOT-bin/bin/celeborn-class: line 100: exec: -X: invalid option\r\nexec: usage: exec [-cl] [-a name] file [redirection ...]\r\n\r\nI ran the UT and got error as following,\r\n\r\n>  ApiException{code=0, responseHeaders=null, responseBody=\

@FMX , the issue you are seeing with running should be fixed the CLI should be fixed. can you please try again on your mac to run the CLI. I have also added a simple  user guide for now in this doc: https://docs.google.com/document/d/1Cq8g63m0PWzOeDIe75nVoEbq_Z2YJCedZ9MSk2D8Nc0/edit#heading=h.nxagrvjpzdtd\r\nAt the end of the development after we add more features, I will add this into the website/README as well. For now, the doc is just very basic to help setup the CLI. \r\n\r\nRegarding the unit tests, I am not sure what is happening on your machine, but it seems like it passes on github checks so I think it is ok. please take a look and let me know, thanks @FMX !! 

The CI failures are unrelated to this PR, merging to master.

Merged to master.\r\nThanks for adding this @akpatnam25 !\r\nThanks for reviews @FMX, @RexXiong, @turboFei  :)

Ping @RexXiong, @s0nskar.

@SteNicholas Really interesting PR, i was not aware about the `java.util.ServiceLoader`. \r\n\r\nCan we update the config description and website docs to reflect how to use this functionality.

@s0nskar, thanks for review. I have updated the description of `celeborn.dynamicConfig.store.backend`. Meanwhile, I would like to introduce `ConfigStore` document in another pull request. PTAL.

Ping @RexXiong, @FMX.

Merge to main(v0.6.0) and branch-0.5(v0.5.2)

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @waitinfuture @pan3793 

duplicate CELEBORN-1565

Thanks~

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @pan3793 

There is no new comments, could you help merge it? @pan3793 @RexXiong 

The method `System.currentTimeMillis` might return the same value for two invokes. I think changing this UT is not the correct approach to fix this problem. Changing the definition of nonCriticalErrors to List will be better.

I have a question: should we retry fetching another replication before throwing a FetchFailedException when the conf `celeborn.client.push.replicate.enabled` is set to true?

> I have a question: should we retry fetching another replication before throwing a FetchFailedException when the conf `celeborn.client.push.replicate.enabled` is set to true?\r\n\r\nThis is not necessarily safe, because the Task may have read part of the data, so it is safer to retry the Task. This is how Spark handles it.

Thank you, merging to main(v0.6.0)/branch-0.5(v0.5.2)/branch-0.4(v0.4.3).

Finally, there is a PR to fix this problem. BTW Are there any tools to find unused methods?

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2689?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.24%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d5686f8`)](https://app.codecov.io/gh/apache/celeborn/commit/d5686f85954e973afd9076258893880eb7103d62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 52 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2689      +/-   ##\n==========================================\n- Coverage   39.83%   33.24%   -6.59%     \n==========================================\n  Files         239      313      +74     \n  Lines       15026    18275    +3249     \n  Branches     1362     1678     +316     \n==========================================\n+ Hits         5984     6073      +89     \n- Misses       8711    11863    +3152     \n- Partials      331      339       +8     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2689?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Are there any tools to find unused methods\r\n\r\nMaybe scalafix.\r\n\r\nhttps://scalacenter.github.io/scalafix/docs/rules/RemoveUnused.html

Please fix the conflicts. This PR looks good to me.

> > Are there any tools to find unused methods\r\n> \r\n> Maybe scalafix.\r\n> \r\n> https://scalacenter.github.io/scalafix/docs/rules/RemoveUnused.html\r\n\r\nIs there any relative tools for Java?

> > Are there any tools to find unused methods\r\n> \r\n> Maybe scalafix.\r\n> \r\n> https://scalacenter.github.io/scalafix/docs/rules/RemoveUnused.html\r\n\r\nAre there any relative tools for Java?

> > Are there any tools to find unused methods\r\n> \r\n> Maybe scalafix.\r\n> \r\n> https://scalacenter.github.io/scalafix/docs/rules/RemoveUnused.html\r\n\r\nAre there any relative tools for Java?

Isnt there not a checkstyle rule for this ?

And I just realized we dont have checkstyle for Celeborn :-)\r\nPerhaps that might help with this as well as other style enforcements ?

> we dont have checkstyle for Celeborn\r\n\r\nBecause we use `spotless-maven-plugin`, there may be some check conflicts with checkstyle.\r\nIn addition, `.scalafmt.conf` is used in scala to check some formats.

Thanks. Merged into main(v0.6.0).

Please run ./dev/reformat before submitting PR

Merge to main(v0.6.0) and branch-0.5(0.5.2)

Thanks for reply, I will do a fix later.

cc @mridulm @FMX 

test failure is unrelated

ping, can we merge this? :) 

@akpatnam25, thanks. Merged to main(v0.6.0) and branch-0.5(0.5.2).

Ping @FMX, @cxzl25, @pan3793.

plz review this PR. Thanks @FMX\r\n\r\n

It looks like the UT failures are not relevant to this PR.  The README file should be updated too.

> It looks like the UT failures are not relevant to this PR. The README file should be updated too.\r\n\r\nDone. Thanks.

This is not duplicated with #2675 . Updating different part of the docs , and for different purposes.

> This is not duplicated with #2675 . Updating different part of the docs , and for different purposes.\r\n\r\nThank you for clarifying, you are correct.

merge to main(v0.6.0)

plz review this PR. Thanks @FMX 

@zhaohehuhu, please update the title of this pull request to link with ticket.

> @zhaohehuhu, please update the title of this pull request to link with ticket.\r\n\r\nGot it. Thanks.

Similar PR in Trino. https://github.com/trinodb/trino/pull/10313

Merge to main(v0.6.0)

Thanks. There are some changes to be done in the sbt build script.

@FMX, PTAL.

@FMX, thanks for review. I have addressed above comment and actived the web module in sbt. PTAL.

+CC @venkata91

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2678?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `6.54206%` with `100 lines` in your changes missing coverage. Please review.\n> Project coverage is 33.17%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7d0cd40`)](https://app.codecov.io/gh/apache/celeborn/commit/7d0cd40321d80eb0522cb0808992888fb69b2235?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 24 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2678?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/MapFileMeta.java](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FMapFileMeta.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NYXBGaWxlTWV0YS5qYXZh) | 0.00% | [43 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/protocol/SubPartitionReadData.java](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fprotocol%2FSubPartitionReadData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9TdWJQYXJ0aXRpb25SZWFkRGF0YS5qYXZh) | 0.00% | [18 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [15 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/network/protocol/Message.java](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fprotocol%2FMessage.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | 57.15% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fprotocol%2FTransportMessage.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2678      +/-   ##\n==========================================\n- Coverage   39.83%   33.17%   -6.66%     \n==========================================\n  Files         239      311      +72     \n  Lines       15026    18323    +3297     \n  Branches     1362     1681     +319     \n==========================================\n+ Hits         5984     6076      +92     \n- Misses       8711    11907    +3196     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2678?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

We need to split this PR into multiple smaller commits to facilitate the review process.\r\nTherefore, we will close this PR now. 🤧

+CC @akpatnam25

@bowenliang123, thanks. Merged to main(v0.6.0) and branch-0.5(v0.5.2).

cc @SteNicholas 

merge to main(v0.6.0)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2674?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `4 lines` in your changes missing coverage. Please review.\n> Project coverage is 33.35%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e4eddab`)](https://app.codecov.io/gh/apache/celeborn/commit/e4eddabb1ceaef1472d860c18c995ac9342a0574?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 17 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2674?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rver/common/http/api/CelebornOpenApiResource.scala](https://app.codecov.io/gh/apache/celeborn/pull/2674?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2FCelebornOpenApiResource.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQ2VsZWJvcm5PcGVuQXBpUmVzb3VyY2Uuc2NhbGE=) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/celeborn/pull/2674?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2FHttpService.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2674      +/-   ##\n==========================================\n- Coverage   39.83%   33.35%   -6.47%     \n==========================================\n  Files         239      310      +71     \n  Lines       15026    18193    +3167     \n  Branches     1362     1672     +310     \n==========================================\n+ Hits         5984     6067      +83     \n- Misses       8711    11786    +3075     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2674?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @pan3793 \r\n\r\n

also cc @cfmcgrady @SteNicholas 

Hi @RexXiong \r\n\r\nIf no more comments, can we merge it? thanks

> Hi @RexXiong\r\n> \r\n> If no more comments, can we merge it? thanks\r\n\r\nThanks for the reminder.  Merge to main(v0.6.0)

@RexXiong Could you please take a look at this?

@SteNicholas @waitinfuture @pan3793 wdyt about this change. We can fix this at more places incrementally.

@SteNicholas @waitinfuture ping for this ^

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Merged to main(v0.6.0) and branch-0.5(v0.5.2).

@s0nskar, why is the implementation not based on SPI?

@SteNicholas We have an internal implementation of config management service which enforce authn/authz and constraints on specific configs. It also helps us manage the rollout better between different regions.

Should also update doc here https://celeborn.apache.org/docs/latest/developers/configuration/#dynamic-configuration

@AngersZhuuuu Updated the doc.

@s0nskar, `ConfigService` should introduce `getName()` interface for short name configuration.

@SteNicholas Added. Q: do you want me to make use of it in this PR?

@s0nskar, the implementation of `ConfigService` could use `getName` interface to load the implementation instance instead of hard code in factory. Or you could regard `DynamicConfigServiceFactory` as interface and the `getName` interface could be introduced in `DynamicConfigServiceFactory`.\r\n```\r\npublic interface DynamicConfigServiceFactory {\r\n   public String getName();\r\n\r\n   public ConfigService getConfigService(CelebornConf celebornConf);\r\n}\r\n\r\npublic class FSConfigServiceFactory implements DynamicConfigServiceFactory {\r\n   public String getName() { return "FS";}\r\n   public ConfigService getConfigService(CelebornConf celebornConf) { ...}\r\n}\r\n```

> the implementation of ConfigService could use getName interface to load the implementation instance instead of hard code in factory.\r\n\r\n@SteNicholas Trying to understand this comment better –\xa0I think for this will have to make getName() static method but abstract static does not work. \r\n\r\nThe factory approach will also need a lot of abstraction IMO it is not necessary for this as we will only have couple of predefined names. Let me know if you think otherwise then i will try to make it work.\r\n\r\n\r\n

Merging to main(v0.6.0)/branch-0.5(v0.5.2)

cc @mridulm @waitinfuture @FMX @SteNicholas @AngersZhuuuu @pan3793 

@akpatnam25, no any document update?

can we merge this PR if it is good to go? :) @SteNicholas 

Just hold on a second. The field is skipped for a reason. Let me find out why the field is not included in the proto.

<img width="875" alt="截屏2024-08-09 11 42 24" src="https://github.com/user-attachments/assets/73d10ba8-70cc-4f11-b435-d1b9ae6ceebc">\r\norg.apache.celeborn.service.deploy.master.clustermeta.AbstractMetaManager#restoreMetaFromFile\r\n\r\nAbstract meta manager will try to resolve workerinfos who are "DEFAULT_RACK".

> <img alt="截屏2024-08-09 11 42 24" width="875" src="https://private-user-images.githubusercontent.com/4150993/356455896-73d10ba8-70cc-4f11-b435-d1b9ae6ceebc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjMxNzY3MzQsIm5iZiI6MTcyMzE3NjQzNCwicGF0aCI6Ii80MTUwOTkzLzM1NjQ1NTg5Ni03M2QxMGJhOC03MGNjLTRmMTEtYjQzNS1kMWI5YWU2Y2VlYmMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MDlUMDQwNzE0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGU3ZDI3NDMwNzE5ZDllOGZkNTI2MjI1MmRkNDZiZTk5YTQyYjgyNjE0NDcxYmQ0Y2Q0NDlhMTUzNTkzMWNkZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.kXjg-5zumgx_BSMN6Lm7fjYzRtVCMiPRkE4q_6clTb4"> org.apache.celeborn.service.deploy.master.clustermeta.AbstractMetaManager#restoreMetaFromFile\r\n> Abstract meta manager will try to resolve workerinfos who are "DEFAULT_RACK".\r\n\r\n@FMX  yes that is correct. However, this can be something different based on what is passed in to the workerInfo from the workers (see this [PR](https://github.com/apache/celeborn/pull/2367)). If that resolution on the worker side does not take place, master can try to resolve when it restores the snapshot. 

@FMX  essentially we need this whenever the networkLocation != DEFAULT_RACK. In this case, master should restore the snapshot with that custom network location. hope this makes sense

This is essentially something we missed in this PR: https://github.com/apache/celeborn/pull/2367\n\nOtherwise network location is never persisted into ratis. 

In stress testing, did the master fail to resolve network locations?

Thanks @FMX!! Yes, I understand the concern. This is basically only since our rack configs will never change.  I described more below :slightly_smiling_face:\r\nIn our environment, there are 2 ways for the master to know the `networkLocation`:\r\n- Query external REST API for each worker to get the `networkLocation`  -- this is an expensive call for 400+ workers\r\n- Worker sends its `networkLocation` as a part of the registration process\r\n\r\nGiven this, we chose the 2nd approach above. Essentially, when a worker sends its `networkLocation`, that `networkLocation` will never change for us. The current logic in the code is that if the `networkLocation` upon reading the snapshot is default, then it will again try to [query the external API at the Master](https://github.com/apache/celeborn/blob/main/master/src/main/java/org/apache/celeborn/service/deploy/master/clustermeta/AbstractMetaManager.java#L342-L346) again once more (this is not a desired code path, but is basically the backup in case the `networkLocation` is null in the snapshot). This means that `networkLocation` must be persisted into Ratis which is basically the cause of this PR. cc @mridulm 

Even if rack configs changed, all masters would never be restarted all at the same time anyways in a production setting, so this would cause split brain anyways for a period of time, which would not be good for the cluster.  Let me know what you think @FMX 

@FMX I updated this PR to have a config to persist the `networkLocation` as we spoke offline. I think the failing test is unrelated to this PR, let me know if you think otherwise. 

thanks @FMX  and everyone else for the reviews!! :) 

Ping @FMX, @AngersZhuuuu.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2668?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.34%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`8e0b09a`)](https://app.codecov.io/gh/apache/celeborn/commit/8e0b09a38c998a4a628d835c613f6703e56d2f86?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 13 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2668      +/-   ##\n==========================================\n- Coverage   39.83%   33.34%   -6.49%     \n==========================================\n  Files         239      310      +71     \n  Lines       15026    18178    +3152     \n  Branches     1362     1672     +310     \n==========================================\n+ Hits         5984     6059      +75     \n- Misses       8711    11780    +3069     \n- Partials      331      339       +8     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2668?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, the CI workflow should add dependency check for client-tez module.

Merge to branch:  branch-tez-support

cc @pan3793 

merged to main

cc @pan3793 

> The only benefit is that, customer do not need to implement java.security.Principal by them, that is all\r\n\r\nsounds reasonable

Merged to main

cc @pan3793 @cfmcgrady 

```\r\nError:  Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.15.0:install-node-and-pnpm (install node and pnpm) on project celeborn-web_2.12: Could not download Node.js: Could not download https://nodejs.org/dist/v20.11.0/node-v20.11.0-linux-x64.tar.gz: Premature end of Content-Length delimited message body (expected: 46,607,807; received: 4,096,000) -> [Help 1]\r\n```

Maybe we should also consider adding authorization support for Apache Kyuubi on Swagger UI? cc @pan3793 

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2663?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.31%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`3dd119b`)](https://app.codecov.io/gh/apache/celeborn/commit/3dd119b759f54fafc9f90a2916cb910359384855?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 28 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2663      +/-   ##\n==========================================\n- Coverage   39.83%   33.31%   -6.51%     \n==========================================\n  Files         239      310      +71     \n  Lines       15026    18227    +3201     \n  Branches     1362     1675     +313     \n==========================================\n+ Hits         5984     6071      +87     \n- Misses       8711    11816    +3105     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2663?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I suppose CI failure is unrelated to this change, right?

+CC @venkata91

For the Flink 1.20 release, please specify the main upgrade features and any incompatible changes for integrating with Remote shuffle service. Additionally, update the docs/README.md file to include instructions for integrating Celeborn with Flink 1.20.

Since this is a bug fix, I will create a backport to 0.4

cc @pan3793 How do you think about?\r\n\r\n

also cc @cfmcgrady 

Thanks. merge to main(v0.6.0)

thanks @RexXiong , raised https://github.com/apache/celeborn/pull/2658 to follow up your comments.

Merge to main(v0.6.0) and branch-0.5(v0.5.2)

it might be costly for sorting shuffle_id and application_id listing API, cc @AngersZhuuuu 

> it might be costly for sorting shuffle_id and application_id listing API\r\nIf that, I can remove the order for them

maybe we can sort the response in client side.\r\n\r\nWaiting for the celeborn-CLI.

> it might be costly for sorting shuffle_id and application_id listing API, cc @AngersZhuuuu\r\n\r\nPerhaps we could add an option to choose between sorted and unsorted results?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

thanks, merged to main, branch-0.5, branch-0.4

>  but It seems Celeborn should also support throw FetchFailedException when Data corruption detected \r\n\r\nhi @cxzl25 would you like to follow up the comments for this?

> It seems Celeborn should also support throw FetchFailedException when `Data corruption detected`\r\n\r\nBecause in celeborn we are using ZstdDecompressCtx, decompression fails and it throws ZstdException, which is not inherited from IOException.\r\n\r\nBut in Spark, ZstdInputStreamNoFinalizer is used, which throws ZstdIOException and inherits IOException.\r\n\r\nSo this exception is not caught in CelebornInputStreamImpl#fillBuffer, we can do this next.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@ChenYi015 Can you split this PR into several small PRs? Changing one feature in one PR can be easier for reviewers.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@ FMX plz help review. Thanks!

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2653?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.31%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ef546ba`)](https://app.codecov.io/gh/apache/celeborn/commit/ef546ba0926dde7afaf0d79b0a46e8dd65980ef6?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 22 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2653      +/-   ##\n==========================================\n- Coverage   39.83%   33.31%   -6.52%     \n==========================================\n  Files         239      310      +71     \n  Lines       15026    18213    +3187     \n  Branches     1362     1673     +311     \n==========================================\n+ Hits         5984     6065      +81     \n- Misses       8711    11808    +3097     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2653?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @zwangsheng.

@zwangsheng, I have updated description of pull request with netty memory metrics. PTAL.

Ping @RexXiong, @FMX.

@RexXiong, `sharedPooledByteBufAllocator` only registers metrics with `WorkerSource` for `TransportServer`. The metrics of `sharedPooledByteBufAllocator` should also be registered in `TransportClientFactory` with `WorkerSource`.

@FMX plz help review

@pan3793 @RexXiong PTAL, thanks.

To make it can be reviewed and merged easily, I had created a new PR #2654 to do some values renaming. After it has been merged, I will do a rebase.

If we want to use `volumeClaimTemplates`, suppose `ssd-storage-class` is a valid storage class in your Kubernetes cluster that provided by a cloud provider or defined by yourself that can be used to provide SSD cloud disks dynamically, the configuration will be like as follows:\r\n\r\n```yaml\r\nmaster:\r\n  volumeClaimTemplates:\r\n  - metadata:\r\n      name: celeborn-ratis\r\n      annotations:\r\n        celeborn.apache.org/disk-type: SSD\r\n        celeborn.apache.org/disk-capacity: 100Gi\r\n    spec:\r\n      accessModes:\r\n      - ReadWriteOnce\r\n      resources:\r\n        request:\r\n          storage: 100Gi\r\n        limits:\r\n          storage: 100Gi\r\n      storageClassName: ssd-storage-class\r\n  volumeMounts:\r\n  - name: celeborn-ratis\r\n    mountPath: /mnt/celeborn_ratis\r\n\r\nworker:\r\n  volumeClaimTemplates:\r\n  - metadata:\r\n      name: disk1\r\n      annotations:\r\n        celeborn.apache.org/disk-type: SSD\r\n        celeborn.apache.org/disk-capacity: 100Gi\r\n    spec:\r\n      accessModes:\r\n      - ReadWriteOnce\r\n      resources:\r\n        request:\r\n          storage: 100Gi\r\n        limits:\r\n          storage: 100Gi\r\n      storageClassName: ssd-storage-class\r\n  volumeMounts:\r\n  - name: disk1\r\n    mountPath: /mnt/disk1\r\n```\r\n\r\nThe annotations `celeborn.apache.org/disk-type` and `celeborn.apache.org/disk-capacity` are used by Helm to render `celeborn.worker.storage.dirs` in configmap.\r\n\r\nWhen we install the Helm chart, SSD cloud disks will be dynamically provisioned by cloud providers.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Hey @ChenYi015 thanks a lot for working on this MR! \r\n\r\nI saw this MR is marked as closed. Could you mention a bit your plan on this MR further? \r\n\r\nAsking this question because we currently are doing similar customisation (using `volumeClaimTemplates`) on the chart internally, and want to align with you so that changes are not far away from each other :D 

Ping @pan3793, @mridulm.

do we need to tune the exclusion pattern for other cases? e.g. rat, fommatter 

@pan3793, I have checked all exclusion pattern and all target directory patterns that only error prone plugin tune this pattern.

Thanks, merged to main for 0.6

Thanks, merged to main/0.5

+CC @RexXiong, @waitinfuture 

The test failure is unrelated to this PR:\r\n```\r\nDeviceMonitorSuite:\r\n- init\r\n- register/unregister/notify/report\r\n0worker-device-checker-1\r\n24/07/25 20:09:13,757 ERROR [worker-disk-checker] LocalDeviceMonitor: /mnt high_disk_usage error, notify observers\r\n24/07/25 20:09:13,982 ERROR [ScalaTest-main-running-DeviceMonitorSuite] Utils: TimeoutException in thread ScalaTest-main-running-DeviceMonitorSuite, error message: none\r\n1worker-device-checker-3\r\n24/07/25 20:09:14,984 ERROR [ScalaTest-main-running-DeviceMonitorSuite] Utils: TimeoutException in thread ScalaTest-main-running-DeviceMonitorSuite, error message: none\r\n2worker-device-checker-4\r\n24/07/25 20:09:15,985 ERROR [ScalaTest-main-running-DeviceMonitorSuite] Utils: TimeoutException in thread ScalaTest-main-running-DeviceMonitorSuite, error message: none\r\n- tryWithTimeoutAndCallback\r\n- monitor non-critical error metrics *** FAILED ***\r\n  java.lang.AssertionError: expected:<2> but was:<1>\r\n  at org.junit.Assert.fail(Assert.java:89)\r\n  at org.junit.Assert.failNotEquals(Assert.java:835)\r\n  at org.junit.Assert.assertEquals(Assert.java:120)\r\n  at org.junit.Assert.assertEquals(Assert.java:146)\r\n  at org.apache.celeborn.service.deploy.worker.storage.DeviceMonitorSuite.$anonfun$new$22(DeviceMonitorSuite.scala:405)\r\n  at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n  at org.mockito.MockitoEnhancer.withObject(MockitoAPI.scala:632)\r\n  at org.mockito.MockitoEnhancer.withObject$(MockitoAPI.scala:620)\r\n  at org.mockito.MockitoSugar$.withObject(MockitoSugar.scala:8)\r\n  at org.mockito.MockitoEnhancer.withObjectMocked(MockitoAPI.scala:607)\r\n  ...\r\n```

Thanks @pan3793, @RexXiong !

thanks, merged to main, branch-0.5, branch-0.4

cc @pan3793 @waitinfuture 

one more question: should we make all SPI to be Java interfaces?

ok, rewriting with java

SBT build pass:\r\n```\r\n build/sbt "clean;celeborn-spi/package"; ls spi/target \r\n\r\nUsing /Users/fwang12/.sdkman/candidates/java/current as default JAVA_HOME.\r\nNote, this will be overridden by -java-home if it is set.\r\n[info] welcome to sbt 1.9.4 (Azul Systems, Inc. Java 1.8.0_392)\r\n[info] loading settings for project celeborn-build from plugins.sbt ...\r\n[info] loading project definition from /Users/fwang12/todo/celeborn/project\r\n[info] loading settings for project celeborn from version.sbt ...\r\n[info] resolving key references (12502 settings) ...\r\n[info] set current project to celeborn (in build file:/Users/fwang12/todo/celeborn/)\r\n[success] Total time: 0 s, completed Jul 24, 2024 11:55:23 PM\r\n[info] generate META-INF/LICENSE for project celeborn-spi\r\n[info] generate META-INF/NOTICE for project celeborn-spi\r\n[info] compiling 5 Java sources to /Users/fwang12/todo/celeborn/spi/target/classes ...\r\n[success] Total time: 1 s, completed Jul 24, 2024 11:55:24 PM\r\nceleborn-spi-0.6.0-SNAPSHOT.jar resource_managed                sync                            zinc\r\nclasses                         streams                         update\r\n```

thanks, merged to main/0.6.0

Thanks, merged to main/0.5/0.4

Thanks @pan3793 for the review.

Thanks, merged to main

cc @pan3793 

Good job! the apache http client is much more hygienic than jersey

also cc @FMX @RexXiong @waitinfuture to have a look

```\r\nbuild/sbt "clean;celeborn-openapi-client/generate"\r\n\r\nUsing /Users/fwang12/.sdkman/candidates/java/17.0.9.fx-zulu as default JAVA_HOME.\r\nNote, this will be overridden by -java-home if it is set.\r\n[info] welcome to sbt 1.9.4 (Azul Systems, Inc. Java 17.0.9)\r\n[info] loading settings for project celeborn-build from plugins.sbt ...\r\n[info] loading project definition from /Users/fwang12/todo/celeborn/project\r\n[info] loading settings for project celeborn from version.sbt ...\r\n[info] set current project to celeborn (in build file:/Users/fwang12/todo/celeborn/)\r\n[success] Total time: 0 s, completed Jul 27, 2024, 9:18:04 PM\r\n################################################################################\r\n# Thanks for using OpenAPI Generator.                                          #\r\n# Please consider donation to help us maintain this project 🙏                 #\r\n# https://opencollective.com/openapi_generator/donate                          #\r\n################################################################################\r\n[info] Successfully generated code to /Users/fwang12/todo/celeborn/openapi/openapi-client/target/worker/generated-sources/java\r\n################################################################################\r\n# Thanks for using OpenAPI Generator.                                          #\r\n# Please consider donation to help us maintain this project 🙏                 #\r\n# https://opencollective.com/openapi_generator/donate                          #\r\n################################################################################\r\n[info] Successfully generated code to /Users/fwang12/todo/celeborn/openapi/openapi-client/target/master/generated-sources/java\r\n[info] Cleaning up openapi generate output directory: openapi/openapi-client/src/main/java\r\n[info] Copying openapi generated master sources from openapi/openapi-client/target/master/generated-sources/java/src/main/java to openapi/openapi-client/src/main/java\r\n[info] Copying openapi generated worker sources from openapi/openapi-client/target/worker/generated-sources/java/src/main/java to openapi/openapi-client/src/main/java\r\n[success] Total time: 1 s, completed Jul 27, 2024, 9:18:05 PM\r\n\r\n```

this PR has been open for a while, will merge it tomorrow if there are no further comments.

However, for some generated files, the license is leak, likes `org.apache.celeborn.rest.v1.master.invoker.ServerConfiguration`\r\n\r\n`org.apache.celeborn.rest.v1.master.invoker.ServerVariable`

Raised a PR for the license miss issue: https://github.com/OpenAPITools/openapi-generator/pull/19273 

Thanks all, Merge to main(v0.6.0)

Maven:\r\n```\r\njar -tf openapi/openapi-client/target/celeborn-openapi-client_2.12-0.6.0-SNAPSHOT.jar|grep -v celeborn\r\norg/\r\norg/apache/\r\nMETA-INF/\r\nMETA-INF/maven/\r\nMETA-INF/maven/io.swagger/\r\nMETA-INF/maven/io.swagger/swagger-annotations/\r\nMETA-INF/maven/io.swagger/swagger-annotations/pom.xml\r\nMETA-INF/maven/io.swagger/swagger-annotations/pom.properties\r\nMETA-INF/maven/io.swagger/swagger-models/\r\nMETA-INF/maven/io.swagger/swagger-models/pom.xml\r\nMETA-INF/maven/io.swagger/swagger-models/pom.properties\r\nMETA-INF/services/\r\nMETA-INF/maven/org.openapitools/\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/pom.xml\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/pom.properties\r\nMETA-INF/maven/jakarta.annotation/\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/pom.properties\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/pom.xml\r\nMETA-INF/maven/jakarta.ws.rs/\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/pom.properties\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/pom.xml\r\nMETA-INF/maven/org.glassfish.hk2.external/\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/pom.xml\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.core/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/pom.xml\r\nMETA-INF/versions/\r\nMETA-INF/versions/11/\r\nMETA-INF/versions/11/org/\r\nMETA-INF/versions/11/org/apache/\r\nMETA-INF/maven/org.glassfish.jersey.ext/\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.media/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/pom.properties\r\nMETA-INF/versions/17/\r\nMETA-INF/versions/17/org/\r\nMETA-INF/versions/17/org/apache/\r\nMETA-INF/versions/19/\r\nMETA-INF/versions/19/org/\r\nMETA-INF/versions/19/org/apache/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/pom.xml\r\nMETA-INF/maven/org.jvnet.mimepull/\r\nMETA-INF/maven/org.jvnet.mimepull/mimepull/\r\nMETA-INF/maven/org.jvnet.mimepull/mimepull/pom.xml\r\nMETA-INF/maven/org.jvnet.mimepull/mimepull/pom.properties\r\n\r\n```\r\n\r\n\r\nSBT:\r\n```\r\njar -tf openapi/openapi-client/target/scala-2.12/celeborn-openapi-client_2.12-0.6.0-SNAPSHOT.jar|grep -v celeborn\r\nMETA-INF/\r\nMETA-INF/MANIFEST.MF\r\nMETA-INF/maven/\r\nMETA-INF/maven/com.fasterxml.jackson.core/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-annotations/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-core/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.core/jackson-databind/pom.xml\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/pom.properties\r\nMETA-INF/maven/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/pom.xml\r\nMETA-INF/maven/io.swagger/\r\nMETA-INF/maven/io.swagger/swagger-annotations/\r\nMETA-INF/maven/io.swagger/swagger-annotations/pom.properties\r\nMETA-INF/maven/io.swagger/swagger-annotations/pom.xml\r\nMETA-INF/maven/io.swagger/swagger-models/\r\nMETA-INF/maven/io.swagger/swagger-models/pom.properties\r\nMETA-INF/maven/io.swagger/swagger-models/pom.xml\r\nMETA-INF/maven/jakarta.annotation/\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/pom.properties\r\nMETA-INF/maven/jakarta.annotation/jakarta.annotation-api/pom.xml\r\nMETA-INF/maven/jakarta.ws.rs/\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/pom.properties\r\nMETA-INF/maven/jakarta.ws.rs/jakarta.ws.rs-api/pom.xml\r\nMETA-INF/maven/org.glassfish.hk2.external/\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/pom.properties\r\nMETA-INF/maven/org.glassfish.hk2.external/jakarta.inject/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.core/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-client/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.core/jersey-common/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.ext/\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.ext/jersey-entity-filtering/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.media/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-json-jackson/pom.xml\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/pom.properties\r\nMETA-INF/maven/org.glassfish.jersey.media/jersey-media-multipart/pom.xml\r\nMETA-INF/maven/org.openapitools/\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/pom.properties\r\nMETA-INF/maven/org.openapitools/jackson-databind-nullable/pom.xml\r\nMETA-INF/services/\r\nMETA-INF/versions/\r\nMETA-INF/versions/11/\r\nMETA-INF/versions/11/org/\r\nMETA-INF/versions/11/org/apache/\r\nMETA-INF/versions/17/\r\nMETA-INF/versions/17/org/\r\nMETA-INF/versions/17/org/apache/\r\nMETA-INF/versions/19/\r\nMETA-INF/versions/19/com/\r\nMETA-INF/versions/19/com/fasterxml/\r\nMETA-INF/versions/19/com/fasterxml/jackson/\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/doubleparser/\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/doubleparser/FastDoubleSwar.class\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/doubleparser/FastIntegerMath$UInt128.class\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/doubleparser/FastIntegerMath.class\r\norg/\r\norg/apache/\r\n```\r\n\r\nNote that: for sbt build, the `META-INF/versions/11/` and `META-INF/versions/17` are shaded, but `META-INF/versions/19` is not, not sure why, but I think we can ignore it.\r\n\r\n```\r\njar -tf openapi/openapi-client/target/scala-2.12/celeborn-openapi-client_2.12-0.6.0-SNAPSHOT.jar|grep FastDoubleSwar\r\nMETA-INF/versions/11/org/apache/celeborn/shaded/com/fasterxml/jackson/core/io/doubleparser/FastDoubleSwar.class\r\nMETA-INF/versions/17/org/apache/celeborn/shaded/com/fasterxml/jackson/core/io/doubleparser/FastDoubleSwar.class\r\nMETA-INF/versions/19/com/fasterxml/jackson/core/io/doubleparser/FastDoubleSwar.class\r\norg/apache/celeborn/shaded/com/fasterxml/jackson/core/io/doubleparser/FastDoubleSwar.class\r\n```\r\n

cc @pan3793 how do you think about?

favor to https://github.com/apache/celeborn/pull/2641

+CC @waitinfuture, @jiang13021 

Gentle ping on this @waitinfuture 

LGTM. However, you might want to link to this PR in your comment: https://github.com/apache/celeborn/pull/2609. The PR you are referring to in the comments is a test I wrote for another issue.

> However, you might want to link to this PR in your comment: https://github.com/apache/celeborn/pull/2609. The PR you are referring to in the comments is a test I wrote for another issue.\r\n\r\nThanks for pointing it out ! Updated

The test failure is not related to this change.\r\n+CC @waitinfuture, @ErikFang

+CC @RexXiong, @waitinfuture Please see the [fix here](https://github.com/apache/celeborn/pull/2639/commits/dcd8465dd98ee468de8579acf28a0234ce391fdd) for the determinate stage failure case we are discussing [here](https://github.com/apache/celeborn/pull/2609#discussion_r1697821776).\r\n\r\nI would prefer decoupling the two changes though - one specifically for barrier stage, and subsequently fix determinate stage issue.\r\nHave updated it to show what the final change would look like - but dont want to merge this PR though.\r\n\r\nOnce we are fine with the solution, I will split this into two.

Actually, let me think a bit more about the determinate stage case though ... there might be corner cases here that need handling (partial recomputation will have an issue on the read side perhaps).\r\nMaking the PR a draft.

I have reverted the changes for determinate stage handling here @RexXiong, @waitinfuture - and limiting it to barrier stage alone.\r\nLet us handle task reattempt for determinate stages in #2609.\r\n\r\n@jiang13021 , this is back to the same state you had reviewed and approved earlier at.

Gentle ping @waitinfuture, @RexXiong 

Thanks for the review @waitinfuture, have addressed comments.

Thanks! Merging to main(v0.6.0)/branch-0.5(v0.5.2)

ping @waitinfuture @RexXiong Please take a look. Thanks.

> ping @waitinfuture @RexXiong Please take a look. Thanks.\r\n\r\nsee comments at https://github.com/apache/celeborn/pull/2609

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @pan3793 

thanks, merged to main/0.6.0

@RexXiong  @AngersZhuuuu  PTAL.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@RexXiong  PTAL.

Thanks, could you create a jira ticket for this modify? @leixm 

> Thanks, could you create a jira ticket for this modify? @leixm\r\n\r\nSure, i updated title.

Thanks, Merge to main(v0.6.0) and branch-0.5(v0.5.1)

Ping @pan3793, @cxzl25.

Merged to main/0.5.1/0.4.2/0.3.3

cc @FMX @SteNicholas 

cc @waitinfuture 

cc @pan3793 

sorry for the delay here folks, got busy with some other work. I addressed the comments now, PTAL. \r\n@pan3793 @RexXiong @mridulm @waitinfuture 

seems like there are some failing tests, will work through those and ping again!

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

reopened in https://github.com/apache/celeborn/pull/2713 since this PR was stale and had conflicts

thanks, merged to main/0.6

+1 to an spi module.\nIdeally, keep dependencies for that module minimal as well (so that clients and server side can depend on the same)

ok, thanks for the comments， will address it

raised patch: https://github.com/apache/celeborn/pull/2644 

Ping @RexXiong, @pan3793, @cxzl25.

Ping @leixm, @RexXiong.

Ping @FMX, @RexXiong, @AngersZhuuuu.

LGTM.

Ping @RexXiong, @FMX.

You can come up with a new Jira ticket. CELEBORN-1292 focuses on removing application dimension resource consumption.

@FMX, I have updated commit message and pull request title with [CELEBORN-1501](https://issues.apache.org/jira/browse/CELEBORN-1501). PTAL.

An excess of applications may result in the number of metrics exceeding the default capacity of 4096, which can lead to the metrics becoming unwieldy. To address this, we should implement a limit to ensure that the number of metrics remains manageable and does not surpass a reasonable threshold. And for these application metrics, only the TOP[XX] are valuable.\r\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@RexXiong, I have added `celeborn.metrics.resourceConsumption.app.limit` to prevent the total number of metrics from exceeding the metrics capacity. PTAL. cc @FMX.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2630?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `85.71429%` with `1 line` in your changes missing coverage. Please review.\n> Project coverage is 33.25%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1698b56`)](https://app.codecov.io/gh/apache/celeborn/commit/1698b561f83c41b70e106b5205f84255b775a30a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 45 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2630?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2630?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2630?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2630      +/-   ##\n==========================================\n- Coverage   39.83%   33.25%   -6.58%     \n==========================================\n  Files         239      313      +74     \n  Lines       15026    18282    +3256     \n  Branches     1362     1678     +316     \n==========================================\n+ Hits         5984     6077      +93     \n- Misses       8711    11865    +3154     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2630?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, @RexXiong, I have updated the implementation for TopN application dimension resource consumption metrics of Worker. PTAL.

Hi @s0nskar ,  thanks for bringing this up, it looks good to me, I think this will extend usage of Celeborn :)

@s0nskar, any update?

Ping @turboFei, @RexXiong, @AngersZhuuuu.

Merged to main for 0.6

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Gentle ping on this @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2626?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 33.42%. Comparing base [(`e68e172`)](https://app.codecov.io/gh/apache/celeborn/commit/e68e1729d95616fb99227610ff2c1f31b31d123a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1a2d1ba`)](https://app.codecov.io/gh/apache/celeborn/commit/1a2d1bad32eb1c306db201fd4b6e278e55898839?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 303 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2626      +/-   ##\n==========================================\n- Coverage   40.01%   33.42%   -6.59%     \n==========================================\n  Files         234      337     +103     \n  Lines       14734    23846    +9112     \n  Branches     1332     2542    +1210     \n==========================================\n+ Hits         5894     7967    +2073     \n- Misses       8508    15487    +6979     \n- Partials      332      392      +60     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2626?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

The change looks fine to me - but I would prefer more eyes on it.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @onebox-li @cxzl25 @leixm 

Merge to main(v060) and branch-0.5(v053) and branch-0.4(v0.4.4)

This will happen because shuffle client implementation is singleton. 

> This will happen because shuffle client implementation is singleton.\r\n\r\nThe singleton pattern does not cause this problem. The core issue is that the task that fetches Filegroups was killed, and it placed invalid Filegroups in the reduceFileGroupsMap, which led to other tasks obtaining invalid Filegroups.

> > This will happen because shuffle client implementation is singleton.\r\n> \r\n> The singleton pattern does not cause this problem. The core issue is that the task that fetches Filegroups was killed, and it placed invalid Filegroups in the reduceFileGroupsMap, which led to other tasks obtaining invalid Filegroups.\r\n\r\nYour spark stage retried because of this config `spark.task.maxFailures`. The default value is 4, meaning the stage will retry if 4 tasks fail.

PR #2531 did change the semanteme of ShuffleClientImpl. Thanks. I provided a better implementation.

@FMX There are a few minor modifications. Review it again. Thanks.

`./dev/reformat` can fix the style issues.

Merge to main(v0.6.0) and branch-0.5(v0.5.1) and branch-0.4(v0.4.2)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2624?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.68%. Comparing base [(`e68e172`)](https://app.codecov.io/gh/apache/celeborn/commit/e68e1729d95616fb99227610ff2c1f31b31d123a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`4763511`)](https://app.codecov.io/gh/apache/celeborn/commit/4763511c2b88024de1b3e96705dc3192d2a7bb95?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 8 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2624      +/-   ##\n==========================================\n- Coverage   40.01%   39.68%   -0.32%     \n==========================================\n  Files         234      238       +4     \n  Lines       14734    14904     +170     \n  Branches     1332     1355      +23     \n==========================================\n+ Hits         5894     5913      +19     \n- Misses       8508     8660     +152     \n+ Partials      332      331       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2624?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @pan3793 @SteNicholas 

Thanks, merged to main for 0.6

cc @RexXiong 

@turboFei, the main merge should be merging the description of metrics to avoid adding new metric description twice. Thanks.

>  the main merge should be merging the description of metrics to avoid adding new metric description twice.\r\n\r\nDo you mean reserve these two docs at the same time?

> > the main merge should be merging the description of metrics to avoid adding new metric description twice.\r\n> \r\n> Do you mean reserve these two docs at the same time?\r\n\r\nI mean that you could move metric detail table of METRICS.md into monitoring.md to replace origin metric introduction.

> I mean that you could move metric detail table of METRICS.md into monitoring.md to replace origin metric introduction.\r\n\r\nOk, I will recheck it, thanks

got it, just merge the description, thanks

> I mean that you could move metric detail table of METRICS.md into monitoring.md to replace origin metric introduction.\r\n\r\nAddressed.

@turboFei, could the metrics in `monitoring.md` be organized in table?

> could the metrics in monitoring.md be organized in table?\r\n\r\nI tried to use table, but now for some items shown below, there is not description so far.\r\n\r\n```\r\n - push_server_usedHeapMemory \r\n    - push_server_usedDirectMemory\r\n    - push_server_numAllocations \r\n    - push_server_numTinyAllocations\r\n    - push_server_numSmallAllocations\r\n    - push_server_numNormalAllocations\r\n    - push_server_numHugeAllocations\r\n    - push_server_numDeallocations\r\n    - push_server_numTinyDeallocations\r\n    - push_server_numSmallDeallocations\r\n    - push_server_numNormalDeallocations\r\n    - push_server_numHugeDeallocations\r\n    - push_server_numActiveAllocations\r\n    - push_server_numActiveTinyAllocations\r\n    - push_server_numActiveSmallAllocations\r\n    - push_server_numActiveNormalAllocations\r\n    - push_server_numActiveHugeAllocations\r\n    - push_server_numActiveBytes\r\n    - replicate_server_usedHeapMemory\r\n    - replicate_server_usedDirectMemory\r\n    - replicate_server_numAllocations \r\n    - replicate_server_numTinyAllocations\r\n    - replicate_server_numSmallAllocations\r\n    - replicate_server_numNormalAllocations\r\n    - replicate_server_numHugeAllocations\r\n    - replicate_server_numDeallocations\r\n    - replicate_server_numTinyDeallocations\r\n    - replicate_server_numSmallDeallocations\r\n    - replicate_server_numNormalDeallocations\r\n    - replicate_server_numHugeDeallocations\r\n    - replicate_server_numActiveAllocations\r\n    - replicate_server_numActiveTinyAllocations\r\n    - replicate_server_numActiveSmallAllocations\r\n    - replicate_server_numActiveNormalAllocations\r\n    - replicate_server_numActiveHugeAllocations\r\n    - replicate_server_numActiveBytes\r\n    - fetch_server_usedHeapMemory\r\n    - fetch_server_usedDirectMemory\r\n    - fetch_server_numAllocations \r\n    - fetch_server_numTinyAllocations\r\n    - fetch_server_numSmallAllocations\r\n    - fetch_server_numNormalAllocations\r\n    - fetch_server_numHugeAllocations\r\n    - fetch_server_numDeallocations\r\n    - fetch_server_numTinyDeallocations\r\n    - fetch_server_numSmallDeallocations\r\n    - fetch_server_numNormalDeallocations\r\n    - fetch_server_numHugeDeallocations\r\n    - fetch_server_numActiveAllocations\r\n    - fetch_server_numActiveTinyAllocations\r\n    - fetch_server_numActiveSmallAllocations\r\n    - fetch_server_numActiveNormalAllocations\r\n    - fetch_server_numActiveHugeAllocations\r\n    - fetch_server_numActiveBytes\r\n```\r\n\r\nCan we followup it in another PR, add description for all items and organize them in table?\r\n

cc @SteNicholas I have re-organize the metrics with table.

Merged to main(v0.6.0).

thanks @SteNicholas  @cxzl25 @pan3793

cc @YutingWang98  @RexXiong @FMX @AngersZhuuuu @pan3793 @cfmcgrady @mridulm @SteNicholas 

I encountered the same bug on branch-0.4. conducting an internal job check, I can confirm that the issue has been resolved with this patch, with shuffle read row count now being consistent with shuffle write.\r\n\r\nThank you for the fix.\r\n

Thanks for reviewing, merging to main(v0.6.0), branch-0.5(v0.5.1), branch-0.4(v0.4.2). The community will release bugfix versions for 0.4 and 0.5 soon.

Also validated on the same job previously with data loss using this patch, and no longer see data loss. Thanks for fixing it!

> 3\\. `celeborn.client.shuffle.batchHandleChangePartition.enabled` is true, which means when hard split happens, `LifecycleManager` will commit the splits before the stage finishes\r\nDo you mean celeborn.client.shuffle.batchHandleCommitPartition.enabled?\r\n

> celeborn.client.shuffle.batchHandleChangePartition.enabled\r\n\r\nYes, thanks for the correction. But after rethinking, the bug is not relevant to whether this config is on or off.

cc @pan3793 @cfmcgrady 

Merged to main/0.5.1

+CC @RexXiong, @FMX, @SteNicholas, @venkata91

Note to reviewers, the impl is an extension of a POC we did for supporting Flink 1.16 - and is largely based on existing 1.15 and 1.17 codebase.

@mridulm, could you run some testing Flink batch job with the support of Flink 1.16?

@SteNicholas This patch is based on our internal 0.4 version which was used to internally run a Flink Batch job, shuffling about ~450 tb in the application.\n\nThe integration tests should run 1.16 as well, but I will additionally run a few tests against main branch later this weekend.\n\nThanks for taking a look !

Ah ! @RexXiong had indicated in the past that it was due to lack of sufficient adoption/interest - but I will let him clarify.\r\n\r\n

@mridulm Thanks for adding support for Flink-1.16 in Celeborn. For my understanding, were there any Flink API level changes or behavior changes b/w Flink-1.16 and Flink-1.17 (or Flink-1.15)?

Thanks for the review @venkata91 !\r\nNote that I only made changes when there are issues (like compilation, logic, etc) - else the classes are pretty much what is existing in 1.15 or 1.17 ... 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2619?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.69%. Comparing base [(`e68e172`)](https://app.codecov.io/gh/apache/celeborn/commit/e68e1729d95616fb99227610ff2c1f31b31d123a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d222375`)](https://app.codecov.io/gh/apache/celeborn/commit/d222375307d250035a9e0284dd07975a87deb9a6?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 8 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2619      +/-   ##\n==========================================\n- Coverage   40.01%   39.69%   -0.31%     \n==========================================\n  Files         234      238       +4     \n  Lines       14734    14904     +170     \n  Branches     1332     1355      +23     \n==========================================\n+ Hits         5894     5915      +21     \n- Misses       8508     8659     +151     \n+ Partials      332      330       -2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2619?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks @mridulm , Merge to main(v0.6.0)

cc @pan3793 @SteNicholas @RexXiong 

API => RESTful API

> API => RESTful API\r\n\r\nDone.

Merged to main(v0.6.0).

thanks @SteNicholas @pan3793 @cxzl25 

cc @pan3793 

cc @cfmcgrady for final check, as we got some education on this area previously.

Thanks, merged to main

cc @SteNicholas @RexXiong @pan3793 

unrelated test failure

LGTM.

Merged to main/0.5.1

just noticed that CELEBORN-1317 has released in 0.5.0, for the released ticket, please create a new one.

thanks, created CELEBORN-1503 for this PR.

cc @pan3793 

```\r\nMETA-INF/services/jakarta.validation.valueextraction.ValueExtractor\r\nMETA-INF/services/javax.validation.valueextraction.ValueExtractor\r\n```\r\n\r\nare they compile/runtime deps? why ServicesResourceTransformer does not cover them?

> META-INF/services/jakarta.validation.valueextraction.ValueExtractor\r\n>   META-INF/services/javax.validation.valueextraction.ValueExtractor \r\n\r\nLooks like service loader interfaces

rebased the code, cc @pan3793 

> > META-INF/services/jakarta.validation.valueextraction.ValueExtractor\r\n> > META-INF/services/javax.validation.valueextraction.ValueExtractor\r\n> \r\n> Looks like service loader interfaces\r\n\r\nI think this is leaked. If you take a look at Jackson service loader interface, they should be relocated by ServicesResourceTransformer

thanks, will check it

Looks fine now.\r\n\r\nfor mvn:\r\n```\r\njar -tf openapi/openapi-client/target/celeborn-openapi-client_2.12-0.6.0-SNAPSHOT.jar|grep ValueExtractor\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableJakartaValueExtractor.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractor.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractorHelper$ValueSetter.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractorHelper.class\r\nMETA-INF/services/org.apache.celeborn.shaded.jakarta.validation.valueextraction.ValueExtractor\r\nMETA-INF/services/org.apache.celeborn.shaded.javax.validation.valueextraction.ValueExtractor\r\n\r\n```\r\n\r\nsbt:\r\n```\r\n(base) ➜  celeborn git:(openapi_client_shade) jar -tf openapi/openapi-client/target/scala-2.12/celeborn-openapi-client_2.12-0.6.0-SNAPSHOT.jar|grep ValueExtractor\r\nMETA-INF/services/org.apache.celeborn.shaded.jakarta.validation.valueextraction.ValueExtractor\r\nMETA-INF/services/org.apache.celeborn.shaded.javax.validation.valueextraction.ValueExtractor\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableJakartaValueExtractor.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractor.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractorHelper$ValueSetter.class\r\norg/apache/celeborn/shaded/org/openapitools/jackson/nullable/JsonNullableValueExtractorHelper.class\r\n\r\n```

Thanks, merge to main

cc @RexXiong @FMX 

Merged into main(v0.6.0) and branch-0.5(v0.5.1).

> Merged into main(v0.6.0) and branch-0.5(v0.5.1).\r\n\r\ncant find in branch-0.5, is there something wrong?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

> there are some jobs still lost a few records during shuffle read\r\n\r\nCould you please provide more details on how to reproduce this bug?

I think the bug is related with #2134 , please see the detailed description in #2621 @YutingWang98 @cfmcgrady 

sorry about the late reply @waitinfuture @cfmcgrady, yes, no longer seeing the data loss after applying https://github.com/apache/celeborn/pull/2621, closing this PR. And thanks for making the fix

Good to know, thanks for verifying! @YutingWang98 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @AngersZhuuuu 

Once #2609 is merged, is this still relevant ?

Thanks for the reminder @mridulm, seems not needed

Ping @AngersZhuuuu, @leixm, @RexXiong, @FMX.

I think this PR should test rolling upgrade scenerio.

LGTM

@FMX, I have tested the rolling upgrade scenerio in test environment as follows:\r\n![image](https://github.com/apache/celeborn/assets/10048174/b40c7bcd-6d10-4fc0-9d0d-537578150abe)\r\n![image](https://github.com/apache/celeborn/assets/10048174/cf4310c8-530c-444e-9983-eabde6ebdffb)\r\nThe result of rolling upgrade is that there is no compatibility problem between the communication of 3.0.1 ratis server and 3.1.0 ratis server.\r\n![image](https://github.com/apache/celeborn/assets/10048174/61b22ade-9e70-441f-a40b-7fb54679ac79)\r\nMeanwhile, I have run a test application successfully based on the above situation of master:\r\n![image](https://github.com/apache/celeborn/assets/10048174/3c082717-2105-4158-ad38-e7011b8516ce)\r\n![image](https://github.com/apache/celeborn/assets/10048174/c3498a11-3af0-4990-9f6e-9f0562c9014c)\r\nPTAL.

Merge to main(v0.6.0)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2609?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `83.33333%` with `1 line` in your changes missing coverage. Please review.\n> Project coverage is 33.32%. Comparing base [(`ea6617c`)](https://app.codecov.io/gh/apache/celeborn/commit/ea6617c0d532c2d1e73b8673db6e0be564a763a3?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`b0ac8a7`)](https://app.codecov.io/gh/apache/celeborn/commit/b0ac8a7490d80300cd0adf33638cfd71d022b541?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 22 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2609?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2609?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 83.34% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2609?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2609      +/-   ##\n==========================================\n- Coverage   39.83%   33.32%   -6.50%     \n==========================================\n  Files         239      310      +71     \n  Lines       15026    18219    +3193     \n  Branches     1362     1673     +311     \n==========================================\n+ Hits         5984     6070      +86     \n- Misses       8711    11809    +3098     \n- Partials      331      340       +9     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2609?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Looks reasonable to me.\r\n> \r\n> +CC @waitinfuture and @RexXiong as well.\r\n> \r\n> My only hesitation is whether we can generalize how we are handling `testRandomPushForStageRerun` ... it is hyper specific to that test.\r\n\r\nAgree. IMO we should eliminate this test from the standard read/write code. We only need to ensure that a different attempt ID is used for shuffle writes, as Distinguishing the output data with different attempt IDs aligns with our previous approach.  

https://docs.google.com/document/d/1Qe80fCS96TI_C-_cQiJ6dLUXmIOdsiQhZDaMpl3ssiM/edit?usp=sharing   cc @RexXiong  @AngersZhuuuu  Can you help review design doc?

Can you open up access to the doc @leixm  ? Thanks

> Can you open up access to the doc @leixm ? Thanks\r\n\r\nSorry, I have updated the doc access, can you access now?

Flaky test.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Ping @FMX, @kerwin-zk, @mridulm.

+CC @FMX, @SteNicholas 

The previous PR #2564 was addressing server side issues.\r\nThe issue fixed in current PR was identified when we disabled IPv4 at server side - resulting in only IPv6 addresses being reported : and so fails during deserialization at client side.\r\n\r\nNote that internally we are using 0.4 + backports - and in our deployment we have not see any further IPv6 related issues.

Thanks @FMX  !

cc @pan3793 

thanks for review and suggestions @pan3793 

Thanks, merged to main

+CC @RexXiong 

Merged to branch-0.5, thanks @SteNicholas !

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2601?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `46.66667%` with `16 lines` in your changes missing coverage. Please review.\n> Project coverage is 40.06%. Comparing base [(`532fab8`)](https://app.codecov.io/gh/apache/celeborn/commit/532fab8c9b6fa3dcbb0f52d92281f6c74a9eae1d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1d0bd34`)](https://app.codecov.io/gh/apache/celeborn/commit/1d0bd34a125aa07e13c3a7cacfed8208da20b0f1?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2601?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2FHttpService.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [11 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/http/api/ApiRequestContext.scala](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2FApiRequestContext.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQXBpUmVxdWVzdENvbnRleHQuc2NhbGE=) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...mon/http/authentication/AuthenticationFilter.scala](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FAuthenticationFilter.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9BdXRoZW50aWNhdGlvbkZpbHRlci5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2601?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2601      +/-   ##\n==========================================\n+ Coverage   40.01%   40.06%   +0.06%     \n==========================================\n  Files         233      233              \n  Lines       14679    14708      +29     \n  Branches     1330     1332       +2     \n==========================================\n+ Hits         5873     5892      +19     \n- Misses       8473     8484      +11     \n+ Partials      333      332       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2601?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

waiting for #2599

cc @pan3793 @RexXiong @SteNicholas 

Thanks, Merge to main(v0.6.0)

#2555 is handling a bunch of these (all ?)\r\nCan you check there @venkata91 

> #2555 is handling a bunch of these (all ?) Can you check there @venkata91\r\n\r\nAh looks like I missed this one. Thanks for pointing this out. The above PR seems to subsume the changes made here as well. Will close this one in favor of the https://github.com/apache/celeborn/pull/2555.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2599?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1743 lines` in your changes missing coverage. Please review.\n> Project coverage is 35.81%. Comparing base [(`d0563ea`)](https://app.codecov.io/gh/apache/celeborn/commit/d0563ea1c09c2f3ae51648021d5a8fedae50ee4f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`aaa58d6`)](https://app.codecov.io/gh/apache/celeborn/commit/aaa58d65f556b3ee5647ca3d75f3446b650bd305?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2599?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...erver/common/http/v1/model/WorkerInfoResponse.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FWorkerInfoResponse.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1dvcmtlckluZm9SZXNwb25zZS5qYXZh) | 0.00% | [144 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/server/common/http/v1/model/WorkerData.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FWorkerData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1dvcmtlckRhdGEuamF2YQ==) | 0.00% | [123 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...n/server/common/http/v1/model/WorkersResponse.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FWorkersResponse.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1dvcmtlcnNSZXNwb25zZS5qYXZh) | 0.00% | [87 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...er/common/http/v1/model/PartitionLocationData.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FPartitionLocationData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1BhcnRpdGlvbkxvY2F0aW9uRGF0YS5qYXZh) | 0.00% | [84 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/http/v1/JSON.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2FJSON.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL0pTT04uamF2YQ==) | 0.00% | [82 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/server/common/http/v1/model/ThreadStack.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FThreadStack.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1RocmVhZFN0YWNrLmphdmE=) | 0.00% | [74 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/server/common/http/api/v1/ApiUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2FApiUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvdjEvQXBpVXRpbHMuc2NhbGE=) | 0.00% | [63 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/http/v1/model/DynamicConfig.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FDynamicConfig.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL0R5bmFtaWNDb25maWcuamF2YQ==) | 0.00% | [54 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...r/common/http/v1/model/SendWorkerEventRequest.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FSendWorkerEventRequest.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL1NlbmRXb3JrZXJFdmVudFJlcXVlc3QuamF2YQ==) | 0.00% | [51 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../server/common/http/v1/model/MasterCommitData.java](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fv1%2Fmodel%2FMasterCommitData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL3YxL21vZGVsL01hc3RlckNvbW1pdERhdGEuamF2YQ==) | 0.00% | [50 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [35 more](https://app.codecov.io/gh/apache/celeborn/pull/2599?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2599      +/-   ##\n==========================================\n- Coverage   39.98%   35.81%   -4.17%     \n==========================================\n  Files         233      273      +40     \n  Lines       14695    16412    +1717     \n  Branches     1338     1500     +162     \n==========================================\n+ Hits         5875     5876       +1     \n- Misses       8488    10205    +1717     \n+ Partials      332      331       -1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2599?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @pan3793 @SteNicholas @RexXiong 

@turboFei Hi, this PR has too many codes to review. Is there a solution to remove the auto-generated codes? 

> @turboFei Hi, this PR has too many codes to review. Is there a solution to remove the auto-generated codes?\r\n\r\nChecking.\r\n

> Is there a solution to remove the auto-generated codes?\r\n\r\nAddressed.\r\n\r\nTo prevent copy the auto-generated codes, we have to use [sbt-openapi-generator](https://github.com/OpenAPITools/sbt-openapi-generator) [5.0.1](https://github.com/OpenAPITools/sbt-openapi-generator/releases/tag/v5.0.1), which is the only version supports JDK8 and outdated, FYI: https://github.com/OpenAPITools/sbt-openapi-generator/releases\r\n\r\nTo reduce the efforts to maintain both maven and sbt plugin, I spilt the openapi module into two modules:\r\n- openapi-client: independent and not depended by any module, and only supports to build with maven plugin\r\n- openapi-model: depended by celeborn-service module and supports to build both with maven and sbt plugin\r\n\r\n\r\nAnd due to openapi-generator 5.0.1 does not support `<annotationLibrary>none</annotationLibrary>`, so we have to use introduce swagger1 dependencies.\r\n<img width="1000" alt="image" src="https://github.com/apache/celeborn/assets/6757692/786ff67b-1d42-4fbf-a7b7-5425c890649d">\r\nFYI:\r\nhttps://openapi-generator.tech/docs/generators/java\r\n\r\nWe can remove swagger1.x dependencies after dropping the support for JDK8 and upgrade the openapi-generator to 7.x+ in the future.

Hi @FMX I have removed the generated code.\r\n<img width="873" alt="image" src="https://github.com/apache/celeborn/assets/6757692/151c20c7-1125-469b-9c45-5e0ce9ab5ccd">\r\n\r\nalso gentle ping @pan3793 

I setup the openapi-client module for sbt as well.\r\n\r\nThere is no gap between maven and sbt now.\r\n\r\n\r\n```\r\n./build/sbt "celeborn-openapi-client/package"\r\nUsing /Users/fwang12/.sdkman/candidates/java/17.0.9.fx-zulu as default JAVA_HOME.\r\nNote, this will be overridden by -java-home if it is set.\r\n[info] welcome to sbt 1.9.4 (Azul Systems, Inc. Java 17.0.9)\r\n[info] loading settings for project celeborn-build from plugins.sbt ...\r\n[info] loading project definition from /Users/fwang12/todo/celeborn/project\r\n[info] loading settings for project celeborn from version.sbt ...\r\n[info] resolving key references (11544 settings) ...\r\n[info] set current project to celeborn (in build file:/Users/fwang12/todo/celeborn/)\r\n[info] generate META-INF/LICENSE for project celeborn-openapi-client\r\n[info] generate META-INF/NOTICE for project celeborn-openapi-client\r\nCleaning up openapi client output directory: openapi/openapi-client/target/generated-sources/java\r\n[info] generate META-INF/LICENSE for project celeborn-openapi-worker-client\r\n[info] generate META-INF/LICENSE for project celeborn-openapi-master-client\r\n[info] generate META-INF/NOTICE for project celeborn-openapi-worker-client\r\n[info] generate META-INF/NOTICE for project celeborn-openapi-master-client\r\n################################################################################\r\n# Thanks for using OpenAPI Generator.                                          #\r\n# Please consider donation to help us maintain this project 🙏                 #\r\n# https://opencollective.com/openapi_generator/donate                          #\r\n################################################################################\r\n[info] Successfully generated code to /Users/fwang12/todo/celeborn/openapi/openapi-client/target/generated-sources/java\r\n################################################################################\r\n# Thanks for using OpenAPI Generator.                                          #\r\n# Please consider donation to help us maintain this project 🙏                 #\r\n# https://opencollective.com/openapi_generator/donate                          #\r\n################################################################################\r\n[info] Successfully generated code to /Users/fwang12/todo/celeborn/openapi/openapi-client/target/generated-sources/java\r\n[info] compiling 88 Java sources to /Users/fwang12/todo/celeborn/openapi/openapi-client/target/scala-2.12/classes ...\r\n[info] /Users/fwang12/todo/celeborn/openapi/openapi-client/target/generated-sources/java/src/main/java/org/apache/celeborn/rest/v1/master/invoker/JSON.java: Some input files use or override a deprecated API.\r\n[info] /Users/fwang12/todo/celeborn/openapi/openapi-client/target/generated-sources/java/src/main/java/org/apache/celeborn/rest/v1/master/invoker/JSON.java: Recompile with -Xlint:deprecation for details.\r\n[success] Total time: 2 s, completed Jul 8, 2024, 10:53:12 PM\r\n```\r\n

also cc @akpatnam25, I saw you are working on the CIP 7: Celeborn CLI.

cc @FMX @pan3793 , I have self reviewed for several times, it should be fine now.

Overall LGTM, the API audit can be done during the CLI developing phase

Thanks, merged to main for 0.6

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.1)

Merge to main(v0.6.0)

+CC @otterc, @SteNicholas, @RexXiong 

+CC @venkata91 

> +CC @venkata91\r\n\r\nThanks for tagging me here. Will review the PR shortly.

Thanks @venkata91, @RexXiong ... have addressed the comments.

Thanks @venkata91, @RexXiong !

Let me backport this to 0.5 branch as well @RexXiong 

Thanks, merge to main(v0.6.0)

PIng @waitinfuture, @kerwin-zk.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2594?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.00%. Comparing base [(`d0563ea`)](https://app.codecov.io/gh/apache/celeborn/commit/d0563ea1c09c2f3ae51648021d5a8fedae50ee4f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`4d30de1`)](https://app.codecov.io/gh/apache/celeborn/commit/4d30de1552ec8ebbc0cda923932a9b5b1ac836e0?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n> :exclamation: **Current head 4d30de1 differs from pull request most recent head 97fb4ff**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit 97fb4ff to get more accurate results.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2594      +/-   ##\n==========================================\n+ Coverage   39.98%   40.00%   +0.02%     \n==========================================\n  Files         233      233              \n  Lines       14695    14695              \n  Branches     1338     1338              \n==========================================\n+ Hits         5875     5877       +2     \n+ Misses       8488     8486       -2     \n  Partials      332      332              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2594?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Except for a nit.

@FMX, how performance improvement could this pull request get?

Merge to main(0.6.0) and branch-0.5(0.5.1)

DataPushQueue.takePushTasks will also invoke client.getPartitionLocation(shuffleId, numMappers, numPartitions), which can result in exceptions being lost. Therefore, would it be better to directly throw an IOException from the getPartitionLocation method?

> DataPushQueue.takePushTasks will also invoke client.getPartitionLocation(shuffleId, numMappers, numPartitions), which can result in exceptions being lost. Therefore, would it be better to directly throw an IOException from the getPartitionLocation method?\r\n\r\nAgree, will throw an IOException from the getPartitionLocation method.

Thanks, merge to main(v0.6.0) and branch-0.5(v0.5.1)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2588?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `590 lines` in your changes missing coverage. Please review.\n> Project coverage is 38.46%. Comparing base [(`5dfbfd2`)](https://app.codecov.io/gh/apache/celeborn/commit/5dfbfd28406557036e2ba640ce1b2bab532f4be7?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`5e5d9f3`)](https://app.codecov.io/gh/apache/celeborn/commit/5e5d9f33409edcd69c336ca8adc573f13ec39047?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2588?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/server/common/http/api/v1/dto/WorkerData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FWorkerData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vV29ya2VyRGF0YS5qYXZh) | 0.00% | [107 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/server/common/http/api/v1/ApiUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2FApiUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvdjEvQXBpVXRpbHMuc2NhbGE=) | 0.00% | [43 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/server/common/http/api/v1/ConfResource.scala](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2FConfResource.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvdjEvQ29uZlJlc291cmNlLnNjYWxh) | 0.00% | [42 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/http/api/v1/dto/PartitionLocationData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FPartitionLocationData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vUGFydGl0aW9uTG9jYXRpb25EYXRhLmphdmE=) | 0.00% | [38 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...erver/common/http/api/v1/dto/MasterCommitData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FMasterCommitData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vTWFzdGVyQ29tbWl0RGF0YS5qYXZh) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/server/common/http/api/v1/dto/WorkerId.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FWorkerId.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vV29ya2VySWQuamF2YQ==) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...mmon/http/api/v1/dto/AppDiskUsageSnapshotData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FAppDiskUsageSnapshotData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vQXBwRGlza1VzYWdlU25hcHNob3REYXRhLmphdmE=) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...n/server/common/http/api/v1/dto/DynamicConfig.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FDynamicConfig.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vRHluYW1pY0NvbmZpZy5qYXZh) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...server/common/http/api/v1/dto/MasterGroupData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FMasterGroupData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vTWFzdGVyR3JvdXBEYXRhLmphdmE=) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...n/http/api/v1/dto/WorkerPartitionLocationData.java](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fapi%2Fv1%2Fdto%2FWorkerPartitionLocationData.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9odHRwL2FwaS92MS9kdG8vV29ya2VyUGFydGl0aW9uTG9jYXRpb25EYXRhLmphdmE=) | 0.00% | [21 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [17 more](https://app.codecov.io/gh/apache/celeborn/pull/2588?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2588      +/-   ##\n==========================================\n- Coverage   40.03%   38.46%   -1.56%     \n==========================================\n  Files         233      255      +22     \n  Lines       14685    15275     +590     \n  Branches     1337     1429      +92     \n==========================================\n- Hits         5877     5874       -3     \n- Misses       8476     9069     +593     \n  Partials      332      332              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2588?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @SteNicholas @pan3793 

IMO, you are better to create new CIP for this refine. The REST API refine changes the public interfaces, which should give a CIP to discuss.

> IMO, you are better to create new CIP for this refine. The REST API refine changes the public interfaces, which should give a CIP to discuss.\r\n\r\nOk.\r\n\r\n

cc @SteNicholas 

Merged to main(0.6.0) and branch-0.5(0.5.1).

LGTM. Merged to main(0.6.0), branch-0.5(0.5.1) and branch-0.4(0.4.2).

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2585?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `85.71429%` with `1 line` in your changes missing coverage. Please review.\n> Project coverage is 40.04%. Comparing base [(`0298cfb`)](https://app.codecov.io/gh/apache/celeborn/commit/0298cfb3559c0a6345b743840c40582f5ceea4d5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`fc3767a`)](https://app.codecov.io/gh/apache/celeborn/commit/fc3767ad6326a27cf13bf564a0e08248211fdb93?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 20 commits behind head on main.\n\n> :exclamation: **Current head fc3767a differs from pull request most recent head b48659c**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit b48659c to get more accurate results.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2585?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/celeborn/pull/2585?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2FTransportContext.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | 66.67% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2585?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2585      +/-   ##\n==========================================\n- Coverage   40.49%   40.04%   -0.45%     \n==========================================\n  Files         222      233      +11     \n  Lines       14289    14687     +398     \n  Branches     1291     1337      +46     \n==========================================\n+ Hits         5785     5880      +95     \n- Misses       8173     8475     +302     \n- Partials      331      332       +1     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2585?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @zwangsheng, @FMX.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

could you rebase the code for `web` service openapi config?\r\n\r\nhttps://github.com/apache/celeborn/blob/d698a69edc51f783d20e4726039aa849136dfb6a/service/src/main/scala/org/apache/celeborn/server/common/http/api/OpenAPIConfig.scala#L31-L39

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

![WechatIMG89](https://github.com/apache/celeborn/assets/31424839/820153d4-acc4-4984-b352-1798e96cadd3)\r\n

@AngersZhuuuu  @pan3793  @waitinfuture  PTAL.

Found through stress testing, we reduced the CPU usage of produceBytes from **25.07% to 16.58%**\r\nBefore this PR\r\n![kk1](https://github.com/apache/celeborn/assets/31424839/6eebe7e9-69a8-44f8-8800-7147644cdcf5)\r\n\r\nAfter this PR\r\n![kk2](https://github.com/apache/celeborn/assets/31424839/b00349b2-552d-44de-a48a-3984e16acdac)\r\n

Pls update pr title and pr desc

@AngersZhuuuu  @waitinfuture  PTAL.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2583?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.98%. Comparing base [(`0298cfb`)](https://app.codecov.io/gh/apache/celeborn/commit/0298cfb3559c0a6345b743840c40582f5ceea4d5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`60b660d`)](https://app.codecov.io/gh/apache/celeborn/commit/60b660da9aa5cc7305982544a2960c32a2580a02?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 22 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2583      +/-   ##\n==========================================\n- Coverage   40.49%   39.98%   -0.50%     \n==========================================\n  Files         222      233      +11     \n  Lines       14289    14695     +406     \n  Branches     1291     1338      +47     \n==========================================\n+ Hits         5785     5875      +90     \n- Misses       8173     8487     +314     \n- Partials      331      333       +2     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2583?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.6.0) and branch-0.5(v0.5.1)

Thank you for you review. @AngersZhuuuu  @RexXiong 

Ping @turboFei, @RexXiong, @pan3793.

Ping @FMX, @waitinfuture, @AngersZhuuuu, @RexXiong.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

Hi @zhaohehuhu, there is some tools that can check codes PR locally.\r\nRun `./dev/reformat` could check code style and compilation errors.

@zhaohehuhu, please add comment for the test result.

`UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite`\r\nThis could update the docs as you have changed CelebornConf.

> Hi @zhaohehuhu, there is some tools that can check codes PR locally. Run `./dev/reformat` could check code style and compilation errors.\r\nDone. Thanks.\r\n

> `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` This could update the docs as you have changed CelebornConf.\r\n\r\nDone. Thanks.

> @zhaohehuhu, please add comment for the test result.\r\n\r\nGot it. Thanks.

> @SteNicholas , please add comment for the test result.\r\n\r\n<img width="920" alt="Screenshot 2024-06-20 at 16 30 29" src="https://github.com/apache/celeborn/assets/32693629/d5da5354-54b2-45ac-a430-3dcd8cf5a26e">\r\nHi bro, this PR is only part of S3 storage layer feature, so I can\

@zhaohehuhu Thanks for your effort. The review will be done within this week.\r\nBTW,I noticed the binary package of Celeborn grows up to 468MB and there is a single jar "aws-java-sdk-bundle-1.12.367.jar" which is 310 MB.\r\nIs there any solution to reduce the binary package size?

You can fix the style issues and license issues using the following commands\r\n\r\n```bash\r\n./dev/reformat\r\nbuild/mvn org.apache.rat:apache-rat-plugin:check -Pgoogle-mirror,spark-3.3\r\n```

> crazy\r\n\r\ngot it.

> You can fix the style issues and license issues using the following commands\r\n> \r\n> ```shell\r\n> ./dev/reformat\r\n> build/mvn org.apache.rat:apache-rat-plugin:check -Pgoogle-mirror,spark-3.3\r\n> ```\r\nOK. Thanks\r\n

Merged into main(v0.6.0)

\r\nWe have a soft link\r\n```\r\n/mnt/ssd/0 -> /mnt/ssd/3\r\n```\r\n\r\n\r\nworker conf\r\n```\r\nceleborn.worker.storage.dirs                    /mnt/ssd/0,/mnt/ssd/1,/mnt/ssd/2\r\n```\r\n\r\n\r\ndf -h\r\n```\r\n/dev/sda3       1.1T  568G  486G   54% /\r\n/dev/sdb        3.5T   92G  3.2T    3% /mnt/ssd/1\r\n/dev/sdc        3.5T  110G  3.2T    4% /mnt/ssd/2\r\n/dev/sdd        3.5T   88G  3.2T    3% /mnt/ssd/3\r\n```\r\n\r\nls /sys/block/\r\n```\r\nsda  sdb  sdc  sdd\r\n```\r\n\r\nStorageManager#diskInfos \r\n```\r\n/mnt/ssd/3=DiskInfo(maxSlots: 0, committed shuffles 0, running applications 0, shuffleAllocations: Map(), mountPoint: /mnt/ssd/3, usableSpace: 0.0 B, avgFlushTime: 0 ns, avgFetchTime: 0 ns, activeSlots: 0, storageType: HDD) status: HEALTHY dirs /mnt/ssd/0/celeborn-worker/shuffle_data\r\n```\r\n\r\nWe should keep dirs and mount point consistent, so above dirs should be /mnt/ssd/3/celeborn-worker/shuffle_data

ping @waitinfuture @FMX 

Ping @FMX, @AngersZhuuuu.

Merged into main(v0.6.0), branch-0.5(v0.5.0), branch-0.4(v0.4.2).

please take a review @FMX 

Ping @FMX, @RexXiong, @leixm.

the `Integration Test` is green.\r\n\r\nThanks, merging to branch-0.4(v0.4.2).

thanks, merging to branch-0.4(v0.4.2).

cc @waitinfuture @mridulm @FMX @SteNicholas please take a look. thanks!

Just curious, how do you set up a full IPv6 test environment? Can it be achieved in ASF Infra or GitHub Actions?

We are testing to move to IPv6 internally, and so this came up @pan3793 :-)

@mridulm I was asked to support IPv6 in other OSS projects, while I have neither experience nor a test environment for IPv6. I checked the GitHub Actions docs, and have not found such a configuration.\r\n\r\n[Docker docs](https://docs.docker.com/config/daemon/ipv6/) say\r\n\r\n> IPv6 is only supported on Docker daemons running on Linux hosts.\r\n\r\nThis might be sufficient to set up an IPv6 playground :)\r\n

> We are testing to move to IPv6 internally, and so this came up @pan3793 :-)\r\n\r\n@akpatnam25, @mridulm, could you provide the IPv6 internal test results in the description of this pull request?

Thanks for the reviews everyone!!

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2563?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 47.14%. Comparing base [(`9a47109`)](https://app.codecov.io/gh/apache/celeborn/commit/9a47109f0c7110c0f77e6ae98eff45f17db2ec8b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`44f7797`)](https://app.codecov.io/gh/apache/celeborn/commit/44f7797791b3b3ccb638aac8736f4ee441d2bb2c?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 18 commits behind head on branch-0.4.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2563      +/-   ##\n==============================================\n+ Coverage       47.08%   47.14%   +0.07%     \n==============================================\n  Files             185      185              \n  Lines           11936    11965      +29     \n  Branches         1055     1060       +5     \n==============================================\n+ Hits             5619     5640      +21     \n- Misses           5943     5947       +4     \n- Partials          374      378       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2563?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Merged to main(v0.6.0) and branch-0.5(v0.5.1).

Oops, thanks for the fix.

Ping @RexXiong, @FMX.

Merged into main(v0.6.0) and branch-0.5(v0.5.1).

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2558?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.49%. Comparing base [(`0298cfb`)](https://app.codecov.io/gh/apache/celeborn/commit/0298cfb3559c0a6345b743840c40582f5ceea4d5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1ac821e`)](https://app.codecov.io/gh/apache/celeborn/commit/1ac821e0419b08269001fe13fc4062bd35c37b36?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n> :exclamation: **Current head 1ac821e differs from pull request most recent head ec5fad6**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit ec5fad6 to get more accurate results.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2558      +/-   ##\n==========================================\n+ Coverage   40.49%   40.49%   +0.01%     \n==========================================\n  Files         222      222              \n  Lines       14289    14286       -3     \n  Branches     1291     1290       -1     \n==========================================\n- Hits         5785     5784       -1     \n+ Misses       8173     8172       -1     \n+ Partials      331      330       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2558?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @FMX.

ping @pan3793 . How about now?

Ping @AngersZhuuuu, @pan3793, @cxzl25, @mridulm, @FMX, @RexXiong.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@SteNicholas Looks like this PR is marked stale without any activity. Are you still actively working on this one?

@mridulm, @venkata91, @FMX, I have rebased main branch and addressed above comments in https://github.com/apache/celeborn/pull/2555/commits/d6acd18fca928bc02987aec79c989dc9fa4420c9. PTAL.

Thanks for the updates @SteNicholas ! Took another pass through it ... just a few comments outstanding from my end.

@mridulm, I have addressed your comments and pushed commit https://github.com/apache/celeborn/pull/2555/commits/e24964dbc0af12ba9b374397ac1f6ea2aa6067c1 with adding `@SuppressWarnings` annotation. PTAL.\r\n@venkata91, any other comments for this pull request?

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2555?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.72%. Comparing base [(`04c4b85`)](https://app.codecov.io/gh/apache/celeborn/commit/04c4b857a1b4e4676f1fa4fda4449cd92b1a2e17?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e24964d`)](https://app.codecov.io/gh/apache/celeborn/commit/e24964dbc0af12ba9b374397ac1f6ea2aa6067c1?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 11 commits behind head on main.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2555      +/-   ##\n==========================================\n- Coverage   39.72%   39.72%   -0.00%     \n==========================================\n  Files         238      238              \n  Lines       14918    14918              \n  Branches     1355     1355              \n==========================================\n- Hits         5925     5924       -1     \n- Misses       8663     8664       +1     \n  Partials      330      330              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2555?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> @mridulm, I have addressed your comments and pushed commit [e24964d](https://github.com/apache/celeborn/commit/e24964dbc0af12ba9b374397ac1f6ea2aa6067c1) with adding `@SuppressWarnings` annotation. PTAL. @venkata91, any other comments for this pull request?\r\n\r\nNo other comments, @SteNicholas . Thanks for working on this!

@mridulm, could you please take a look at the changes in https://github.com/apache/celeborn/pull/2555/commits/950ec6ac1c5efdbb0cce1931c15f6d2b65f8cbb7. Thanks.

@venkata91, I have already used `Instant` instead of `Date` in https://github.com/apache/celeborn/pull/2555/commits/749606ff194224a26127920e13d96c3e46b72aed. PTAL.

> @venkata91, I have already used `Instant` instead of `Date` in [749606f](https://github.com/apache/celeborn/commit/749606ff194224a26127920e13d96c3e46b72aed). PTAL.\r\n\r\nlgtm. Thanks for addressing all the review comments.

> > @venkata91, I have already used `Instant` instead of `Date` in [749606f](https://github.com/apache/celeborn/commit/749606ff194224a26127920e13d96c3e46b72aed). PTAL.\r\n> \r\n> lgtm. Thanks for addressing all the review comments.\r\n\r\nPing @mridulm, @FMX, @RexXiong.

@FMX, @RexXiong, would you like to take a look? BTW, @mridulm, could you help to merge this pull request? Or wait others for reviewing?

If @FMX or @RexXiong are reviewing, will wait for them to be done - we can merge after.

@FMX,  I would like to add CI error-prone test in another pull request. Meanwhile, I rebased the main branch and fix the following WARNING in https://github.com/apache/celeborn/pull/2555/commits/1551d454624b56a8986294759d967764ef7f1812. PTAL. cc @mridulm\r\n`[WARNING] /Users/nicholas/Github/celeborn/worker/src/main/java/org/apache/celeborn/service/deploy/worker/storage/MapPartitionDataWriter.java:[58,21] [HidingField] Hiding fields of superclasses may cause confusion and errors. This field is hiding a field of the same name in superclass: PartitionDataWriter`

Merged to main.\r\nThanks for working on this @SteNicholas !\r\nThanks for the reviews @cxzl25, @venkata91, @RexXiong , @FMX :-)

ping @SteNicholas @RexXiong @waitinfuture 

@AngersZhuuuu, thanks for udpates. I left the minor comments for the changes. You could rename `decommission.md` to `decommissioning.md` which follows the pattern of `upgrading.md`. PTAL.

> @AngersZhuuuu, thanks for udpates. I left the minor comments for the changes. You could rename `decommission.md` to `decommissioning.md` which follows the pattern of `upgrading.md`. PTAL.\r\n\r\nDone

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2554?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.49%. Comparing base [(`50eaaf7`)](https://app.codecov.io/gh/apache/celeborn/commit/50eaaf723f3cda528b9c0252a8d5cc193ce71397?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a5ff5de`)](https://app.codecov.io/gh/apache/celeborn/commit/a5ff5dea0709ac0f4953b5766d6f5caa2b2fb8be?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 15 commits behind head on main.\n\n> :exclamation: **Current head a5ff5de differs from pull request most recent head dc04a48**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit dc04a48 to get more accurate results.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2554      +/-   ##\n==========================================\n- Coverage   40.58%   40.49%   -0.08%     \n==========================================\n  Files         222      222              \n  Lines       14261    14289      +28     \n  Branches     1284     1291       +7     \n==========================================\n- Hits         5786     5785       -1     \n- Misses       8145     8173      +28     \n- Partials      330      331       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2554?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

merge to main(v0.6.0)

@jiang13021, pls execute `dev/reformat` to format the coding style.

LGTM. Thanks. Merged into main(v0.6.0) and branch-0.5(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2550?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.49%. Comparing base [(`50eaaf7`)](https://app.codecov.io/gh/apache/celeborn/commit/50eaaf723f3cda528b9c0252a8d5cc193ce71397?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9350513`)](https://app.codecov.io/gh/apache/celeborn/commit/93505131056b50683d97fcc80b4ffaa025b89fb9?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n> :exclamation: **Current head 9350513 differs from pull request most recent head 209d28b**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit 209d28b to get more accurate results.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2550      +/-   ##\n==========================================\n- Coverage   40.58%   40.49%   -0.09%     \n==========================================\n  Files         222      222              \n  Lines       14261    14286      +25     \n  Branches     1284     1290       +6     \n==========================================\n- Hits         5786     5783       -3     \n- Misses       8145     8171      +26     \n- Partials      330      332       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2550?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, could the configs `celeborn.master.ha.ratis.raft.server.snapshot.auto.trigger.enabled` and `celeborn.master.ha.ratis.raft.server.snapshot.auto.trigger.threshold` be removed from template, which value use the default value in template?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@RexXiong comments addressed, please take a look again

Merge to main(v0.6.0) and branch-0.5(v0.5.1)

@littlexyw, could you provide the result of manual test? Meanwhile, provide the incorrect metrics value condition before this bugfix.

test code: (rename test.txt to test.go and run "go run test.go")\r\n[test.txt](https://github.com/user-attachments/files/15727671/test.txt)\r\ncorrect result:\r\n<img width="696" alt="image" src="https://github.com/apache/celeborn/assets/157120263/fef85ab7-4cba-446f-8067-fe08689abd43">\r\nincorrect metrics:\r\n<img width="780" alt="image" src="https://github.com/apache/celeborn/assets/157120263/5c973435-ff9e-44c4-ad41-4b1b1aacf8ce">\r\n\r\n

```\r\nfollower log\r\n24/05/23 03:08:02,421 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: Reinitializing state machine.\r\n24/05/23 03:08:02,421 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: obsolete snapshot provided: (t:28, i:1185003348)\r\n\r\n24/05/23 03:06:53,439 WARN [master-state-machine-executor] AbstractMetaManager: Celeborn cluster estimated partition size changed from 129.2 MiB to 110.5 MiB\r\n24/05/23 03:08:01,425 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: Taking a snapshot to file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/tmp/raft_snapshot_1716404881416_5912151569428133017.dat.\r\n24/05/23 03:08:01,428 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: Saving digest 184db806c56d5780f92c98fd7d3fb35a for snapshot file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/sm/snapshot.28_1185003348.\r\n24/05/23 03:08:01,428 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: Renaming a snapshot file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/tmp/raft_snapshot_1716404881416_5912151569428133017.dat to /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/sm/snapshot.28_1185003348.\r\n24/05/23 03:08:02,421 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: Reinitializing state machine.\r\n24/05/23 03:08:02,421 INFO [1@group-47BEDE733167-StateMachineUpdater] StateMachine: obsolete snapshot provided: (t:28, i:1185003348)\r\n\r\nleader log\r\n24/05/23 03:08:02,117 INFO [2@group-47BEDE733167-StateMachineUpdater] StateMachine: Taking a snapshot to file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/tmp/raft_snapshot_1716404882108_1183932657463440669.dat.\r\n24/05/23 03:08:02,120 INFO [2@group-47BEDE733167-StateMachineUpdater] StateMachine: Saving digest 232b855f8ca673b7a2c38a8ec90c6306 for snapshot file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/sm/snapshot.28_1185003493.\r\n24/05/23 03:08:02,121 INFO [2@group-47BEDE733167-StateMachineUpdater] StateMachine: Renaming a snapshot file /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/tmp/raft_snapshot_1716404882108_1183932657463440669.dat to /mnt/ssd/0/celeborn-ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167/sm/snapshot.28_1185003493.\r\n```\r\n\r\nAfter reinitializing, follower out of sync.\r\n![meta](https://github.com/apache/celeborn/assets/31424839/aadd6e29-6f20-4997-a9cf-5007243353c2)\r\n\r\nThere are some variables find from follower jvm heap\r\n\r\na. StateMachineUpdater.appliedIndex   = 1185003348\r\nb. SegmentedRaftLog.committedIndex = 1188743857\r\nc. SegmentedRaftLog startIndex = 1185003494, endIndex = 1188743857 \r\nd. StateMachineUpdater.snapshotIndex = 1185003348\r\ne. ServerState.latestedInstalledSnapshot=1185003493\r\n\r\n**It can be seen that for follower heap, 145 logs from 1185003349 ~ 1185003493 have been lost.**\r\n \r\n\r\n1. When will reinitializing be triggered?\r\nIt is triggered after leader sends a snapshot to the follower and finish installing.\r\n\r\n \r\n\r\n2. When does the leader send a snapshot to the followers in the running state?\r\nWhen the follower\

@AngersZhuuuu  @waitinfuture  @SzyWilliam  @pan3793  Can you help review?

UT shows how to reproduce

From ArithmeticStateMachine when reinitialize()\r\nhttps://github.com/apache/ratis/blob/dac27e4fd3df042fcf50ed549404e4d82708ed2b/ratis-examples/src/main/java/org/apache/ratis/examples/arithmetic/ArithmeticStateMachine.java#L82-L84\r\nWill reset the lastAppliedIndex, I wonder if we can do this too? then the change will be simple

> https://github.com/apache/ratis/blob/dac27e4fd3df042fcf50ed549404e4d82708ed2b/ratis-examples/src/main/java/org/apache/ratis/examples/arithmetic/ArithmeticStateMachine.java#L82-L84\r\n\r\nThe latest snapshot file can not found in this UT.

Alluxio fix the same issue in https://github.com/Alluxio/alluxio/pull/12181

Seems flaky test which not caused by this PR.

> Overall LGTM. I left the minor comments for this pull request. BTW, could the copied class be removed after [apache/ratis#1111](https://github.com/apache/ratis/pull/1111) released?\r\n\r\nOf course it can be removed after [apache/ratis#1111](https://github.com/apache/ratis/pull/1111)  released.

Compile failed caused by [CELEBORN-1337](https://github.com/apache/celeborn/pull/2529)

@leixm, please rebase the latest main branch.

All done.

Thanks. Merged to main(v0.6.0) and branch-0.5(0.5.1)/branch-0.4(0.4.2).

There are compilation errors.

@FMX, the compilation errors are caused by bumping the version of `commons-langs` to 3.14.0. I have only upgraded to `3.13.0` for `JavaVersion.JAVA_21`.

@pan3793, the spark profile compilation has error as follows:\r\n```\r\n  last tree to typer: Ident(_root_)\r\n       tree position: line 24 of /Users/nicholas/Github/celeborn/worker/src/main/java/org/apache/celeborn/service/deploy/worker/congestcontrol/TimeSlidingHub.java\r\n            tree tpe: <root>\r\n              symbol: final package _root_\r\n   symbol definition: final package _root_ (a RootPackage)\r\n      symbol package: <none>\r\n       symbol owners: package _root_\r\n           call site: package congestcontrol in package worker in package worker\r\n\r\n== Source file context for tree position ==\r\n\r\n    21 import java.util.concurrent.LinkedBlockingDeque;\r\n    22 \r\n    23 import com.google.common.annotations.VisibleForTesting;\r\n    24 import org.apache.commons.lang3.tuple.Pair;\r\n    25 \r\n    26 /**\r\n    27  * A time sliding list that group different {@link TimeSlidingNode} with corresponding timestamp by\r\n[ERROR] : Error while emitting Controller.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/Controller;\r\n[ERROR] : Error while emitting Controller.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/Controller;\r\n[ERROR] : Error while emitting Controller.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/Controller;\r\n[ERROR] : Error while emitting Controller.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/Controller;\r\n[ERROR] : Error while emitting Controller.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/Controller;\r\n[ERROR] : Error while emitting FetchHandler.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting PushDataHandler.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting PushDataHandler.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/congestcontrol/CongestionController;\r\n[ERROR] : Error while emitting PushDataHandler.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/congestcontrol/CongestionController;\r\n[ERROR] : Error while emitting Worker.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting Worker.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting WorkerStatusManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting DeviceMonitor.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/DeviceMonitor;\r\n[ERROR] : Error while emitting DeviceMonitor.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/DeviceMonitor;\r\n[ERROR] : Error while emitting DeviceMonitor.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/PartitionDataWriter;\r\n[ERROR] : Error while emitting DeviceMonitor.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/DeviceMonitor;\r\n[ERROR] : Error while emitting Flusher.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/Flusher;\r\n[ERROR] : Error while emitting Flusher.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/LocalFlusher;\r\n[ERROR] : Error while emitting Flusher.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/Flusher;\r\n[ERROR] : Error while emitting Flusher.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/Flusher;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/PartitionDataWriter;\r\n[ERROR] : Error while emitting StorageManager.scala\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager$$anon$11;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/PushDataHandler$$anon$1\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/PartitionDataWriter;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/PushDataHandler$$anon$3\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/PartitionDataWriter;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/DeviceMonitor$DiskUsageInfo\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/DeviceMonitor;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/DeviceMonitor$DiskUsageInfo$\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/DeviceMonitor;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/StorageManager$$anon$3\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/StorageManager$$anon$4\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/StorageManager$$anon$5\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] : Error while emitting org/apache/celeborn/service/deploy/worker/storage/StorageManager$$anon$6\r\nassertion failed: ClassBType.info not yet assigned: Lorg/apache/celeborn/service/deploy/worker/storage/StorageManager;\r\n[ERROR] 37 errors found\r\n```

No suspicious items in 3.14.0 changelogs https://commons.apache.org/proper/commons-lang/changes-report.html#a3.14.0. Weird, anyway, this PR is good to go.

cc @FMX.

> spark profile compilation has error\r\n\r\ncommons-lang3 3.13.0 is compiled using JDK8, 3.14.0-3.16.0 is compiled using JDK21, 3.17.0 is compiled using JDK17\r\n\r\nBecause JDK21 is used for compilation, there will be more `MethodParameters` in the class file, which triggers a bug in the lower version of scala.\r\n\r\n`https://github.com/scala/bug/issues/12783` \r\n\r\n```bash\r\njavap -v Pair\r\n```\r\n<img width="622" alt="image" src="https://github.com/user-attachments/assets/66a6eef9-c0ae-4e31-8d13-a2e2b4dc1d5f">\r\n\r\nscala 2.12.18 Fix\r\n```bash\r\nmvn package -am -pl worker  -DskipTests -Pspark-3.4 -Dcommons-lang3.version=3.14.0  -Dscala.version=2.12.18\r\n```\r\n\r\n\r\n\r\nhttps://lists.apache.org/thread/5ysptqcqxzp4l500qlxmhp92t3d5881k\r\n\r\nhttps://lists.apache.org/thread/jw6fbm1mc67jn94zhd8g8f9hdws8l5j0\r\n\r\nhttps://lists.apache.org/thread/odv5w41h06t0gdcl7spq087hl441df3c\r\n

@cxzl25 will the bug only be triggered on compile time? or include the runtime?

> will the bug only be triggered on compile time? or include the runtime?\r\n\r\nI did a simple test, it was only triggered during the compile phase, and no error was reported when the runtime was replaced with 3.14.0.\r\n\r\n```scala\r\nobject TestLang3 {\r\n  def main(args: Array[String]): Unit = {\r\n    println(org.apache.commons.lang3.SystemUtils.isJavaVersionAtLeast(org.apache.commons.lang3.JavaVersion.JAVA_21))\r\n  }\r\n}\r\n```\r\n\r\n```bash\r\njava -cp scala-library-2.12.15.jar:commons-lang3-3.13.0.jar:. TestLang3\r\nfalse\r\n\r\njava -cp scala-library-2.12.15.jar:commons-lang3-3.14.0.jar:. TestLang3\r\nfalse\r\n```

Thanks. Merged into main(v0.6.0) and branch-0.5.

thanks, merging to main(v0.6.0)/branch-0.5(v0.5.0)/branch-0.4(v0.4.2)/branch-0.3(v0.3.3).

Ping @pan3793, @onebox-li, @FMX.

Have you verified the Grafana Dashboard?

@pan3793, I have not verified the dashboard changes because I did not use the dashboard in production environment. I only verified the dashboard display via https://stenicholas.grafana.net/goto/4ywHh1ySg?orgId=1.\r\nBTW, I only introduced `metrics_jvm_thread_peak_count_Value` and `metrics_jvm_thread_total_started_count_Value` in dashboard which follow other metric pattern and work well in theory. cc @onebox-li.

> Thanks for mention, the grafana dashboard looks fine to me.\r\n\r\n@pan3793, PTAL.

Ping @FMX, @waitinfuture, @RexXiong.

Ping @RexXiong, @pan3793.

In which cases will the NPE be thrown? And if shuffle key is null in these cases, Maybe better check shuffle key and throw IOException instead Wrap the NPE.

May I ask which version you are using? Are local read or hdfs read enabled?

@SteNicholas  @AngersZhuuuu  Can you help review?

@leixm, please add introduced metrics in `celeborn-dashboard.json`.

Seems flaky test.

@AngersZhuuuu  @RexXiong  @SteNicholas  Can you help review?

@leixm, please update the title and description of this pull request including the introduced REST API.

@SteNicholas  Can you help review?

cc @SteNicholas @RexXiong 

@onyourhead, thanks for contribution. Unfortunately, CELEBORN-1388 has been reverted.

CELEBORN-1388 is reverted.

@FMX can you point me to where the PR was reverted ? A quick search did not show it - not sure what I  missing !\nThanks\n

> @FMX can you point me to where the PR was reverted ? A quick search did not show it - not sure what I missing ! Thanks\r\n\r\nBased on recent tests, If a spark application triggers many revive and split operations, some partition locations will lost and cause data lost.

There is a further solution to avoid replying duplicate partitions to the client. Maybe in another pr will be better.

Thanks @wangshengjie123, I have tested this PR several times and there is no data loss now. cc @YutingWang98 

Ping @RexXiong, @FMX.

Ping @pan3793, @FMX.

Merge to main(v0.6.0) and branch-0.5(v0.5.1)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2528?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.61%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1f084c1`)](https://app.codecov.io/gh/apache/celeborn/pull/2528?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 54 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2528      +/-   ##\n==========================================\n+ Coverage   40.17%   40.61%   +0.44%     \n==========================================\n  Files         218      222       +4     \n  Lines       13742    14200     +458     \n  Branches     1214     1273      +59     \n==========================================\n+ Hits         5520     5766     +246     \n- Misses       7905     8102     +197     \n- Partials      317      332      +15     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2528?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main(v0.5.0) and branch-0.4(v0.4.2).

LGTM. Merged into main(v0.5.0) and branch-0.4(v0.4.1).

@waitinfuture Does these changes looks ok? Also in ticket you have mentioned\r\n\r\n> as long as the size of compacted one does not exceeds half of `celeborn.shuffle.chunk.size`\r\n\r\nWhy do we want to limit the size at half of shuffleChunkSize and not use full shuffleChunkSize.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2524?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.81%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`817eb62`)](https://app.codecov.io/gh/apache/celeborn/pull/2524?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 51 commits behind head on main.\n\n> :exclamation: **Current head 817eb62 differs from pull request most recent head 3df993c**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit 3df993c to get more accurate results.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2524      +/-   ##\n==========================================\n+ Coverage   40.17%   40.81%   +0.64%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    14104     +362     \n  Branches     1214     1258      +44     \n==========================================\n+ Hits         5520     5755     +235     \n- Misses       7905     8020     +115     \n- Partials      317      329      +12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2524?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks for the review @waitinfuture 

Hi @s0nskar , please run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` to auto update docs, see https://github.com/apache/celeborn/blob/main/CONTRIBUTING.md

@RexXiong, could you please add the introduced metrics in document? BTW, the metrics added are different from the metrics mentioned in title and description. Meanwhile, the capacity is known as the bytes for users.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2521?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `10 lines` in your changes are missing coverage. Please review.\n> Project coverage is 40.69%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`96d9d4c`)](https://app.codecov.io/gh/apache/celeborn/pull/2521?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 50 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2521?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FDeviceInfo.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FWorkerInfo.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2521?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2521      +/-   ##\n==========================================\n+ Coverage   40.17%   40.69%   +0.52%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    14114     +372     \n  Branches     1214     1258      +44     \n==========================================\n+ Hits         5520     5742     +222     \n- Misses       7905     8043     +138     \n- Partials      317      329      +12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2521?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Merged to main(v0.5.0).

cc @ChenYi015 

@pan3793 I think we do not need to add a new label, as the job name is different even the releases are in the same namespace.

~~@ChenYi015 filtering metrics by job name prefix may not resolve the case of release names [`celeborn`, `celeborn-beta`]~~

As you can see in [PodMonitor API](https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#monitoring.coreos.com/v1.PodMonitor), the `jobLabel` field is used to retrive job name from labels, and pod monitor does not have a label with key `celeborn-master-podmonitor`, so the job name defaults to `<namespace>/<name>`. Thus, the job names will be different since `<name>` contains `.Release.Name`.

> ~@ChenYi015 filtering metrics by job name prefix may not resolve the case of release names [`celeborn`, `celeborn-beta`]~\r\n\r\nWe can filter metrics just like `metrics_ActiveShuffleFileCount_Value{job="celeborn/celeborn-master-podmonitor"}` or `metrics_ActiveShuffleFileCount_Value{job="celeborn/celeborn-beta-master-podmonitor"}`

@ChenYi015 thanks for your suggestion, make sense, close this PR then

Ping @cxzl25, @mridulm.

+CC @otterc, @waitinfuture , @FMX , @SteNicholas \r\nPTAL, thanks !

@pan3793 Can we allow to run [actions/helm-chart-testing](https://github.com/marketplace/actions/helm-chart-testing) in CI.

@ChenYi015 please follow ASF GHA policy https://infra.apache.org/github-actions-policy.html

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2513?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.80%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`6bd439a`)](https://app.codecov.io/gh/apache/celeborn/pull/2513?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 44 commits behind head on main.\n\n> :exclamation: Current head 6bd439a differs from pull request most recent head ac1f8b8. Consider uploading reports for the commit ac1f8b8 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2513      +/-   ##\n==========================================\n+ Coverage   40.17%   40.80%   +0.63%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    14096     +354     \n  Branches     1214     1258      +44     \n==========================================\n+ Hits         5520     5751     +231     \n- Misses       7905     8017     +112     \n- Partials      317      328      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2513?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@pan3793 PTAL, thanks!

Thanks, merged to main for 0.5

@pan3793 PTAL, thanks!

could you please also write dev docs to guide contributors on how to run unit test? and set up CI for that? You can do it in dedicated PR or do it in place

> could you please also write dev docs to guide contributors on how to run unit test? and set up CI for that? You can do it in dedicated PR or do it in place\r\n\r\nOk, I will update docs in place and setup CI in a dedicated PR.

@pan3793 I had added  deverloper docs for running helm chart unit tests.

@pan3793 I have updated the docs, PTAL, thanks.

Also cc @RexXiong 

Thanks, merged to main for 0.5

Ping @pan3793 , PTAL, thanks.

Please use a new JIRA ticket, LGTM except for the following items:\r\n\r\n> - Add README template file `README.md.gotmpl`, and use [helm-docs](https://github.com/norwoodj/helm-docs)  to generate `README.md` file automatically.\r\n> - Add a pre-commit git hook to run to generate the latest helm chart README.md file automatically.\r\n\r\nCeleborn does use a templating approach to render the configurations page, but I would say `value.yaml` is a different case, unlike we define configurations in the Scala code, YAML itself is a format optimized for user reading, and end users are likely to read and modify the `values.yaml`. I tend to embed docs and examples into `value.yaml` as-is.

Besides, I had added some configuration examples in `values.yaml` like:\r\n\r\n```yaml\r\nresources:\r\n  # -- Pod resources for Celeborn master pods\r\n  master: {}\r\n    # limits:\r\n    #   cpu: 100m\r\n    #   memory: 128Mi\r\n    # requests:\r\n    #   cpu: 100m\r\n    #   memory: 128Mi\r\n\r\n  # -- Pod resources for Celeborn worker pods\r\n  worker: {}\r\n    # limits:\r\n    #   cpu: 100m\r\n    #   memory: 128Mi\r\n    # requests:\r\n    #   cpu: 100m\r\n    #   memory: 128Mi\r\n\r\n# -- Pod annotations\r\npodAnnotations: {}\r\n# key1: value1\r\n# key2: value2\r\n\r\n# -- Pod node selector\r\nnodeSelector: {}\r\n# key1: value1\r\n# key2: value2\r\n\r\n# -- Pod tolerations\r\ntolerations: []\r\n# - key: key1\r\n#   operator: Equal\r\n#   value: value1\r\n#   effect: NoSchedule\r\n# - key: key2\r\n#   operator: Exists\r\n#   effect: NoSchedule\r\n```

@ChenYi015 The key point is I think the template README introduces complexity(setup and learn helm-docs) but does not gain many benefits.

@ChenYi015 can we separate helm-docs parts and merge other changes first, and discuss it later? \r\n\r\n> ... just like you see in many other Helm repos.\r\n\r\ncan you give some concrete examples? 

@pan3793 For example, [Apache Superset](https://github.com/apache/superset/tree/master/helm/superset).

@pan3793 I have force-pushed the commits and the helm-docs part was removed.

@pan3793 I have updated the commits, PTAL, thanks.

> LGTM, one nit.\r\n\r\n@pan3793 Fixed.

Thanks, merged to main for 0.5

LGTM. Merged to main(v0.5.0).

Ping @pan3793 @SteNicholas @RexXiong @zwangsheng .

> Move all the master/worker resource manifests to charts/celeborn/templates/master and charts/celeborn/templates/worker directories, respectively.\r\n\r\nDoes it follow some "best practice" or just your habits? It produces unnecessary diff, and line-level diff can not be recognized by the GitHub tool.

> > Move all the master/worker resource manifests to charts/celeborn/templates/master and charts/celeborn/templates/worker directories, respectively.\r\n> \r\n> Does it follow some "best practice" or just your habits? It produces unnecessary diff, and line-level diff can not be recognized by the GitHub tool.\r\n\r\n@pan3793 When a helm chart contains multiple components, it\

> LGTM, please revise the PR title to match the change\r\n\r\n@pan3793 I have updated the PR titile.

Thanks, merged to master for 0.5

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2504?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.77%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7f713f9`)](https://app.codecov.io/gh/apache/celeborn/pull/2504?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 31 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2504      +/-   ##\n==========================================\n+ Coverage   40.17%   40.77%   +0.60%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    14087     +345     \n  Branches     1214     1257      +43     \n==========================================\n+ Hits         5520     5742     +222     \n- Misses       7905     8017     +112     \n- Partials      317      328      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2504?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @FMX, @pan3793, @cfmcgrady.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2501?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.69%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`407a4bc`)](https://app.codecov.io/gh/apache/celeborn/pull/2501?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 31 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2501      +/-   ##\n==========================================\n+ Coverage   40.17%   40.69%   +0.53%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    14087     +345     \n  Branches     1214     1257      +43     \n==========================================\n+ Hits         5520     5732     +212     \n- Misses       7905     8027     +122     \n- Partials      317      328      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2501?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@pan3793, `make-distribution.sh` should build different mr client jar for Hadoop 3 and Hadoop 2 via maven and sbt. Meanwhile, extracting `mr-2` and `mr-2-shaded` module is easier to package and check including dependency check for maven and sbt.

@pan3793, do you mean that the user could use the mr client jar built with Hadoop 3 dependencies to run in Hadoop 2 environment?

> @pan3793, do you mean that the user could use the mr client jar built with Hadoop 3 dependencies to run in Hadoop 2 environment?\r\n\r\nIIRC, the original author @FMX tested this case, build against Hadoop 3.2, and run on Hadoop 2.8

@pan3793, thanks for above knowledge input. @FMX, if the mr client jar built with Hadoop 3 dependencies could run on Hadoop 2 environment, I will close this pull request.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2499?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.78%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`50679b2`)](https://app.codecov.io/gh/apache/celeborn/pull/2499?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 36 commits behind head on main.\n\n> :exclamation: Current head 50679b2 differs from pull request most recent head caa6dfb. Consider uploading reports for the commit caa6dfb to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2499      +/-   ##\n==========================================\n+ Coverage   40.17%   40.78%   +0.61%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    13962     +220     \n  Branches     1214     1241      +27     \n==========================================\n+ Hits         5520     5693     +173     \n- Misses       7905     7941      +36     \n- Partials      317      328      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2499?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Please take a look, thanks! @RexXiong

I had did some e2e tests as follows:\r\n\r\n1. Create a kind cluster with the following config:\r\n\r\n```yaml\r\nkind: Cluster\r\napiVersion: kind.x-k8s.io/v1alpha4\r\nnodes:\r\n- role: control-plane\r\n- role: worker\r\n- role: worker\r\n- role: worker\r\n- role: worker\r\n- role: worker\r\n```\r\n\r\n```shell\r\n$ kind create cluster --name celeborn --config kind-config.yaml\r\nCreating cluster "celeborn" ...\r\n ✓ Ensuring node image (kindest/node:v1.29.2) 🖼\r\n ✓ Preparing nodes 📦 📦 📦 📦 📦 📦  \r\n ✓ Writing configuration 📜 \r\n ✓ Starting control-plane 🕹️ \r\n ✓ Installing CNI 🔌 \r\n ✓ Installing StorageClass 💾 \r\n ✓ Joining worker nodes 🚜 \r\nSet kubectl context to "kind-celeborn"\r\nYou can now use your cluster with:\r\n\r\nkubectl cluster-info --context kind-celeborn\r\n\r\nThanks for using kind! 😊\r\n```\r\n\r\n2. Build docker image locally and load into kind cluster\r\n\r\n```shell\r\ndocker build -f docker/Dockerfile -t docker.io/apache/celeborn:v0.4.0-incubating .\r\nkind load docker-image --name celeborn docker.io/apache/celeborn:v0.4.0-incubating\r\n```\r\n\r\n3. Install the helm chart\r\n\r\n```shell\r\n$ helm install celeborn charts/celeborn \\\r\n    --namespace celeborn \\\r\n    --create-namespace \\\r\n    --set image.repository=apache/celeborn \\\r\n    --set image.tag=v0.4.0-incubating \\\r\n    --set image.pullPolicy=Never \\\r\n    --debug\r\ninstall.go:200: [debug] Original chart version: ""\r\ninstall.go:217: [debug] CHART PATH: /Users/chenyi/Code/github.com/apache/celeborn/charts/celeborn\r\n\r\nclient.go:134: [debug] creating 1 resource(s)\r\nclient.go:134: [debug] creating 5 resource(s)\r\nNAME: celeborn\r\nLAST DEPLOYED: Fri May 10 16:58:44 2024\r\nNAMESPACE: celeborn\r\nSTATUS: deployed\r\nREVISION: 1\r\nTEST SUITE: None\r\nUSER-SUPPLIED VALUES:\r\nimage:\r\n  pullPolicy: Never\r\n  repository: apache/celeborn\r\n  tag: v0.4.0-incubating\r\n\r\nCOMPUTED VALUES:\r\naffinity:\r\n  master:\r\n    podAntiAffinity:\r\n      requiredDuringSchedulingIgnoredDuringExecution:\r\n      - labelSelector:\r\n          matchExpressions:\r\n          - key: app.kubernetes.io/name\r\n            operator: In\r\n            values:\r\n            - celeborn\r\n          - key: app.kubernetes.io/role\r\n            operator: In\r\n            values:\r\n            - master\r\n        topologyKey: kubernetes.io/hostname\r\n  worker:\r\n    podAntiAffinity:\r\n      requiredDuringSchedulingIgnoredDuringExecution:\r\n      - labelSelector:\r\n          matchExpressions:\r\n          - key: app.kubernetes.io/name\r\n            operator: In\r\n            values:\r\n            - celeborn\r\n          - key: app.kubernetes.io/role\r\n            operator: In\r\n            values:\r\n            - worker\r\n        topologyKey: kubernetes.io/hostname\r\nceleborn:\r\n  celeborn.application.heartbeat.timeout: 120s\r\n  celeborn.master.ha.enabled: true\r\n  celeborn.master.http.port: 9098\r\n  celeborn.metrics.enabled: true\r\n  celeborn.push.stageEnd.timeout: 120s\r\n  celeborn.rpc.dispatcher.numThreads: 4\r\n  celeborn.rpc.io.clientThreads: 64\r\n  celeborn.rpc.io.numConnectionsPerPeer: 2\r\n  celeborn.rpc.io.serverThreads: 64\r\n  celeborn.shuffle.chunk.size: 8m\r\n  celeborn.worker.fetch.io.threads: 32\r\n  celeborn.worker.flusher.buffer.size: 256K\r\n  celeborn.worker.heartbeat.timeout: 120s\r\n  celeborn.worker.http.port: 9096\r\n  celeborn.worker.monitor.disk.enabled: false\r\n  celeborn.worker.push.io.threads: 32\r\ncluster:\r\n  name: cluster\r\ndnsPolicy: ClusterFirst\r\nenvironments:\r\n  CELEBORN_MASTER_JAVA_OPTS: -XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps\r\n    -XX:+PrintGCDateStamps -Xloggc:gc-master.out -Dio.netty.leakDetectionLevel=advanced\r\n  CELEBORN_MASTER_MEMORY: 2g\r\n  CELEBORN_NO_DAEMONIZE: 1\r\n  CELEBORN_WORKER_JAVA_OPTS: -XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps\r\n    -XX:+PrintGCDateStamps -Xloggc:gc-worker.out -Dio.netty.leakDetectionLevel=advanced\r\n  CELEBORN_WORKER_MEMORY: 2g\r\n  CELEBORN_WORKER_OFFHEAP_MEMORY: 12g\r\n  TZ: Asia/Shanghai\r\nfullnameOverride: ""\r\nhostNetwork: false\r\nimage:\r\n  pullPolicy: Never\r\n  pullSecrets: []\r\n  repository: apache/celeborn\r\n  tag: v0.4.0-incubating\r\nnameOverride: ""\r\nnodeSelector: {}\r\npodAnnotations: {}\r\npodMonitor:\r\n  enable: true\r\n  podMetricsEndpoint:\r\n    interval: 5s\r\n    portName: metrics\r\n    scheme: http\r\npriorityClass:\r\n  master:\r\n    create: false\r\n    name: ""\r\n    value: 1000000000\r\n  worker:\r\n    create: false\r\n    name: ""\r\n    value: 999999000\r\nreplicaCount:\r\n  master: 3\r\n  worker: 5\r\nresources:\r\n  master: {}\r\n  worker: {}\r\nsecurityContext:\r\n  fsGroup: 10006\r\n  runAsGroup: 10006\r\n  runAsUser: 10006\r\nservice:\r\n  port: 9097\r\n  type: ClusterIP\r\ntolerations: []\r\nvolumes:\r\n  master:\r\n  - capacity: 100Gi\r\n    hostPath: /mnt/celeborn_ratis\r\n    mountPath: /mnt/celeborn_ratis\r\n    type: hostPath\r\n  worker:\r\n  - capacity: 100Gi\r\n    diskType: SSD\r\n    hostPath: /mnt/disk1\r\n    mountPath: /mnt/disk1\r\n    type: hostPath\r\n  - capacity: 100Gi\r\n    diskType: SSD\r\n    hostPath: /mnt/disk2\r\n    mountPath: /mnt/disk2\r\n    type: hostPath\r\n  - capacity: 100Gi\r\n    diskType: SSD\r\n    hostPath: /mnt/disk3\r\n    mountPath: /mnt/disk3\r\n    type: hostPath\r\n  - capacity: 100Gi\r\n    diskType: SSD\r\n    hostPath: /mnt/disk4\r\n    mountPath: /mnt/disk4\r\n    type: hostPath\r\n\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: celeborn/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: celeborn-conf\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/version: "0.4.0"\r\n    app.kubernetes.io/managed-by: Helm\r\ndata:\r\n  celeborn-defaults.conf: |-\r\n    celeborn.master.endpoints=celeborn-master-0.celeborn-master-svc.celeborn.svc.cluster.local,celeborn-master-1.celeborn-master-svc.celeborn.svc.cluster.local,celeborn-master-2.celeborn-master-svc.celeborn.svc.cluster.local,\r\n    celeborn.master.ha.node.0.host=celeborn-master-0.celeborn-master-svc.celeborn.svc.cluster.local\r\n    celeborn.master.ha.node.1.host=celeborn-master-1.celeborn-master-svc.celeborn.svc.cluster.local\r\n    celeborn.master.ha.node.2.host=celeborn-master-2.celeborn-master-svc.celeborn.svc.cluster.local\r\n    celeborn.master.ha.ratis.raft.server.storage.dir=/mnt/celeborn_ratis\r\n    celeborn.worker.storage.dirs=/mnt/disk1:disktype=SSD:capacity=100Gi,/mnt/disk2:disktype=SSD:capacity=100Gi,/mnt/disk3:disktype=SSD:capacity=100Gi,/mnt/disk4:disktype=SSD:capacity=100Gi\r\n    celeborn.application.heartbeat.timeout=120s\r\n    celeborn.master.ha.enabled=true\r\n    celeborn.master.http.port=9098\r\n    celeborn.metrics.enabled=true\r\n    celeborn.push.stageEnd.timeout=120s\r\n    celeborn.rpc.dispatcher.numThreads=4\r\n    celeborn.rpc.io.clientThreads=64\r\n    celeborn.rpc.io.numConnectionsPerPeer=2\r\n    celeborn.rpc.io.serverThreads=64\r\n    celeborn.shuffle.chunk.size=8m\r\n    celeborn.worker.fetch.io.threads=32\r\n    celeborn.worker.flusher.buffer.size=256K\r\n    celeborn.worker.heartbeat.timeout=120s\r\n    celeborn.worker.http.port=9096\r\n    celeborn.worker.monitor.disk.enabled=false\r\n    celeborn.worker.push.io.threads=32\r\n\r\n  celeborn-env.sh: |\r\n    CELEBORN_MASTER_JAVA_OPTS="-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-master.out -Dio.netty.leakDetectionLevel=advanced"\r\n    CELEBORN_MASTER_MEMORY="2g"\r\n    CELEBORN_NO_DAEMONIZE="1"\r\n    CELEBORN_WORKER_JAVA_OPTS="-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-worker.out -Dio.netty.leakDetectionLevel=advanced"\r\n    CELEBORN_WORKER_MEMORY="2g"\r\n    CELEBORN_WORKER_OFFHEAP_MEMORY="12g"\r\n    TZ="Asia/Shanghai"\r\n\r\n  log4j2.xml: |-\r\n    <?xml version="1.0" encoding="UTF-8"?>\r\n    <!--\r\n    ~ Licensed to the Apache Software Foundation (ASF) under one or more\r\n    ~ contributor license agreements.  See the NOTICE file distributed with\r\n    ~ this work for additional information regarding copyright ownership.\r\n    ~ The ASF licenses this file to You under the Apache License, Version 2.0\r\n    ~ (the "License"); you may not use this file except in compliance with\r\n    ~ the License.  You may obtain a copy of the License at\r\n    ~\r\n    ~     http://www.apache.org/licenses/LICENSE-2.0\r\n    ~\r\n    ~ Unless required by applicable law or agreed to in writing, software\r\n    ~ distributed under the License is distributed on an "AS IS" BASIS,\r\n    ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    ~ See the License for the specific language governing permissions and\r\n    ~ limitations under the License.\r\n    -->\r\n    <!--\r\n    ~ Extra logging related to initialization of Log4j.\r\n    ~ Set to debug or trace if log4j initialization is failing.\r\n    -->\r\n    <Configuration status="INFO">\r\n        <Appenders>\r\n            <Console name="stdout" target="SYSTEM_OUT">\r\n                <!--\r\n                  ~ In the pattern layout configuration below, we specify an explicit `%ex` conversion\r\n                  ~ pattern for logging Throwables. If this was omitted, then (by default) Log4J would\r\n                  ~ implicitly add an `%xEx` conversion pattern which logs stacktraces with additional\r\n                  ~ class packaging information. That extra information can sometimes add a substantial\r\n                  ~ performance overhead, so we disable it in our default logging config.\r\n                  -->\r\n                <PatternLayout pattern="%d{yy/MM/dd HH:mm:ss,SSS} %p [%t] %c{1}: %m%n%ex"/>\r\n            </Console>\r\n            <RollingRandomAccessFile name="file" fileName="${env:CELEBORN_LOG_DIR}/celeborn.log"\r\n                                     filePattern="${env:CELEBORN_LOG_DIR}/celeborn.log.%d-%i">\r\n                <PatternLayout pattern="%d{yy/MM/dd HH:mm:ss,SSS} %p [%t] %c{1}: %m%n%ex"/>\r\n                <Policies>\r\n                    <SizeBasedTriggeringPolicy size="200 MB"/>\r\n                </Policies>\r\n                <DefaultRolloverStrategy max="7">\r\n                    <Delete basePath="${env:CELEBORN_LOG_DIR}" maxDepth="1">\r\n                        <IfFileName glob="celeborn.log*">\r\n                            <IfAny>\r\n                                <IfAccumulatedFileSize exceeds="1 GB" />\r\n                                <IfAccumulatedFileCount exceeds="10" />\r\n                            </IfAny>\r\n                        </IfFileName>\r\n                    </Delete>\r\n                </DefaultRolloverStrategy>\r\n            </RollingRandomAccessFile>\r\n        </Appenders>\r\n\r\n        <Loggers>\r\n            <Root level="INFO">\r\n                <AppenderRef ref="stdout"/>\r\n                <AppenderRef ref="file"/>\r\n            </Root>\r\n            <Logger name="org.apache.hadoop.hdfs" level="WARN" additivity="false">\r\n                <Appender-ref ref="stdout" level="WARN" />\r\n                <Appender-ref ref="file" level="WARN"/>\r\n            </Logger>\r\n        </Loggers>\r\n    </Configuration>\r\n\r\n  metrics.properties: >-\r\n    *.sink.prometheusServlet.class=org.apache.celeborn.common.metrics.sink.PrometheusServlet\r\n---\r\n# Source: celeborn/templates/master/service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: celeborn-master-svc\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/version: "0.4.0"\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  selector:\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/role: master\r\n  ports:\r\n  - port: 9097\r\n    targetPort: 9097\r\n    protocol: TCP\r\n    name: celeborn-master\r\n  type: ClusterIP\r\n  clusterIP: None\r\n---\r\n# Source: celeborn/templates/worker/service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: celeborn-worker-svc\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/version: "0.4.0"\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  selector:\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/role: worker\r\n  type: ClusterIP\r\n  clusterIP: None\r\n---\r\n# Source: celeborn/templates/master/statefulset.yaml\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: celeborn-master\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/version: "0.4.0"\r\n    app.kubernetes.io/managed-by: Helm\r\n    app.kubernetes.io/role: master\r\nspec:\r\n  serviceName: celeborn-master-svc\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: celeborn\r\n      app.kubernetes.io/instance: celeborn\r\n      app.kubernetes.io/role: master\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: celeborn\r\n        app.kubernetes.io/instance: celeborn\r\n        app.kubernetes.io/role: master\r\n        app.kubernetes.io/tag: "v0.4.0-incubating"\r\n    spec:\r\n      initContainers:\r\n      - name: chown-celeborn-master-volume\r\n        image: alpine:3.18\r\n        imagePullPolicy: Never\r\n        command:\r\n        - chown\r\n        - 10006:10006\r\n        - /mnt/celeborn_ratis\r\n        volumeMounts:\r\n        - name: celeborn-master-vol-0\r\n          mountPath: /mnt/celeborn_ratis\r\n        securityContext:\r\n          runAsUser: 0\r\n      containers:\r\n      - name: celeborn\r\n        image: apache/celeborn:v0.4.0-incubating\r\n        imagePullPolicy: Never\r\n        command:\r\n        - /usr/bin/tini\r\n        - --\r\n        - /bin/sh\r\n        - -c\r\n        - "until true; do echo waiting for master; sleep 2; done && exec /opt/celeborn/sbin/start-master.sh"\r\n        ports:\r\n        - containerPort: 9097\r\n        - containerPort: 9098\r\n          name: metrics\r\n          protocol: TCP\r\n        env:\r\n        - name: CELEBORN_MASTER_JAVA_OPTS\r\n          value: "-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-master.out -Dio.netty.leakDetectionLevel=advanced"\r\n        - name: CELEBORN_MASTER_MEMORY\r\n          value: "2g"\r\n        - name: CELEBORN_NO_DAEMONIZE\r\n          value: "1"\r\n        - name: CELEBORN_WORKER_JAVA_OPTS\r\n          value: "-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-worker.out -Dio.netty.leakDetectionLevel=advanced"\r\n        - name: CELEBORN_WORKER_MEMORY\r\n          value: "2g"\r\n        - name: CELEBORN_WORKER_OFFHEAP_MEMORY\r\n          value: "12g"\r\n        - name: TZ\r\n          value: "Asia/Shanghai"\r\n        volumeMounts:\r\n        - name: celeborn-volume\r\n          mountPath: /opt/celeborn/conf\r\n          readOnly: true\r\n        - name: celeborn-master-vol-0\r\n          mountPath: /mnt/celeborn_ratis\r\n      volumes:\r\n      - name: celeborn-volume\r\n        configMap:\r\n          name: celeborn-conf\r\n      - name: celeborn-master-vol-0\r\n        hostPath:\r\n          path: /mnt/celeborn_ratis/master\r\n          type: DirectoryOrCreate\r\n      affinity:\r\n        podAntiAffinity:\r\n          requiredDuringSchedulingIgnoredDuringExecution:\r\n          - labelSelector:\r\n              matchExpressions:\r\n              - key: app.kubernetes.io/name\r\n                operator: In\r\n                values:\r\n                - celeborn\r\n              - key: app.kubernetes.io/role\r\n                operator: In\r\n                values:\r\n                - master\r\n            topologyKey: kubernetes.io/hostname\r\n      dnsPolicy: ClusterFirst\r\n      securityContext:\r\n        fsGroup: 10006\r\n        runAsGroup: 10006\r\n        runAsUser: 10006\r\n      terminationGracePeriodSeconds: 30\r\n  replicas: 3\r\n---\r\n# Source: celeborn/templates/worker/statefulset.yaml\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: celeborn-worker\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn\r\n    app.kubernetes.io/version: "0.4.0"\r\n    app.kubernetes.io/managed-by: Helm\r\n    app.kubernetes.io/role: worker\r\nspec:\r\n  serviceName: celeborn-worker-svc\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: celeborn\r\n      app.kubernetes.io/instance: celeborn\r\n      app.kubernetes.io/role: worker\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: celeborn\r\n        app.kubernetes.io/instance: celeborn\r\n        app.kubernetes.io/role: worker\r\n        app.kubernetes.io/tag: "v0.4.0-incubating"\r\n    spec:\r\n      initContainers:\r\n      - name: chown-celeborn-worker-volume\r\n        image: alpine:3.18\r\n        imagePullPolicy: Never\r\n        command:\r\n        - chown\r\n        - 10006:10006\r\n        - /mnt/disk1\r\n        - /mnt/disk2\r\n        - /mnt/disk3\r\n        - /mnt/disk4\r\n        volumeMounts:\r\n        - name: celeborn-worker-vol-0\r\n          mountPath: /mnt/disk1\r\n        - name: celeborn-worker-vol-1\r\n          mountPath: /mnt/disk2\r\n        - name: celeborn-worker-vol-2\r\n          mountPath: /mnt/disk3\r\n        - name: celeborn-worker-vol-3\r\n          mountPath: /mnt/disk4\r\n        securityContext:\r\n          runAsUser: 0\r\n      containers:\r\n      - name: celeborn\r\n        image: apache/celeborn:v0.4.0-incubating\r\n        imagePullPolicy: Never\r\n        command:\r\n        - /usr/bin/tini\r\n        - --\r\n        - /bin/sh\r\n        - -c\r\n        - "until true; do echo waiting for master; sleep 2; done && exec /opt/celeborn/sbin/start-worker.sh"\r\n        ports:\r\n        - containerPort: 9096\r\n          name: metrics\r\n          protocol: TCP\r\n        env:\r\n        - name: CELEBORN_MASTER_JAVA_OPTS\r\n          value: "-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-master.out -Dio.netty.leakDetectionLevel=advanced"\r\n        - name: CELEBORN_MASTER_MEMORY\r\n          value: "2g"\r\n        - name: CELEBORN_NO_DAEMONIZE\r\n          value: "1"\r\n        - name: CELEBORN_WORKER_JAVA_OPTS\r\n          value: "-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-worker.out -Dio.netty.leakDetectionLevel=advanced"\r\n        - name: CELEBORN_WORKER_MEMORY\r\n          value: "2g"\r\n        - name: CELEBORN_WORKER_OFFHEAP_MEMORY\r\n          value: "12g"\r\n        - name: TZ\r\n          value: "Asia/Shanghai"\r\n        volumeMounts:\r\n        - mountPath: /opt/celeborn/conf\r\n          name: celeborn-volume\r\n          readOnly: true\r\n        - name: celeborn-worker-vol-0\r\n          mountPath: /mnt/disk1\r\n        - name: celeborn-worker-vol-1\r\n          mountPath: /mnt/disk2\r\n        - name: celeborn-worker-vol-2\r\n          mountPath: /mnt/disk3\r\n        - name: celeborn-worker-vol-3\r\n          mountPath: /mnt/disk4\r\n      volumes:\r\n      - name: celeborn-volume\r\n        configMap:\r\n          name: celeborn-conf\r\n      - name: celeborn-worker-vol-0\r\n        hostPath:\r\n          path: /mnt/disk1/worker\r\n          type: DirectoryOrCreate\r\n      - name: celeborn-worker-vol-1\r\n        hostPath:\r\n          path: /mnt/disk2/worker\r\n          type: DirectoryOrCreate\r\n      - name: celeborn-worker-vol-2\r\n        hostPath:\r\n          path: /mnt/disk3/worker\r\n          type: DirectoryOrCreate\r\n      - name: celeborn-worker-vol-3\r\n        hostPath:\r\n          path: /mnt/disk4/worker\r\n          type: DirectoryOrCreate\r\n      affinity:\r\n        podAntiAffinity:\r\n          requiredDuringSchedulingIgnoredDuringExecution:\r\n          - labelSelector:\r\n              matchExpressions:\r\n              - key: app.kubernetes.io/name\r\n                operator: In\r\n                values:\r\n                - celeborn\r\n              - key: app.kubernetes.io/role\r\n                operator: In\r\n                values:\r\n                - worker\r\n            topologyKey: kubernetes.io/hostname\r\n      dnsPolicy: ClusterFirst\r\n      securityContext:\r\n        fsGroup: 10006\r\n        runAsGroup: 10006\r\n        runAsUser: 10006\r\n      terminationGracePeriodSeconds: 30\r\n  replicas: 5\r\n\r\nNOTES:\r\n#\r\n# Licensed to the Apache Software Foundation (ASF) under one or more\r\n# contributor license agreements.  See the NOTICE file distributed with\r\n# this work for additional information regarding copyright ownership.\r\n# The ASF licenses this file to You under the Apache License, Version 2.0\r\n# (the "License"); you may not use this file except in compliance with\r\n# the License.  You may obtain a copy of the License at\r\n#\r\n#    http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an "AS IS" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n#\r\n\r\nCeleborn\r\n```\r\n\r\n4. Wait a momemt and inspect the pod status\r\n\r\n```shell\r\n$ kubectl get pods -n celeborn\r\nNAME                READY   STATUS    RESTARTS   AGE\r\nceleborn-master-0   1/1     Running   0          44s\r\nceleborn-master-1   1/1     Running   0          42s\r\nceleborn-master-2   1/1     Running   0          40s\r\nceleborn-worker-0   1/1     Running   0          44s\r\nceleborn-worker-1   1/1     Running   0          42s\r\nceleborn-worker-2   1/1     Running   0          40s\r\nceleborn-worker-3   1/1     Running   0          38s\r\nceleborn-worker-4   1/1     Running   0          35s\r\n```\r\n\r\n5. Inspect master logs\r\n\r\n```shell\r\n$ kubectl logs -n celeborn celeborn-master-0\r\n...\r\n24/05/10 16:58:46,907 WARN [main] JVMSource: Add gauge jvm.thread.deadlocks failed, the value type class java.util.Collections$EmptySet is not a number\r\n24/05/10 16:58:46,952 WARN [main] ThreadPoolSource: Add gauge is_terminating failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:46,953 WARN [main] ThreadPoolSource: Add gauge is_terminated failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:46,953 WARN [main] ThreadPoolSource: Add gauge is_shutdown failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:46,954 INFO [main] Dispatcher: Dispatcher numThreads: 4\r\n24/05/10 16:58:47,051 INFO [main] TransportClientFactory: mode NIO threads 64\r\n24/05/10 16:58:47,151 WARN [main] ThreadPoolSource: Add gauge is_terminating failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:47,151 WARN [main] ThreadPoolSource: Add gauge is_terminated failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:47,151 WARN [main] ThreadPoolSource: Add gauge is_shutdown failed, the value type class java.lang.Boolean is not a number\r\n24/05/10 16:58:47,162 INFO [main] NettyRpcEnvFactory: Starting RPC Server [Master] on celeborn-master-0.celeborn-master-svc.celeborn.svc.cluster.local:9097 with advisor endpoint celeborn-master-0.celeborn-master-svc.celeborn.svc.cluster.local:9097\r\n24/05/10 16:58:47,306 INFO [main] Utils: Successfully started service \

Thanks @ChenYi015 for this pr, Good job. cc @zwangsheng

> Nice pr, I have some comments left. In addition, can you compare the actual YAML files before and after the modifications to see what differences there are?\r\n\r\n```shell\r\n$ git checkout main\r\nSwitched to branch \

This PR involves refactoring, user-facing variable name changes, bug fixes, and testing hardening. Can you split it into some dedicated patches?

> - Format yaml template files with kubernetes style.\r\n\r\nCan you leave a docs/guide link?

> This PR involves refactoring, user-facing variable name changes, bug fixes, and testing hardening. Can you split it into some dedicated patches?\r\n\r\n@pan3793 OK, I will break it down into serveral smaller PRs.

> Maybe we can mark these fields as deprecated and provide backward compatibility in helm charts, how do you think about it?\r\n\r\n@ChenYi015 approach is good but you should provide **reasons** for renaming. 

@pan3793 For the number of replicas, `replicaCount` is a more common name, when you create a new helm chart, you will see `replicaCount` is used. Just like we have `volumes.[master|worker]`, `priorityClass.[master|worker]` and `affinity.[master|worker]`, `replicaCount.[master|worker]` will make the values much clearer. \r\n\r\n

This PR had breaked into several smaller ones and will be cloesd.

Ping @RexXiong, @FMX, @cfmcgrady.

@FMX, @cfmcgrady, PTAL.

Merging to main(v0.5.0).

Ping @mridulm, @FMX, @RexXiong.

Merged into main(v0.5.0) and branch-0.4(v0.4.1).

Ping @turboFei, @RexXiong. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2495?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.78%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d66232e`)](https://app.codecov.io/gh/apache/celeborn/pull/2495?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 28 commits behind head on main.\n\n> :exclamation: Current head d66232e differs from pull request most recent head ba0051b. Consider uploading reports for the commit ba0051b to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2495      +/-   ##\n==========================================\n+ Coverage   40.17%   40.78%   +0.61%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    13962     +220     \n  Branches     1214     1241      +27     \n==========================================\n+ Hits         5520     5693     +173     \n- Misses       7905     7940      +35     \n- Partials      317      329      +12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2495?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2494?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 40.84%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e8fde1c`)](https://app.codecov.io/gh/apache/celeborn/pull/2494?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 36 commits behind head on main.\n\n> :exclamation: Current head e8fde1c differs from pull request most recent head 8f0b696. Consider uploading reports for the commit 8f0b696 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2494      +/-   ##\n==========================================\n+ Coverage   40.17%   40.84%   +0.67%     \n==========================================\n  Files         218      220       +2     \n  Lines       13742    13958     +216     \n  Branches     1214     1236      +22     \n==========================================\n+ Hits         5520     5700     +180     \n- Misses       7905     7931      +26     \n- Partials      317      327      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2494?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main(0.5.0)

Ping @SteNicholas 

Ping @cxzl25, @pan3793, @FMX.

Thanks. merge to main(v0.5.0) & branch-0.4(v0.4.1)

Thanks, merged to main(v0.5.0)/branch-0.4(v0.4.1).

thank you, merging to main(v0.5.0)/branch-0.4(v0.4.1).

+CC @otterc, @pan3793, @waitinfuture who reviewed #2419 

Converted it back to draft to ensure one more validation run is completed.\r\n+CC @rmcyang, can you please recheck #2419 + #2485 fixes the flakiness seen ? Thanks.

> Converted it back to draft to ensure one more validation run is completed. +CC @rmcyang, can you please recheck #2419 + #2485 fixes the flakiness seen ? Thanks.\r\n\r\n@mridulm Verified that https://github.com/apache/celeborn/pull/2419 + https://github.com/apache/celeborn/pull/2485 fixes the flakiness seen internally

Thanks @rmcyang  ! Marking it as ready for review.\r\nThanks for the suggestion @pan3793,  it is equivalent to what we have here, but is cleaner !

Thanks for fixing @mridulm, lgtm. Do you want to reflect the latest change in the title and description? It still references to  `Files.readAttributes`.

Oh my, I updated only the title and missed out on the description @pan3793. Sorry about that !\r\n

Merged to master

Ping @mridulm, @lifulong, @FMX.

We ask users to copy celeborn client side jar to spark jars directory - that should ensure this problem does not occur, right ?\r\n\r\nSo this would apply only when users are leveraging `--jars`/`spark.jars` in order to specify celeborn jar ?\r\nIf yes, detect and add warning only when that difference exists ?

> Ping @mridulm, @lifulong, @FMX.\r\n\r\nLGTM

@SteNicholas That makes sense, there are definitely scenarios where we cannot update the spark distribution with additional jars.\r\n\r\nThe reason why I brought that up is, currently the warning will always be emitted  ... even if celeborn jars are part of spark distribution and so not susceptible to the issue.\r\n\r\nGiven this, can be add to the `if` condition to check if this is a problematic case ?

@mridulm, I got your main point of concern. I have addressed above comment and reduced the scope of printing warning logs. PTAL.

@cxzl25, I have followed the check `checkUserClassPathFirst` in spark-2 module. PTAL.

@mridulm, PTAL.

@mridulm, @pan3793, @cfmcgrady, @cxzl25, I have address above comments. PTAL.

Hi @SteNicholas, which modes did you test this in ?\r\nI did a quick check against local cluster, spark standalone and local yarn - and keep getting this and variants of this with 3.1 (which is what I would expect - since spark does not support it).\r\n```\r\nException in thread "main" java.lang.reflect.UndeclaredThrowableException\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1956)\r\n\tat org.apache.spark.deploy.SparkHadoopUtil.runAsSparkUser(SparkHadoopUtil.scala:61)\r\n\tat org.apache.spark.executor.CoarseGrainedExecutorBackend$.run(CoarseGrainedExecutorBackend.scala:402)\r\n\tat org.apache.spark.executor.YarnCoarseGrainedExecutorBackend$.main(YarnCoarseGrainedExecutorBackend.scala:81)\r\n\tat org.apache.spark.executor.YarnCoarseGrainedExecutorBackend.main(YarnCoarseGrainedExecutorBackend.scala)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.spark.shuffle.celeborn.SparkShuffleManager\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\tat java.lang.Class.forName0(Native Method)\r\n\tat java.lang.Class.forName(Class.java:348)\r\n\tat org.apache.spark.util.Utils$.classForName(Utils.scala:207)\r\n\tat org.apache.spark.SparkEnv$.instantiateClass$1(SparkEnv.scala:275)\r\n\tat org.apache.spark.SparkEnv$.create(SparkEnv.scala:338)\r\n\tat org.apache.spark.SparkEnv$.createExecutorEnv(SparkEnv.scala:205)\r\n\tat org.apache.spark.executor.CoarseGrainedExecutorBackend$.$anonfun$run$7(CoarseGrainedExecutorBackend.scala:451)\r\n\tat org.apache.spark.deploy.SparkHadoopUtil$$anon$1.run(SparkHadoopUtil.scala:62)\r\n\tat org.apache.spark.deploy.SparkHadoopUtil$$anon$1.run(SparkHadoopUtil.scala:61)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1938)\r\n\t... 4 more\r\n```\r\n\r\nThis should cause the executor to fail, and so wont get to this PR.\r\nAm I missing something here ?\r\n\r\nI tested this with:\r\n`./bin/spark-submit --conf spark.executor.userClassPathFirst=true --conf spark.jars=./celeborn-client-spark-3-shaded_2.12-0.5.0-SNAPSHOT.jar --master \

~Let me recheck that - I think the celeborn diff did not apply in my local build~\r\n\r\nWorks fine with celeborn jar in spark jar directory, not with --jars for 3.1: which is what I would expect actually (given SPARK-45762).\r\n\r\nHow were you able to test/validate this @SteNicholas ? It is possible I am missing some steps here ?

@mridulm, I just tested with Spark SQL via above command. Did you ever try to test Spark SQL to verify?\r\nMeanwhile, why does the above application fail with `Caused by: java.lang.ClassNotFoundException: org.apache.spark.shuffle.celeborn.SparkShuffleManager`? The `celeborn-client-spark-3-shaded_2.12-0.5.0-SNAPSHOT.jar` should be in classpath.

Hi @SteNicholas , I was able to reproduce this behavior when celeborn jar is there in both spark platform jars and is specified by users via `--jars`.\r\nDoes this match your deployment experience ?\r\n\r\nIf yes, in this case, it might simply be easier to ask users not to add celeborn jar to their --jars ?\r\n(`sc.parallelize(1 to 40).repartition(20).flatMap(_ => (1 to 1500000).iterator.map(num => num)).repartition(25).count()` - though the specific query should not matter in this case)\r\n\r\nPlease let me know if I am missing anything.

@mridulm, my deployment experience is that the celeborn client jar is not placed in `jars` directory but placed in HDFS which path is set to `spark.jars` for using `SparkShuffleManager`. The reason why put the celeborn client jar to HDFS is that we need to decouple the celebrity client release from the spark release. Meanwhile, we could not ask the user not to do this behavior when user need to use `--jar` way. This is just internal deployment experience. Please let me know if anything wrong.

Before 4.0, Apache Spark does not support shuffle manager from user jars - so I am not sure how this is working for you ... unless the fix was cherry picked/independently fixed in the Spark fork you are running perhaps ?\n\nOnce 4.0 is released, this patch will become relevant: so the PR is useful and I am in favor of merging it ... I want to make sure we have the right expectations: given spark does not support this feature before 4.0, trying this will fail for users 😃 

@mridulm, I uses the internal Spark 3.1 version to verify this. Anyway, this pull request could help user to confirm whether to use Celeborn in `SparkShuffleManager`.\r\n@mridulm, @pan3793, @cfmcgrady, @cxzl25, could this pull request be merged?

Merged to main(v0.5.0).

+CC @otterc, @waitinfuture , @pan3793, @FMX, @SteNicholas \r\n\r\nWould be great if you can give feedback to help improve the documentation ! Thanks.

Thanks for the review @SteNicholas !\r\nGiven this is documentation change, would be great if there are additional eyes on it.\r\nTagging reviews of the SASL and TLS features ...\r\n+CC @otterc, @waitinfuture , @pan3793, @FMX

Ping @FMX, @szetszwo, @pan3793, @cxzl25.

@szetszwo, thanks for your review. cc @FMX.

does it allow rolling upgrades? should we upgrade followers or the leader first or something else?

@pan3793, the rolling upgrade strategy should be:\r\n\r\n1. Try to upgrade a non-leader master node first.\r\n2. Follow the strategy of upgrading a single worker node - multiple worker nodes - all upgrades.\r\n\r\ncc @RexXiong.

@SteNicholas Hi, I wonder if this PR affects the rolling upgrade process. Can ratis 3.0.1 servers communicate with ratis 2.5.1 servers? \r\nCan a server of ratis 3.0.1 recover from meta data generated by the ratis 2.5.1 server?

We meet same issue as https://issues.apache.org/jira/browse/RATIS-1860, better to upgrade ratis

@FMX, @pan3793, @AngersZhuuuu, I have tested the rolling upgrade process in test environment as follows: \r\n![image](https://github.com/apache/celeborn/assets/10048174/c7897953-a1de-4c66-a50d-e572b2b31965)\r\nThe result of rolling upgrade is that there is no compatibility problem between the communication of 2.5.1 ratis server and 3.0.1 ratis server.\r\n![image](https://github.com/apache/celeborn/assets/10048174/a8f3e705-8892-4115-942d-477cad7de083)\r\nMeanwhile, I have run a test application successfully based on the above situation of master:\r\n<img width="1440" alt="image" src="https://github.com/apache/celeborn/assets/10048174/cc50f8dd-f212-4ea7-be8a-9e26d8603dba">\r\nPTAL.

Ping @pan3793, @FMX.  PTAL.

Merge to main(v0.5.0)

Merging to branch-0.4(v0.4.1).

I think you need to check exception in close method as well.

> I think you need to check exception in close method as well.\r\n\r\ndone

Merged into main(v0.5.0) and branch-0.4(v0.4.1).

Ping @pan3793, @FMX, @mridulm.

@pan3793, I have replaced `org.fusesource.leveldbjni` with `org.openlabtesting.leveldbjni`. PTAL.

Merged to main/0.4

I can see that there are UT failures, can you investigate the failures?

@onebox-li, @FMX, #2369 and #2372 does not cherry pick, which cause the failure of CI.

LGTM

Merging to branch-0.4(v0.4.1).

Thanks all for review, and @SteNicholas cherry-pick necessary PRs.

Merged to main(0.5)

Merged to main for 0.5

Nice !

+CC @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2471?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `77.77778%` with `10 lines` in your changes are missing coverage. Please review.\n> Project coverage is 40.68%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1350264`)](https://app.codecov.io/gh/apache/celeborn/pull/2471?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 8 commits behind head on main.\n\n> :exclamation: Current head 1350264 differs from pull request most recent head ec1e551. Consider uploading reports for the commit ec1e551 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2471?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2471?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 68.43% | [4 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2471?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2471?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 66.67% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2471?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2471      +/-   ##\n==========================================\n+ Coverage   40.17%   40.68%   +0.51%     \n==========================================\n  Files         218      219       +1     \n  Lines       13742    13903     +161     \n  Branches     1214     1235      +21     \n==========================================\n+ Hits         5520     5655     +135     \n- Misses       7905     7922      +17     \n- Partials      317      326       +9     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2471?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks for the reviews @SteNicholas, @waitinfuture !

cc @RexXiong @FMX PTAL

This is ready for review.\r\n+CC @otterc, @waitinfuture, @FMX , @pan3793 

+CC @hasnain-db for feedback as well.

This is the last functionality related PR for the TLS support - openssl support can be a future addition.\r\n(Ofcourse documentation is also pending !)

Thanks for the review @hasnain-db !

Ping @RexXiong, @turboFei.

Thanks, merge to main(v0.5.0)

be careful with Ratis and Hadoop compatibility when upgrading dropwizard.

@CodingCat, please follow the [contribution guide](https://github.com/apache/celeborn/blob/main/CONTRIBUTING.md) to run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` when updating `CelebornConf`.

> UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite\r\n\r\neh? I remember this was part of unit test to detect any inconsistency between CelebornConf and doc file, it is removed?

@CodingCat, is `celeborn.client.shuffle.batchHandleChangePartition.parallelism` internal? The internal config option does not generate confige document change. Therefore, you could not invoke `internal` for this config option.

If it makes it easier to review, I can split it into two - updates to `CelebornConf`, which is mostly config updates; and wiring up the new transport module to RpcEnv and usages.\r\nPlease let me know if that helps.

The test failure seems to be some timeout issue ? this is ready for review.\r\n\r\n+CC @otterc , @waitinfuture, @FMX , @pan3793 

code change lgtm, could you pls add an item to the migration guide?

> code change lgtm, could you pls add an item to the migration guide?\r\n\r\nI was planning to add that as part of https://issues.apache.org/jira/browse/CELEBORN-1353 .. should I be adding it as part of this PR instead ?\r\n\r\nEdit: added a note in CELEBORN-1353 on migration guide

@mridulm thanks for opening a dedicated ticket for docs, merged to main for 0.5

Thanks for the reviews @FMX and @pan3793 !

If it makes it easier to review, I can split it into two - updates to `CelebornConf`, which is mostly config updates; and wiring up the new transport module to RpcEnv and usages.\r\nPlease let me know if that helps.

Let me close and recreate this PR ... looks messed up

Ping @FMX, @cxzl25, @RexXiong.\r\n@mridulm, `LevelDBProvider` and `RocksDBProvider` of Spark has the same problem. PTAL.

cc @FMX, @AngersZhuuuu.

> Should also do manual compatibility tests with older clients(eg. 0.4.0)\r\n\r\nTested with the old client (v0.4.0), Celeborn works well.

Ping @RexXiong, @turboFei.

Merging to main(v0.5.0).

cc @FMX, @pan3793, @cxzl25.

Merging to main(v0.5.0).

Merging to main(v0.5.0) and branch-0.4(0.4.1).

cc @RexXiong @FMX @cfmcgrady 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @RexXiong, @turboFei.

does it happen today too?

@pan3793, I have tested in K8S test environment and occured the same exception with above Spark pull request, which exception is occasionally thrown.

Thanks. Merge to main(v0.5.0)

Thanks. Merged into main(v0.5.0) and branch-0.4(v0.4.1)

Ping @FMX, @RexXiong, @TanYuxin-tyx.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2448?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.23%. Comparing base [(`186899f`)](https://app.codecov.io/gh/apache/celeborn/commit/186899f53f8fa807b429684a7703c9b5ee797ec2?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`31e1087`)](https://app.codecov.io/gh/apache/celeborn/pull/2448?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n> :exclamation: Current head 31e1087 differs from pull request most recent head b301f7e. Consider uploading reports for the commit b301f7e to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2448      +/-   ##\n==========================================\n+ Coverage   39.22%   39.23%   +0.01%     \n==========================================\n  Files         217      217              \n  Lines       13445    13445              \n  Branches     1177     1177              \n==========================================\n+ Hits         5273     5274       +1     \n  Misses       7871     7871              \n+ Partials      301      300       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2448?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2447?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `6 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.21%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`51b008a`)](https://app.codecov.io/gh/apache/celeborn/pull/2447?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2447?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2447?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2447?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2447      +/-   ##\n==========================================\n- Coverage   39.24%   39.21%   -0.02%     \n==========================================\n  Files         217      217              \n  Lines       13432    13438       +6     \n  Branches     1173     1175       +2     \n==========================================\n- Hits         5270     5269       -1     \n- Misses       7863     7871       +8     \n+ Partials      299      298       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2447?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main

Thanks for the quick review @pan3793 !

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2446?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `62.50000%` with `3 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.23%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`23b333c`)](https://app.codecov.io/gh/apache/celeborn/pull/2446?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2446?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/celeborn/pull/2446?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fclient%2FMasterClient.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | 33.34% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2446?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/client/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/celeborn/pull/2446?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fclient%2FMasterNotLeaderException.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3Rlck5vdExlYWRlckV4Y2VwdGlvbi5qYXZh) | 80.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2446?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2446      +/-   ##\n==========================================\n- Coverage   39.24%   39.23%   -0.00%     \n==========================================\n  Files         217      217              \n  Lines       13432    13445      +13     \n  Branches     1173     1177       +4     \n==========================================\n+ Hits         5270     5274       +4     \n- Misses       7863     7871       +8     \n- Partials      299      300       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2446?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Oooh, that is a legitimate test failure - let me double check

+CC @otterc 

Thanks for the reviews @pan3793 , @otterc and @cxzl25 !

BTW, it is recommended to use `./dev/merge_pr.py` to merge PR.

> BTW, it is recommended to use `./dev/merge_pr.py` to merge PR.\r\n\r\nOh ok. Will use that next time. Thank you for letting me know.

@otterc could you please open PR to apache/celeborn-website to update your committer info?

+CC @otterc 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2445?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.24%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`35b6694`)](https://app.codecov.io/gh/apache/celeborn/pull/2445?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2445?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2445?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 0.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2445?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2445      +/-   ##\n==========================================\n- Coverage   39.24%   39.24%   -0.00%     \n==========================================\n  Files         217      217              \n  Lines       13432    13433       +1     \n  Branches     1173     1174       +1     \n==========================================\n  Hits         5270     5270              \n  Misses       7863     7863              \n- Partials      299      300       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2445?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main

Thanks for the reviews @pan3793 , @s0nskar !

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2444?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `85.71429%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.26%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`bd574e9`)](https://app.codecov.io/gh/apache/celeborn/pull/2444?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 34 commits behind head on main.\n\n> :exclamation: Current head bd574e9 differs from pull request most recent head de1b2e6. Consider uploading reports for the commit de1b2e6 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2444?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2444?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2444?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2444      +/-   ##\n==========================================\n+ Coverage   39.24%   39.26%   +0.03%     \n==========================================\n  Files         217      217              \n  Lines       13432    13439       +7     \n  Branches     1173     1173              \n==========================================\n+ Hits         5270     5276       +6     \n- Misses       7863     7864       +1     \n  Partials      299      299              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2444?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @waitinfuture  @SteNicholas @FMX  can you guys please take a look? thanks. 

@akpatnam25, why does this need to log celeborn config? Could user use `/conf` REST API to get the config? BTW, if this need to log celeborn log, you could invoke `HttpService#getConf` method to log.

> @akpatnam25, why does this need to log celeborn config? Could user use `/conf` REST API to get the config? BTW, if this need to log celeborn log, you could invoke `HttpService#getConf` method to log.\r\n\r\nWe do not have the REST api changes internally yet, as we are running with 0.4 still. This would unblock us quick, in the long term I agree we should use the /conf REST API. I will use the `HttpService#getConf`, I did not know it existed. 

Hi @akpatnam25 , please run `UPDATE=1 build/mvn clean test -pl common -am -Pspark-3.3 -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` to update the doc since configs changed in this PR.

@SteNicholas @pan3793  @FMX  @waitinfuture  I have updated this PR. please take another look, thanks 

@akpatnam25 There is a compilation error that needs to be fixed first.\r\n<img width="1250" alt="截屏2024-04-08 14 40 36" src="https://github.com/apache/celeborn/assets/4150993/be21d7d8-991e-4590-aced-362cb920b02e">\r\n

> @akpatnam25 There is a compilation error that needs to be fixed first. <img alt="截屏2024-04-08 14 40 36" width="1250" src="https://private-user-images.githubusercontent.com/4150993/320377887-be21d7d8-991e-4590-aced-362cb920b02e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTI1NTg4MzEsIm5iZiI6MTcxMjU1ODUzMSwicGF0aCI6Ii80MTUwOTkzLzMyMDM3Nzg4Ny1iZTIxZDdkOC05OTFlLTQ1OTAtYWNlZC0zNjJjYjkyMGIwMmUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDQwOCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA0MDhUMDY0MjExWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDFjNWJjNmYxMTgxMTkxOTkwNWEzZTA4ZTBhYzQzZmU1YzRhOTRlNjA3N2NjNTFjMGVkOTJiNmMxZDY2NmYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.feI-msNlFWw8S8m3HopPFNrbfZuqwENnYjwl7pOSZjs">\r\n\r\nI accidentally deleted a line! Should be fixed now. @FMX 

thanks for the reviews @SteNicholas  @FMX @pan3793 @waitinfuture !!

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2441?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `10 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.22%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`64cb1fe`)](https://app.codecov.io/gh/apache/celeborn/pull/2441?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2441?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/rpc/RpcEndpoint.scala](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2FRpcEndpoint.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbmRwb2ludC5zY2FsYQ==) | 0.00% | [7 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/rpc/netty/Dispatcher.scala](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2Fnetty%2FDispatcher.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9EaXNwYXRjaGVyLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/rpc/netty/NettyRpcCallContext.scala](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2Fnetty%2FNettyRpcCallContext.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0NhbGxDb250ZXh0LnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2Fnetty%2FNettyRpcEnv.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2441      +/-   ##\n==========================================\n- Coverage   39.24%   39.22%   -0.02%     \n==========================================\n  Files         217      217              \n  Lines       13432    13440       +8     \n  Branches     1173     1174       +1     \n==========================================\n  Hits         5270     5270              \n- Misses       7863     7871       +8     \n  Partials      299      299              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2441?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong @waitinfuture @mridulm @SteNicholas @pan3793 Please take a look\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2440?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `18.88889%` with `292 lines` in your changes missing coverage. Please review.\n> Project coverage is 39.96%. Comparing base [(`0298cfb`)](https://app.codecov.io/gh/apache/celeborn/commit/0298cfb3559c0a6345b743840c40582f5ceea4d5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c46cafc`)](https://app.codecov.io/gh/apache/celeborn/commit/c46cafcc818013f1a989eb2424daa4a33035d4a9?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 15 commits behind head on main.\n\n> :exclamation: **Current head c46cafc differs from pull request most recent head df8a5d4**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit df8a5d4 to get more accurate results.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2440?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...mon/http/authentication/AuthenticationFilter.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FAuthenticationFilter.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9BdXRoZW50aWNhdGlvbkZpbHRlci5zY2FsYQ==) | 0.00% | [88 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...p/authentication/SpnegoAuthenticationHandler.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FSpnegoAuthenticationHandler.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9TcG5lZ29BdXRoZW50aWNhdGlvbkhhbmRsZXIuc2NhbGE=) | 0.00% | [71 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...tp/authentication/BasicAuthenticationHandler.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FBasicAuthenticationHandler.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9CYXNpY0F1dGhlbnRpY2F0aW9uSGFuZGxlci5zY2FsYQ==) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...p/authentication/BearerAuthenticationHandler.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FBearerAuthenticationHandler.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9CZWFyZXJBdXRoZW50aWNhdGlvbkhhbmRsZXIuc2NhbGE=) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ttp/authentication/HttpAuthenticationFactory.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FHttpAuthenticationFactory.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9IdHRwQXV0aGVudGljYXRpb25GYWN0b3J5LnNjYWxh) | 0.00% | [23 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ttp/authentication/AuthenticationAuditLogger.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FAuthenticationAuditLogger.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9BdXRoZW50aWNhdGlvbkF1ZGl0TG9nZ2VyLnNjYWxh) | 0.00% | [14 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...on/http/authentication/AuthenticationHandler.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2Fauthentication%2FAuthenticationHandler.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hdXRoZW50aWNhdGlvbi9BdXRoZW50aWNhdGlvbkhhbmRsZXIuc2NhbGE=) | 0.00% | [14 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/authentication/BasicPrincipal.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fauthentication%2FBasicPrincipal.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2F1dGhlbnRpY2F0aW9uL0Jhc2ljUHJpbmNpcGFsLnNjYWxh) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/server/common/http/HttpAuthUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2Fhttp%2FHttpAuthUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwQXV0aFV0aWxzLnNjYWxh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&filepath=service%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fserver%2Fcommon%2FHttpService.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [2 more](https://app.codecov.io/gh/apache/celeborn/pull/2440?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2440      +/-   ##\n==========================================\n- Coverage   40.49%   39.96%   -0.52%     \n==========================================\n  Files         222      233      +11     \n  Lines       14289    14648     +359     \n  Branches     1291     1329      +38     \n==========================================\n+ Hits         5785     5853      +68     \n- Misses       8173     8464     +291     \n  Partials      331      331              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2440?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This is PR is almost ready. cc @RexXiong @SteNicholas \r\n\r\nI have not added spnego testing, it will introduce some testing dependencies. 

also cc @pan3793 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

just come back after paternity leave, will address the comments

address all comments, cc @pan3793 

@turboFei welcome back, the changes seem partially applied to master/worker configurations, could you please revise again to align them? others lgtm.

btw, main branch goes 0.6 now

Thank you @pan3793 , aligned the config items between master and work, updated the conf version.

cc  @pan3793 

Thanks, merged to main for 0.6

@turboFei welcome back!

cc @FMX, @pan3793, @cfmcgrady, @otterc, @mridulm.

The test failure does not look related to this PR (and the same tests passed [here](https://github.com/apache/celeborn/pull/2416)):\r\n```\r\n- celeborn spark integration test - pushdata timeout will add to pushExcludedWorkers *** FAILED ***\r\n```

+CC @otterc, @FMX, @RexXiong, @SteNicholas, @waitinfuture 

@mridulm, there are unnecessary changes of document in this pull request. Please check the changes of document.

Oh no, this is some weird artifact of pulling from my other branch - let me revert those, sorry about that !

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2438?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `72.98851%` with `47 lines` in your changes are missing coverage. Please review.\n> Project coverage is 40.17%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ead0789`)](https://app.codecov.io/gh/apache/celeborn/pull/2438?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n> :exclamation: Current head ead0789 differs from pull request most recent head e5155e5. Consider uploading reports for the commit e5155e5 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2438?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...apache/celeborn/common/network/ssl/SSLFactory.java](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fssl%2FSSLFactory.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zc2wvU1NMRmFjdG9yeS5qYXZh) | 73.28% | [17 Missing and 14 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2FTransportContext.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | 72.23% | [8 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fclient%2FTransportClientFactory.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | 77.78% | [3 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2Fnetty%2FNettyRpcEnv.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 33.34% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2438?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2438      +/-   ##\n==========================================\n+ Coverage   39.24%   40.17%   +0.94%     \n==========================================\n  Files         217      218       +1     \n  Lines       13432    13600     +168     \n  Branches     1173     1195      +22     \n==========================================\n+ Hits         5270     5463     +193     \n+ Misses       7863     7823      -40     \n- Partials      299      314      +15     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2438?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@SteNicholas, please do let me know if I can help clarify better ... hopefully the details above help.

I will merge it tomorrow if it is still open.

LGTM. Merging to main(v0.5.0).

Thanks for the reviews @SteNicholas, @otterc !

Ping @RexXiong, @turboFei.

Ping @FMX, @RexXiong, @TanYuxin-tyx.

LGTM. Thanks

ping @RexXiong, @FMX.

Ping @FMX, @RexXiong, @TanYuxin-tyx.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Thanks! Merging to main(v0.5.0)

@RexXiong @waitinfuture @mridulm @SteNicholas @pan3793 Please take a look

Besides pushing and fetching data, I think we also need to enforce authentication checks for the following RPCs: from LifecycleManager to Worker (ReserveSlots, CommitFiles, DestroyWorkerSlots), and from LifecycleManager to Master (HeartbeatFromApplication, RequestSlots, ApplicationLost, PbUnregisterShuffle, etc.)

> My only concern is if the client id is being set will be visible to other threads or not (earlier, it was within the same thread iirc) ... might be a good idea to change it to an AtomicReference ?\r\n\r\n@mridulm the client id is being accessed by only one of the event loop which is assigned to the channel. It is not being accessed by different threads. This is similar to how this is done in Spark.

@RexXiong @mridulm Please let me know if you have any other concerns

Looks good to me.

Merge to main(v0.5.0)

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

gentile ping @SteNicholas and @RexXiong 

Unrelated UT failure:\r\n```\r\n - celeborn spark integration test - pushdata timeout will add to pushExcludedWorkers *** FAILED ***\r\n[info]   WORKER_UNKNOWN did not equal PUSH_DATA_TIMEOUT_PRIMARY, and WORKER_UNKNOWN did not equal PUSH_DATA_TIMEOUT_REPLICA (PushDataTimeoutTest.scala:150)\r\n[info]   org.scalatest.exceptions.TestFailedException:\r\n[info]   at org.scalatest.Assertions.newAssertionFailedException(Assertions.scala:472)\r\n[info]   at org.scalatest.Assertions.newAssertionFailedException$(Assertions.scala:471)\r\n[info]   at org.scalatest.Assertions$.newAssertionFailedException(Assertions.scala:1231)\r\n[info]   at org.scalatest.Assertions$AssertionsHelper.macroAssert(Assertions.scala:1295)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.$anonfun$new$6(PushDataTimeoutTest.scala:150)\r\n[info]   at scala.collection.Iterator.foreach(Iterator.scala:943)\r\n```

or we can just ignore the test

@SteNicholas thanks, address all the comments

It is weird, not sure why the UT failed, will convert it to draft.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @SteNicholas addressed all comments 

@turboFei could please refer to a extactly release version of Spark? e.g. use tag v3.5.1 or something, so that we can track upstream change easliy

Merged to main(v0.5.0).

Ping @RexXiong.

We checked it here, so user will not meet issue if it is smaller than 8.\r\nhttps://github.com/apache/celeborn/blob/bd7c99f05615432512881e7f1b9ee0bdc587c476/service/src/main/scala/org/apache/celeborn/server/common/http/HttpServer.scala#L127

https://github.com/jetty/jetty.project/blob/48f6ab7289e6bf359db92686a3b81d154bc6c074/jetty-core/jetty-util/src/main/java/org/eclipse/jetty/util/thread/QueuedThreadPool.java#L118-L126\r\n\r\n`200` should be the default maxThreads of `QueuedThreadPool`, not the maximum limitation.

BTW, now the UT stuck for threadDump api:\r\nhttps://github.com/apache/celeborn/actions/runs/8462056188/job/23182806487?pr=2428\r\n<img width="1291" alt="image" src="https://github.com/apache/celeborn/assets/6757692/f39d7bb9-6e31-4ce3-a573-1ff86f335318">\r\n\r\n<img width="762" alt="image" src="https://github.com/apache/celeborn/assets/6757692/437592dd-fc9c-404d-a452-834fcf630bd1">\r\n

threadDump api UT is new introduced in CELEBORN-1317.\r\n\r\nBefore there is no UT to cover that, not sure why it stuck now.

The test failure looks unrelated to this PR, please let me know if I am missing anything:\r\n```\r\n[info] Test run org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController started\r\n[info] Test org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController.testUserMetrics started\r\n[info] Test org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController.testSingleUser started\r\n[error] Test org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController.testSingleUser failed: java.lang.AssertionError: null, took 0.003 sec\r\n[error]     at org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController.testSingleUser(TestCongestionController.java:75)\r\n[error]     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n[error]     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n[error]     at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n[error]     at java.lang.reflect.Method.invoke(Method.java:568)\r\n[error]     ...\r\n[info] Test org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController.testMultipleUsers started\r\n[info] Test run org.apache.celeborn.service.deploy.worker.congestcontrol.TestCongestionController finished: 1 failed, 0 ignored, 3 total, 4.018s\r\n```

+CC @otterc, @pan3793, @waitinfuture, @FMX 

Thanks for the reviews @FMX, @RexXiong and @SteNicholas !

@CodingCat, this has already been fixed in #2424. @turboFei, PTAL.

> @CodingCat, this has already been fixed in #2424. @turboFei, PTAL.\n\nyes. similar fix, thanks

cc @FMX, @RexXiong.

cc @RexXiong 

UnRelated failure:\r\nhttps://github.com/apache/celeborn/actions/runs/8458601526/job/23173217153\r\n```\r\n[info] - celeborn spark integration test - pushdata timeout will add to pushExcludedWorkers *** FAILED ***\r\n[info]   WORKER_UNKNOWN did not equal PUSH_DATA_TIMEOUT_PRIMARY, and WORKER_UNKNOWN did not equal PUSH_DATA_TIMEOUT_REPLICA (PushDataTimeoutTest.scala:150)\r\n[info]   org.scalatest.exceptions.TestFailedException:\r\n[info]   at org.scalatest.Assertions.newAssertionFailedException(Assertions.scala:472)\r\n[info]   at org.scalatest.Assertions.newAssertionFailedException$(Assertions.scala:471)\r\n[info]   at org.scalatest.Assertions$.newAssertionFailedException(Assertions.scala:1231)\r\n[info]   at org.scalatest.Assertions$AssertionsHelper.macroAssert(Assertions.scala:1295)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.$anonfun$new$6(PushDataTimeoutTest.scala:150)\r\n[info]   at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:563)\r\n[info]   at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:561)\r\n[info]   at scala.collection.AbstractIterable.foreach(Iterable.scala:919)\r\n[info]   at org.apache.celeborn.tests.spark.PushDataTimeoutTest.$anonfun$new$5(PushDataTimeoutTest.scala:149)\r\n```

cc @mridulm, @otterc, @FMX, @RexXiong, @waitinfuture.

Code change LGTM, please update the PR description, we are using LOG4J2 with `log4j2.xml` rahter than LOG4J1 with `log4j.properties`\r\n\r\n> `log4j.logger.XXX`

@pan3793, I have updated the description of this pull request. PTAL.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

`ReloadingX509TrustManager` and `ReloadingX509TrustManagerSuiteJ` are pretty much unmodified from Spark - I can pull it to a separate PR if that helps with the review.

Note to reviewers, the ssl configs in this PR are namespaced differently from the current module configs.\r\n`celeborn.ssl.<module>` (like `celeborn.ssl.<module>.enabled`) instead of the current `celeborn.<module>.<conf>` (for example `celeborn.<module>.io.mode`).\r\nThis was done primarily to indicate the inheritance relationship of `celeborn.ssl.rpc` (for ex) to `celeborn.ssl` configs - that is, if `celeborn.ssl.<module>.enabled` is not specified, it checks `celeborn.ssl.enabled` (and then the default)\r\n\r\nBut I am not sure if this fits with the overall Celeborn configuration conventions or not.\r\n\r\n

+CC @otterc, @FMX , @pan3793, @waitinfuture

Thanks for the review @pan3793, that was faster than me adding comments to help with the review :-)

Responding to [this query](https://github.com/apache/celeborn/pull/2413#pullrequestreview-1957708478) from @FMX:\r\n> These files "server.jds","server_another.jdk","truststore.jdk" and "truststore-without-ca.jdk" are identical.\r\n> Maybe keeping one copy can be enough.\r\n\r\n\r\nIIRC this was failing earlier - but it is probably an issue with the earlier iteration of the resources (the paths were probably different earlier) - I have updated #2416 with this change, will verify how the entire set of suites run.\r\n

Looks like the tests passed ! We are good to go with the duplicate files removed @FMX :)

Looks like local tests fail, though GA tests work fine - let me double check why

[This change](https://github.com/apache/celeborn/pull/2416/commits/72ab18e91ce1ac2d4e552548d77012ed9639d713) should fix it - and not need duplication of jks files.\r\n\r\nWe should wait for #2416 to successfully finish all tests though.

Thanks, merged to main for 0.5

Thanks for the reviews @FMX, @pan3793 !

+CC @rmcyang

All changes related to this PR have been merged, as subtasks of CELEBORN-1343, closing this PR.\r\nThanks to everyone in the community for the quick and indepth reviews !

Ping @RexXiong, @FMX, @TanYuxin-tyx, @KarmaGYZ.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2414?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.97%. Comparing base [(`a371f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a371f934cff0507fc97c7596ed7f9b4be2f21e62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`fe0a073`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2414?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2414      +/-   ##\n==========================================\n+ Coverage   48.85%   48.97%   +0.13%     \n==========================================\n  Files         209      209              \n  Lines       13102    13102              \n  Branches     1134     1134              \n==========================================\n+ Hits         6400     6416      +16     \n+ Misses       6282     6269      -13     \n+ Partials      420      417       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2414?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2413?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.95%. Comparing base [(`8fbcbea`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8fbcbead485ca5df8da103271a1f22b42451a325?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`6240ad0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2413?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2413      +/-   ##\n==========================================\n+ Coverage   48.83%   48.95%   +0.13%     \n==========================================\n  Files         209      209              \n  Lines       13102    13102              \n  Branches     1134     1134              \n==========================================\n+ Hits         6397     6413      +16     \n+ Misses       6283     6270      -13     \n+ Partials      422      419       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2413?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+CC @otterc , @waitinfuture 

> Actually, now that I dropped OpenSSL support, let me double check if all the deps are required.\r\n\r\nAs expected, we dont need it anymore, reduces the change a bit and drops unnecessary deps :-)

ping @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2412?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.90%. Comparing base [(`21d5698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/21d5698a90014f880130ea487751663d06f11650?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1a6506e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2412?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2412      +/-   ##\n==========================================\n- Coverage   48.96%   48.90%   -0.06%     \n==========================================\n  Files         209      209              \n  Lines       13102    13109       +7     \n  Branches     1134     1134              \n==========================================\n- Hits         6414     6409       -5     \n- Misses       6270     6280      +10     \n- Partials      418      420       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2412?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+CC @otterc for initial feedback.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `73.59307%` with `122 lines` in your changes are missing coverage. Please review.\n> Project coverage is 50.11%. Comparing base [(`d62f75f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d62f75fdc7ecfc96de4f6d4e384b6bf85ad4205a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`f8e0893`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...apache/celeborn/common/network/ssl/SSLFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zc2wvU1NMRmFjdG9yeS5qYXZh) | 72.18% | [18 Missing and 14 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/ssl/ReloadingX509TrustManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zc2wvUmVsb2FkaW5nWDUwOVRydXN0TWFuYWdlci5qYXZh) | 76.55% | [14 Missing and 5 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/network/util/NettyLogger.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5TG9nZ2VyLmphdmE=) | 22.73% | [15 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/common/network/protocol/SslMessageEncoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9Tc2xNZXNzYWdlRW5jb2Rlci5qYXZh) | 58.34% | [12 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...n/network/protocol/EncryptedMessageWithHeader.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9FbmNyeXB0ZWRNZXNzYWdlV2l0aEhlYWRlci5qYXZh) | 72.55% | [6 Missing and 8 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | 69.24% | [9 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | 77.78% | [3 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | 75.00% | [2 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 97.41% | [0 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [1 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2411      +/-   ##\n==========================================\n+ Coverage   48.84%   50.11%   +1.28%     \n==========================================\n  Files         209      214       +5     \n  Lines       13102    13558     +456     \n  Branches     1134     1195      +61     \n==========================================\n+ Hits         6398     6793     +395     \n- Misses       6284     6304      +20     \n- Partials      420      461      +41     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2411?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Fixing build failure ... due to dependencies-client-* files not being regenerated.

Thanks for the proposal and efforts @mridulm . Just a reminder that please remember to update the `LICENSE` file to mark classes ported from Apache Spark.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2410?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.83%. Comparing base [(`a371f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a371f934cff0507fc97c7596ed7f9b4be2f21e62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`b3e7d49`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2410?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2410      +/-   ##\n==========================================\n- Coverage   48.85%   48.83%   -0.02%     \n==========================================\n  Files         209      209              \n  Lines       13102    13102              \n  Branches     1134     1134              \n==========================================\n- Hits         6400     6397       -3     \n- Misses       6282     6283       +1     \n- Partials      420      422       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2410?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `85.71429%` with `3 lines` in your changes are missing coverage. Please review.\n> Project coverage is 49.03%. Comparing base [(`a371f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a371f934cff0507fc97c7596ed7f9b4be2f21e62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`dc629d2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2409      +/-   ##\n==========================================\n+ Coverage   48.85%   49.03%   +0.18%     \n==========================================\n  Files         209      209              \n  Lines       13102    13123      +21     \n  Branches     1134     1134              \n==========================================\n+ Hits         6400     6433      +33     \n+ Misses       6282     6272      -10     \n+ Partials      420      418       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2409?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @mridulm, @RexXiong. PTAL.

@mridulm, thanks for review. IMO, most scenarios only need coding profiling of Celeborn Worker in production practice, therefore worker coding profiling is given priority to support. If there is strong need to target master, I would like to support in future.\r\ncc @RexXiong.

As the fleet size increases (both compute cluster (20k+ nodes) and Celeborn cluster (2k+ workers) ), master scaling is also a challenge.\nWe dont necessarily need to add support for master in this PR, as long as adding that support is not a challenge

@mridulm, I agree with the above point of view. Thanks for your suggestion.\r\n@RexXiong, do you have other comments?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2408?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.97%. Comparing base [(`a371f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a371f934cff0507fc97c7596ed7f9b4be2f21e62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a84adbb`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2408?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2408      +/-   ##\n==========================================\n+ Coverage   48.85%   48.97%   +0.13%     \n==========================================\n  Files         209      209              \n  Lines       13102    13102              \n  Branches     1134     1134              \n==========================================\n+ Hits         6400     6416      +16     \n+ Misses       6282     6269      -13     \n+ Partials      420      417       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2408?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2407?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.84%. Comparing base [(`adaa96f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/adaa96fc6037a623dd2f14a2c37fc93aa6c6ddff?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`fcad94c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2407?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2407      +/-   ##\n==========================================\n- Coverage   48.85%   48.84%   -0.01%     \n==========================================\n  Files         209      209              \n  Lines       13102    13102              \n  Branches     1134     1134              \n==========================================\n- Hits         6400     6398       -2     \n- Misses       6282     6284       +2     \n  Partials      420      420              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2407?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.96%. Comparing base [(`4562320`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/45623206269f69c2506b0e818a0eba6e764bdd5b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`569d31b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2406      +/-   ##\n==========================================\n+ Coverage   48.83%   48.96%   +0.14%     \n==========================================\n  Files         209      209              \n  Lines       13101    13101              \n  Branches     1134     1134              \n==========================================\n+ Hits         6396     6414      +18     \n+ Misses       6283     6269      -14     \n+ Partials      422      418       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2406?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @onebox-li @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2404?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `96.55172%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.92%. Comparing base [(`ab252c2`)](https://app.codecov.io/gh/apache/celeborn/commit/ab252c2cf72e23481c08716326762e5b31fc8461?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`bfaba09`)](https://app.codecov.io/gh/apache/celeborn/pull/2404?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 83 commits behind head on main.\n\n> :exclamation: Current head bfaba09 differs from pull request most recent head fc5e325. Consider uploading reports for the commit fc5e325 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2404?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://app.codecov.io/gh/apache/celeborn/pull/2404?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fwrite%2FSlowStartPushStrategy.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2404?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2404      +/-   ##\n==========================================\n+ Coverage   48.85%   48.92%   +0.08%     \n==========================================\n  Files         209      209              \n  Lines       13101    13120      +19     \n  Branches     1134     1134              \n==========================================\n+ Hits         6399     6418      +19     \n  Misses       6282     6282              \n  Partials      420      420              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2404?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2403?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.83%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`56d2902`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2403?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2403      +/-   ##\n==========================================\n+ Coverage   48.77%   48.83%   +0.07%     \n==========================================\n  Files         209      209              \n  Lines       13109    13101       -8     \n  Branches     1134     1134              \n==========================================\n+ Hits         6393     6397       +4     \n+ Misses       6294     6283      -11     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2403?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2402?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.83%. Comparing base [(`ab252c2`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ab252c2cf72e23481c08716326762e5b31fc8461?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`728cd1d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2402?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2402      +/-   ##\n==========================================\n- Coverage   48.85%   48.83%   -0.02%     \n==========================================\n  Files         209      209              \n  Lines       13101    13101              \n  Branches     1134     1134              \n==========================================\n- Hits         6399     6396       -3     \n- Misses       6282     6283       +1     \n- Partials      420      422       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2402?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2401?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.76%. Comparing base [(`15b0f16`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/15b0f16f74b4dc9839819f4ad7f1761c24208c47?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`785ab21`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2401?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2401      +/-   ##\n==========================================\n- Coverage   48.86%   48.76%   -0.09%     \n==========================================\n  Files         209      209              \n  Lines       13109    13101       -8     \n  Branches     1134     1134              \n==========================================\n- Hits         6404     6387      -17     \n- Misses       6283     6293      +10     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2401?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Merging to main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2400?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.85%. Comparing base [(`91f6378`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/91f63786825b8f39d18aa629c47b6a5c3fd2f325?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`cc964a1`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2400?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2400      +/-   ##\n==========================================\n+ Coverage   48.85%   48.85%   +0.01%     \n==========================================\n  Files         209      209              \n  Lines       13101    13102       +1     \n  Branches     1134     1134              \n==========================================\n+ Hits         6399     6400       +1     \n  Misses       6282     6282              \n  Partials      420      420              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2400?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merging to main(v0.5.0) and branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2399?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.96%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a8016ae`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2399?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2399      +/-   ##\n==========================================\n+ Coverage   48.77%   48.96%   +0.19%     \n==========================================\n  Files         209      209              \n  Lines       13109    13101       -8     \n  Branches     1134     1134              \n==========================================\n+ Hits         6393     6413      +20     \n+ Misses       6294     6270      -24     \n+ Partials      422      418       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2399?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

The change related to FLINK-25055 LGTM.

cc @RexXiong, @FMX.

Thanks, merge to main(v0.5.0)

In this PR, WorkerSummary is restricted in WorkerStatusTracker\r\nPer my perspective, it is suggested to replace all occurrence of WorkerInfo in LifecycleManager if community likes the idea\r\nAlternatively, WorkerStatusTracker can just store UniqueId of WorkerInfo, but UniqueId is just a String, the type information is lost

@ErikFang  I think `WorkerSummary` sounds strange maybe  `WorkerId` would be better. And I think it can replace `WorkerInfo` in most scenarios except the worker reports its disk info to the master and reports usage metrics.

> @ErikFang I think `WorkerSummary` sounds strange maybe `WorkerId` would be better. And I think it can replace `WorkerInfo` in most scenarios except the worker reports its disk info to the master and reports usage metrics.\r\n\r\nWorkerId sounds good to me, will update the PR

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `49.01961%` with `26 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.83%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0e77774`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 12 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 49.02% | [19 Missing and 7 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2398      +/-   ##\n==========================================\n+ Coverage   48.77%   48.83%   +0.06%     \n==========================================\n  Files         209      209              \n  Lines       13109    13129      +20     \n  Branches     1134     1136       +2     \n==========================================\n+ Hits         6393     6410      +17     \n- Misses       6294     6297       +3     \n  Partials      422      422              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2398?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX  all UT passes after applying spotless and rebase\r\n

Currently, all workerInfos sent from the Master to the LifecycleManager have already eliminated the user resource consumption data. So, if we also remove diskInfos at the same time, will workerInfos only contain ports?

> Currently, all workerInfos sent from the Master to the LifecycleManager have already eliminated the user resource consumption data. So, if we also remove diskInfos at the same time, will workerInfos only contain ports?\r\n\r\nok, will update a new commit to remove diskinfo from HeartbeatFromApplicationResponse\r\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2398?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `58 lines` in your changes are missing coverage. Please review.\n> Project coverage is 39.13%. Comparing base [(`fc23800`)](https://app.codecov.io/gh/apache/celeborn/commit/fc238005bd8482ea41612aae6aae7e8f16f918f5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`088ea37`)](https://app.codecov.io/gh/apache/celeborn/pull/2398?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 69 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2398?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/celeborn/pull/2398?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FWorkerInfo.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 0.00% | [58 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2398?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2398      +/-   ##\n==========================================\n- Coverage   48.96%   39.13%   -9.83%     \n==========================================\n  Files         209      217       +8     \n  Lines       13146    13479     +333     \n  Branches     1135     1179      +44     \n==========================================\n- Hits         6436     5273    -1163     \n- Misses       6287     7905    +1618     \n+ Partials      423      301     -122     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2398?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Discussed with @RexXiong, there is still concern about adding WorkerId Type, will start a thread in mail list to discuss\r\n\r\nI will also open a new PR to remove unused fields without adding WorkId 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@RexXiong \r\nsorry for the late update, https://github.com/apache/celeborn/pull/2529 is opened as discussed previously

Since there is another PR for this JIRA, close this one.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2397?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.87%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`3ddbc56`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2397?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2397      +/-   ##\n==========================================\n+ Coverage   48.77%   48.87%   +0.10%     \n==========================================\n  Files         209      209              \n  Lines       13109    13109              \n  Branches     1134     1134              \n==========================================\n+ Hits         6393     6406      +13     \n+ Misses       6294     6282      -12     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2397?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2396?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.84%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`61ac79b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2396?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2396      +/-   ##\n==========================================\n+ Coverage   48.77%   48.84%   +0.07%     \n==========================================\n  Files         209      209              \n  Lines       13109    13101       -8     \n  Branches     1134     1134              \n==========================================\n+ Hits         6393     6398       +5     \n+ Misses       6294     6282      -12     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2396?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `5 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.97%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0edada3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 17 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | 0.00% | [3 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...la/org/apache/celeborn/common/rpc/RpcTimeout.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNUaW1lb3V0LnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2395      +/-   ##\n==========================================\n+ Coverage   48.74%   48.97%   +0.24%     \n==========================================\n  Files         209      209              \n  Lines       13021    13113      +92     \n  Branches     1121     1136      +15     \n==========================================\n+ Hits         6346     6421      +75     \n- Misses       6264     6273       +9     \n- Partials      411      419       +8     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2395?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Celeborn check TimeoutException occurs in many places, if we change RpcTimeoutException to CelebornIOException, it may lead to unexpected behavior.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2395?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `5 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.97%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0edada3`)](https://app.codecov.io/gh/apache/celeborn/pull/2395?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 69 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2395?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2395?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FThreadUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | 0.00% | [3 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...la/org/apache/celeborn/common/rpc/RpcTimeout.scala](https://app.codecov.io/gh/apache/celeborn/pull/2395?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2FRpcTimeout.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNUaW1lb3V0LnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2395      +/-   ##\n==========================================\n+ Coverage   48.74%   48.97%   +0.24%     \n==========================================\n  Files         209      209              \n  Lines       13021    13113      +92     \n  Branches     1121     1136      +15     \n==========================================\n+ Hits         6346     6421      +75     \n- Misses       6264     6273       +9     \n- Partials      411      419       +8     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2395?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2394?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.79%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`723d2a0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2394?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 16 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2394      +/-   ##\n==========================================\n+ Coverage   48.74%   48.79%   +0.05%     \n==========================================\n  Files         209      209              \n  Lines       13021    13109      +88     \n  Branches     1121     1134      +13     \n==========================================\n+ Hits         6346     6395      +49     \n- Misses       6264     6292      +28     \n- Partials      411      422      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2394?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2394?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.79%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`723d2a0`)](https://app.codecov.io/gh/apache/celeborn/pull/2394?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 69 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2394      +/-   ##\n==========================================\n+ Coverage   48.74%   48.79%   +0.05%     \n==========================================\n  Files         209      209              \n  Lines       13021    13109      +88     \n  Branches     1121     1134      +13     \n==========================================\n+ Hits         6346     6395      +49     \n- Misses       6264     6292      +28     \n- Partials      411      422      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2394?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2393?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.87%. Comparing base [(`5043f46`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5043f46aa737a64248230dd5301661657c0541fc?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ba9c4f6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2393?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head ba9c4f6 differs from pull request most recent head 94dfa9c. Consider uploading reports for the commit 94dfa9c to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2393      +/-   ##\n==========================================\n+ Coverage   48.86%   48.87%   +0.02%     \n==========================================\n  Files         209      209              \n  Lines       13109    13109              \n  Branches     1134     1134              \n==========================================\n+ Hits         6404     6406       +2     \n+ Misses       6283     6282       -1     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2393?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2392?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.79%. Comparing base [(`6640e11`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6640e115575734f5ffb9241041b5905b064811ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`5d53a4c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2392?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2392      +/-   ##\n==========================================\n- Coverage   48.86%   48.79%   -0.07%     \n==========================================\n  Files         209      209              \n  Lines       13106    13109       +3     \n  Branches     1134     1134              \n==========================================\n- Hits         6403     6395       -8     \n- Misses       6281     6292      +11     \n  Partials      422      422              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2392?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merging to main(v0.5.0) and branch-0.4(v0.4.1).

@pan3793 cc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2391?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.84%. Comparing base [(`23269d7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/23269d77e97001321bf8371b769192f33e0acffb?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`b900e71`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2391?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2391      +/-   ##\n==========================================\n- Coverage   48.86%   48.84%   -0.01%     \n==========================================\n  Files         209      209              \n  Lines       13109    13101       -8     \n  Branches     1134     1134              \n==========================================\n- Hits         6404     6398       -6     \n+ Misses       6283     6282       -1     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2391?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@pan3793 The Columnar Shuffle interface of Spark-3.5 has changed. I will support Spark-3.5 with  columnar shuffle. Once supported, the CI here can pass.

@pan3793 @cfmcgrady cc

After discussing with @pan3793 \r\n\r\n1. It appears that the issue is not limited to the `celeborn-client-spark-3-shaded_2.12` alone. It would be advisable to address this issue for all shaded clients(spark-2/flink/mr).\r\n2. Additionally, we should consider excluding all third-party dependencies and not just those related to the Celeborn client.\r\n3. It would be helpful to add a comment explaining our approach to this matter.\r\n\r\nThank you.\r\n\r\n

@kerwin-zk, any update?

> @kerwin-zk, any update?\r\n\r\nWorking on it.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2391?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 39.25%. Comparing base [(`6153ba4`)](https://app.codecov.io/gh/apache/celeborn/commit/6153ba4c627de4bdeedcb4f1e4ae45f18ad2965b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`2f77762`)](https://app.codecov.io/gh/apache/celeborn/pull/2391?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n> :exclamation: Current head 2f77762 differs from pull request most recent head 8857f3f. Consider uploading reports for the commit 8857f3f to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2391      +/-   ##\n==========================================\n+ Coverage   39.24%   39.25%   +0.01%     \n==========================================\n  Files         217      217              \n  Lines       13432    13432              \n  Branches     1173     1173              \n==========================================\n+ Hits         5270     5271       +1     \n  Misses       7863     7863              \n+ Partials      299      298       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2391?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.99%. Comparing base [(`0054930`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0054930ce79671fdeccab4351654954f9c397d6a?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`272065b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 6 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2390      +/-   ##\n==========================================\n+ Coverage   48.79%   48.99%   +0.20%     \n==========================================\n  Files         208      209       +1     \n  Lines       13017    13109      +92     \n  Branches     1121     1134      +13     \n==========================================\n+ Hits         6350     6421      +71     \n- Misses       6258     6270      +12     \n- Partials      409      418       +9     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2390?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.5.0) and branch-0.4(v0.4.1)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2389?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 49.00%. Comparing base [(`6640e11`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6640e115575734f5ffb9241041b5905b064811ac?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7292cf0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2389?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2389      +/-   ##\n==========================================\n+ Coverage   48.86%   49.00%   +0.15%     \n==========================================\n  Files         209      209              \n  Lines       13106    13109       +3     \n  Branches     1134     1134              \n==========================================\n+ Hits         6403     6423      +20     \n+ Misses       6281     6269      -12     \n+ Partials      422      417       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2389?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @pan3793, @FMX.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `87.50000%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.88%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`55dbde2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 12 commits behind head on main.\n\n> :exclamation: Current head 55dbde2 differs from pull request most recent head 47297c2. Consider uploading reports for the commit 47297c2 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2388      +/-   ##\n==========================================\n+ Coverage   48.77%   48.88%   +0.12%     \n==========================================\n  Files         209      209              \n  Lines       13109    13114       +5     \n  Branches     1134     1135       +1     \n==========================================\n+ Hits         6393     6410      +17     \n+ Misses       6294     6283      -11     \n+ Partials      422      421       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2388?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture ping for review

Thanks, merged to main for 0.5.0.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.87%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`6417265`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 9 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2386      +/-   ##\n==========================================\n+ Coverage   48.77%   48.87%   +0.10%     \n==========================================\n  Files         209      209              \n  Lines       13109    13102       -7     \n  Branches     1134     1134              \n==========================================\n+ Hits         6393     6402       +9     \n+ Misses       6294     6281      -13     \n+ Partials      422      419       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2386?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@CodingCat, I suggest that you could introduce `ActiveSlots` metric to represent the number of active slots instead of decreasing the `SlotAllocated` metric. IMO, the `SlotAllocated` metric should not decrease for releasing slots, but the `ActiveSlots` could. WDYT?\r\ncc @FMX, @onebox-li.

@onebox-li @SteNicholas thanks for the suggestion! updated

@CodingCat, could you update the test picture of this pull request?

> @CodingCat, could you update the test picture of this pull request?\r\n\r\nsure, updated

@SteNicholas would you please give another review of this?

updated

> @CodingCat, thanks for the updates. Could you also update `monitoring.md`, `METRICS.md` and `celeborn-dashboard.json`? cc @FMX.\r\n\r\nupdated, for METRICS.md, are you referring to `configuration/metrics.md`? that seems to be an abandoned doc?

@CodingCat, I just mean the `METRICS.md` file to document the detail of metrics. BTW, please also update the description of this pull request for the updated metric name.

> @CodingCat, I suggest that you could introduce `ActiveSlots` metric to represent the number of active slots instead of decreasing the `SlotAllocated` metric. IMO, the `SlotAllocated` metric should not decrease for releasing slots, but the `ActiveSlots` could. WDYT? cc @FMX, @onebox-li.\r\n\r\nI agree with you.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2385?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.89%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`4bde36e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2385?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2385      +/-   ##\n==========================================\n+ Coverage   48.77%   48.89%   +0.12%     \n==========================================\n  Files         209      209              \n  Lines       13109    13106       -3     \n  Branches     1134     1132       -2     \n==========================================\n+ Hits         6393     6407      +14     \n+ Misses       6294     6289       -5     \n+ Partials      422      410      -12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2385?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

After discussing with @cfmcgrady , skip checking sbt_build_server_classpath for now. @cfmcgrady will refactor in future.

Merging to main(v0.5.0)

cc @RexXiong, @FMX.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2384?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.88%. Comparing base [(`2bfbab7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2bfbab7a47846e158599476eba51ce6398fd5787?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`178bae9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2384?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2384      +/-   ##\n==========================================\n+ Coverage   48.74%   48.88%   +0.14%     \n==========================================\n  Files         209      208       -1     \n  Lines       13021    13017       -4     \n  Branches     1121     1121              \n==========================================\n+ Hits         6346     6362      +16     \n+ Misses       6264     6248      -16     \n+ Partials      411      407       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2384?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @cxzl25, @FMX.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2383?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.89%. Comparing base [(`2bfbab7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2bfbab7a47846e158599476eba51ce6398fd5787?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7a4e4f5`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2383?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2383      +/-   ##\n==========================================\n+ Coverage   48.74%   48.89%   +0.15%     \n==========================================\n  Files         209      208       -1     \n  Lines       13021    13017       -4     \n  Branches     1121     1121              \n==========================================\n+ Hits         6346     6363      +17     \n+ Misses       6264     6246      -18     \n+ Partials      411      408       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2383?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2382?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.86%. Comparing base [(`d52f934`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d52f934be0f779be20938739390cd725d77d224b?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`cb060c0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2382?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2382      +/-   ##\n==========================================\n+ Coverage   48.75%   48.86%   +0.12%     \n==========================================\n  Files         208      209       +1     \n  Lines       13017    13106      +89     \n  Branches     1121     1134      +13     \n==========================================\n+ Hits         6345     6403      +58     \n- Misses       6260     6281      +21     \n- Partials      412      422      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2382?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2381?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.88%. Comparing base [(`b3eed34`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3eed34b57feeee97fa5c05d8e0f104a36c97488?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9d837cf`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2381?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 6 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2381      +/-   ##\n==========================================\n+ Coverage   48.72%   48.88%   +0.16%     \n==========================================\n  Files         209      208       -1     \n  Lines       13014    13017       +3     \n  Branches     1121     1121              \n==========================================\n+ Hits         6340     6362      +22     \n+ Misses       6263     6247      -16     \n+ Partials      411      408       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2381?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Merging to main(v0.5.0) and branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2379?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.76%. Comparing base [(`dee4afc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/dee4afc58080c6f7730e0c4383f071665748f754?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d6188a4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2379?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2379      +/-   ##\n==========================================\n+ Coverage   48.74%   48.76%   +0.02%     \n==========================================\n  Files         209      209              \n  Lines       13021    13021              \n  Branches     1121     1121              \n==========================================\n+ Hits         6346     6348       +2     \n+ Misses       6264     6263       -1     \n+ Partials      411      410       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2379?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @FMX.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2378?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.75%. Comparing base [(`07d3421`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/07d342151cad59dee619dbc7545ab6eafd449def?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a6a1534`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2378?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2378      +/-   ##\n==========================================\n- Coverage   48.86%   48.75%   -0.11%     \n==========================================\n  Files         209      209              \n  Lines       13014    13021       +7     \n  Branches     1121     1121              \n==========================================\n- Hits         6358     6347      -11     \n- Misses       6249     6263      +14     \n- Partials      407      411       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2378?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX @CodingCat 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2377?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.76%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`f4d77de`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2377?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2377      +/-   ##\n==========================================\n+ Coverage   48.74%   48.76%   +0.02%     \n==========================================\n  Files         209      209              \n  Lines       13021    13021              \n  Branches     1121     1121              \n==========================================\n+ Hits         6346     6348       +2     \n+ Misses       6264     6263       -1     \n+ Partials      411      410       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2377?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2376?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.73%. Comparing base [(`96df0d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/96df0d6e3c5394d9b064450cf6a8390560db2a50?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`aa38060`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2376?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2376      +/-   ##\n==========================================\n- Coverage   48.74%   48.73%   -0.00%     \n==========================================\n  Files         209      209              \n  Lines       13021    13021              \n  Branches     1121     1121              \n==========================================\n- Hits         6346     6345       -1     \n  Misses       6264     6264              \n- Partials      411      412       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2376?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to master(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2374?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.74%. Comparing base [(`7f6cb67`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7f6cb6735f09ae731015ac3bad30ea68dab9c38c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c7999d4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2374?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2374      +/-   ##\n==========================================\n+ Coverage   48.71%   48.74%   +0.04%     \n==========================================\n  Files         209      209              \n  Lines       13014    13014              \n  Branches     1121     1121              \n==========================================\n+ Hits         6338     6342       +4     \n+ Misses       6265     6262       -3     \n+ Partials      411      410       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2374?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Thanks @wangshengjie123 for this PR! I left some comments. In addition, is the small change to Spark missing?\r\n\r\nHI, @wangshengjie123\r\nCan you please update the Spark patch? It will help the reviewers understand this PR better. Thanks!\r\n

> > Thanks @wangshengjie123 for this PR! I left some comments. In addition, is the small change to Spark missing?\r\n> \r\n> HI, @wangshengjie123 Can you please update the Spark patch? It will help the reviewers understand this PR better. Thanks!\r\n\r\nSorry for late reply,  the pr will be updated today or tomorrow

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `1.20482%` with `82 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.51%. Comparing base [(`12c3779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/12c3779805d7427028e91dc8067ef55ef3f0994f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ef81070`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 12 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [38 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/write/PushFailedBatch.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaEZhaWxlZEJhdGNoLmphdmE=) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | 16.67% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2373      +/-   ##\n==========================================\n- Coverage   48.77%   48.51%   -0.26%     \n==========================================\n  Files         209      210       +1     \n  Lines       13109    13186      +77     \n  Branches     1134     1139       +5     \n==========================================\n+ Hits         6393     6396       +3     \n- Misses       6294     6368      +74     \n  Partials      422      422              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2373?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Thanks @wangshengjie123 nice pr! Another suggestion is better to add UT for this feature.\r\n\r\nUTs is doing, test in cluster this week, uts will be submit later

@wangshengjie123 Is there any doc or ticket explaining this approach? Also for the sort based approach that you mentioned.

@pan3793 This does not become problem if we are maintaining the concept of mapIndex ranges as spark will always read deterministic output for each sub-partition. \r\n\r\nAs vanilla spark always read deterministic output because of mapIndex range filter, it will not face this issue. In this approach sub-partitions data will be indeterministic across stage attempts. Failing would be only option for such cases until spark start supporting ResultStage rollback.

> @wangshengjie123 Is there any doc or ticket explaining this approach? Also for the sort based approach that you mentioned.\r\n\r\nThe sort based approach is roughly like this:\r\n1. Each sub reducer reads from all partition splits of its partitionId for data within its map range\r\n2. The first read request will trigger the partition split file to be sorted based on map ids, so each IO will be sequential\r\n\r\n![image](https://github.com/apache/celeborn/assets/948245/09949028-d6f8-4966-be3c-51a027f69524)\r\n![image](https://github.com/apache/celeborn/assets/948245/c8ff1791-91cb-4272-8eea-3f3db9895504)\r\n

Thanks a lot @waitinfuture for the sort based approach description.\r\n\r\n> Is it possible to force make it as indeterministic?\r\n\r\nIMO this would be very difficult to do it from Celeborn itself but it can be done by putting a patch in the Spark code. ShuffledRowRDD can set Determinacy Level to INDETEMINATE if partial partition reads are happening and Celeborn is getting is used.\r\n\r\ncc: @mridulm for viz

It has been a while since I looked at this PR - but as formulated, the split into subranges is deterministic (if it is not, it should be made so).\r\nWith that in place, this would not be an issue ... \r\n(I will take a deeper look later next week, but do let me know if I am missing something so that I can add that to my analysis)

Ah, I see what you mean ... `PartitionLocation` would change between retries.\r\nYeah, this is a problem then - it will cause data loss. This would be a variant of SPARK-23207\r\n\r\nI will need to relook at the PR, and how it interact with Celeborn - but if scenarios directly described in SPARK-23207 (or variants of it) are applicable (and we cant mitigate it), we should not proceed down this path given the correctness implications unfortunately.\r\n

+CC @otterc as well.

> Ah, I see what you mean ... `PartitionLocation` would change between retries. Yeah, this is a problem then - it will cause data loss. This would be a variant of SPARK-23207\r\n> \r\n> I will need to relook at the PR, and how it interact with Celeborn - but if scenarios directly described in SPARK-23207 (or variants of it) are applicable (and we cant mitigate it), we should not proceed down this path given the correctness implications unfortunately.\r\n\r\nMaybe we can remain both this optimization and stage rerun, but only allows one to take effect by checking configs for now. The performance issue this PR solves does happen in production.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2373?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `33.02752%` with `73 lines` in your changes missing coverage. Please review.\n> Project coverage is 32.50%. Comparing base [(`45450e7`)](https://app.codecov.io/gh/apache/celeborn/commit/45450e793cbf28706f03ea2d385930e12cc2e776?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`60422d1`)](https://app.codecov.io/gh/apache/celeborn/commit/60422d1e1677d5fe635a6adc20b7d962cbc54949?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/celeborn/pull/2373?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [26 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 25.00% | [17 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2FStorageInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | 45.46% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/write/PushFailedBatch.java](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fwrite%2FPushFailedBatch.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaEZhaWxlZEJhdGNoLmphdmE=) | 50.00% | [10 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fwrite%2FPushState.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | 16.67% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2373      +/-   ##\n==========================================\n- Coverage   32.53%   32.50%   -0.02%     \n==========================================\n  Files         336      337       +1     \n  Lines       20055    20156     +101     \n  Branches     1796     1803       +7     \n==========================================\n+ Hits         6522     6550      +28     \n- Misses      13168    13238      +70     \n- Partials      365      368       +3     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2373?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

To reviewer.\r\nJust wanted to give you an update on my recent validation work on our internal cluster using split skewed partition with Celeborn Split level approach. I ran a job with the default Celeborn Split size of 1GB and spark advisoryPartitionSize of 64MB. However, I noticed that only 1/16 tasks were fetching the shuffle data to run, while the rest were empty.\r\n\r\nAfter discussing this with @waitinfuture , @wangshengjie123 , and @pan3793 , we decided to leverage chunks to split skewed partitions and gain more fine-grained data size sub-partitions. This was implemented in https://github.com/apache/celeborn/pull/2373/commits/dfeb731da692aeef1c513f5ac3837275146009f5  and I tested it on my internal cluster with online tasks. The performance of the Shuffle Read stage was almost as good as ESS.

> Based on my current read, this does have correctness implications. I would suggest we should do either or all of the following:\r\n> \r\n> a) If recomputation happens, we should fail the stage and not allow retries - this will prevent data loss.\r\n> \r\n> b) We should recommend enabling replication to leverage this feature - this minimizes the risk of data loss which would trigger recomputation.\r\n> \r\n> Thoughts ?\r\n> \r\n> Also, how does this feature interact with `celeborn.client.shuffle.rangeReadFilter.enabled` ?\r\n\r\nCurrent if this pr is enabled, shuffle client won`t really apply rangeReadFilter, but we can avoid enable rangeReadFilter. Maybe we could close rangeReadFilter and set shuffle stage INDETEMINATE at shuffle level

> seem the replication mechanism is unable to mitigate the risk of data loss in this scenario?\r\n\r\nWhen fetch failures are due to worker unavailability (node crash, etc) - replicas should allow the reducer to continuing fetching data.\r\nThis is more of a statistical reduction in failures, not elimination - agree.

> a) If recomputation happens, we should fail the stage and not allow retries - this will prevent data loss.\r\n> b) We should recommend enabling replication to leverage this feature - this minimizes the risk of data loss which would trigger recomputation.\r\n\r\n@mridulm @cfmcgrady As enabling replication is expensive and some uses might not want to enable it. Another way to handle could be to only fail the stage if stage has any skew partition read. This way it will only affect the stages where skew and will not affect the stages or apps where there is no skew, this can increase the overall reliability for huge percentage of apps. We can make it configurable to give more control to the user. WDYT?

QQ: thinking out aloud, instead of this change - do we want to proactively trigger sort for reducers where we are reading a subset of mapper output (based on `ShufflePartitionsUtil`) ?\r\n\r\nThis will help if we are trying to mitigate the impact of reducer read timeouts, etc.\r\nIt wont bring down the overall load (at worker) though.\r\n\r\nOn plus side, it does not suffer from the correctness issues here.\r\n\r\nThoughts ?

> You mean close to 100% of shuffle read will be in map-range fashion (which means it\

cc @waitinfuture, @FMX, @cxzl25.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2372?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.74%. Comparing base [(`b3eed34`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3eed34b57feeee97fa5c05d8e0f104a36c97488?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`99f7c3a`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2372?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2372      +/-   ##\n==========================================\n+ Coverage   48.72%   48.74%   +0.02%     \n==========================================\n  Files         209      209              \n  Lines       13014    13014              \n  Branches     1121     1121              \n==========================================\n+ Hits         6340     6342       +2     \n+ Misses       6263     6262       -1     \n+ Partials      411      410       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2372?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `8.97959%` with `223 lines` in your changes are missing coverage. Please review.\n> Project coverage is 38.55%. Comparing base [(`b3eed34`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3eed34b57feeee97fa5c05d8e0f104a36c97488?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`8d715ff`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 22 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...pache/celeborn/server/common/http/HttpServer.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwU2VydmVyLnNjYWxh) | 0.00% | [52 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | 0.00% | [42 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rver/common/http/api/CelebornOpenApiResource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQ2VsZWJvcm5PcGVuQXBpUmVzb3VyY2Uuc2NhbGE=) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [26 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/server/common/http/api/ApiBaseResource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQXBpQmFzZVJlc291cmNlLnNjYWxh) | 0.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/server/common/http/api/OpenAPIConfig.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvT3BlbkFQSUNvbmZpZy5zY2FsYQ==) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/server/common/http/api/ApiRootResource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQXBpUm9vdFJlc291cmNlLnNjYWxh) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 73.34% | [4 Missing and 4 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/http/api/ApiRequestContext.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9hcGkvQXBpUmVxdWVzdENvbnRleHQuc2NhbGE=) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/metrics/MetricsUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1V0aWxzLnNjYWxh) | 0.00% | [7 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [7 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@             Coverage Diff             @@\n##             main    #2371       +/-   ##\n===========================================\n- Coverage   48.72%   38.55%   -10.17%     \n===========================================\n  Files         209      213        +4     \n  Lines       13014    13105       +91     \n  Branches     1121     1134       +13     \n===========================================\n- Hits         6340     5051     -1289     \n- Misses       6263     7762     +1499     \n+ Partials      411      292      -119     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2371?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong 

have made a self check.\r\n1. Add metrics handlers\r\n2. remove javax.servlet-api and prefer `jakarta.servlet-api`\r\n3. move metrics prometheus/json handlers from common to service module to prevent impacting the client dependencies \r\n\r\ncc @RexXiong @waitinfuture @cfmcgrady 

Perhaps we could consider loading the swagger-ui static resources from `swagger-ui.jar`, similar to how [Kyuubi](https://github.com/apache/kyuubi/pull/3710) does it. As there would be no requirement to modify the HTML files, this approach would simplify the maintenance of the swagger-ui resources. cc @pan3793 

thanks @cfmcgrady  addressed

Confirmed, works well\r\n\r\n<img width="1288" alt="image" src="https://github.com/apache/incubator-celeborn/assets/6757692/632424fd-ca21-4b16-b6c5-4214ebefada0">\r\n

https://github.com/apache/celeborn/actions/runs/8447675312/job/23138413282?pr=2371\r\n```\r\n- celeborn flink integration test - word count *** FAILED ***\r\n  /home/runner/work/celeborn/celeborn/tests/flink-it/target/tmp/celeborn-872038908961646373/celeborn-worker/shuffle_data/1711521828518-1fce5a76b6dfbf104c5d7a224cdbc165/3/2-0-0 had length 0 instead of expected length 177 (WordCountTest.scala:90)\r\n24/03/27 06:43:53,720 ERROR [data-client-137-1] TransportResponseHandler: Still have 144 requests outstanding when connection from localhost/127.0.0.1:39701 is closed\r\n24/03/27 06:43:53,754 ERROR [data-client-137-3] TransportResponseHandler: Still have 128 requests outstanding when connection from localhost/127.0.0.1:33761 is closed\r\n24/03/27 06:43:53,791 ERROR [data-client-137-2] TransportResponseHandler: Still have 120 requests outstanding when connection from localhost/127.0.0.1:43501 is closed\r\nRun completed in 2 minutes, 22 seconds.\r\nTotal number of tests run: 5\r\nSuites: completed 4, aborted 0\r\nTests: succeeded 4, failed 1, canceled 0, ignored 0, pending 0\r\n*** 1 TEST FAILED ***\r\n```

> https://github.com/apache/celeborn/actions/runs/8447675312/job/23138413282?pr=2371\r\n> \r\n> ```\r\n> - celeborn flink integration test - word count *** FAILED ***\r\n>   /home/runner/work/celeborn/celeborn/tests/flink-it/target/tmp/celeborn-872038908961646373/celeborn-worker/shuffle_data/1711521828518-1fce5a76b6dfbf104c5d7a224cdbc165/3/2-0-0 had length 0 instead of expected length 177 (WordCountTest.scala:90)\r\n> 24/03/27 06:43:53,720 ERROR [data-client-137-1] TransportResponseHandler: Still have 144 requests outstanding when connection from localhost/127.0.0.1:39701 is closed\r\n> 24/03/27 06:43:53,754 ERROR [data-client-137-3] TransportResponseHandler: Still have 128 requests outstanding when connection from localhost/127.0.0.1:33761 is closed\r\n> 24/03/27 06:43:53,791 ERROR [data-client-137-2] TransportResponseHandler: Still have 120 requests outstanding when connection from localhost/127.0.0.1:43501 is closed\r\n> Run completed in 2 minutes, 22 seconds.\r\n> Total number of tests run: 5\r\n> Suites: completed 4, aborted 0\r\n> Tests: succeeded 4, failed 1, canceled 0, ignored 0, pending 0\r\n> *** 1 TEST FAILED ***\r\n> ```\r\n\r\nI will rerun those jobs.

Thanks, merge to main(v0.5.0)

thanks all

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2370?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.71%. Comparing base [(`b3eed34`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3eed34b57feeee97fa5c05d8e0f104a36c97488?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`b244ac2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2370?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2370      +/-   ##\n==========================================\n- Coverage   48.72%   48.71%   -0.00%     \n==========================================\n  Files         209      209              \n  Lines       13014    13014              \n  Branches     1121     1121              \n==========================================\n- Hits         6340     6339       -1     \n  Misses       6263     6263              \n- Partials      411      412       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2370?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2369?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.84%. Comparing base [(`0f60dce`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0f60dce79199d3addd6ac55fd12563f7b2fc35ed?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0ff1b3c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2369?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2369      +/-   ##\n==========================================\n- Coverage   48.85%   48.84%   -0.00%     \n==========================================\n  Files         208      208              \n  Lines       12984    12984              \n  Branches     1115     1115              \n==========================================\n- Hits         6342     6341       -1     \n  Misses       6232     6232              \n- Partials      410      411       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2369?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2368?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.74%. Comparing base [(`e78f632`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e78f63217af1ce56aa7566c3128df03cdff41450?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`16b369f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2368?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 10 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2368      +/-   ##\n==========================================\n- Coverage   48.83%   48.74%   -0.08%     \n==========================================\n  Files         208      209       +1     \n  Lines       12984    13021      +37     \n  Branches     1115     1121       +6     \n==========================================\n+ Hits         6339     6346       +7     \n- Misses       6233     6264      +31     \n+ Partials      412      411       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2368?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Merging to main(v0.5.0).

cc @waitinfuture @otterc @mridulm can you help review? Thanks.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `50.00000%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.83%. Comparing base [(`0f60dce`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0f60dce79199d3addd6ac55fd12563f7b2fc35ed?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`2d070a7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 16 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2367      +/-   ##\n==========================================\n- Coverage   48.85%   48.83%   -0.01%     \n==========================================\n  Files         208      209       +1     \n  Lines       12984    13089     +105     \n  Branches     1115     1133      +18     \n==========================================\n+ Hits         6342     6391      +49     \n- Misses       6232     6278      +46     \n- Partials      410      420      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2367?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX @pan3793  if you could also help review. Thanks

cc @SteNicholas 

cc @zwangsheng 

cc @AngersZhuuuu 

addressed the review comments cc @waitinfuture @AngersZhuuuu @FMX @zwangsheng 

Thanks, merging to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `34.32836%` with `44 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.88%. Comparing base [(`0f60dce`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0f60dce79199d3addd6ac55fd12563f7b2fc35ed?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9783b7f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 26 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/rpc/netty/Inbox.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9JbmJveC5zY2FsYQ==) | 24.57% | [37 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2366      +/-   ##\n==========================================\n+ Coverage   48.85%   48.88%   +0.04%     \n==========================================\n  Files         208      209       +1     \n  Lines       12984    13115     +131     \n  Branches     1115     1134      +19     \n==========================================\n+ Hits         6342     6410      +68     \n- Misses       6232     6283      +51     \n- Partials      410      422      +12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2366?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@CodingCat, any update for this pull request?

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2366?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `34.32836%` with `44 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.88%. Comparing base [(`fc23800`)](https://app.codecov.io/gh/apache/celeborn/commit/fc238005bd8482ea41612aae6aae7e8f16f918f5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9783b7f`)](https://app.codecov.io/gh/apache/celeborn/pull/2366?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 32 commits behind head on main.\n\n> :exclamation: Current head 9783b7f differs from pull request most recent head 0cfa542. Consider uploading reports for the commit 0cfa542 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2366?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/rpc/netty/Inbox.scala](https://app.codecov.io/gh/apache/celeborn/pull/2366?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Frpc%2Fnetty%2FInbox.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9JbmJveC5zY2FsYQ==) | 24.57% | [37 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2366?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2366      +/-   ##\n==========================================\n- Coverage   48.96%   48.88%   -0.08%     \n==========================================\n  Files         209      209              \n  Lines       13146    13115      -31     \n  Branches     1135     1134       -1     \n==========================================\n- Hits         6436     6410      -26     \n+ Misses       6287     6283       -4     \n+ Partials      423      422       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2366?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `30.00000%` with `14 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.93%. Comparing base [(`a371f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a371f934cff0507fc97c7596ed7f9b4be2f21e62?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0feedd7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [7 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/meta/ApplicationMeta.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwbGljYXRpb25NZXRhLnNjYWxh) | 80.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2365      +/-   ##\n==========================================\n+ Coverage   48.85%   48.93%   +0.08%     \n==========================================\n  Files         209      209              \n  Lines       13102    13153      +51     \n  Branches     1134     1137       +3     \n==========================================\n+ Hits         6400     6435      +35     \n- Misses       6282     6296      +14     \n- Partials      420      422       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2365?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong \r\n\r\nCould you help have a overall review? I can enhance it after that.

> cc @RexXiong\r\n> \r\n> Could you help have a overall review? I can enhance it after that.\r\n\r\nOK, I will review this asap.

A general query on this - is there any benefit to not supporting auth going forward given authn support has completed ? (except for backward compatibility reasons for older applications)\r\nBased on a quick review, this change is not backwardly compatible - so existing applications cannot leverage it.\r\nGiven that, why not enable auth instead of supporting auth-disabled + registration ?\r\n\r\n+CC @otterc  in case I am missing something !

>is there any benefit to not supporting auth going forward given authn support has completed ?\r\n\r\nI agree, we will also enable auth for our use case.\r\n

This pr is used to provide the tenant information for dashboard. https://issues.apache.org/jira/browse/CELEBORN-1227 \r\n\r\nDo we plan to set `celeborn.auth.enabled` to true by defaults? \r\n

> This pr is used to provide the tenant information for dashboard. https://issues.apache.org/jira/browse/CELEBORN-1227\r\n> \r\n> Do we plan to set `celeborn.auth.enabled` to true by defaults?\r\n\r\nNo, IMO this feature has nothing to do with whether the auth enabled or not.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2365?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `30.00000%` with `14 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.93%. Comparing base [(`fc23800`)](https://app.codecov.io/gh/apache/celeborn/commit/fc238005bd8482ea41612aae6aae7e8f16f918f5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0feedd7`)](https://app.codecov.io/gh/apache/celeborn/pull/2365?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 36 commits behind head on main.\n\n> :exclamation: Current head 0feedd7 differs from pull request most recent head a9a4761. Consider uploading reports for the commit a9a4761 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2365?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [7 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/meta/ApplicationMeta.scala](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FApplicationMeta.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwbGljYXRpb25NZXRhLnNjYWxh) | 80.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2365?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2365      +/-   ##\n==========================================\n- Coverage   48.96%   48.93%   -0.03%     \n==========================================\n  Files         209      209              \n  Lines       13146    13153       +7     \n  Branches     1135     1137       +2     \n==========================================\n- Hits         6436     6435       -1     \n- Misses       6287     6296       +9     \n+ Partials      423      422       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2365?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@lyy-pineapple PTAL, cc @RexXiong @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2364?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.97%. Comparing base [(`835437f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/835437f0b9d89e5c3ce44f5aacad2a7d396da1a8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7f9639c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2364?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n> :exclamation: Current head 7f9639c differs from pull request most recent head 15935e9. Consider uploading reports for the commit 15935e9 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2364      +/-   ##\n==========================================\n+ Coverage   48.83%   48.97%   +0.14%     \n==========================================\n  Files         208      208              \n  Lines       12984    12984              \n  Branches     1115     1115              \n==========================================\n+ Hits         6340     6358      +18     \n+ Misses       6233     6219      -14     \n+ Partials      411      407       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2364?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+1, I am exactly looking at this yesterday

Thanks, merging  to main(v0.5.0)/branch-0.4(v0.4.1)

@RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang @waitinfuture @SteNicholas @melonist Please help review

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `85.71429%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.76%. Comparing base [(`835437f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/835437f0b9d89e5c3ce44f5aacad2a7d396da1a8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`929236a`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2363      +/-   ##\n==========================================\n- Coverage   48.83%   48.76%   -0.07%     \n==========================================\n  Files         208      209       +1     \n  Lines       12984    13021      +37     \n  Branches     1115     1121       +6     \n==========================================\n+ Hits         6340     6348       +8     \n- Misses       6233     6263      +30     \n+ Partials      411      410       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2363?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> Looks good to me. This is the last PR for Authn, right @otterc ? Awesome to see this feature complete - thanks a lot to the community for the very quick and responsive reviews !!\r\n\r\nYes, this is the last PR for https://issues.apache.org/jira/browse/CELEBORN-1011 :-). \r\nHuge thanks to everyone for the quick feedback and the reviews.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `50.00000%` with `2 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.99%. Comparing base [(`835437f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/835437f0b9d89e5c3ce44f5aacad2a7d396da1a8?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`f194dc3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 41 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2362      +/-   ##\n==========================================\n+ Coverage   48.83%   48.99%   +0.16%     \n==========================================\n  Files         208      209       +1     \n  Lines       12984    13146     +162     \n  Branches     1115     1135      +20     \n==========================================\n+ Hits         6340     6439      +99     \n- Misses       6233     6286      +53     \n- Partials      411      421      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2362?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX PTAL

@RexXiong Comments addressed, PTAL again

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2361?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.76%. Comparing base [(`0285021`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/02850213927daea8babcfb636c23773341b2d871?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`8178f1c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2361?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 6 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2361      +/-   ##\n==========================================\n- Coverage   48.85%   48.76%   -0.09%     \n==========================================\n  Files         207      208       +1     \n  Lines       12965    12984      +19     \n  Branches     1113     1115       +2     \n==========================================\n- Hits         6333     6330       -3     \n- Misses       6224     6243      +19     \n- Partials      408      411       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2361?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `50.00000%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.84%. Comparing base [(`6897b8b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6897b8be99ab8827ae87462bbca71fc2aba4dc5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a07f607`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2360      +/-   ##\n==========================================\n- Coverage   48.85%   48.84%   -0.00%     \n==========================================\n  Files         208      208              \n  Lines       12982    12984       +2     \n  Branches     1115     1115              \n==========================================\n  Hits         6341     6341              \n- Misses       6231     6232       +1     \n- Partials      410      411       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2360?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang @waitinfuture @SteNicholas @melonist Please help review

LGTM. Merged into main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `90.00000%` with `2 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.87%. Comparing base [(`8b6bc35`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8b6bc35997a97a4252fc4c95dac4ca0b6d15aba8?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`3258b06`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 22 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 90.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2358      +/-   ##\n==========================================\n+ Coverage   48.84%   48.87%   +0.03%     \n==========================================\n  Files         207      209       +2     \n  Lines       12965    13106     +141     \n  Branches     1113     1134      +21     \n==========================================\n+ Hits         6332     6404      +72     \n- Misses       6224     6282      +58     \n- Partials      409      420      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2358?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi, @CodingCat \r\n\r\nSorry for the late review.\r\n\r\nIMO, the current approaches to "adaptive memory management" do not effectively achieve the intended adaptability. Specifically, in cases where the shuffle data is of significant size, the maximum push threshold will continue to increase until it reaches `numPartitions * sendBufferSizeInBytes` (`executorMemory * 0.4` after [PR-2388](https://github.com/apache/incubator-celeborn/pull/2388)). This increases the risk of encountering OOM errors, as there is currently no mechanism in place to lower the maximum push threshold.\r\n\r\nI think we need to refactor this feature. cc @waitinfuture \r\n\r\n

> Hi, @CodingCat \n> \n> \n> \n> Sorry for the late review.\n> \n> \n> \n> IMO, the current approaches to "adaptive memory management" do not effectively achieve the intended adaptability. Specifically, in cases where the shuffle data is of significant size, the maximum push threshold will continue to increase until it reaches `numPartitions * sendBufferSizeInBytes` (`executorMemory * 0.4` after [PR-2388](https://github.com/apache/incubator-celeborn/pull/2388)). This increases the risk of encountering OOM errors, as there is currently no mechanism in place to lower the maximum push threshold.\n> \n> \n> \n> I think we need to refactor this feature. cc @waitinfuture \n> \n> \n> \n> \n\nthe original purpose of the adaptiveness here is to resolve the problem that small partition data triggered too many pushes therefore high cost of compression, etc., so i didn\

> > Hi, @CodingCat\r\n> > Sorry for the late review.\r\n> > IMO, the current approaches to "adaptive memory management" do not effectively achieve the intended adaptability. Specifically, in cases where the shuffle data is of significant size, the maximum push threshold will continue to increase until it reaches `numPartitions * sendBufferSizeInBytes` (`executorMemory * 0.4` after [PR-2388](https://github.com/apache/incubator-celeborn/pull/2388)). This increases the risk of encountering OOM errors, as there is currently no mechanism in place to lower the maximum push threshold.\r\n> > I think we need to refactor this feature. cc @waitinfuture\r\n> \r\n> the original purpose of the adaptiveness here is to resolve the problem that small partition data triggered too many pushes therefore high cost of compression, etc., so i didn\

> small partition data triggered too many pushes therefore high cost of compression\r\n\r\nI also encounter the same issue recently\r\n\r\nI know this feature is optional.\r\nThe question is: If a Spark application has enough memory to buffer push data, why not simply set a larger push threshold instead of adapting the threshold from 64k to `executorMemory * 0.4`, which could increase the risk of encountering an OOM error?

> If a Spark application has enough memory to buffer push data, why not simply set a larger push threshold instead of adapting the threshold from 64k to executorMemory * 0.4, which could increase the risk of encountering an OOM error?\r\n\r\nsorry, I am a bit confused by your question.....if a Spark application has enough memory to buffer push data and we can "simply set a larger push threshold", why do we still have OOM when setting executorMemory * 0.4 as threshold?\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2357?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.99%. Comparing base [(`8b6bc35`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8b6bc35997a97a4252fc4c95dac4ca0b6d15aba8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`893066f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2357?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2357      +/-   ##\n==========================================\n+ Coverage   48.84%   48.99%   +0.15%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n+ Hits         6332     6351      +19     \n+ Misses       6224     6210      -14     \n+ Partials      409      404       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2357?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main(v0.5.0)/branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2356?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.83%. Comparing base [(`835437f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/835437f0b9d89e5c3ce44f5aacad2a7d396da1a8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c660d71`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2356?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2356   +/-   ##\n=======================================\n  Coverage   48.83%   48.83%           \n=======================================\n  Files         208      208           \n  Lines       12984    12984           \n  Branches     1115     1115           \n=======================================\n  Hits         6340     6340           \n  Misses       6233     6233           \n  Partials      411      411           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2356?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @FMX.

Thanks. Merged into main(v0.5.0) and branch-0.4(0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `50.00000%` with `2 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.84%. Comparing base [(`cae4de1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cae4de1cc17b49c64a3aa11e3446f734900cad7b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`18957ac`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n> :exclamation: Current head 18957ac differs from pull request most recent head 6b0fc2e. Consider uploading reports for the commit 6b0fc2e to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2354      +/-   ##\n==========================================\n- Coverage   48.90%   48.84%   -0.05%     \n==========================================\n  Files         207      207              \n  Lines       12965    12968       +3     \n  Branches     1113     1113              \n==========================================\n- Hits         6339     6333       -6     \n- Misses       6220     6226       +6     \n- Partials      406      409       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2354?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2353?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.84%. Comparing base [(`93d2b9f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2b9f47fb69ec2ba3694df5d30a8c91c754469?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`db01db4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2353?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2353      +/-   ##\n==========================================\n- Coverage   48.85%   48.84%   -0.00%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n- Hits         6333     6332       -1     \n+ Misses       6225     6224       -1     \n- Partials      407      409       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2353?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Thanks. Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `49.20635%` with `64 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.81%. Comparing base [(`93d2b9f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2b9f47fb69ec2ba3694df5d30a8c91c754469?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`deb1239`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 8 commits behind head on main.\n\n> :exclamation: Current head deb1239 differs from pull request most recent head 7b3a938. Consider uploading reports for the commit 7b3a938 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...pache/celeborn/common/rpc/RpcSecurityContext.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNTZWN1cml0eUNvbnRleHQuc2NhbGE=) | 0.00% | [27 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [20 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...n/common/network/sasl/ApplicationRegistryImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0FwcGxpY2F0aW9uUmVnaXN0cnlJbXBsLmphdmE=) | 72.73% | [2 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...sasl/registration/RegistrationClientBootstrap.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL3JlZ2lzdHJhdGlvbi9SZWdpc3RyYXRpb25DbGllbnRCb290c3RyYXAuamF2YQ==) | 80.00% | [2 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/meta/ApplicationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwbGljYXRpb25JbmZvLnNjYWxh) | 81.82% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | 0.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...work/sasl/registration/RegistrationRpcHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL3JlZ2lzdHJhdGlvbi9SZWdpc3RyYXRpb25ScGNIYW5kbGVyLmphdmE=) | 87.50% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 90.91% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2352      +/-   ##\n==========================================\n- Coverage   48.85%   48.81%   -0.04%     \n==========================================\n  Files         207      210       +3     \n  Lines       12965    13030      +65     \n  Branches     1113     1119       +6     \n==========================================\n+ Hits         6333     6359      +26     \n- Misses       6225     6262      +37     \n- Partials      407      409       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2352?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `50.00000%` with `2 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.97%. Comparing base [(`93d2b9f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2b9f47fb69ec2ba3694df5d30a8c91c754469?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`2aeb2bd`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head 2aeb2bd differs from pull request most recent head e9a369f. Consider uploading reports for the commit e9a369f to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2350      +/-   ##\n==========================================\n+ Coverage   48.85%   48.97%   +0.12%     \n==========================================\n  Files         207      207              \n  Lines       12965    12968       +3     \n  Branches     1113     1113              \n==========================================\n+ Hits         6333     6350      +17     \n+ Misses       6225     6213      -12     \n+ Partials      407      405       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2350?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2349?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.77%. Comparing base [(`93d2b9f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2b9f47fb69ec2ba3694df5d30a8c91c754469?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`5b3efcd`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2349?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2349      +/-   ##\n==========================================\n- Coverage   48.85%   48.77%   -0.07%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n- Hits         6333     6323      -10     \n- Misses       6225     6234       +9     \n- Partials      407      408       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2349?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@mridulm please take a look again, cc @ErikFang @RexXiong 

Thanks! Merged to main(v0.5.0)/branch-0.4(v0.4.1)

having this PR, I suppose the flatMap code in\r\nhttps://github.com/apache/incubator-celeborn/blob/v0.4.0-incubating/client-spark/spark-3/src/main/scala/org/apache/spark/shuffle/celeborn/CelebornShuffleReader.scala#L155\r\ncan be removed?

We would still need it to catch the exception and throw it, right @ErikFang ? (flatmap triggers the computation from iter ?)

cc @CodingCat @RexXiong @FMX @ErikFang 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2348?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.85%. Comparing base [(`cae4de1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cae4de1cc17b49c64a3aa11e3446f734900cad7b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`5bdd9ad`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2348?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2348      +/-   ##\n==========================================\n- Coverage   48.90%   48.85%   -0.04%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n- Hits         6339     6333       -6     \n- Misses       6220     6224       +4     \n- Partials      406      408       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2348?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Comments addressed, PTAL @CodingCat @SteNicholas @pan3793 

LGTM

Thanks! Merged to main(0.5.0)/branch-0.4(v0.4.1)

@RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang @waitinfuture @SteNicholas @melonist Please help review

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `33.33333%` with `12 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.83%. Comparing base [(`93d2b9f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2b9f47fb69ec2ba3694df5d30a8c91c754469?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d371bd0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [7 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 75.00% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/meta/ApplicationMeta.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwbGljYXRpb25NZXRhLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2346      +/-   ##\n==========================================\n- Coverage   48.85%   48.83%   -0.01%     \n==========================================\n  Files         207      208       +1     \n  Lines       12965    12982      +17     \n  Branches     1113     1115       +2     \n==========================================\n+ Hits         6333     6339       +6     \n- Misses       6225     6233       +8     \n- Partials      407      410       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2346?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @waitinfuture, @FMX, @RexXiong.

LGTM. Merged into main(0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2345?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.86%. Comparing base [(`af8c159`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/af8c159c9f655d479f6631f6fbbad810c2c6d023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9e4832b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2345?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2345      +/-   ##\n==========================================\n- Coverage   48.87%   48.86%   -0.00%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n- Hits         6335     6334       -1     \n  Misses       6223     6223              \n- Partials      407      408       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2345?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @waitinfuture, @cfmcgrady.

Thanks, merging to main(v0.5.0)/branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2344?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.87%. Comparing base [(`6d9fbf5`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6d9fbf5e490b161db90f6a9ed719260130136410?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a59480b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2344?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n> :exclamation: Current head a59480b differs from pull request most recent head 3c7f66a. Consider uploading reports for the commit 3c7f66a to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2344      +/-   ##\n==========================================\n- Coverage   48.97%   48.87%   -0.10%     \n==========================================\n  Files         207      207              \n  Lines       12965    12965              \n  Branches     1113     1113              \n==========================================\n- Hits         6348     6335      -13     \n- Misses       6211     6223      +12     \n- Partials      406      407       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2344?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.5.0)/branch-0.4(v0.4.1)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2343?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.83%. Comparing base [(`eed4f92`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/eed4f924b2b621b13f31bb2b51193fcebc158f90?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`160afd3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2343?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2343      +/-   ##\n==========================================\n+ Coverage   48.79%   48.83%   +0.05%     \n==========================================\n  Files         207      207              \n  Lines       12939    12939              \n  Branches     1113     1113              \n==========================================\n+ Hits         6312     6318       +6     \n+ Misses       6220     6216       -4     \n+ Partials      407      405       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2343?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2342?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.76%. Comparing base [(`f4bc87e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f4bc87e6dbe6bb280d0e5771abad0e9353597c1e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`1a4b93f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2342?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2342      +/-   ##\n==========================================\n- Coverage   48.87%   48.76%   -0.10%     \n==========================================\n  Files         207      207              \n  Lines       12946    12939       -7     \n  Branches     1113     1113              \n==========================================\n- Hits         6326     6309      -17     \n- Misses       6215     6221       +6     \n- Partials      405      409       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2342?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.5.0) and branch-0.4(v0.4.1)

LGTM. Mreged into main(v0.5.0) and branch-0.4(0.4.1).\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2340?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.91%. Comparing base [(`f4bc87e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f4bc87e6dbe6bb280d0e5771abad0e9353597c1e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`d723cf6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2340?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2340      +/-   ##\n==========================================\n+ Coverage   48.87%   48.91%   +0.05%     \n==========================================\n  Files         207      207              \n  Lines       12946    12939       -7     \n  Branches     1113     1113              \n==========================================\n+ Hits         6326     6328       +2     \n+ Misses       6215     6207       -8     \n+ Partials      405      404       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2340?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merge to main(v0.5.0)

cc @AngersZhuuuu.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2339?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.89%. Comparing base [(`2dd0a1d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2dd0a1df4a64cd750aeb62d0e5894f8386efe9d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`4b95276`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2339?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2339      +/-   ##\n==========================================\n+ Coverage   48.76%   48.89%   +0.13%     \n==========================================\n  Files         207      207              \n  Lines       12952    12939      -13     \n  Branches     1113     1113              \n==========================================\n+ Hits         6315     6325      +10     \n+ Misses       6229     6208      -21     \n+ Partials      408      406       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2339?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Mreged into main(v0.5.0).

Should we also change mkdoc.yml and web module?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2338?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.75%. Comparing base [(`4e64ae3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4e64ae32145290083fedb9083b91e51fcc5efc13?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a0a4cab`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2338?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 6 commits behind head on main.\n\n> :exclamation: Current head a0a4cab differs from pull request most recent head 2cb2ff6. Consider uploading reports for the commit 2cb2ff6 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2338   +/-   ##\n=======================================\n  Coverage   48.75%   48.75%           \n=======================================\n  Files         207      207           \n  Lines       12946    12946           \n  Branches     1113     1113           \n=======================================\n  Hits         6311     6311           \n  Misses       6227     6227           \n  Partials      408      408           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2338?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, does the logo picture in `docs/logo` directory need to add tm?

> @FMX, does the logo picture in `docs/logo` directory need to add tm?\r\n\r\nReferring to other projects, I think it is not necessary.

merge to main(v0.5.0) and branch-0.4(0.4.1)

cc @RexXiong, @AngersZhuuuu. BTW, I will create another pull request to deprecate `celeborn.quota.configuration.path` as FOLLOWUP of CELEBORN-1239.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `87.50000%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.76%. Comparing base [(`f4bc87e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f4bc87e6dbe6bb280d0e5771abad0e9353597c1e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`3cbcca0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 50.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2337      +/-   ##\n==========================================\n- Coverage   48.87%   48.76%   -0.10%     \n==========================================\n  Files         207      207              \n  Lines       12946    12952       +6     \n  Branches     1113     1113              \n==========================================\n- Hits         6326     6315      -11     \n- Misses       6215     6229      +14     \n- Partials      405      408       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2337?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Mreged into main(v0.5.0).

cc @RexXiong, @AngersZhuuuu.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2336?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.90%. Comparing base [(`aecae81`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aecae8161bc2218771db5e69c7977639abca9ccc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`15b36a8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2336?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2336      +/-   ##\n==========================================\n+ Coverage   48.76%   48.90%   +0.14%     \n==========================================\n  Files         207      207              \n  Lines       12939    12939              \n  Branches     1113     1113              \n==========================================\n+ Hits         6309     6327      +18     \n+ Misses       6221     6207      -14     \n+ Partials      409      405       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2336?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Mreged into main(v0.5.0).

> celeborn should be compatible with spark conf spark.shuffle.compress\r\n\r\nshould we?\r\n\r\nthe options are not same actually, Celeborn only supports LZ4 and ZSTD

> > celeborn should be compatible with spark conf spark.shuffle.compress\r\n> \r\n> should we?\r\n> \r\n> the options are not same actually, Celeborn only supports LZ4 and ZSTD\r\n\r\n@pan3793 Hi pan, thanks for reviewing! \r\n\r\nThe compression format of celeborn may be inconsistent with spark. But does celeborn client need to be compatible with common configurations like spark.shuffle.compress?\r\n\r\nFor example, my sparkapp is configured with spark.shuffle.compress=false but celeborn still compresses the shuffle data, which is beyond my expectation.

> > > celeborn should be compatible with spark conf spark.shuffle.compress\r\n> > \r\n> > \r\n> > should we?\r\n> > the options are not same actually, Celeborn only supports LZ4 and ZSTD\r\n> \r\n> @pan3793 Hi pan, thanks for reviewing!\r\n> \r\n> The compression format of celeborn may be inconsistent with spark. But does celeborn client need to be compatible with common configurations like spark.shuffle.compress?\r\n> \r\n> For example, my sparkapp is configured with spark.shuffle.compress=false but celeborn still compresses the shuffle data, which is beyond my expectation.\r\n\r\n@pan3793  Or may we need some logs to show that spark.shuffle.xxx is not effective when using celeborn?

> > > celeborn should be compatible with spark conf spark.shuffle.compress\r\n> > \r\n> > \r\n> > should we?\r\n> > the options are not same actually, Celeborn only supports LZ4 and ZSTD\r\n> \r\n> @pan3793 Hi pan, thanks for reviewing!\r\n> \r\n> The compression format of celeborn may be inconsistent with spark. But does celeborn client need to be compatible with common configurations like spark.shuffle.compress?\r\n> \r\n> For example, my sparkapp is configured with spark.shuffle.compress=false but celeborn still compresses the shuffle data, which is beyond my expectation.\r\n\r\nWhy will you need uncompressed shuffle data in Celeborn? Celeborn will compress shuffle data by default because there is a performance benefit.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `30 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.75%. Comparing base [(`d5a1bcd`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d5a1bcdb6def098efd9e2f13549c9e2319046021?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`145be1c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/util/SignalUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvU2lnbmFsVXRpbHMuc2NhbGE=) | 0.00% | [30 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2334      +/-   ##\n==========================================\n- Coverage   48.84%   48.75%   -0.09%     \n==========================================\n  Files         207      208       +1     \n  Lines       12965    12995      +30     \n  Branches     1113     1119       +6     \n==========================================\n+ Hits         6332     6334       +2     \n- Misses       6224     6253      +29     \n+ Partials      409      408       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2334?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `40.00000%` with `3 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.99%. Comparing base [(`f4bc87e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f4bc87e6dbe6bb280d0e5771abad0e9353597c1e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`48f5a27`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/celeborn/common/quota/ResourceConsumption.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1Jlc291cmNlQ29uc3VtcHRpb24uc2NhbGE=) | 33.34% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2333      +/-   ##\n==========================================\n+ Coverage   48.87%   48.99%   +0.13%     \n==========================================\n  Files         207      207              \n  Lines       12946    12907      -39     \n  Branches     1113     1107       -6     \n==========================================\n- Hits         6326     6323       -3     \n+ Misses       6215     6181      -34     \n+ Partials      405      403       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2333?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@AngersZhuuuu, could you describe the heavy performance problem in description? BTW, why revert all application level metrics of master and worker? Did you have performance problem in worker? IMO, not all application metrics cause the heavy performance.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2332?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.87%. Comparing base [(`f4bc87e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f4bc87e6dbe6bb280d0e5771abad0e9353597c1e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`53f459b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2332?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2332   +/-   ##\n=======================================\n  Coverage   48.87%   48.87%           \n=======================================\n  Files         207      207           \n  Lines       12946    12946           \n  Branches     1113     1113           \n=======================================\n  Hits         6326     6326           \n  Misses       6215     6215           \n  Partials      405      405           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2332?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks for your addition!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2331?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.69%. Comparing base [(`9185cae`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9185cae35a3f4d4af0841454c47500fb9af36b80?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c9349b4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2331?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2331      +/-   ##\n==========================================\n- Coverage   48.70%   48.69%   -0.00%     \n==========================================\n  Files         207      207              \n  Lines       12939    12944       +5     \n  Branches     1111     1113       +2     \n==========================================\n+ Hits         6300     6302       +2     \n- Misses       6234     6236       +2     \n- Partials      405      406       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2331?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks! Merged to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2330?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.71%. Comparing base [(`7b0211e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7b0211e345751edb1e66e2760d9cae4d852adffc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`59eae27`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2330?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2330      +/-   ##\n==========================================\n- Coverage   48.83%   48.71%   -0.12%     \n==========================================\n  Files         207      207              \n  Lines       12939    12944       +5     \n  Branches     1111     1113       +2     \n==========================================\n- Hits         6318     6304      -14     \n- Misses       6218     6235      +17     \n- Partials      403      405       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2330?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2329?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.87%. Comparing base [(`621a719`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/621a719d8d417bd35c9f687dd05602e57e0c96f6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`7a3c2b7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2329?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2329      +/-   ##\n==========================================\n+ Coverage   48.73%   48.87%   +0.14%     \n==========================================\n  Files         207      207              \n  Lines       12978    12941      -37     \n  Branches     1117     1111       -6     \n==========================================\n  Hits         6324     6324              \n+ Misses       6246     6211      -35     \n+ Partials      408      406       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2329?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2328?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.71%. Comparing base [(`ff0cf15`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ff0cf15770227f090c5a674dc13ebc9ae54d78ee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9809cc5`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2328?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2328      +/-   ##\n==========================================\n- Coverage   48.73%   48.71%   -0.02%     \n==========================================\n  Files         207      207              \n  Lines       12976    12939      -37     \n  Branches     1116     1111       -5     \n==========================================\n- Hits         6323     6302      -21     \n+ Misses       6245     6232      -13     \n+ Partials      408      405       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2328?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, will create ticket next time.

@mridulm @RexXiong @waitinfuture @pan3793 Please take a look

cc @mridulm, @waitinfuture, @FMX.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2326?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.85%. Comparing base [(`ff0cf15`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ff0cf15770227f090c5a674dc13ebc9ae54d78ee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`eca26ef`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2326?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2326      +/-   ##\n==========================================\n+ Coverage   48.73%   48.85%   +0.12%     \n==========================================\n  Files         207      207              \n  Lines       12976    12976              \n  Branches     1116     1116              \n==========================================\n+ Hits         6323     6338      +15     \n+ Misses       6245     6233      -12     \n+ Partials      408      405       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2326?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2325?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.75%. Comparing base [(`fe5d968`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fe5d968f433436c6fd9c30a31392e051cc1c0d5b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c83ba2c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2325?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2325      +/-   ##\n==========================================\n- Coverage   48.77%   48.75%   -0.02%     \n==========================================\n  Files         207      207              \n  Lines       12939    12939              \n  Branches     1113     1113              \n==========================================\n- Hits         6310     6307       -3     \n- Misses       6221     6223       +2     \n- Partials      408      409       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2325?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @SteNicholas @RexXiong Changed after `configuration.md`, please take a look

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `1 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.72%. Comparing base [(`621a719`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/621a719d8d417bd35c9f687dd05602e57e0c96f6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`ae50ad9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rn/server/common/service/config/ConfigService.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Db25maWdTZXJ2aWNlLmphdmE=) | 0.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2324      +/-   ##\n==========================================\n- Coverage   48.73%   48.72%   -0.01%     \n==========================================\n  Files         207      207              \n  Lines       12978    12976       -2     \n  Branches     1117     1116       -1     \n==========================================\n- Hits         6324     6321       -3     \n  Misses       6246     6246              \n- Partials      408      409       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2324?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `37.50000%` with `5 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.71%. Comparing base [(`b9bdea3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b9bdea3c72fcc7ffc45bd24d53e920cea5516c5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c7df2b7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2323      +/-   ##\n==========================================\n- Coverage   48.86%   48.71%   -0.14%     \n==========================================\n  Files         207      207              \n  Lines       12978    12944      -34     \n  Branches     1117     1113       -4     \n==========================================\n- Hits         6340     6304      -36     \n- Misses       6233     6235       +2     \n  Partials      405      405              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2323?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2322?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.73%. Comparing base [(`b9bdea3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b9bdea3c72fcc7ffc45bd24d53e920cea5516c5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`58b1487`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2322?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2322      +/-   ##\n==========================================\n- Coverage   48.86%   48.73%   -0.13%     \n==========================================\n  Files         207      207              \n  Lines       12978    12976       -2     \n  Branches     1117     1116       -1     \n==========================================\n- Hits         6340     6322      -18     \n- Misses       6233     6246      +13     \n- Partials      405      408       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2322?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2321?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.73%. Comparing base [(`621a719`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/621a719d8d417bd35c9f687dd05602e57e0c96f6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`60a89d2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2321?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2321   +/-   ##\n=======================================\n  Coverage   48.73%   48.73%           \n=======================================\n  Files         207      207           \n  Lines       12978    12978           \n  Branches     1117     1117           \n=======================================\n  Hits         6324     6324           \n  Misses       6246     6246           \n  Partials      408      408           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2321?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

are we ready to go?

Merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2320?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.85%. Comparing base [(`621a719`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/621a719d8d417bd35c9f687dd05602e57e0c96f6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`fb76517`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2320?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n> :exclamation: Current head fb76517 differs from pull request most recent head c38e884. Consider uploading reports for the commit c38e884 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2320      +/-   ##\n==========================================\n+ Coverage   48.73%   48.85%   +0.12%     \n==========================================\n  Files         207      207              \n  Lines       12978    12978              \n  Branches     1117     1117              \n==========================================\n+ Hits         6324     6339      +15     \n+ Misses       6246     6233      -13     \n+ Partials      408      406       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2320?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This issue is fixed by [SPARK-37894](https://issues.apache.org/jira/browse/SPARK-37984)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `66.66667%` with `2 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.73%. Comparing base [(`0c952ca`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c952ca915a592176b85abd273030567653a6f18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`4be83ae`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | 60.00% | [0 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2319      +/-   ##\n==========================================\n- Coverage   48.87%   48.73%   -0.13%     \n==========================================\n  Files         207      207              \n  Lines       12936    12978      +42     \n  Branches     1114     1117       +3     \n==========================================\n+ Hits         6321     6324       +3     \n- Misses       6208     6246      +38     \n- Partials      407      408       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2319?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2318?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.63%. Comparing base [(`9634456`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/96344561e81a282bd32f52cce94e019ef153b1d6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`dc4edd3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2318?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2318      +/-   ##\n==========================================\n- Coverage   48.71%   48.63%   -0.08%     \n==========================================\n  Files         207      207              \n  Lines       12939    12939              \n  Branches     1111     1111              \n==========================================\n- Hits         6302     6291      -11     \n- Misses       6231     6241      +10     \n- Partials      406      407       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2318?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @RexXiong PTAL

Merge to main(v0.5.0).

ping @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2317?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`0c952ca`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c952ca915a592176b85abd273030567653a6f18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.87% compared to head [(`015b46d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2317?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.01%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2317      +/-   ##\n==========================================\n+ Coverage   48.87%   49.01%   +0.14%     \n==========================================\n  Files         207      207              \n  Lines       12936    12902      -34     \n  Branches     1114     1109       -5     \n==========================================\n+ Hits         6321     6322       +1     \n+ Misses       6208     6173      -35     \n  Partials      407      407              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2317?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `3 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`2523769`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/252376981f15857baa2b4e3f0402fbf6c27765a9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.69% compared to head [(`bf9d308`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.68%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 62.50% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2316      +/-   ##\n==========================================\n- Coverage   48.69%   48.68%   -0.00%     \n==========================================\n  Files         209      209              \n  Lines       12940    12944       +4     \n  Branches     1119     1119              \n==========================================\n+ Hits         6300     6301       +1     \n- Misses       6233     6236       +3     \n  Partials      407      407              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2316?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> TransportClient.sendRpcSync will just hang forever if the timeout set to unlimited.\r\n\r\n1. After conducting a search of the codebase, I have found that all calls to the `TransportClient.sendRpcSync` function have included a timeout, rather than using the value of Int.MaxValue.\r\n\r\n2. Should all blocks that call `ByteBuffer.allocate()` within the Callback handle exceptions? Could you please review the codebase to ensure that similar issues are handled appropriately?\r\n\r\nhttps://github.com/apache/incubator-celeborn/blob/e804798088237c3d2ca6dca25454c117199c4977/worker/src/main/scala/org/apache/celeborn/service/deploy/worker/PushDataHandler.scala#L296-L331\r\n\r\n

cc @mridulm 

> * After conducting a search of the codebase, I have found that all calls to the `TransportClient.sendRpcSync` function have included a timeout, rather than using the value of Int.MaxValue.\r\n> *\r\n\r\n1. in case the timeout is set too long\r\n2. not sure, for the case in the PR, `SettableFuture` is used, we catch the exception and set the result exception to complete the future.

> 2\\. not sure, for the case in the PR, `SettableFuture` is used, we catch the exception and set the result exception to complete the future.\r\n\r\nYou are correct, I had a misunderstanding previously.\r\n\r\n

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.1)/branch-0.3(0.3.3).

cc @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2315?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`d71f16f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d71f16f7bffa82a84f6cce9a8c599fb694df1261?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.05% compared to head [(`8ce5077`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2315?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.90%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2315      +/-   ##\n==========================================\n- Coverage   49.05%   48.90%   -0.14%     \n==========================================\n  Files         208      208              \n  Lines       12879    12879              \n  Branches     1112     1112              \n==========================================\n- Hits         6316     6297      -19     \n- Misses       6159     6174      +15     \n- Partials      404      408       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2315?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main for 0.5

cc @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2314?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`d71f16f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d71f16f7bffa82a84f6cce9a8c599fb694df1261?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.05% compared to head [(`80bfc52`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2314?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.68%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2314      +/-   ##\n==========================================\n- Coverage   49.05%   48.68%   -0.36%     \n==========================================\n  Files         208      209       +1     \n  Lines       12879    12940      +61     \n  Branches     1112     1119       +7     \n==========================================\n- Hits         6316     6299      -17     \n- Misses       6159     6233      +74     \n- Partials      404      408       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2314?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main for 0.5

cc @pan3793, @FMX

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2312?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4f23af4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f23af49c939794f11be5728ff7e1e2ff80b877d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91% compared to head [(`fc46bc6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2312?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2312      +/-   ##\n==========================================\n+ Coverage   48.91%   48.91%   +0.01%     \n==========================================\n  Files         208      208              \n  Lines       12878    12879       +1     \n  Branches     1112     1112              \n==========================================\n+ Hits         6298     6299       +1     \n  Misses       6172     6172              \n  Partials      408      408              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2312?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `73 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`0c952ca`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c952ca915a592176b85abd273030567653a6f18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.87% compared to head [(`bcce9f1`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.61%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [51 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...che/celeborn/server/common/http/HttpEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwRW5kcG9pbnQuc2NhbGE=) | 0.00% | [11 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...r/common/service/config/BaseConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9CYXNlQ29uZmlnU2VydmljZUltcGwuamF2YQ==) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2311      +/-   ##\n==========================================\n- Coverage   48.87%   48.61%   -0.25%     \n==========================================\n  Files         207      207              \n  Lines       12936    13005      +69     \n  Branches     1114     1120       +6     \n==========================================\n  Hits         6321     6321              \n- Misses       6208     6277      +69     \n  Partials      407      407              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2311?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

`Introduce Rest API of listing dynamic configuration management `? Since we may support setting restful API later

@AngersZhuuuu, thanks for detailed review. I have addressed above comments and updated the title and description of this pull request. PTAL. cc @RexXiong.

Merge to main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `2 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`7a05b2f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7a05b2fc182622a11114dce478e83a7ec8b558ed?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.85% compared to head [(`1e13ce4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.92%.\n> Report is 10 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/meta/WorkerStatus.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9Xb3JrZXJTdGF0dXMuamF2YQ==) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2310      +/-   ##\n==========================================\n+ Coverage   48.85%   48.92%   +0.07%     \n==========================================\n  Files         208      208              \n  Lines       12837    12878      +41     \n  Branches     1104     1112       +8     \n==========================================\n+ Hits         6270     6299      +29     \n- Misses       6167     6172       +5     \n- Partials      400      407       +7     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2310?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `4 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`64b4338`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/64b43382910b4b47737d0bd58d625cc806e6e05f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91% compared to head [(`10351a0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91%.\n> Report is 2 commits behind head on main.\n\n> :exclamation: Current head 10351a0 differs from pull request most recent head 0233d51. Consider uploading reports for the commit 0233d51 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/internal/config/ConfigBuilder.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdCdWlsZGVyLnNjYWxh) | 62.50% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | 83.34% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2308      +/-   ##\n==========================================\n+ Coverage   48.91%   48.91%   +0.01%     \n==========================================\n  Files         208      208              \n  Lines       12863    12877      +14     \n  Branches     1111     1111              \n==========================================\n+ Hits         6291     6298       +7     \n- Misses       6166     6171       +5     \n- Partials      406      408       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2308?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to master(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2307?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`64b4338`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/64b43382910b4b47737d0bd58d625cc806e6e05f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91% compared to head [(`5db1e28`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2307?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.03%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2307      +/-   ##\n==========================================\n+ Coverage   48.91%   49.03%   +0.12%     \n==========================================\n  Files         208      208              \n  Lines       12863    12863              \n  Branches     1111     1111              \n==========================================\n+ Hits         6291     6306      +15     \n+ Misses       6166     6153      -13     \n+ Partials      406      404       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2307?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2306?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`64b4338`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/64b43382910b4b47737d0bd58d625cc806e6e05f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.91% compared to head [(`3675fb4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2306?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.86%.\n> Report is 4 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2306      +/-   ##\n==========================================\n- Coverage   48.91%   48.86%   -0.05%     \n==========================================\n  Files         208      208              \n  Lines       12863    12877      +14     \n  Branches     1111     1111              \n==========================================\n  Hits         6291     6291              \n- Misses       6166     6179      +13     \n- Partials      406      407       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2306?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2305?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.85%. Comparing base [(`d71f16f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d71f16f7bffa82a84f6cce9a8c599fb694df1261?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a7a47ee`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2305?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 31 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2305      +/-   ##\n==========================================\n- Coverage   49.05%   48.85%   -0.19%     \n==========================================\n  Files         208      207       -1     \n  Lines       12879    12965      +86     \n  Branches     1112     1113       +1     \n==========================================\n+ Hits         6316     6333      +17     \n- Misses       6159     6224      +65     \n- Partials      404      408       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2305?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

push a new commit to address the comments and add UT

Thanks! Merging to main(v0.5.0)/branch-0.4(v0.4.1)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `24 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`c9a2ecc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c9a2eccc3be6e2c13cbce6806823375c5b67c4d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.93% compared to head [(`cfd8f31`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.82%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 63.16% | [6 Missing and 8 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...on/service/config/DynamicConfigServiceFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnU2VydmljZUZhY3RvcnkuamF2YQ==) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...r/common/service/config/BaseConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9CYXNlQ29uZmlnU2VydmljZUltcGwuamF2YQ==) | 66.67% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 66.67% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2304      +/-   ##\n==========================================\n- Coverage   48.93%   48.82%   -0.11%     \n==========================================\n  Files         208      208              \n  Lines       12893    12863      -30     \n  Branches     1113     1111       -2     \n==========================================\n- Hits         6308     6279      -29     \n  Misses       6176     6176              \n+ Partials      409      408       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2304?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `5.26316%` with `36 lines` in your changes are missing coverage. Please review.\n> Project coverage is 49.00%. Comparing base [(`c9a2ecc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c9a2eccc3be6e2c13cbce6806823375c5b67c4d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`220bf30`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 59 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 8.70% | [21 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [15 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2303      +/-   ##\n==========================================\n+ Coverage   48.93%   49.00%   +0.08%     \n==========================================\n  Files         208      208              \n  Lines       12893    12911      +18     \n  Branches     1113     1118       +5     \n==========================================\n+ Hits         6308     6326      +18     \n- Misses       6176     6179       +3     \n+ Partials      409      406       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2303?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @SteNicholas , thanks for taking this. In my original design, we need to store a list of PartitionLocations in a columnar fashion, like how parquet stores records. That is to say, we need to transpose the many PartitionLocation messages into a single message, inside which the same class member is stored in a single list. For example we can define PartitionLocationList as \r\n```\r\n{\r\n    repeated int rpcPorts;\r\n    repeated int pushPorts;\r\n    ....\r\n}\r\n```\r\n, and en(de-)code into/from the message. cc @FMX @RexXiong 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2302?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3f5b1de`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3f5b1de759ff0784c580029ff537a9e2057fdcf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.94% compared to head [(`5ac6298`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2302?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.07%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2302      +/-   ##\n==========================================\n+ Coverage   48.94%   49.07%   +0.14%     \n==========================================\n  Files         208      208              \n  Lines       12893    12893              \n  Branches     1113     1113              \n==========================================\n+ Hits         6309     6326      +17     \n+ Misses       6176     6162      -14     \n+ Partials      408      405       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2302?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> LGTM, thanks! Merging to main(v0.5.0)\r\n\r\nthe `branch-0.4` CI is also broken. @waitinfuture \r\n\r\nhttps://github.com/apache/incubator-celeborn/actions/runs/7948486741/job/21698560139

> > LGTM, thanks! Merging to main(v0.5.0)\r\n> \r\n> the `branch-0.4` CI is also broken. @waitinfuture\r\n> \r\n> https://github.com/apache/incubator-celeborn/actions/runs/7948486741/job/21698560139\r\n\r\nCherrypicked https://github.com/apache/incubator-celeborn/commit/ac8b3035008dc775735185630aa01198bd4399bc

@AngersZhuuuu cc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2301?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3f5b1de`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3f5b1de759ff0784c580029ff537a9e2057fdcf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.94% compared to head [(`147d8ef`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2301?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.05%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2301      +/-   ##\n==========================================\n+ Coverage   48.94%   49.05%   +0.12%     \n==========================================\n  Files         208      208              \n  Lines       12893    12893              \n  Branches     1113     1113              \n==========================================\n+ Hits         6309     6324      +15     \n+ Misses       6176     6163      -13     \n+ Partials      408      406       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2301?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `73.15436%` with `40 lines` in your changes are missing coverage. Please review.\n> Project coverage is 49.33%. Comparing base [(`21d5698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/21d5698a90014f880130ea487751663d06f11650?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`52cd7d8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 8 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | 62.86% | [10 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/MemoryFileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NZW1vcnlGaWxlSW5mby5qYXZh) | 52.95% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/ReduceFileMeta.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9SZWR1Y2VGaWxlTWV0YS5qYXZh) | 70.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/util/ShuffleBlockInfoUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHVmZmxlQmxvY2tJbmZvVXRpbHMuamF2YQ==) | 83.34% | [0 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | 50.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 88.24% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...e/celeborn/common/network/buffer/ChunkBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvQ2h1bmtCdWZmZXJzLmphdmE=) | 75.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2300      +/-   ##\n==========================================\n+ Coverage   48.96%   49.33%   +0.38%     \n==========================================\n  Files         209      211       +2     \n  Lines       13102    13238     +136     \n  Branches     1134     1149      +15     \n==========================================\n+ Hits         6414     6530     +116     \n- Misses       6270     6276       +6     \n- Partials      418      432      +14     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2300?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2300?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `9.49367%` with `143 lines` in your changes are missing coverage. Please review.\n> Project coverage is 38.98%. Comparing base [(`121395f`)](https://app.codecov.io/gh/apache/celeborn/commit/121395f0f53656b21b22517e69fabc79cc4ef2ca?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`53555a1`)](https://app.codecov.io/gh/apache/celeborn/pull/2300?dropdown=coverage&src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 51 commits behind head on main.\n\n> :exclamation: **Current head 53555a1 differs from pull request most recent head 137ab52**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit 137ab52 to get more accurate results.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2300?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/celeborn/common/util/ShuffleBlockInfoUtils.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FShuffleBlockInfoUtils.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHVmZmxlQmxvY2tJbmZvVXRpbHMuamF2YQ==) | 0.00% | [36 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FFileInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | 0.00% | [35 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/MemoryFileInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FMemoryFileInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NZW1vcnlGaWxlSW5mby5qYXZh) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/ReduceFileMeta.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FReduceFileMeta.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9SZWR1Y2VGaWxlTWV0YS5qYXZh) | 0.00% | [20 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/network/buffer/FileChunkBuffers.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fbuffer%2FFileChunkBuffers.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvRmlsZUNodW5rQnVmZmVycy5qYXZh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/buffer/MemoryChunkBuffers.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fbuffer%2FMemoryChunkBuffers.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTWVtb3J5Q2h1bmtCdWZmZXJzLmphdmE=) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 68.43% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...e/celeborn/common/network/buffer/ChunkBuffers.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fnetwork%2Fbuffer%2FChunkBuffers.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvQ2h1bmtCdWZmZXJzLmphdmE=) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../org/apache/celeborn/common/meta/DiskFileInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FDiskFileInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9EaXNrRmlsZUluZm8uamF2YQ==) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2FStorageInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | 50.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [1 more](https://app.codecov.io/gh/apache/celeborn/pull/2300?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2300      +/-   ##\n==========================================\n- Coverage   40.17%   38.98%   -1.19%     \n==========================================\n  Files         218      219       +1     \n  Lines       13742    13547     -195     \n  Branches     1214     1191      -23     \n==========================================\n- Hits         5520     5280     -240     \n- Misses       7905     7966      +61     \n+ Partials      317      301      -16     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2300?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX metrics added by this PR is not added to the Celeborn website [Monitoring](https://celeborn.apache.org/docs/latest/monitoring/) page. Also, should we start adding such changes in the release notes as well. WDYT? 

cc @cfmcgrady @RexXiong

> https://github.com/apache/incubator-celeborn/pull/2145 changes the behavior that retry commit files should use the same epoch. This PR revert the behavior back.\r\n\r\nI think the behavior was changed by https://github.com/apache/incubator-celeborn/pull/2162?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2299?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3f5b1de`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3f5b1de759ff0784c580029ff537a9e2057fdcf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.94% compared to head [(`2c9e93a`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2299?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.08%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2299      +/-   ##\n==========================================\n+ Coverage   48.94%   49.08%   +0.14%     \n==========================================\n  Files         208      208              \n  Lines       12893    12893              \n  Branches     1113     1113              \n==========================================\n+ Hits         6309     6327      +18     \n+ Misses       6176     6162      -14     \n+ Partials      408      404       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2299?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> > #2145 changes the behavior that retry commit files should use the same epoch. This PR revert the behavior back.\r\n> \r\n> I think the behavior was changed by #2162?\r\n\r\nupdated, thanks

Thanks, merging to main(v0.5.0)/branch-0.4(v0.4.1)/branch-0.3(v0.3.3)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `24 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`92704c7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/92704c7d06a19e0138503756b9e1e49eb2ef1f0d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.04% compared to head [(`fc53ed4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.88%.\n> Report is 6 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rn/server/common/service/config/DynamicConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnLmphdmE=) | 5.00% | [19 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...scala/org/apache/celeborn/common/quota/Quota.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1F1b3RhLnNjYWxh) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...la/org/apache/celeborn/server/common/Service.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vU2VydmljZS5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2298      +/-   ##\n==========================================\n- Coverage   49.04%   48.88%   -0.16%     \n==========================================\n  Files         208      207       -1     \n  Lines       12877    12936      +59     \n  Branches     1111     1114       +3     \n==========================================\n+ Hits         6314     6322       +8     \n- Misses       6158     6207      +49     \n- Partials      405      407       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2298?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Ping @RexXiong Pls take a look

ping @RexXiong @SteNicholas Pls take a look again

Merge to main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2297?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`e4f7ea8`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e4f7ea8e01c9f8460254d3d13aee5a920a3822ab?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.92% compared to head [(`a5bb5d3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2297?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.95%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2297      +/-   ##\n==========================================\n+ Coverage   48.92%   48.95%   +0.04%     \n==========================================\n  Files         208      208              \n  Lines       12893    12893              \n  Branches     1113     1113              \n==========================================\n+ Hits         6306     6310       +4     \n+ Misses       6178     6175       -3     \n+ Partials      409      408       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2297?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0) and branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `24 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`c183753`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c1837536a159454287e16664bc6be9b90a09a023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.63% compared to head [(`b16dbb2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.81%.\n> Report is 6 commits behind head on main.\n\n> :exclamation: Current head b16dbb2 differs from pull request most recent head bffbb65. Consider uploading reports for the commit bffbb65 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/celeborn/common/meta/ApplicationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwbGljYXRpb25JbmZvLnNjYWxh) | 80.00% | [2 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/identity/UserIdentifier.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L1VzZXJJZGVudGlmaWVyLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2296      +/-   ##\n==========================================\n+ Coverage   48.63%   48.81%   +0.18%     \n==========================================\n  Files         208      209       +1     \n  Lines       12832    12869      +37     \n  Branches     1104     1105       +1     \n==========================================\n+ Hits         6240     6281      +41     \n+ Misses       6191     6187       -4     \n  Partials      401      401              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2296?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@turboFei, the `UserIdentifier` does not just simply add into `ApplicationHeartbeater`, which could be add into `RegistrationClientBootstrap#register`. We should firstly abstract the application registeration, then add `UserIdentifier` into the master application meta. cc @RexXiong.

> @turboFei, the `UserIdentifier` does not just simply add into `ApplicationHeartbeater`, which could be add into `RegistrationClientBootstrap#register`. We should firstly abstract the application registeration, then add `UserIdentifier` into the master application meta. cc @RexXiong.\n\nok. thanks for the information.

Raised https://github.com/apache/incubator-celeborn/pull/2365, close this one.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2294?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`c183753`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c1837536a159454287e16664bc6be9b90a09a023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.63% compared to head [(`3ac06f6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2294?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.71%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2294      +/-   ##\n==========================================\n+ Coverage   48.63%   48.71%   +0.08%     \n==========================================\n  Files         208      208              \n  Lines       12832    12832              \n  Branches     1104     1104              \n==========================================\n+ Hits         6240     6250      +10     \n+ Misses       6191     6179      -12     \n- Partials      401      403       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2294?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `2 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`c183753`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c1837536a159454287e16664bc6be9b90a09a023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.63% compared to head [(`5fbc635`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.86%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2293      +/-   ##\n==========================================\n+ Coverage   48.63%   48.86%   +0.23%     \n==========================================\n  Files         208      208              \n  Lines       12832    12837       +5     \n  Branches     1104     1104              \n==========================================\n+ Hits         6240     6271      +31     \n+ Misses       6191     6166      -25     \n+ Partials      401      400       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2293?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+CC @otterc 

@RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang @waitinfuture\r\nCould you please help review?\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `82.75862%` with `5 lines` in your changes are missing coverage. Please review.\n> Project coverage is 48.69%. Comparing base [(`7b0211e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7b0211e345751edb1e66e2760d9cae4d852adffc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`78923c4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 9 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 93.34% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2292      +/-   ##\n==========================================\n- Coverage   48.83%   48.69%   -0.14%     \n==========================================\n  Files         207      207              \n  Lines       12939    12965      +26     \n  Branches     1111     1113       +2     \n==========================================\n- Hits         6318     6312       -6     \n- Misses       6218     6249      +31     \n- Partials      403      404       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2292?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

We will need separate secured ports for push and fetch for allowing both authenticated and un-authenticated clients to be able to communicate.

> Given the number of ports, I am wondering if we should encapsulate all port configs in a class in itself - and localize all port related validation and config there (including RpcEnv creation, etc)\r\n\r\nCan this be done in a separate change, as it will require refactoring of existing code?

@RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang @waitinfuture\r\nThis PR is ready for review now. 

@waitinfuture @mridulm @pan3793 @RexXiong I have updated the PR. Please take a look.

Thanks! Merged to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`ab4c0bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ab4c0bc85bcdd7add792f8bcdc0f6110b088b9e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.73% compared to head [(`5002e37`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.63%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2291      +/-   ##\n==========================================\n- Coverage   48.73%   48.63%   -0.10%     \n==========================================\n  Files         208      208              \n  Lines       12825    12832       +7     \n  Branches     1104     1104              \n==========================================\n- Hits         6249     6239      -10     \n- Misses       6177     6191      +14     \n- Partials      399      402       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2291?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2290?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ab4c0bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ab4c0bc85bcdd7add792f8bcdc0f6110b088b9e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.73% compared to head [(`c55a468`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2290?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.06%.\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2290      +/-   ##\n==========================================\n+ Coverage   48.73%   49.06%   +0.34%     \n==========================================\n  Files         208      208              \n  Lines       12825    12893      +68     \n  Branches     1104     1113       +9     \n==========================================\n+ Hits         6249     6325      +76     \n+ Misses       6177     6163      -14     \n- Partials      399      405       +6     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2290?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, @AngersZhuuuu, could you help to review the log improvement of `WorkerStatusTracker`?

Merged into main(v0.5.0) and branch-0.4(v0.4.1).

@ulysses-you @waitinfuture cc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2289?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ab4c0bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ab4c0bc85bcdd7add792f8bcdc0f6110b088b9e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.73% compared to head [(`72475b1`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2289?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.61%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2289      +/-   ##\n==========================================\n- Coverage   48.73%   48.61%   -0.12%     \n==========================================\n  Files         208      208              \n  Lines       12825    12825              \n  Branches     1104     1104              \n==========================================\n- Hits         6249     6233      -16     \n- Misses       6177     6190      +13     \n- Partials      399      402       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2289?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@kerwin-zk, could you add some pictures to show the result of the bugfix in description of this pull request?

@SteNicholas \r\n![image](https://github.com/apache/incubator-celeborn/assets/107825064/d1e4b1cd-0942-41b1-b82b-163b7ede1d51)\r\n

Merged to main(v0.5.0)

I think we can remove `GlutenShuffleDependencyHelper ` cc @kerwin-zk 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2288?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`2a89c30`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2a89c3011bed056fc6153eea5191c563980855fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.67% compared to head [(`1ccb884`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2288?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.56%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2288      +/-   ##\n==========================================\n- Coverage   48.67%   48.56%   -0.11%     \n==========================================\n  Files         208      208              \n  Lines       12762    12762              \n  Branches     1096     1096              \n==========================================\n- Hits         6211     6196      -15     \n- Misses       6158     6172      +14     \n- Partials      393      394       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2288?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2286?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a8a6e1f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a8a6e1fdcace5f7689092ede66abeed5c773b3b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.83% compared to head [(`4e9edb3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2286?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.97%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2286      +/-   ##\n==========================================\n+ Coverage   47.83%   47.97%   +0.14%     \n==========================================\n  Files         200      200              \n  Lines       12449    12449              \n  Branches     1088     1088              \n==========================================\n+ Hits         5954     5971      +17     \n+ Misses       6102     6089      -13     \n+ Partials      393      389       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2286?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @SteNicholas @RexXiong cc @leixm 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `7 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`7a05b2f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7a05b2fc182622a11114dce478e83a7ec8b558ed?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.85% compared to head [(`a119e91`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.93%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 82.15% | [0 Missing and 5 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rver/common/service/model/ClusterTenantConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL21vZGVsL0NsdXN0ZXJUZW5hbnRDb25maWcuamF2YQ==) | 50.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2285      +/-   ##\n==========================================\n+ Coverage   48.85%   48.93%   +0.09%     \n==========================================\n  Files         208      208              \n  Lines       12837    12893      +56     \n  Branches     1104     1113       +9     \n==========================================\n+ Hits         6270     6308      +38     \n- Misses       6167     6176       +9     \n- Partials      400      409       +9     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2285?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@AngersZhuuuu ConfigService has been refined, pls resolve the conflict, refer: https://github.com/apache/incubator-celeborn/pull/2273

@RexXiong @SteNicholas Pls take a look again, have changed base on new code.

@AngersZhuuuu, could you add description about introduced interfaces in `Does this PR introduce any user-facing change?`? IMO, this pull request introduces certain user-facing interface. Meanwhile, does the title of this pull request need to update?

Merge to master branch, thanks

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2284?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4c5e6f0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4c5e6f065c96ffc6366b19becabec0c7b7f6e6db?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.98% compared to head [(`0e0421f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2284?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.97%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2284      +/-   ##\n==========================================\n- Coverage   47.98%   47.97%   -0.00%     \n==========================================\n  Files         200      200              \n  Lines       12449    12449              \n  Branches     1088     1088              \n==========================================\n- Hits         5972     5971       -1     \n- Misses       6088     6089       +1     \n  Partials      389      389              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2284?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main for 0.5

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2283?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4c5e6f0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4c5e6f065c96ffc6366b19becabec0c7b7f6e6db?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.98% compared to head [(`2a797a3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2283?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.83%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2283      +/-   ##\n==========================================\n- Coverage   47.98%   47.83%   -0.14%     \n==========================================\n  Files         200      200              \n  Lines       12449    12449              \n  Branches     1088     1088              \n==========================================\n- Hits         5972     5954      -18     \n- Misses       6088     6102      +14     \n- Partials      389      393       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2283?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main for 0.5

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2282?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4c5e6f0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4c5e6f065c96ffc6366b19becabec0c7b7f6e6db?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.98% compared to head [(`54a3963`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2282?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 49.05%.\n> Report is 15 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2282      +/-   ##\n==========================================\n+ Coverage   47.98%   49.05%   +1.08%     \n==========================================\n  Files         200      208       +8     \n  Lines       12449    12893     +444     \n  Branches     1088     1113      +25     \n==========================================\n+ Hits         5972     6324     +352     \n- Misses       6088     6163      +75     \n- Partials      389      406      +17     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2282?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@labbomb, does the `License check / License (pull_request)` of CI include the license check step of web module? With the [License check log](https://github.com/apache/incubator-celeborn/actions/runs/7768197738/job/21185855842?pr=2282), I did not find the check.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `24 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`277d060`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/277d060e4895a83e3f83c4ea45a6b56264e1c8d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.84% compared to head [(`fa0b02d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.61%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 76.93% | [14 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | 43.75% | [7 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2281      +/-   ##\n==========================================\n+ Coverage   47.84%   48.61%   +0.77%     \n==========================================\n  Files         200      208       +8     \n  Lines       12449    12825     +376     \n  Branches     1088     1104      +16     \n==========================================\n+ Hits         5955     6233     +278     \n- Misses       6102     6190      +88     \n- Partials      392      402      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2281?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2280?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`f7c8c9d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f7c8c9dd751208c579e76332ed33e03f06d6265b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.04% compared to head [(`fc4514d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2280?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.99%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2280      +/-   ##\n==============================================\n- Coverage       47.04%   46.99%   -0.05%     \n==============================================\n  Files             186      186              \n  Lines           11907    11907              \n  Branches         1053     1053              \n==============================================\n- Hits             5600     5594       -6     \n- Misses           5938     5941       +3     \n- Partials          369      372       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2280?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `39 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`18d5c1c`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/18d5c1cd78d8fd806f54c058d6480d7f89783ef3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.12% compared to head [(`02ccaea`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.99%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/celeborn/common/quota/ResourceConsumption.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1Jlc291cmNlQ29uc3VtcHRpb24uc2NhbGE=) | 10.00% | [18 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | 27.28% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...mon/metrics/source/ResourceConsumptionSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1Jlc291cmNlQ29uc3VtcHRpb25Tb3VyY2Uuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2279      +/-   ##\n==============================================\n- Coverage       47.12%   46.99%   -0.13%     \n==============================================\n  Files             186      186              \n  Lines           11868    11907      +39     \n  Branches         1047     1053       +6     \n==============================================\n+ Hits             5592     5594       +2     \n- Misses           5906     5942      +36     \n- Partials          370      371       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2279?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into branch-0.4(v0.4.1).

@waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2277?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`954277d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/954277d07c7a87731f888058034036c9aebd84a9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.11% compared to head [(`7344178`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2277?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.82%.\n> Report is 11 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2277      +/-   ##\n==========================================\n- Coverage   48.11%   47.82%   -0.29%     \n==========================================\n  Files         197      200       +3     \n  Lines       12272    12449     +177     \n  Branches     1071     1088      +17     \n==========================================\n+ Hits         5904     5953      +49     \n- Misses       5980     6103     +123     \n- Partials      388      393       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2277?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`05fa11b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/05fa11b3a0557d6035aa62163f9d8ff584293879?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.83% compared to head [(`e5f2e76`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.83%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2276      +/-   ##\n==========================================\n+ Coverage   47.83%   47.83%   +0.01%     \n==========================================\n  Files         200      200              \n  Lines       12448    12449       +1     \n  Branches     1088     1088              \n==========================================\n+ Hits         5953     5954       +1     \n  Misses       6103     6103              \n  Partials      392      392              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2276?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2274?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.81%. Comparing base [(`05fa11b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/05fa11b3a0557d6035aa62163f9d8ff584293879?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`a1711ee`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2274?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 43 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2274      +/-   ##\n==========================================\n+ Coverage   47.83%   48.81%   +0.98%     \n==========================================\n  Files         200      207       +7     \n  Lines       12448    12944     +496     \n  Branches     1088     1113      +25     \n==========================================\n+ Hits         5953     6317     +364     \n- Misses       6103     6223     +120     \n- Partials      392      404      +12     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2274?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.1)/branch-0.3(v0.3.3).

My suggestion may be a bit paranoid: can we avoid using the ORM framework and involve additional configuration files other than `celeborn-defaults.conf`? specific to this PR, I mean iBatis and Hikari\r\n\r\nWith a [thin wrapper](https://github.com/apache/kyuubi/blob/10230b3f945bbb1e9a828ccb8b2b9c48d9e10b9e/kyuubi-common/src/main/scala/org/apache/kyuubi/util/JdbcUtils.scala), we can write the vanilla JDBC API like\r\n```\r\n   implicit val hikariDataSource = new HikariDataSource(...)\r\n\r\n   // query case\r\n   JdbcUtils.executeQueryWithRowMapper(\r\n      s"""SELECT item1, item2\r\n         |FROM table\r\n         |WHERE state=?\r\n         |ORDER BY create_time ASC LIMIT 1\r\n         |""".stripMargin) { stmt =>\r\n      // set parameter\r\n      stmt.setString(1, "balabala")\r\n    } { resultSet =>\r\n      // map the ResultSet to data struct, usually a POJO\r\n      resultSet.getString(1)\r\n    }\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `74 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`a6682d5`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a6682d5df9775d42c8fc4eefc3b9122877a42988?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.82% compared to head [(`6519de1`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.55%.\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rver/common/service/model/ClusterTenantConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL21vZGVsL0NsdXN0ZXJUZW5hbnRDb25maWcuamF2YQ==) | 48.89% | [23 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/service/store/db/DbServiceManagerImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL3N0b3JlL2RiL0RiU2VydmljZU1hbmFnZXJJbXBsLmphdmE=) | 77.20% | [12 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...r/common/service/config/BaseConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9CYXNlQ29uZmlnU2VydmljZUltcGwuamF2YQ==) | 59.26% | [10 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/server/common/service/utils/JsonUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL3V0aWxzL0pzb25VdGlscy5qYXZh) | 0.00% | [11 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rver/common/service/model/ClusterSystemConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL21vZGVsL0NsdXN0ZXJTeXN0ZW1Db25maWcuamF2YQ==) | 77.28% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/server/common/service/model/ClusterInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL21vZGVsL0NsdXN0ZXJJbmZvLmphdmE=) | 78.95% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...on/service/config/DynamicConfigServiceFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnU2VydmljZUZhY3RvcnkuamF2YQ==) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rver/common/service/store/db/DBSessionFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL3N0b3JlL2RiL0RCU2Vzc2lvbkZhY3RvcnkuamF2YQ==) | 94.74% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ver/common/service/config/DbConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EYkNvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 92.86% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/service/config/TenantConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9UZW5hbnRDb25maWcuamF2YQ==) | 90.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2273      +/-   ##\n==========================================\n+ Coverage   47.82%   48.55%   +0.73%     \n==========================================\n  Files         200      208       +8     \n  Lines       12449    12762     +313     \n  Branches     1088     1096       +8     \n==========================================\n+ Hits         5953     6195     +242     \n- Misses       6103     6171      +68     \n- Partials      393      396       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2273?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

> My suggestion may be a bit paranoid: can we avoid using the ORM framework and involve additional configuration files other than `celeborn-defaults.conf`? specific to this PR, I mean iBatis and Hikari\r\n> \r\n> With a [thin wrapper](https://github.com/apache/kyuubi/blob/10230b3f945bbb1e9a828ccb8b2b9c48d9e10b9e/kyuubi-common/src/main/scala/org/apache/kyuubi/util/JdbcUtils.scala), we can write the vanilla JDBC API like\r\n> \r\n> ```\r\n>    implicit val hikariDataSource = new HikariDataSource(...)\r\n> \r\n>    // query case\r\n>    JdbcUtils.executeQueryWithRowMapper(\r\n>       s"""SELECT item1, item2\r\n>          |FROM table\r\n>          |WHERE state=?\r\n>          |ORDER BY create_time ASC LIMIT 1\r\n>          |""".stripMargin) { stmt =>\r\n>       // set parameter\r\n>       stmt.setString(1, "balabala")\r\n>     } { resultSet =>\r\n>       // map the ResultSet to data struct, usually a POJO\r\n>       resultSet.getString(1)\r\n>     }\r\n> ```\r\n\r\nAfter offline discussion, we currently tend to keep using the orm (ibatis) framework, and at the same time unify Database-related configurations to CelebornConf.

Thanks @pan3793, how about current?

Thanks all, merge to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2272?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5358bd1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5358bd16842c82d30ba8ce35d1f6ccc48f318650?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.11% compared to head [(`2a15623`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2272?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.31%.\n\n> :exclamation: Current head 2a15623 differs from pull request most recent head 1176372. Consider uploading reports for the commit 1176372 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2272      +/-   ##\n==========================================\n+ Coverage   48.11%   48.31%   +0.21%     \n==========================================\n  Files         197      197              \n  Lines       12301    12301              \n  Branches     1073     1073              \n==========================================\n+ Hits         5917     5942      +25     \n+ Misses       5993     5971      -22     \n+ Partials      391      388       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2272?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

LGTM. Thanks. Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2271?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5358bd1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5358bd16842c82d30ba8ce35d1f6ccc48f318650?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.11% compared to head [(`173d243`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2271?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.19%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2271      +/-   ##\n==========================================\n+ Coverage   48.11%   48.19%   +0.09%     \n==========================================\n  Files         197      197              \n  Lines       12301    12301              \n  Branches     1073     1073              \n==========================================\n+ Hits         5917     5927      +10     \n+ Misses       5993     5984       -9     \n+ Partials      391      390       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2271?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

A cherry-pick? Add the original link to the PR description

> A cherry-pick? Add the original link to the PR description\r\n\r\nYes, I found that there is no difference in the shaded dependencies required for the `0.4.0` and the `main` branch.\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2268?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7fcd2e4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7fcd2e43e5befa0314d03b56aefcd5f8ec3538d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.24% compared to head [(`948af28`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2268?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2268      +/-   ##\n==============================================\n- Coverage       47.24%   47.10%   -0.13%     \n==============================================\n  Files             186      186              \n  Lines           11867    11867              \n  Branches         1047     1047              \n==============================================\n- Hits             5605     5589      -16     \n- Misses           5895     5908      +13     \n- Partials          367      370       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2268?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into branch-0.4(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `7 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`916df8f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/916df8f6ecf06d6b394dd6e3c0b06356eb5d694a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.25% compared to head [(`406e79e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.20%.\n> Report is 13 commits behind head on main.\n\n> :exclamation: Current head 406e79e differs from pull request most recent head 44ae873. Consider uploading reports for the commit 44ae873 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 72.00% | [5 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2267      +/-   ##\n==========================================\n- Coverage   48.25%   48.20%   -0.04%     \n==========================================\n  Files         197      197              \n  Lines       12274    12301      +27     \n  Branches     1071     1073       +2     \n==========================================\n+ Hits         5922     5929       +7     \n- Misses       5967     5983      +16     \n- Partials      385      389       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2267?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@labbomb, could you rebase main branch and update this pull request?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2266?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`99da6e2`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/99da6e2028a980936d8dfea4dedf56726a37151c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.13% compared to head [(`0033c88`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2266?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.14%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2266      +/-   ##\n==========================================\n+ Coverage   48.13%   48.14%   +0.01%     \n==========================================\n  Files         197      197              \n  Lines       12274    12274              \n  Branches     1071     1071              \n==========================================\n+ Hits         5907     5908       +1     \n+ Misses       5979     5978       -1     \n  Partials      388      388              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2266?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `7 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`99da6e2`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/99da6e2028a980936d8dfea4dedf56726a37151c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.13% compared to head [(`44442cb`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.20%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 72.00% | [5 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2265      +/-   ##\n==========================================\n+ Coverage   48.13%   48.20%   +0.08%     \n==========================================\n  Files         197      197              \n  Lines       12274    12301      +27     \n  Branches     1071     1073       +2     \n==========================================\n+ Hits         5907     5929      +22     \n- Misses       5979     5983       +4     \n- Partials      388      389       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2265?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@mridulm @waitinfuture @RexXiong @FMX @pan3793 @akpatnam25 Please help review

Thanks! Merged to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2264?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3ffed66`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3ffed66c409340e866012c823093dd6ee294238a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.22% compared to head [(`57b4f82`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2264?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.11%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2264      +/-   ##\n==========================================\n- Coverage   48.22%   48.11%   -0.10%     \n==========================================\n  Files         197      197              \n  Lines       12263    12272       +9     \n  Branches     1071     1071              \n==========================================\n- Hits         5913     5904       -9     \n- Misses       5966     5980      +14     \n- Partials      384      388       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2264?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2263?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9614bf1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9614bf197ff0193f47324d0586bbeff96366a10f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.55% compared to head [(`674dbc5`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2263?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.46%.\n> Report is 1 commits behind head on branch-0.4.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2263      +/-   ##\n==============================================\n- Coverage       47.55%   47.46%   -0.08%     \n==============================================\n  Files             185      185              \n  Lines           11772    11777       +5     \n  Branches         1045     1045              \n==============================================\n- Hits             5597     5589       -8     \n- Misses           5807     5819      +12     \n- Partials          368      369       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2263?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Sorry for any confusion. I mistakenly initiated a PR in the community repository in advance. \r\nAt present, the feature is still in the internal testing stage. Once it has been validated, we will then open up discussions in the community.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2261?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`0249698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0249698c5b597d496204eca6119589a42ee201c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.41% compared to head [(`9610e91`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2261?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.49%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2261      +/-   ##\n==========================================\n+ Coverage   48.41%   48.49%   +0.08%     \n==========================================\n  Files         196      196              \n  Lines       12147    12147              \n  Branches     1069     1069              \n==========================================\n+ Hits         5880     5889       +9     \n+ Misses       5878     5869       -9     \n  Partials      389      389              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2261?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0) and branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`0249698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0249698c5b597d496204eca6119589a42ee201c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.41% compared to head [(`35c5961`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.38%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 75.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2260      +/-   ##\n==========================================\n- Coverage   48.41%   48.38%   -0.03%     \n==========================================\n  Files         196      196              \n  Lines       12147    12167      +20     \n  Branches     1069     1069              \n==========================================\n+ Hits         5880     5886       +6     \n- Misses       5878     5892      +14     \n  Partials      389      389              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2260?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@SteNicholas Pls take a look since you add these metrics. cc @FMX 

@AngersZhuuuu, could you update `migration.md` to describe the removal of `celeborn.worker.userResourceConsumption.update.interval`?

why target branch is 0.4?

> why target branch is 0.4?\r\n\r\n@pan3793 Because release 0.4 has encountered license issues. And I want to make sure that 0.4 can be released soon.

I think the main have the same issue, why not fix in main and backport?

After running UTs on local machines, I think the UT failures are not relevant to this PR.

@FMX https://github.com/apache/incubator-celeborn/pull/2253#issuecomment-1907971633

gentle ping @carp84  PTAL

> LGTM, I think all items listed in IMPC voting thread are addressed by this PR\r\n\r\nThis PR checks dependency differences agains v0.2.0-incubating.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2259?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`bd01ff3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bd01ff3c3644588b9f07c72cbe0edf3e8f729692?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.44% compared to head [(`ef96554`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2259?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.60%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2259      +/-   ##\n==============================================\n+ Coverage       47.44%   47.60%   +0.16%     \n==============================================\n  Files             185      185              \n  Lines           11777    11777              \n  Branches         1045     1045              \n==============================================\n+ Hits             5587     5605      +18     \n+ Misses           5821     5806      -15     \n+ Partials          369      366       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2259?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks all!\r\n\r\nmerging to branch-0.4(v0.4.0).\r\n\r\nI will initiate the vote for the next RC later today.\r\n

Nice!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2258?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`67e6cbf`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/67e6cbfb517ec192a048faede7e478eb42a3bd10?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.49% compared to head [(`f077ff0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2258?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.53%.\n> Report is 10 commits behind head on main.\n\n> :exclamation: Current head f077ff0 differs from pull request most recent head d455ea9. Consider uploading reports for the commit d455ea9 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2258      +/-   ##\n==========================================\n+ Coverage   48.49%   48.53%   +0.04%     \n==========================================\n  Files         196      196              \n  Lines       12142    12147       +5     \n  Branches     1069     1069              \n==========================================\n+ Hits         5887     5894       +7     \n+ Misses       5868     5867       -1     \n+ Partials      387      386       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2258?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@labbomb, could you add the lisence checker of CI to avoid the lack of certain lisence?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `22 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`67e6cbf`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/67e6cbfb517ec192a048faede7e478eb42a3bd10?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.49% compared to head [(`519f21f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.55%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 25.00% | [21 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/rpc/RpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbnYuc2NhbGE=) | 80.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2257      +/-   ##\n==========================================\n+ Coverage   48.49%   48.55%   +0.06%     \n==========================================\n  Files         196      196              \n  Lines       12142    12173      +31     \n  Branches     1069     1069              \n==========================================\n+ Hits         5887     5909      +22     \n- Misses       5868     5879      +11     \n+ Partials      387      385       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2257?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture @RexXiong @FMX @pan3793 Please help review\r\n\r\n

Thanks, merge to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2256?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4709251`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4709251bb4d2e61d166ea82269d6bd6d591890a2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.47% compared to head [(`60fd784`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2256?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.48%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2256      +/-   ##\n==========================================\n+ Coverage   48.47%   48.48%   +0.01%     \n==========================================\n  Files         196      196              \n  Lines       12142    12142              \n  Branches     1069     1069              \n==========================================\n+ Hits         5885     5886       +1     \n+ Misses       5869     5868       -1     \n  Partials      388      388              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2256?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `87 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`cee251e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cee251e683694a445e7ba3f13db78d8ed8666870?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.48% compared to head [(`c45d0b7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.26%.\n> Report is 8 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [27 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/meta/WorkerEventInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyRXZlbnRJbmZvLmphdmE=) | 0.00% | [21 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...che/celeborn/server/common/http/HttpEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwRW5kcG9pbnQuc2NhbGE=) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../org/apache/celeborn/common/meta/WorkerStatus.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyU3RhdHVzLmphdmE=) | 65.00% | [7 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/util/WorkerStatusUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9Xb3JrZXJTdGF0dXNVdGlscy5qYXZh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 75.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2255      +/-   ##\n==========================================\n- Coverage   48.48%   48.26%   -0.21%     \n==========================================\n  Files         196      199       +3     \n  Lines       12142    12267     +125     \n  Branches     1069     1078       +9     \n==========================================\n+ Hits         5886     5920      +34     \n- Misses       5869     5962      +93     \n+ Partials      387      385       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2255?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@AngersZhuuuu @SteNicholas @FMX @waitinfuture PTAL.

Thanks, merge to main(v0.5.0)

@RexXiong Shall we add doc describing how to manager workers though master?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2254?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`37a513d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/37a513deaabd7bbe306e0e90ce5ffb4f27b9988b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.46% compared to head [(`2c9b7e9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2254?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.50%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2254      +/-   ##\n==========================================\n+ Coverage   48.46%   48.50%   +0.04%     \n==========================================\n  Files         196      196              \n  Lines       12142    12142              \n  Branches     1069     1069              \n==========================================\n+ Hits         5884     5888       +4     \n+ Misses       5870     5866       -4     \n  Partials      388      388              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2254?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Updated. How about now? @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2253?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`37a513d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/37a513deaabd7bbe306e0e90ce5ffb4f27b9988b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.46% compared to head [(`dc6957f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2253?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.64%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2253      +/-   ##\n==========================================\n+ Coverage   48.46%   48.64%   +0.18%     \n==========================================\n  Files         196      196              \n  Lines       12142    12147       +5     \n  Branches     1069     1069              \n==========================================\n+ Hits         5884     5908      +24     \n+ Misses       5870     5855      -15     \n+ Partials      388      384       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2253?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0) and branch-0.4(v0.4.0).

there are merge issues for branch-0.4, a followup hotfix is required.

cc @SteNicholas  @FMX 

Merged into main(v0.5.0) and branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2251?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7bc3497`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7bc34972ac9d5c4bc6f7d96e857f7cbe5ec23986?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22% compared to head [(`3b9f745`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2251?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.59%.\n> Report is 42 commits behind head on main.\n\n> :exclamation: Current head 3b9f745 differs from pull request most recent head 7ec4cd2. Consider uploading reports for the commit 7ec4cd2 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2251      +/-   ##\n==========================================\n+ Coverage   47.22%   48.59%   +1.37%     \n==========================================\n  Files         192      196       +4     \n  Lines       11778    12142     +364     \n  Branches     1050     1069      +19     \n==========================================\n+ Hits         5561     5899     +338     \n- Misses       5844     5857      +13     \n- Partials      373      386      +13     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2251?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @FMX 

LGTM. Merged into main(v0.5.0) and branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2250?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3422198`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3422198dfab98d2cb5cae83f97ec41cadb2063f4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62% compared to head [(`cb2ca91`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2250?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.52%.\n> Report is 10 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2250      +/-   ##\n==========================================\n+ Coverage   47.62%   48.52%   +0.91%     \n==========================================\n  Files         192      196       +4     \n  Lines       11872    12167     +295     \n  Branches     1052     1069      +17     \n==========================================\n+ Hits         5653     5903     +250     \n- Misses       5845     5879      +34     \n- Partials      374      385      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2250?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@tiny-dust, thanks for contribution. Could you please also update the `CONTRIBUTING.md` to introduce how to format frontend code? Meanwhile, could the frontend code style check add into CI?

> @tiny-dust, thanks for contribution. Could you please also update the `CONTRIBUTING.md` to introduce how to format frontend code? Meanwhile, could the frontend code style check add into CI?\r\n\r\nok

@pan3793, PTAL.

should be good to go. cc @cfmcgrady for future sbt supporting

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2249?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3422198`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3422198dfab98d2cb5cae83f97ec41cadb2063f4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62% compared to head [(`7a7148b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2249?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.74%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2249      +/-   ##\n==========================================\n+ Coverage   47.62%   47.74%   +0.12%     \n==========================================\n  Files         192      192              \n  Lines       11872    11872              \n  Branches     1052     1052              \n==========================================\n+ Hits         5653     5667      +14     \n+ Misses       5845     5833      -12     \n+ Partials      374      372       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2249?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`cee251e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cee251e683694a445e7ba3f13db78d8ed8666870?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.48% compared to head [(`acbd34f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.49%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2248      +/-   ##\n==========================================\n+ Coverage   48.48%   48.49%   +0.01%     \n==========================================\n  Files         196      196              \n  Lines       12142    12142              \n  Branches     1069     1069              \n==========================================\n+ Hits         5886     5887       +1     \n+ Misses       5869     5868       -1     \n  Partials      387      387              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2248?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@AngersZhuuuu, could the pattern of the client thread name be `celeborn-client-component-xxx`, and the pattern of the worker thread name be `worker-component-xxx`?

ping @cfmcgrady @SteNicholas 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2247?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3422198`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3422198dfab98d2cb5cae83f97ec41cadb2063f4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62% compared to head [(`341f2ae`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2247?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.46%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2247      +/-   ##\n==========================================\n+ Coverage   47.62%   48.46%   +0.85%     \n==========================================\n  Files         192      196       +4     \n  Lines       11872    12142     +270     \n  Branches     1052     1069      +17     \n==========================================\n+ Hits         5653     5884     +231     \n- Misses       5845     5870      +25     \n- Partials      374      388      +14     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2247?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2246?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5358bd1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5358bd16842c82d30ba8ce35d1f6ccc48f318650?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.11% compared to head [(`b84a500`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2246?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.24%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2246      +/-   ##\n==========================================\n+ Coverage   48.11%   48.24%   +0.14%     \n==========================================\n  Files         197      197              \n  Lines       12301    12309       +8     \n  Branches     1073     1073              \n==========================================\n+ Hits         5917     5937      +20     \n+ Misses       5993     5982      -11     \n+ Partials      391      390       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2246?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @mridulm 

cc @mridulm  @pan3793   PTAL, thank you for your suggestions.

Pls resolve conflicts

cc @AngersZhuuuu  PTAL.

cc @pan3793 

CI failed, seems flaky test.

Thanks, merge to main(v0.5.0)!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2244?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ef47645`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ef47645b7a37b4cc3e6669978197ec88659d8baf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62% compared to head [(`d95c24b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2244?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.60%.\n\n> :exclamation: Current head d95c24b differs from pull request most recent head 39fd1ec. Consider uploading reports for the commit 39fd1ec to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2244      +/-   ##\n==========================================\n- Coverage   47.62%   47.60%   -0.02%     \n==========================================\n  Files         192      192              \n  Lines       11872    11872              \n  Branches     1052     1052              \n==========================================\n- Hits         5653     5650       -3     \n- Misses       5845     5846       +1     \n- Partials      374      376       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2244?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `5 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`916df8f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/916df8f6ecf06d6b394dd6e3c0b06356eb5d694a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.25% compared to head [(`33a27aa`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.48%.\n> Report is 29 commits behind head on main.\n\n> :exclamation: Current head 33a27aa differs from pull request most recent head 2464e00. Consider uploading reports for the commit 2464e00 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/celeborn/common/quota/DefaultQuotaManager.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL0RlZmF1bHRRdW90YU1hbmFnZXIuc2NhbGE=) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2243      +/-   ##\n==========================================\n+ Coverage   48.25%   48.48%   +0.23%     \n==========================================\n  Files         197      196       -1     \n  Lines       12274    12151     -123     \n  Branches     1071     1071              \n==========================================\n- Hits         5922     5890      -32     \n+ Misses       5967     5873      -94     \n- Partials      385      388       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2243?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2242?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9107779`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/91077791741dfeec8d672395bba3183496ebb20b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62% compared to head [(`69152c1`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2242?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.60%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2242      +/-   ##\n==========================================\n- Coverage   47.62%   47.60%   -0.01%     \n==========================================\n  Files         192      192              \n  Lines       11872    11872              \n  Branches     1052     1052              \n==========================================\n- Hits         5653     5651       -2     \n- Misses       5845     5846       +1     \n- Partials      374      375       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2242?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @AngersZhuuuu 

Merged to main/0.4, thanks for contribution.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `6 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`b90fb1f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b90fb1fdb26f576f4bace363b6586b75286db27c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.59% compared to head [(`71efa3e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.60%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | 0.00% | [4 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2241      +/-   ##\n==========================================\n+ Coverage   47.59%   47.60%   +0.01%     \n==========================================\n  Files         192      192              \n  Lines       11865    11872       +7     \n  Branches     1050     1052       +2     \n==========================================\n+ Hits         5646     5650       +4     \n- Misses       5844     5846       +2     \n- Partials      375      376       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2241?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @AngersZhuuuu  

Pls crate a jira ticket and write pr title as `[CELEBORN-xxx][XX] title`

cc @waitinfuture @SteNicholas @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2240?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`749a0fa`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/749a0fa43974d5f2b8f0ce9f7b61e032fb8f8aea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.59% compared to head [(`5a01121`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2240?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.59%.\n\n> :exclamation: Current head 5a01121 differs from pull request most recent head 8791bb2. Consider uploading reports for the commit 8791bb2 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2240   +/-   ##\n=======================================\n  Coverage   47.59%   47.59%           \n=======================================\n  Files         192      192           \n  Lines       11865    11865           \n  Branches     1050     1050           \n=======================================\n  Hits         5646     5646           \n  Misses       5844     5844           \n  Partials      375      375           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2240?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Done.

Done.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `90 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`0249698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0249698c5b597d496204eca6119589a42ee201c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.41% compared to head [(`3535d2c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.06%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eborn/common/metrics/source/ThreadPoolSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1RocmVhZFBvb2xTb3VyY2Uuc2NhbGE=) | 5.50% | [86 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | 57.15% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2239      +/-   ##\n==========================================\n- Coverage   48.41%   48.06%   -0.35%     \n==========================================\n  Files         196      197       +1     \n  Lines       12147    12263     +116     \n  Branches     1069     1071       +2     \n==========================================\n+ Hits         5880     5893      +13     \n- Misses       5878     5982     +104     \n+ Partials      389      388       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2239?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @waitinfuture @FMX @SteNicholas 

@AngersZhuuuu, could you also add the thread metrics in dashboard json and document?

Any more suggestion?

ping @FMX Pls take a look

@SteNicholas Update the demo metrics value

ping @FMX @RexXiong  @SteNicholas Pls take a look again

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`5c54388`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5c54388bc2cfee712b82c91aaf0be933358dfed0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.40% compared to head [(`9e230ed`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.12%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2237      +/-   ##\n==========================================\n- Coverage   48.40%   48.12%   -0.27%     \n==========================================\n  Files         196      197       +1     \n  Lines       12167    12274     +107     \n  Branches     1069     1071       +2     \n==========================================\n+ Hits         5888     5906      +18     \n- Misses       5891     5980      +89     \n  Partials      388      388              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2237?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I suppose the random picking port strategy could alleviate the issue but still has conflict possibilities. Migrating the CI infrastructure to the containerized environment might be the ultimate solution.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2236?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`78b77dc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78b77dc27f94061453a78381872c8908c45cbc8f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.75% compared to head [(`a057939`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2236?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.59%.\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2236      +/-   ##\n==========================================\n- Coverage   47.75%   47.59%   -0.16%     \n==========================================\n  Files         192      192              \n  Lines       11865    11872       +7     \n  Branches     1050     1052       +2     \n==========================================\n- Hits         5665     5649      -16     \n- Misses       5830     5848      +18     \n- Partials      370      375       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2236?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2235?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`30608ea`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/30608ea698de7c068a50df5f22dd027764ede810?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.61% compared to head [(`39796a4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2235?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.62%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2235      +/-   ##\n==========================================\n+ Coverage   47.61%   47.62%   +0.01%     \n==========================================\n  Files         192      192              \n  Lines       11865    11865              \n  Branches     1050     1050              \n==========================================\n+ Hits         5648     5649       +1     \n  Misses       5843     5843              \n+ Partials      374      373       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2235?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0)/branch-0.3(v0.3.3)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2234?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`8856615`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/885661596b3c893f07a87ed6794c00dac3d0301f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20% compared to head [(`fdf8e0e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2234?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.60%.\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2234      +/-   ##\n==========================================\n+ Coverage   47.20%   47.60%   +0.40%     \n==========================================\n  Files         192      192              \n  Lines       11778    11872      +94     \n  Branches     1050     1052       +2     \n==========================================\n+ Hits         5559     5650      +91     \n- Misses       5845     5846       +1     \n- Partials      374      376       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2234?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merge to main(v0.5.0)

It seems to change the behavior.\r\n\r\nPreviously, it could tolerate temporary disk issues, e.g. some configured disks have no permission to write due to wrong setup, and the disk will be back once the permission issue gets fixed. But after this change, the issued disks will be excluded forever until restarting the process?

> Previously, it could tolerate temporary disk issues, e.g. some configured disks have no permission to write due to wrong setup, and the disk will be back once the permission issue gets fixed. But after this change, the issued disks will be excluded forever until restarting the process?\r\n\r\nYes.\r\n\r\nBut previously, if only one disk is used and the disk is bad, the worker still serves traffic, but all the requests will fail.\r\n

> ... if only one disk is used and the disk is bad, the worker still serves traffic, but all the requests will fail.\r\n\r\nI suppose the design of Celeborn can handle bad / run-out-of-space issues at runtime dynamically. Permanently excluding a bad disk at startup is too rough.

Another alternative is to extract `LocalDeviceMonitor#startCheck#run` into a method, and explicitly call the method after base working directories are created, so it will be marked as `READ_OR_WRITE_FAILURE` in the initialization of `StorageManager` if the disk is not available, and no slots will be allocated on it. `LocalDeviceMonitor#readWriteError` will always try to create the directory, so even though the base working directory is not created in startup, whenever the disk goes back to healthy, the directory will be created.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

> Another alternative is to extract `LocalDeviceMonitor#startCheck#run` into a method, and explicitly call the method after base working directories are created, so it will be marked as `READ_OR_WRITE_FAILURE` in the initialization of `StorageManager` if the disk is not available, and no slots will be allocated on it. `LocalDeviceMonitor#readWriteError` will always try to create the directory, so even though the base working directory is not created in startup, whenever the disk goes back to healthy, the directory will be created.\r\n\r\nchecking 

> Another alternative is to extract `LocalDeviceMonitor#startCheck#run` into a method, and explicitly call the method after base working directories are created, so it will be marked as `READ_OR_WRITE_FAILURE` in the initialization of `StorageManager` if the disk is not available, and no slots will be allocated on it. `LocalDeviceMonitor#readWriteError` will always try to create the directory, so even though the base working directory is not created in startup, whenever the disk goes back to healthy, the directory will be created.\r\n\r\nHow about just set the init delay for LocalDeviceMonitor#startCheck task scheduling to 0? @waitinfuture 

> LocalDeviceMonitor\r\n\r\nThis is a good idea.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2233?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`c183753`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c1837536a159454287e16664bc6be9b90a09a023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.63% compared to head [(`3f6f6e6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2233?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.72%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2233      +/-   ##\n==========================================\n+ Coverage   48.63%   48.72%   +0.09%     \n==========================================\n  Files         208      208              \n  Lines       12832    12832              \n  Branches     1104     1104              \n==========================================\n+ Hits         6240     6251      +11     \n+ Misses       6191     6178      -13     \n- Partials      401      403       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2233?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2232?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`402d23d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/402d23d0ea6d8bdcad412322610b6b7d41013812?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`3ea402b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2232?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.61%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2232      +/-   ##\n==========================================\n+ Coverage   47.19%   47.61%   +0.43%     \n==========================================\n  Files         192      192              \n  Lines       11778    11865      +87     \n  Branches     1050     1050              \n==========================================\n+ Hits         5557     5648      +91     \n+ Misses       5847     5843       -4     \n  Partials      374      374              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2232?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I did run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` but that didn\

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `55 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`ced6f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ced6f93bc1174b53ae87827482b1907ae10ee7d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20% compared to head [(`b24dee4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.60%.\n> Report is 26 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...sasl/registration/RegistrationClientBootstrap.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL3JlZ2lzdHJhdGlvbi9SZWdpc3RyYXRpb25DbGllbnRCb290c3RyYXAuamF2YQ==) | 71.19% | [27 Missing and 7 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...work/sasl/registration/RegistrationRpcHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL3JlZ2lzdHJhdGlvbi9SZWdpc3RyYXRpb25ScGNIYW5kbGVyLmphdmE=) | 84.56% | [13 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/network/sasl/SecretRegistryImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1NlY3JldFJlZ2lzdHJ5SW1wbC5qYXZh) | 50.00% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2231      +/-   ##\n==========================================\n+ Coverage   47.20%   48.60%   +1.41%     \n==========================================\n  Files         192      196       +4     \n  Lines       11778    12142     +364     \n  Branches     1050     1069      +19     \n==========================================\n+ Hits         5559     5901     +342     \n- Misses       5845     5856      +11     \n- Partials      374      385      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2231?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Can you check the test failures @otterc  ?

@waitinfuture @RexXiong @FMX @pan3793 Please help review 

> @waitinfuture @RexXiong @FMX @pan3793 Please help review\r\n\r\nWill review today : )

Thanks! Merging to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`402d23d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/402d23d0ea6d8bdcad412322610b6b7d41013812?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`22de5a3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 66.67% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2230      +/-   ##\n==========================================\n+ Coverage   47.19%   47.19%   +0.01%     \n==========================================\n  Files         192      192              \n  Lines       11778    11779       +1     \n  Branches     1050     1050              \n==========================================\n+ Hits         5557     5558       +1     \n+ Misses       5847     5846       -1     \n- Partials      374      375       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2230?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2229?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`402d23d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/402d23d0ea6d8bdcad412322610b6b7d41013812?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`f33c80c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2229?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.73%.\n> Report is 9 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2229      +/-   ##\n==========================================\n+ Coverage   47.19%   47.73%   +0.55%     \n==========================================\n  Files         192      192              \n  Lines       11778    11872      +94     \n  Branches     1050     1052       +2     \n==========================================\n+ Hits         5557     5666     +109     \n+ Misses       5847     5833      -14     \n+ Partials      374      373       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2229?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @FMX @waitinfuture @SteNicholas @cfmcgrady PTAL

also ping @mridulm 

cc @cfmcgrady @RexXiong @AngersZhuuuu PTAL

Thanks, merge to main(0.5)/branch-0.4(0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2227?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`1495fca`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1495fca69bf183a401911daaed92dce78f7d62d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 0.00% compared to head [(`2896ad5`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2227?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff            @@\n##           main    #2227       +/-   ##\n=========================================\n+ Coverage      0   47.21%   +47.21%     \n=========================================\n  Files         0      192      +192     \n  Lines         0    11778    +11778     \n  Branches      0     1050     +1050     \n=========================================\n+ Hits          0     5560     +5560     \n- Misses        0     5844     +5844     \n- Partials      0      374      +374     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2227?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.5.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2225?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7bc3497`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7bc34972ac9d5c4bc6f7d96e857f7cbe5ec23986?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22% compared to head [(`691828a`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2225?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2225      +/-   ##\n==========================================\n- Coverage   47.22%   47.19%   -0.02%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n- Hits         5561     5558       -3     \n- Misses       5844     5845       +1     \n- Partials      373      375       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2225?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main for 0.5

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2224?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7bc3497`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7bc34972ac9d5c4bc6f7d96e857f7cbe5ec23986?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22% compared to head [(`672f786`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2224?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2224   +/-   ##\n=======================================\n  Coverage   47.22%   47.22%           \n=======================================\n  Files         192      192           \n  Lines       11778    11778           \n  Branches     1050     1050           \n=======================================\n  Hits         5561     5561           \n  Misses       5844     5844           \n  Partials      373      373           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2224?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

better merge to 0.3.2 and 0.4.0 cc @cfmcgrady @SteNicholas 

Merged into main(v0.5.0) and branch-0.4(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2223?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5f0a840`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0a8406c62211fcf275c0ba31d84e3c151517b5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`efc07f5`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2223?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2223      +/-   ##\n==========================================\n+ Coverage   47.19%   47.20%   +0.01%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5558     5559       +1     \n- Misses       5845     5846       +1     \n+ Partials      375      373       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2223?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@AngersZhuuuu, `tabkeBuffer()`->`takeBuffer()` for the title and description.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2221?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`daddd2d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/daddd2d2c1e0485ab0ca6651fb6f77bf5f113089?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21% compared to head [(`ad10017`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2221?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head ad10017 differs from pull request most recent head 3b8acf1. Consider uploading reports for the commit 3b8acf1 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2221      +/-   ##\n==========================================\n- Coverage   47.21%   47.10%   -0.11%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n- Hits         5560     5547      -13     \n- Misses       5844     5856      +12     \n- Partials      374      375       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2221?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2220?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`daddd2d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/daddd2d2c1e0485ab0ca6651fb6f77bf5f113089?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21% compared to head [(`d74db5c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2220?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2220   +/-   ##\n=======================================\n  Coverage   47.21%   47.21%           \n=======================================\n  Files         192      192           \n  Lines       11778    11778           \n  Branches     1050     1050           \n=======================================\n  Hits         5560     5560           \n  Misses       5844     5844           \n  Partials      374      374           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2220?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong  How about your opinion?

Thanks, merged to main/0.4.0

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2219?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9201cc7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9201cc79b0519a0eaf348e35afb047a8acd7aab7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`caee224`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2219?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.36%.\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2219      +/-   ##\n==========================================\n+ Coverage   47.19%   47.36%   +0.17%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5557     5577      +20     \n+ Misses       5847     5831      -16     \n+ Partials      374      370       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2219?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, could you help to review this improvement of `loadFileGroup` for `ShuffleClientImpl`? Current exception message is confusing to users in production practice of BiliBili.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2218?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ced6f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ced6f93bc1174b53ae87827482b1907ae10ee7d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20% compared to head [(`a68545b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2218?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.34%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2218      +/-   ##\n==========================================\n+ Coverage   47.20%   47.34%   +0.14%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5559     5575      +16     \n+ Misses       5845     5832      -13     \n+ Partials      374      371       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2218?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2217?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9201cc7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9201cc79b0519a0eaf348e35afb047a8acd7aab7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`54d21b3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2217?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.34%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2217      +/-   ##\n==========================================\n+ Coverage   47.19%   47.34%   +0.16%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5557     5575      +18     \n+ Misses       5847     5832      -15     \n+ Partials      374      371       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2217?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Keep this draft until pass CI

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2216?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9201cc7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9201cc79b0519a0eaf348e35afb047a8acd7aab7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`47157e8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2216?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2216      +/-   ##\n==========================================\n+ Coverage   47.19%   47.21%   +0.03%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5557     5560       +3     \n+ Misses       5847     5844       -3     \n  Partials      374      374              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2216?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main for 0.5

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2215?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ced6f93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ced6f93bc1174b53ae87827482b1907ae10ee7d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20% compared to head [(`9c09aac`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2215?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.35%.\n\n> :exclamation: Current head 9c09aac differs from pull request most recent head f526a19. Consider uploading reports for the commit f526a19 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2215      +/-   ##\n==========================================\n+ Coverage   47.20%   47.35%   +0.15%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n+ Hits         5559     5576      +17     \n+ Misses       5845     5831      -14     \n+ Partials      374      371       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2215?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

The log-level de-escalation looks too aggressive, could you classify the log into different cases with line counting?

BTW, how long have your logs been retained?

@pan3793, user could understand the response status via document, which does not need to use info level to print the detail of handling PushData or PushMergedData. The log is obtained 7 days in out production environment but single log file uses much space here. The source of truth of the log level for handling PushData or PushMergedData is that help to users understand the response status, therefore the log level cound be unified to debug level.

> user could understand the response status via document\r\n\r\nthe client-side log and server-side log are different aspects, when debugging the cluster-level issues, the server-side log is very important.\r\n\r\n> The log is obtained 7 days in out production environment but single log file uses much space here.\r\n\r\nCeleborn uses log4j2, with proper configuring, you can leverage the log rotation and compression(typically could be 100～1000x) feature to address your concerns.\r\n\r\n> The source of truth of the log level for handling PushData or PushMergedData is that help to users understand the response status, therefore the log level cound be unified to debug level.\r\n\r\nI can\

@pan3793, as you mentioned, do you mean that the log level of the shutting down phase should keep info level, and other level could be updated to debug?

No. I said "for example", not something like "other cases I don\

After secondary thought, we can replace the logs with metrics in the positive cases during non-shutting down phase.

@pan3793, I would like to introduce certain metrics in [CELEBORN-1214](https://issues.apache.org/jira/browse/CELEBORN-1214) for hard split etc. This pull request could update the log level from info to debug.

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2214?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`21f5e62`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/21f5e6208c12d416a72680357777872062e665f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29% compared to head [(`d092184`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2214?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.28%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2214      +/-   ##\n==========================================\n- Coverage   47.29%   47.28%   -0.01%     \n==========================================\n  Files         189      189              \n  Lines       11726    11726              \n  Branches     1046     1046              \n==========================================\n- Hits         5545     5543       -2     \n- Misses       5816     5817       +1     \n- Partials      365      366       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2214?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2213?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`21f5e62`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/21f5e6208c12d416a72680357777872062e665f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29% compared to head [(`c5af498`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2213?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2213      +/-   ##\n==========================================\n- Coverage   47.29%   47.19%   -0.09%     \n==========================================\n  Files         189      192       +3     \n  Lines       11726    11778      +52     \n  Branches     1046     1050       +4     \n==========================================\n+ Hits         5545     5558      +13     \n- Misses       5816     5845      +29     \n- Partials      365      375      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2213?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@justinmclean, Happy New Year, I have fixed the NOTICE issue you pointed out at https://lists.apache.org/thread/zw5cw621dqgbktdolx7qynho0zt451pk, with some additional places. I would appreciate it if you could take a look.

See the second part of https://infra.apache.org/licensing-howto.html#alv2-dep

@justinmclean Thanks for your clarification, I assume that your point is "for projects under ALv2, there are no differences between non-ASF and ASF projects on NOTICE propagation"\r\n\r\nBased on that, I updated the NOTICE to mention Parquet MR and Iceberg. Also opened https://github.com/apache/kyuubi/pull/5953 to fix the Apache Kyuubi side issue.\r\n\r\nAlso, would appreciate it if you could replace the NOTICE example https://infra.apache.org/licensing-howto.html#example-notice with a little bit of complex case.

In some case IMO it needs to

@justinmclean let me clarify with more details\r\n\r\nAccording to https://infra.apache.org/licensing-howto.html\r\n\r\n> In any case, the principle remains the same: LICENSE and NOTICE must exactly represent the contents of the distribution they reside in.\r\n\r\nWhen coping code from an ALv2 project, I would check the LICENSE and the code file comment, if no explicit declaration, I suppose the code is original from that project, in such case, I assume propagate the "project name and copyright line" of the NOTICE is sufficient.\r\n\r\nBut if there are clues indicating that the code was derived from other projects/organizations, give the `DynMethods` as an example, I copied it from Apache Kyuubi\r\n\r\n```patch\r\n- /** Copied from parquet-common */\r\n+ /** this class is copied from Apache Kyuubi, derived from parquet-common */\r\npublic class DynMethods {\r\n```\r\nI would modify the comments to reflect the code derivation, and also analysis the content of Kyuubi\

Assuming propagating only the "project name and copyright line" of the NOTICE is sufficient is not correct. All lines of the NOTICE file should be considered for inclusion. Let us look at this one https://github.com/apache/parquet-mr/blob/master/NOTICE\r\n\r\nParts that should be copied IMO include:\r\n- project name and copyright line\r\n- Do any of the files copied contain code from parquet-tools, parquet-protobuf, Apache Avro, Kite or Netflix? It\

> So projects take two options: ... others will check the history of each file included and work that out.\r\n\r\nI checked https://github.com/apache/parquet-mr/pull/384/commits/d71836347cbe84e99fad7166fe89e99abf1b51ae, the original `DynMethods` should be imported from Cloudera/Kite, will check others and update NOTICE accordingly.

Merged to main/0.4

@FMX, `RunningApplicationCount` and `FetchChunkFailCount` of `celeborn-dashboard.json`introduced via #1976, #2151 are something incorrect, therefore this pull request should be merged into v0.4.0. Please help to review this pull request.\r\ncc @onebox-li, please help to verify the grafana dashboard.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2212?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a3c28d0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a3c28d0b340fc3388f71b8067afd381ace5b27b9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`4c9841d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2212?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.16%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2212      +/-   ##\n==========================================\n+ Coverage   47.13%   47.16%   +0.03%     \n==========================================\n  Files         189      189              \n  Lines       11726    11726              \n  Branches     1046     1046              \n==========================================\n+ Hits         5526     5529       +3     \n+ Misses       5830     5829       -1     \n+ Partials      370      368       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2212?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2211?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`77e4681`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/77e468161d5ed828530c6832610cb366c6f224da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.99% compared to head [(`0cb76e7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2211?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29%.\n> Report is 9 commits behind head on main.\n\n> :exclamation: Current head 0cb76e7 differs from pull request most recent head f567bcc. Consider uploading reports for the commit f567bcc to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2211      +/-   ##\n==========================================\n+ Coverage   46.99%   47.29%   +0.31%     \n==========================================\n  Files         185      189       +4     \n  Lines       11706    11726      +20     \n  Branches     1043     1046       +3     \n==========================================\n+ Hits         5500     5545      +45     \n+ Misses       5836     5816      -20     \n+ Partials      370      365       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2211?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `20 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`9f8a6bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9f8a6bcb7932ec1ecef3faa14d9063711e026708?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29% compared to head [(`20937da`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.33%.\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ork/sasl/anonymous/AnonymousSaslClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL2Fub255bW91cy9Bbm9ueW1vdXNTYXNsQ2xpZW50RmFjdG9yeS5qYXZh) | 50.00% | [7 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ork/sasl/anonymous/AnonymousSaslServerFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL2Fub255bW91cy9Bbm9ueW1vdXNTYXNsU2VydmVyRmFjdG9yeS5qYXZh) | 44.45% | [8 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2210      +/-   ##\n==========================================\n+ Coverage   47.29%   47.33%   +0.04%     \n==========================================\n  Files         189      192       +3     \n  Lines       11732    11778      +46     \n  Branches     1046     1050       +4     \n==========================================\n+ Hits         5548     5574      +26     \n- Misses       5819     5832      +13     \n- Partials      365      372       +7     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main(v0.5.0), thanks!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2209?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5f0a840`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0a8406c62211fcf275c0ba31d84e3c151517b5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`ce34691`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2209?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2209      +/-   ##\n==========================================\n- Coverage   47.19%   47.10%   -0.09%     \n==========================================\n  Files         192      192              \n  Lines       11778    11778              \n  Branches     1050     1050              \n==========================================\n- Hits         5558     5547      -11     \n- Misses       5845     5856      +11     \n  Partials      375      375              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2209?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX, @RexXiong, @mridulm, @cfmcgrady, I have updated the `OpenStream` behavior of `FetchHandler` that register chunk stream for original unsorted disk file of `ReusedExchange` operator. PTAL.\r\nBTW, @FMX, this bugfix should be merged into v4.0.0-incubating.

@cfmcgrady, @RexXiong, @FMX, I have added e2e test in `ReusedExchangeSuite` and addressed above comments. Meanwhile, the progresses of OpenStream, EndStream and deleting original file for reading local/dfs shuffle are same as the progresses for reading worker shuffle. Therefore, this should register chunk stream in OpenStream for reading local/dfs shuffle. PTAL.

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2208?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`79002f6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2208?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.16%.\n> Report is 7 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2208      +/-   ##\n==========================================\n+ Coverage   47.08%   47.16%   +0.08%     \n==========================================\n  Files         185      189       +4     \n  Lines       11706    11726      +20     \n  Branches     1043     1046       +3     \n==========================================\n+ Hits         5511     5529      +18     \n- Misses       5825     5829       +4     \n+ Partials      370      368       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2208?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2207?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`342500b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2207?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22%.\n> Report is 85 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2207      +/-   ##\n==========================================\n+ Coverage   47.08%   47.22%   +0.14%     \n==========================================\n  Files         185      189       +4     \n  Lines       11706    11747      +41     \n  Branches     1043     1046       +3     \n==========================================\n+ Hits         5511     5546      +35     \n- Misses       5825     5832       +7     \n+ Partials      370      369       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2207?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture Did you delete a comment？  Encountered an issue multiple times: when a shuffle generates a large number of splits, if the driver spends a significant amount of time (over a minute) reserving a split during a certain instance, it continues to hold the lock for changePartitionRequests. Consequently, the driver gets stuck processing RPC requests due to the abundance of splits. This leads to timeouts when Executors send RPC requests to the driver, such as map end requests. The loss of these requests has triggered a series of bugs (e.g., the totalInflightReqs counter issue, which has been fixed).

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2206?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a3c28d0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a3c28d0b340fc3388f71b8067afd381ace5b27b9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`28d9647`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2206?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.05%.\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head 28d9647 differs from pull request most recent head 55fba53. Consider uploading reports for the commit 55fba53 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2206      +/-   ##\n==========================================\n- Coverage   47.13%   47.05%   -0.07%     \n==========================================\n  Files         189      189              \n  Lines       11726    11726              \n  Branches     1046     1046              \n==========================================\n- Hits         5526     5517       -9     \n- Misses       5830     5839       +9     \n  Partials      370      370              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2206?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

would the change be clearer if we do a clean revert first?

> would the change be clearer if we do a clean revert first?\r\n\r\nI think you are right. I suggested not to revert yesterday, but now I think revert is clearer.

Can you provide more context about the legal reasons please ?\r\nI did not find any details in the jira CELEBORN-1211 as well.

> Can you provide more context about the legal reasons please ? I did not find any details in the jira [CELEBORN-1211](https://issues.apache.org/jira/browse/CELEBORN-1211) as well.\r\n\r\nHi @mridulm , we found instructions about adding cryptography features in this doc:\r\nhttps://infra.apache.org/crypto.html\r\n\r\n![image](https://github.com/apache/incubator-celeborn/assets/948245/2e833dfc-75aa-4d1a-bb11-8776d31be52c)\r\n\r\nand we decided not to include such code for now.\r\n

Sounds good, btw going through the process should not be very cumbersome - we can get help from folks who have done it in past at Apache projects :-)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2205?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a3c28d0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a3c28d0b340fc3388f71b8067afd381ace5b27b9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`b8d501b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2205?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2205      +/-   ##\n==========================================\n+ Coverage   47.13%   47.29%   +0.17%     \n==========================================\n  Files         189      189              \n  Lines       11726    11726              \n  Branches     1046     1046              \n==========================================\n+ Hits         5526     5545      +19     \n+ Misses       5830     5816      -14     \n+ Partials      370      365       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2205?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

late LGTM, thank you for the fix.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2204?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`9f8a6bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9f8a6bcb7932ec1ecef3faa14d9063711e026708?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29% compared to head [(`9f4fefa`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2204?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 50.26%.\n> Report is 10 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2204      +/-   ##\n==========================================\n+ Coverage   47.29%   50.26%   +2.97%     \n==========================================\n  Files         189      192       +3     \n  Lines       11732    12559     +827     \n  Branches     1046     1092      +46     \n==========================================\n+ Hits         5548     6311     +763     \n- Misses       5819     5888      +69     \n+ Partials      365      360       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2204?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@zwangsheng CI broken after merging this PR, reverted in 21f5e6208c12d416a72680357777872062e665f0\r\n\r\nPlease check and re-submit this patch based on the latest main branch

Hi @cfmcgrady , WIP, seems fail with SBT test, but look all fine in local IDE.

@zwangsheng create a new PR for re-submitting

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2203?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`4eef46e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2203?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2203   +/-   ##\n=======================================\n  Coverage   47.08%   47.08%           \n=======================================\n  Files         185      185           \n  Lines       11706    11706           \n  Branches     1043     1043           \n=======================================\n  Hits         5511     5511           \n  Misses       5825     5825           \n  Partials      370      370           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2203?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`7e3cff6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2202      +/-   ##\n==========================================\n+ Coverage   47.08%   47.13%   +0.05%     \n==========================================\n  Files         185      185              \n  Lines       11706    11705       -1     \n  Branches     1043     1042       -1     \n==========================================\n+ Hits         5511     5516       +5     \n+ Misses       5825     5822       -3     \n+ Partials      370      367       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2202?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2201?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`c2c13a4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2201?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2201   +/-   ##\n=======================================\n  Coverage   47.08%   47.08%           \n=======================================\n  Files         185      185           \n  Lines       11706    11706           \n  Branches     1043     1043           \n=======================================\n  Hits         5511     5511           \n  Misses       5825     5825           \n  Partials      370      370           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2201?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2200?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`68f7986`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2200?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2200      +/-   ##\n==========================================\n+ Coverage   47.08%   47.10%   +0.02%     \n==========================================\n  Files         185      185              \n  Lines       11706    11706              \n  Branches     1043     1043              \n==========================================\n+ Hits         5511     5513       +2     \n+ Misses       5825     5824       -1     \n+ Partials      370      369       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2200?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

It seems that failure is related to the code style check, you can run `./dev/reformat` in local to format the code.\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2199?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ecd577e`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ecd577e5d3944b7e15aa5a9930b9013119f932f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08% compared to head [(`74467fc`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2199?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2199      +/-   ##\n==========================================\n+ Coverage   47.08%   47.10%   +0.02%     \n==========================================\n  Files         185      185              \n  Lines       11706    11706              \n  Branches     1043     1043              \n==========================================\n+ Hits         5511     5513       +2     \n+ Misses       5825     5824       -1     \n+ Partials      370      369       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2199?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+1 for disabling Maven cache by default.\r\n\r\nThere seems an issue that SBT treats a Maven `.m2` cache as valid when only `pom.xml` is present but `xxx.jar` absent, then causes the building failure.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2198?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`77e4681`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/77e468161d5ed828530c6832610cb366c6f224da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.99% compared to head [(`254878d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2198?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2198      +/-   ##\n==========================================\n+ Coverage   46.99%   47.08%   +0.10%     \n==========================================\n  Files         185      185              \n  Lines       11706    11706              \n  Branches     1043     1043              \n==========================================\n+ Hits         5500     5511      +11     \n+ Misses       5836     5825      -11     \n  Partials      370      370              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2198?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2197?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`b4b8684`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b4b86848e3af2e3fe4b906308cdfd7a3a21fa1be?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.15% compared to head [(`eb9cf0b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2197?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.14%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2197      +/-   ##\n==========================================\n- Coverage   47.15%   47.14%   -0.00%     \n==========================================\n  Files         185      185              \n  Lines       11717    11717              \n  Branches     1043     1043              \n==========================================\n- Hits         5524     5523       -1     \n  Misses       5825     5825              \n- Partials      368      369       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2197?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

checked all the LICENSE/NOTICE files, it looks as expected after this PR.

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2196?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`b4b8684`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b4b86848e3af2e3fe4b906308cdfd7a3a21fa1be?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.15% compared to head [(`a91ee61`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2196?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.12%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2196      +/-   ##\n==========================================\n- Coverage   47.15%   47.12%   -0.03%     \n==========================================\n  Files         185      185              \n  Lines       11717    11706      -11     \n  Branches     1043     1043              \n==========================================\n- Hits         5524     5515       -9     \n+ Misses       5825     5823       -2     \n  Partials      368      368              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2196?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

As this feature is broken, I cherry-picked it 0.4 to avoid confusing users.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2195?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`6691568`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/669156824271caec03f2f1f62c48c02cd870e684?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`eda9172`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2195?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2195      +/-   ##\n==========================================\n- Coverage   47.26%   47.13%   -0.12%     \n==========================================\n  Files         185      185              \n  Lines       11717    11717              \n  Branches     1043     1043              \n==========================================\n- Hits         5537     5522      -15     \n- Misses       5813     5826      +13     \n- Partials      367      369       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2195?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2194?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7e05d64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7e05d64d04bcd46c24def5740a09a47b9bdff995?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`febb5db`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2194?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.22%.\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2194      +/-   ##\n==========================================\n+ Coverage   47.13%   47.22%   +0.09%     \n==========================================\n  Files         189      189              \n  Lines       11732    11747      +15     \n  Branches     1046     1046              \n==========================================\n+ Hits         5529     5546      +17     \n+ Misses       5833     5832       -1     \n+ Partials      370      369       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2194?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

All comments are addressed. PTAL. @waitinfuture @ErikFang 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2193?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`6691568`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/669156824271caec03f2f1f62c48c02cd870e684?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`b709864`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2193?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2193      +/-   ##\n==========================================\n- Coverage   47.26%   47.13%   -0.12%     \n==========================================\n  Files         185      185              \n  Lines       11717    11717              \n  Branches     1043     1043              \n==========================================\n- Hits         5537     5522      -15     \n- Misses       5813     5826      +13     \n- Partials      367      369       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2193?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Why was Apache Flink removed from NOTICE? There must have been a reason why it was added in the first place.

cc @RexXiong @zhongqiangczq who are familiar with the Flink modules, could you please clarify are(were) there files we copied from Apache Flink?

@justinmclean Celeborn has copied some codes from the remote shuffle service for flink [https://github.com/flink-extended/flink-remote-shuffle]. There are no codes copied from flink directly. Adding "flink" into NOTICE might be a misunderstanding.

> @justinmclean Celeborn has copied some codes from the remote shuffle service for flink [https://github.com/flink-extended/flink-remote-shuffle]. There are no codes copied from flink directly. Adding "flink" into NOTICE might be a misunderstanding.\r\n\r\n@justinmclean, do you have other comments for this pull request?

If code has been copied from a 3rd party, then that needs to be listed in LICENSE. As that project is Apache licensed and it has a NOTICE file then NOTICE also needs to be modified.

@justinmclean, the NOTICE file has updates corresponding to LISENCE modifications. PTAL.

@SteNicholas Please note that there are more comments here although the PR is already merged, and hold the new RC until the comments are addressed. Thanks.

From the context, I think there is no blocking issue about LICENSE now, will prepare for the next RC soon, and we are open to having additional discussions on LICENSE-related topics on this thread or mailing list.

## [Codecov](https://app.codecov.io/gh/apache/celeborn/pull/2192?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `64.13043%` with `33 lines` in your changes missing coverage. Please review.\n> Project coverage is 47.26%. Comparing base [(`67e6cbf`)](https://app.codecov.io/gh/apache/celeborn/commit/67e6cbfb517ec192a048faede7e478eb42a3bd10?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`0a6f5b3`)](https://app.codecov.io/gh/apache/celeborn/commit/0a6f5b30cee01d47e51f3b26a0a16cf5d33f40aa?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 237 commits behind head on main.\n\n> :exclamation: **Current head 0a6f5b3 differs from pull request most recent head 6589fe5**\n> \n> Please [upload](https://docs.codecov.com/docs/codecov-uploader) reports for the commit 6589fe5 to get more accurate results.\n\n| [Files](https://app.codecov.io/gh/apache/celeborn/pull/2192?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2Fmessage%2FControlMessages.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 6.25% | [15 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fmeta%2FWorkerInfo.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 71.43% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fceleborn%2Fcommon%2Fprotocol%2FPartitionLocation.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | 62.50% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2FCelebornConf.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 86.37% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fscala%2Forg%2Fapache%2Fceleborn%2Fcommon%2Futil%2FPbSerDeUtils.scala&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 81.82% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/celeborn/pull/2192?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2192      +/-   ##\n==========================================\n- Coverage   48.49%   47.26%   -1.22%     \n==========================================\n  Files         196      185      -11     \n  Lines       12142    11795     -347     \n  Branches     1069     1046      -23     \n==========================================\n- Hits         5887     5574     -313     \n+ Misses       5868     5853      -15     \n+ Partials      387      368      -19     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/celeborn/pull/2192?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

In general, let us move away from making changes to spark (or any other supported compute platform)  to use Celeborn.\nIf there is required, missing functionality - we should work with those communities to add required support: there might be reasons why it does not make sense to do so, and the relevant community is the best judge to evaluate it

> In general, let us move away from making changes to spark (or any other supported compute platform) to use Celeborn. If there is required, missing functionality - we should work with those communities to add required support: there might be reasons why it does not make sense to do so, and the relevant community is the best judge to evaluate it\r\n\r\n@mridulm Thank you for noticing this feature. When designing this function, we tried to reduce the modification of Spark.\r\n\r\nThe Shuffle Manager serves as an adaptable plug-in for Spark. Presently, the Spark framework exclusively supports the shuffle handler and corresponding shuffle writer/reader for extension implementation. However, it lacks an interface for the Preferred Location crucial for scheduling processes.\r\n\r\nIt is both rational and pivotal for the Spark framework to expose essential methods to plug-ins without altering its own logic. The ideal scenario would involve persuading the upstream community (Spark) to embrace the minor adjustments required.\r\n\r\nAt present, we are doing some functional and performance verification of this PR. If there is a good improvement, it will be listed in detail in PR and cooperate with the upstream community.\r\n\r\nFinally, thanks for your attention! :) The changes to Spark are small and reasonable.\r\n\r\nAlso FYI @waitinfuture 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`587c8b5`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/587c8b55f88b1bcdb37ca09020f1182abe0dd4ad?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.14% compared to head [(`b4c8943`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2191      +/-   ##\n==========================================\n- Coverage   47.14%   47.13%   -0.00%     \n==========================================\n  Files         185      185              \n  Lines       11716    11717       +1     \n  Branches     1043     1043              \n==========================================\n  Hits         5522     5522              \n- Misses       5825     5826       +1     \n  Partials      369      369              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2191?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @lyy-pineapple, seems we should not reset `totalInflightReqs` here, or totalInflightReqs may decrease below zero. See https://github.com/apache/celeborn/pull/2725

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2190?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`587c8b5`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/587c8b55f88b1bcdb37ca09020f1182abe0dd4ad?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.14% compared to head [(`0e38cb8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2190?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.17%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2190      +/-   ##\n==========================================\n+ Coverage   47.14%   47.17%   +0.04%     \n==========================================\n  Files         185      185              \n  Lines       11716    11716              \n  Branches     1043     1043              \n==========================================\n+ Hits         5522     5526       +4     \n+ Misses       5825     5823       -2     \n+ Partials      369      367       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2190?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2189?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`5746eb3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5746eb36ae586e523b8da237a5c48135abb899ac?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.06% compared to head [(`9c3aa71`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2189?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n> Report is 4 commits behind head on main.\n\n> :exclamation: Current head 9c3aa71 differs from pull request most recent head c35a02a. Consider uploading reports for the commit c35a02a to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2189      +/-   ##\n==========================================\n+ Coverage   47.06%   47.13%   +0.08%     \n==========================================\n  Files         185      185              \n  Lines       11701    11717      +16     \n  Branches     1041     1043       +2     \n==========================================\n+ Hits         5506     5522      +16     \n  Misses       5826     5826              \n  Partials      369      369              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2189?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

After merging this pr, executing the following command will prompt an error\r\n```\r\n./build/make-distribution.sh --sbt-enabled --release\r\n```\r\n\r\n![image](https://github.com/apache/incubator-celeborn/assets/14961757/787ef15a-4c77-418c-bd78-429cf6eec70c)\r\n\r\nplease cc @cfmcgrady \r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2188?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`276ab97`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/276ab979a4b0cf4ac82440d1529d28b4748dc4b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.32% compared to head [(`1d42738`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2188?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.15%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2188      +/-   ##\n==========================================\n- Coverage   47.32%   47.15%   -0.16%     \n==========================================\n  Files         185      185              \n  Lines       11701    11701              \n  Branches     1041     1041              \n==========================================\n- Hits         5536     5517      -19     \n- Misses       5801     5815      +14     \n- Partials      364      369       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2188?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged into main(v0.5.0) and branch-0.4(0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2187?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`276ab97`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/276ab979a4b0cf4ac82440d1529d28b4748dc4b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.32% compared to head [(`ff7c29e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2187?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2187      +/-   ##\n==========================================\n- Coverage   47.32%   47.29%   -0.02%     \n==========================================\n  Files         185      185              \n  Lines       11701    11701              \n  Branches     1041     1041              \n==========================================\n- Hits         5536     5533       -3     \n- Misses       5801     5802       +1     \n- Partials      364      366       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2187?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2185?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4304be1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4304be1a60c4d3371354ff92f4ed4a807d8840e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.33% compared to head [(`c7c3050`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2185?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.17%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2185      +/-   ##\n==========================================\n- Coverage   47.33%   47.17%   -0.16%     \n==========================================\n  Files         185      185              \n  Lines       11697    11699       +2     \n  Branches     1041     1041              \n==========================================\n- Hits         5536     5518      -18     \n- Misses       5797     5813      +16     \n- Partials      364      368       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2185?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Although Celeborn is using Hadoop 3.3.6 as default. But Celeborn supports Hadoop 2.x, I think this PR will cause Celeborn can not compile successfully when using Hadoop 2.x.\r\nI think you can verify this point.

Thanks for your explanation. This PR LGTM. Merged into main(v0.5.0).

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `4 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`4304be1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4304be1a60c4d3371354ff92f4ed4a807d8840e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.33% compared to head [(`d6d8644`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.15%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2183      +/-   ##\n==========================================\n- Coverage   47.33%   47.15%   -0.17%     \n==========================================\n  Files         185      185              \n  Lines       11697    11701       +4     \n  Branches     1041     1041              \n==========================================\n- Hits         5536     5517      -19     \n- Misses       5797     5816      +19     \n- Partials      364      368       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2183?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `2 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`4304be1`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4304be1a60c4d3371354ff92f4ed4a807d8840e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.33% compared to head [(`1837cc7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...mon/metrics/ResettableSlidingWindowReservoir.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvUmVzZXR0YWJsZVNsaWRpbmdXaW5kb3dSZXNlcnZvaXIuc2NhbGE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2182      +/-   ##\n==========================================\n- Coverage   47.33%   47.19%   -0.14%     \n==========================================\n  Files         185      185              \n  Lines       11697    11699       +2     \n  Branches     1041     1041              \n==========================================\n- Hits         5536     5520      -16     \n- Misses       5797     5812      +15     \n- Partials      364      367       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2182?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2181?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4dacf72`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4dacf72a6d662dd6b2bf6c60669a8baad0f1566d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`31775a3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2181?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.16%.\n> Report is 10 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2181      +/-   ##\n==========================================\n- Coverage   47.26%   47.16%   -0.09%     \n==========================================\n  Files         185      185              \n  Lines       11673    11699      +26     \n  Branches     1039     1041       +2     \n==========================================\n+ Hits         5516     5517       +1     \n- Misses       5795     5813      +18     \n- Partials      362      369       +7     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2181?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Seems this is a bug introduced by https://github.com/apache/incubator-celeborn/pull/2098 ? @FMX  

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`b94fea8`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b94fea8e176334f120526e01bfd0654251e26c46?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`aa26ee9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.14%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...orn/common/network/util/TransportFrameDecoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydEZyYW1lRGVjb2Rlci5qYXZh) | 50.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2180      +/-   ##\n==========================================\n+ Coverage   47.13%   47.14%   +0.01%     \n==========================================\n  Files         189      189              \n  Lines       11732    11732              \n  Branches     1046     1046              \n==========================================\n+ Hits         5529     5530       +1     \n  Misses       5833     5833              \n+ Partials      370      369       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2180?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I have a question that the maven build system will be dropped after v0.5.0 or later. Is this necessary? Will error prone be integrated into SBT?

> Will error prone be integrated into SBT\r\n\r\nA JIRA ticket has been created to track this issue. [CELEBORN-1080](https://issues.apache.org/jira/browse/CELEBORN-1080)\r\n\r\nTried it locally but not successful yet.

IMO, it would be better to hold this PR until there is a solution to add the error-prone plugin into SBT.

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2178?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`089a0f8`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/089a0f868600f4ea280c63cc0960586bf9389b55?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.09% compared to head [(`def0aac`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2178?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.12%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2178      +/-   ##\n==========================================\n+ Coverage   47.09%   47.12%   +0.04%     \n==========================================\n  Files         185      185              \n  Lines       11675    11675              \n  Branches     1041     1041              \n==========================================\n+ Hits         5497     5501       +4     \n+ Misses       5809     5807       -2     \n+ Partials      369      367       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2178?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `4 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`35aa54b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/35aa54bfe365c865d4aad70b2207a29c2f3892e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`6e00da8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...che/celeborn/common/network/protocol/PushData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YS5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/common/network/protocol/PushDataHandShake.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YUhhbmRTaGFrZS5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...celeborn/common/network/protocol/RegionFinish.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25GaW5pc2guamF2YQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2177      +/-   ##\n==========================================\n- Coverage   47.13%   47.10%   -0.03%     \n==========================================\n  Files         185      185              \n  Lines       11673    11675       +2     \n  Branches     1039     1041       +2     \n==========================================\n- Hits         5501     5498       -3     \n- Misses       5806     5809       +3     \n- Partials      366      368       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2177?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

```\r\n./build/make-distribution.sh --release\r\n```\r\n### main branch\r\ntotal  1516\r\n\r\n```\r\n 647 MissingOverride\r\n 160 ReferenceEquality\r\n 135 FutureReturnValueIgnored\r\n 114 UnusedVariable\r\n  66 UseCorrectAssertInTests\r\n  51 UnnecessaryParentheses\r\n  43 SynchronizeOnNonFinalField\r\n  42 InlineMeSuggester\r\n  34 EmptyBlockTag\r\n  24 StaticAssignmentInConstructor\r\n  24 SameNameButDifferent\r\n  16 ThreadLocalUsage\r\n  16 StringSplitter\r\n  16 MissingCasesInEnumSwitch\r\n  12 MissingSummary\r\n  12 JdkObsolete\r\n  11 UnusedMethod\r\n  11 NonAtomicVolatileUpdate\r\n  10 DefaultCharset\r\n   8 UnusedNestedClass\r\n   8 UnnecessaryAssignment\r\n   8 NonOverridingEquals\r\n   8 Finally\r\n   5 NarrowingCompoundAssignment\r\n   5 IntLongMath\r\n   5 InconsistentCapitalization\r\n   4 MixedMutabilityReturnType\r\n   4 InvalidInlineTag\r\n   4 DoubleBraceInitialization\r\n   4 CatchAndPrintStackTrace\r\n   4 CanonicalDuration\r\n   2 TypeParameterUnusedInFormals\r\n   1 EqualsGetClass\r\n   1 ClassCanBeStatic\r\n   1 ByteBufferBackingArray\r\n   1 BadImport\r\n```\r\n\r\n### PR\r\ntotal 467\r\n```\r\n  66 UseCorrectAssertInTests\r\n  57 EmptyBlockTag\r\n  43 SynchronizeOnNonFinalField\r\n  41 StringSplitter\r\n  26 MissingSummary\r\n  25 EqualsGetClass\r\n  24 StaticAssignmentInConstructor\r\n  21 JdkObsolete\r\n  21 IntLongMath\r\n  16 ThreadLocalUsage\r\n  16 MutableConstantField\r\n  16 MissingCasesInEnumSwitch\r\n  11 UnusedMethod\r\n  11 NonAtomicVolatileUpdate\r\n   8 UnusedNestedClass\r\n   8 UnnecessaryAssignment\r\n   8 NonOverridingEquals\r\n   8 Finally\r\n   5 NarrowingCompoundAssignment\r\n   5 MissingOverride\r\n   5 InconsistentCapitalization\r\n   4 MixedMutabilityReturnType\r\n   4 InvalidInlineTag\r\n   4 DoubleBraceInitialization\r\n   4 CatchAndPrintStackTrace\r\n   4 CanonicalDuration\r\n   2 ReferenceEquality\r\n   2 BadImport\r\n   1 ModifiedButNotUsed\r\n   1 ClassCanBeStatic\r\n   1 ByteBufferBackingArray\r\n```\r\n\r\n

Emm... I think at least we can not fix all `MissingOverride` cases while supporting multiple Spark/Flink versions.

> I think at least we can not fix all `MissingOverride` cases while supporting multiple Spark/Flink versions.\r\n\r\nSo I kept some methods without adding `@Override`, which is why GA passed.\r\n\r\n```\r\n  5 MissingOverride\r\n```

cc @cfmcgrady, consider including this patch into 0.4.0 (or at least branch-0.4) to reduce the potential conflicts of future cherry-picking

thanks, merging to main(v0.5.0)/branch-0.4(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2176?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a534638`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a53463825cfc3f7a6fb3dfb8ec2581cea174923e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`58c2571`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2176?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.14%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.4    #2176      +/-   ##\n==============================================\n+ Coverage       47.13%   47.14%   +0.01%     \n==============================================\n  Files             185      185              \n  Lines           11673    11673              \n  Branches         1039     1039              \n==============================================\n+ Hits             5501     5502       +1     \n  Misses           5806     5806              \n+ Partials          366      365       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2176?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2175?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`796419a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/796419a341f122d43b86db3dca2653e41c0c14c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.17% compared to head [(`13cf586`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2175?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.34%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #2175      +/-   ##\n==============================================\n+ Coverage       46.17%   46.34%   +0.18%     \n==============================================\n  Files             166      166              \n  Lines           10581    10581              \n  Branches          990      990              \n==============================================\n+ Hits             4885     4903      +18     \n+ Misses           5370     5356      -14     \n+ Partials          326      322       -4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2175?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2174?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4dacf72`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4dacf72a6d662dd6b2bf6c60669a8baad0f1566d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`a260e6e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2174?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.25%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2174      +/-   ##\n==========================================\n- Coverage   47.26%   47.25%   -0.00%     \n==========================================\n  Files         185      185              \n  Lines       11673    11673              \n  Branches     1039     1039              \n==========================================\n- Hits         5516     5515       -1     \n+ Misses       5795     5794       -1     \n- Partials      362      364       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2174?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `27 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`5746eb3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5746eb36ae586e523b8da237a5c48135abb899ac?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.06% compared to head [(`3cee1b0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.15%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | 30.44% | [15 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...che/celeborn/server/common/http/HttpEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwRW5kcG9pbnQuc2NhbGE=) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2172      +/-   ##\n==========================================\n+ Coverage   47.06%   47.15%   +0.09%     \n==========================================\n  Files         185      185              \n  Lines       11701    11716      +15     \n  Branches     1041     1043       +2     \n==========================================\n+ Hits         5506     5523      +17     \n+ Misses       5826     5824       -2     \n  Partials      369      369              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2172?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2171?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`704fae0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/704fae0e2de17c3a5e746e222bc39331e2998994?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.19% compared to head [(`71af7f0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2171?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.17%.\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head 71af7f0 differs from pull request most recent head 1fabb65. Consider uploading reports for the commit 1fabb65 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2171      +/-   ##\n==========================================\n- Coverage   47.19%   47.17%   -0.01%     \n==========================================\n  Files         185      185              \n  Lines       11699    11699              \n  Branches     1041     1041              \n==========================================\n- Hits         5520     5518       -2     \n- Misses       5812     5813       +1     \n- Partials      367      368       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2171?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@pan3793, thanks for the migration reminder. I have updated the migration guide to record that master metrics `PartitionWritten` and `PartitionFileCount` are renamed to `ActiveShuffleSize` and `ActiveShuffleFileCount`. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2170?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4dacf72`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4dacf72a6d662dd6b2bf6c60669a8baad0f1566d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`662a901`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2170?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.12%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2170      +/-   ##\n==========================================\n- Coverage   47.26%   47.12%   -0.13%     \n==========================================\n  Files         185      185              \n  Lines       11673    11673              \n  Branches     1039     1039              \n==========================================\n- Hits         5516     5500      -16     \n- Misses       5795     5807      +12     \n- Partials      362      366       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2170?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Merged to main/0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2169?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4dacf72`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4dacf72a6d662dd6b2bf6c60669a8baad0f1566d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`e30efe8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2169?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.11%.\n> Report is 46 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2169      +/-   ##\n==========================================\n- Coverage   47.26%   47.11%   -0.14%     \n==========================================\n  Files         185      185              \n  Lines       11673    11675       +2     \n  Branches     1039     1041       +2     \n==========================================\n- Hits         5516     5500      -16     \n- Misses       5795     5808      +13     \n- Partials      362      367       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2169?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@pan3793, Yes, Celeborn does not depend on avro jar. The avro jar should not be compiled.

> the dep-check list should reflect the binary shipped dep list, not the compile dep list\r\n\r\nHi, @dev-lpq are you interested in completing this task?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@dev-lpq, I will close this pull request. When you have any updates, you could reopen this pull request.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2167?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`aad3929`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aad3929018dfc3ba6a533152a75e16b462a886ae?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.96% compared to head [(`89ee064`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2167?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.85%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2167      +/-   ##\n==========================================\n- Coverage   47.96%   47.85%   -0.11%     \n==========================================\n  Files         200      200              \n  Lines       12449    12449              \n  Branches     1088     1088              \n==========================================\n- Hits         5970     5956      -14     \n- Misses       6090     6101      +11     \n- Partials      389      392       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2167?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2166?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`e361788`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e361788e482d5fe18715dd57181903b7cdfc97ba?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.09% compared to head [(`54b12d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2166?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.96%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2166      +/-   ##\n==========================================\n- Coverage   46.09%   45.96%   -0.13%     \n==========================================\n  Files         180      180              \n  Lines       11519    11519              \n  Branches     1028     1028              \n==========================================\n- Hits         5309     5293      -16     \n- Misses       5861     5874      +13     \n- Partials      349      352       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2166?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

@waitinfuture @mridulm @RexXiong @FMX @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2165?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`309153a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/309153a99be238a0faa4e8e0193b2814046a5d4a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.97% compared to head [(`a54161d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2165?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.11%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2165      +/-   ##\n==========================================\n+ Coverage   45.97%   46.11%   +0.15%     \n==========================================\n  Files         180      180              \n  Lines       11516    11516              \n  Branches     1028     1028              \n==========================================\n+ Hits         5293     5310      +17     \n+ Misses       5871     5857      -14     \n+ Partials      352      349       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2165?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `29 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`41df4eb`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/41df4ebbea7963c8ad7b87b1ce1307e5979a4a5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.03% compared to head [(`070acea`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.03%.\n> Report is 7 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...leborn/common/network/sasl/CelebornSaslServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0NlbGVib3JuU2FzbFNlcnZlci5qYXZh) | 73.59% | [7 Missing and 7 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...e/celeborn/common/network/sasl/SaslRpcHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xScGNIYW5kbGVyLmphdmE=) | 81.09% | [6 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/server/AbstractAuthRpcHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQWJzdHJhY3RBdXRoUnBjSGFuZGxlci5qYXZh) | 75.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/network/sasl/SecretRegistryImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1NlY3JldFJlZ2lzdHJ5SW1wbC5qYXZh) | 70.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2164      +/-   ##\n==========================================\n+ Coverage   46.03%   47.03%   +1.00%     \n==========================================\n  Files         180      185       +5     \n  Lines       11492    11652     +160     \n  Branches     1027     1039      +12     \n==========================================\n+ Hits         5289     5479     +190     \n+ Misses       5852     5806      -46     \n- Partials      351      367      +16     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2164?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture @mridulm @RexXiong @FMX @pan3793 @akpatnam25 @rmcyang\r\nCould you please take a look.\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `3 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`309153a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/309153a99be238a0faa4e8e0193b2814046a5d4a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.97% compared to head [(`4403363`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.96%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2163      +/-   ##\n==========================================\n- Coverage   45.97%   45.96%   -0.00%     \n==========================================\n  Files         180      180              \n  Lines       11516    11519       +3     \n  Branches     1028     1028              \n==========================================\n+ Hits         5293     5294       +1     \n- Misses       5871     5873       +2     \n  Partials      352      352              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2163?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX @AngersZhuuuu 

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

cc @cxzl25 @cfmcgrady @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `16 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`01feb93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/01feb93abbd01a2721b4f7c64ace75123e6bf7e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.94% compared to head [(`4b85183`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.97%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2162      +/-   ##\n==========================================\n+ Coverage   45.94%   45.97%   +0.03%     \n==========================================\n  Files         180      180              \n  Lines       11505    11516      +11     \n  Branches     1028     1028              \n==========================================\n+ Hits         5285     5293       +8     \n- Misses       5868     5872       +4     \n+ Partials      352      351       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2162?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `39 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`9392ed4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9392ed492c9f819abf7e9cefda7dff6ad644e585?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 48.20% compared to head [(`96dfd55`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.82%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/celeborn/common/quota/ResourceConsumption.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1Jlc291cmNlQ29uc3VtcHRpb24uc2NhbGE=) | 10.00% | [18 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | 27.28% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...mon/metrics/source/ResourceConsumptionSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1Jlc291cmNlQ29uc3VtcHRpb25Tb3VyY2Uuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2161      +/-   ##\n==========================================\n- Coverage   48.20%   47.82%   -0.38%     \n==========================================\n  Files         197      200       +3     \n  Lines       12301    12448     +147     \n  Branches     1073     1088      +15     \n==========================================\n+ Hits         5929     5952      +23     \n- Misses       5983     6103     +120     \n- Partials      389      393       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2161?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong, I have supported that resource consumption of application be categorized by tenant-sub-user via `ApplicationIdentifier` which includes the tenantId and name of the user identifier. PTAL.\r\n@FMX, I have improved duplicated codes snippets and addressed above comment. PTAL.\r\n@onebox-li, could you help to review the celeborn dashboard?

@RexXiong, @FMX, I have followed suggestion that uses `subResourceConsumption` for resource consumpution of  application. PTAL.

@RexXiong, I have addressed above comment and added the cleaner of application resource consumption gauges. PTAL.

@RexXiong, I have addressed comments mentioned above and rebased main branch to update the resource consumption gauge of worker. PTAL.

Merged into main(v0.5.0) and branch-0.4(v0.4.1).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `2 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`4dacf72`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4dacf72a6d662dd6b2bf6c60669a8baad0f1566d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.26% compared to head [(`a53815d`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20%.\n> Report is 7 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 91.31% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2160      +/-   ##\n==========================================\n- Coverage   47.26%   47.20%   -0.06%     \n==========================================\n  Files         185      185              \n  Lines       11673    11697      +24     \n  Branches     1039     1041       +2     \n==========================================\n+ Hits         5516     5520       +4     \n- Misses       5795     5810      +15     \n- Partials      362      367       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2160?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @lyy-pineapple , please run ./dev/reformat to fix the style

> ... to improve performance.\r\n\r\nhow much performance gain have you observed? would be nice if you could provide reproducible benchmark cases or some production cases.

> > ... to improve performance.\r\n> \r\n> how much performance gain have you observed? would be nice if you could provide reproducible benchmark cases or some production cases.\r\n\r\nI have tested some SQL queries with large shuffles, and performance-wise, **hash** shows a slight improvement compared to **sort**. However, I am unable to configure **hash** at the cluster level because it may lead to memory issues when  the number of partitions is large.\r\n![hash，sort](https://github.com/apache/incubator-celeborn/assets/46274164/110b239e-dfbb-4f3a-969d-a2ff775fa1a8)\r\n

@lyy-pineapple thanks for your contribution, would be nice if you can move your test report to the PR description, it will be part of the git commit history if this PR gets in.

Thanks, merging to main(v0.5.0)

cc @cxzl25 @SteNicholas @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2158?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ea0fff0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ea0fff057f11412620c043f6353ecd52fc8e7ca3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.41% compared to head [(`f58e0d3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2158?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.41%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2158      +/-   ##\n==========================================\n+ Coverage   46.41%   46.41%   +0.01%     \n==========================================\n  Files         175      175              \n  Lines       11377    11377              \n  Branches     1019     1019              \n==========================================\n+ Hits         5279     5280       +1     \n- Misses       5745     5746       +1     \n+ Partials      353      351       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2158?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @dev-lpq @waitinfuture @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2157?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`2504b50`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2504b50dd2d170152e9ed39efaa4d2dc68e1adee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.56% compared to head [(`5fd8747`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2157?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.39%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2157      +/-   ##\n==========================================\n- Coverage   46.56%   46.39%   -0.16%     \n==========================================\n  Files         175      175              \n  Lines       11377    11377              \n  Branches     1019     1019              \n==========================================\n- Hits         5296     5277      -19     \n- Misses       5732     5747      +15     \n- Partials      349      353       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2157?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @pan3793 @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `11 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`41df4eb`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/41df4ebbea7963c8ad7b87b1ce1307e5979a4a5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.03% compared to head [(`ebf19d0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.00%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2156      +/-   ##\n==========================================\n- Coverage   46.03%   46.00%   -0.02%     \n==========================================\n  Files         180      180              \n  Lines       11492    11505      +13     \n  Branches     1027     1028       +1     \n==========================================\n+ Hits         5289     5292       +3     \n- Misses       5852     5860       +8     \n- Partials      351      353       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2156?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Will add UT after https://github.com/apache/incubator-celeborn/pull/2159 is merged

@cfmcgrady comments addressed, please take a look again

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

Hi, this PR aims to reduce the complexity of passing params. PTAL

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2155?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 48.51%. Comparing base [(`0249698`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0249698c5b597d496204eca6119589a42ee201c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`c5ab9e8`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2155?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 82 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2155      +/-   ##\n==========================================\n+ Coverage   48.41%   48.51%   +0.10%     \n==========================================\n  Files         196      196              \n  Lines       12147    12148       +1     \n  Branches     1069     1069              \n==========================================\n+ Hits         5880     5892      +12     \n+ Misses       5878     5868      -10     \n+ Partials      389      388       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2155?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @pan3793 @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2154?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`4303be3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4303be32317cbbb473095035bb19c876094c1024?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.31% compared to head [(`ae4a377`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2154?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.55%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2154      +/-   ##\n==========================================\n+ Coverage   46.31%   46.55%   +0.24%     \n==========================================\n  Files         175      175              \n  Lines       11377    11377              \n  Branches     1019     1019              \n==========================================\n+ Hits         5268     5295      +27     \n+ Misses       5756     5732      -24     \n+ Partials      353      350       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2154?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I setup a 594-worker cluster(on 6 nodes, 99 workers per node) and timed this PR and previously parmap block 4 times, using benchmark spark.sparkContext.parallelize(1 to 8000, 8000).flatMap( _ => (1 to 5000000).iterator.map(num => num)).repartition(8000).count, the results are:\r\n\r\nthis PR: 339ms/60ms/58ms/57ms\r\nparmap: 1335ms/621ms/253ms/591ms\r\n\r\nSo this PR uses much less threads while has better performance.

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

late LGTM

cc @pan3793 @cfmcgrady @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2152?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`92bebd3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/92bebd305d9a71acb7c9cd256e9f924ede77ef95?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.57% compared to head [(`eb2b423`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2152?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.42%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2152      +/-   ##\n==========================================\n- Coverage   46.57%   46.42%   -0.14%     \n==========================================\n  Files         175      175              \n  Lines       11377    11377              \n  Branches     1019     1019              \n==========================================\n- Hits         5298     5281      -17     \n- Misses       5731     5744      +13     \n- Partials      348      352       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2152?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I setup a 594-worker cluster(on 6 nodes, 99 workers per node) and timed this PR and previously `parmap` block 4 times, using benchmark `spark.sparkContext.parallelize(1 to 8000, 8000).flatMap( _ => (1 to 5000000).iterator.map(num => num)).repartition(8000).count`, the results are:\r\n\r\nthis PR: 175ms/96ms/63ms/69ms\r\n`parmap`: 719ms/729ms/197ms/518ms\r\n\r\nSo this PR uses much less threads while has better performance.

Thanks, also tested with TPCDS 1T and results are good. Merging to main(v0.4.0)/branch-0.3(v0.3.2)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2151?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`1fa13b4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1fa13b461d1978f1fb2bb1594469eb3ea85a5483?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`3afd1a4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2151?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.42%.\n> Report is 5 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2151      +/-   ##\n==========================================\n+ Coverage   46.36%   46.42%   +0.06%     \n==========================================\n  Files         175      175              \n  Lines       11370    11377       +7     \n  Branches     1019     1019              \n==========================================\n+ Hits         5271     5281      +10     \n+ Misses       5745     5744       -1     \n+ Partials      354      352       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2151?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture, @FMX, could you help to review this pull request?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2150?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`600bd53`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/600bd536167c5a52d59511f61f269dfd784b9d4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.94% compared to head [(`cd39eda`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2150?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.17%.\n> Report is 1 commits behind head on main.\n\n> :exclamation: Current head cd39eda differs from pull request most recent head 2d39bd9. Consider uploading reports for the commit 2d39bd9 to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2150      +/-   ##\n==========================================\n+ Coverage   45.94%   46.17%   +0.23%     \n==========================================\n  Files         180      180              \n  Lines       11516    11492      -24     \n  Branches     1028     1027       -1     \n==========================================\n+ Hits         5290     5305      +15     \n+ Misses       5873     5839      -34     \n+ Partials      353      348       -5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2150?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thank you for your contribution, Please create an issue in [JIRA](https://issues.apache.org/jira/projects/CELEBORN/issues).\r\n\r\nhttps://github.com/apache/incubator-celeborn/blob/main/CONTRIBUTING.md#how-to-contribute

@cxzl25.\r\nAdd celeborn [CELEBORN-1173](https://issues.apache.org/jira/browse/CELEBORN-1173) jira ticket.\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2149?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`8516df4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8516df4beb37627a4a312ae3906a3ba860ad4037?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`62ce984`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2149?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.39%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2149      +/-   ##\n==========================================\n+ Coverage   46.36%   46.39%   +0.04%     \n==========================================\n  Files         175      175              \n  Lines       11370    11370              \n  Branches     1019     1019              \n==========================================\n+ Hits         5270     5274       +4     \n+ Misses       5747     5744       -3     \n+ Partials      353      352       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2149?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @otterc @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2148?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`8516df4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8516df4beb37627a4a312ae3906a3ba860ad4037?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`712c53b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2148?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.38%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2148      +/-   ##\n==========================================\n+ Coverage   46.36%   46.38%   +0.03%     \n==========================================\n  Files         175      175              \n  Lines       11370    11370              \n  Branches     1019     1019              \n==========================================\n+ Hits         5270     5273       +3     \n+ Misses       5747     5744       -3     \n  Partials      353      353              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2148?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2147?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`8516df4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8516df4beb37627a4a312ae3906a3ba860ad4037?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`b47c823`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2147?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.38%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2147      +/-   ##\n==========================================\n+ Coverage   46.36%   46.38%   +0.03%     \n==========================================\n  Files         175      175              \n  Lines       11370    11370              \n  Branches     1019     1019              \n==========================================\n+ Hits         5270     5273       +3     \n+ Misses       5747     5744       -3     \n  Partials      353      353              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2147?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@FMX @RexXiong Please help review.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `1 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`87b6439`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/87b64391ea0bbf33114f5b56a2a71b0e8de4fbdd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50% compared to head [(`3fb7edf`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.56%.\n> Report is 4 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 87.50% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2145      +/-   ##\n==========================================\n+ Coverage   46.50%   46.56%   +0.06%     \n==========================================\n  Files         175      175              \n  Lines       11358    11377      +19     \n  Branches     1019     1019              \n==========================================\n+ Hits         5281     5296      +15     \n- Misses       5726     5732       +6     \n+ Partials      351      349       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2145?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

cc @RexXiong @FMX @AngersZhuuuu please take a look

the simple approach: leverage a shared `ForkJoinPool` to handle commit file requests instead of creating a new pool for each invocation of the `ThreadUtils#parmap` function.

> the simple approach: leverage a shared `ForkJoinPool` to handle commit file requests instead of creating a new pool for each invocation of the `ThreadUtils#parmap` function.\r\n\r\nThis is what https://github.com/apache/incubator-celeborn/pull/2138 does, but this approach will also call `askSync`, which is not good because it holds the thread. This PR attends to replace `askSync` with `ask`

I tested with TPCDS and 1T pure shuffle, with graceful shutdown and random kiling workers, result is good.

~~if I understand correctly, the whole change of this PR just replaces the one-time fork-join pool with a resident thread pool to handle commit files RPC, the thread number change(from 1024 to 8) surprises me, because it does not change the sync/async model~~\r\n\r\nignore that, I misunderstanded

> if I understand correctly, the whole change of this PR just replaces the one-time fork-join pool with a resident thread pool to handle commit files RPC, the thread number change(from 1024 to 8) supervises me，because it does not change the sync/async model\r\n\r\nThis PR does change `askSync` to `ask`

> This PR does change askSync to ask\r\n\r\nOh, that makes sense, there are a few places "AskSync" in log message, should they be updated as well?

> > This PR does change askSync to ask\r\n> \r\n> Oh, that makes sense, there are a few places "AskSync" in log message, should they be updated as well?\r\n\r\ndone

I setup a 594-worker cluster(on 6 nodes, 99 workers per node) and timed `doParallelCommitFiles` in this PR and previously `parmap` block 4 times, using benchmark `spark.sparkContext.parallelize(1 to 8000, 8000).flatMap( _ => (1 to 5000000).iterator.map(num => num)).repartition(8000).count`, the results are:\r\n\r\n`doParallelCommitFiles`: 734ms/217ms/214ms/199ms\r\n`parmap`: 1080ms/388ms/393ms/314ms\r\n\r\nSo this PR uses much less threads while has better performance.

To be more conservative, I set the default value of `celeborn.client.rpc.shared.threads` to 16.

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2144?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`074597d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/074597d05e15bbe031938795d2079f567c7851e8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`e86d172`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2144?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2144   +/-   ##\n=======================================\n  Coverage   46.36%   46.36%           \n=======================================\n  Files         175      175           \n  Lines       11357    11357           \n  Branches     1019     1019           \n=======================================\n  Hits         5265     5265           \n  Misses       5739     5739           \n  Partials      353      353           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2144?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2143?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`074597d`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/074597d05e15bbe031938795d2079f567c7851e8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`a3d58dd`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2143?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2143      +/-   ##\n==========================================\n+ Coverage   46.36%   46.50%   +0.15%     \n==========================================\n  Files         175      175              \n  Lines       11357    11357              \n  Branches     1019     1019              \n==========================================\n+ Hits         5265     5281      +16     \n+ Misses       5739     5726      -13     \n+ Partials      353      350       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2143?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2142?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`41df4eb`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/41df4ebbea7963c8ad7b87b1ce1307e5979a4a5c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.03% compared to head [(`4894cda`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2142?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.03%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2142   +/-   ##\n=======================================\n  Coverage   46.03%   46.03%           \n=======================================\n  Files         180      180           \n  Lines       11492    11492           \n  Branches     1027     1027           \n=======================================\n  Hits         5289     5289           \n  Misses       5852     5852           \n  Partials      351      351           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2142?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@dev-lpq the SBT CI should pass after #2144 

Hi @dev-lpq , thanks for this PR! Could you please rebase main, and create a jira ticket? https://issues.apache.org/jira/projects/CELEBORN/issues/CELEBORN-1016?filter=allopenissues

@waitinfuture \r\nAdd celeborn CELEBORN-1163 jira ticket\r\nhttps://issues.apache.org/jira/browse/CELEBORN-1163\r\n

Could you rebase main so that the checks can pass?

@waitinfuture \r\nrunning `./dev/dependencies.sh --replace` will change to `snappy-java-1.1.8.2.jar`, how to use the `snappy-java-1.1.10.5.jar` as the default dependency jar.

> running `./dev/dependencies.sh --replace` will change to `snappy-java-1.1.8.2.jar`, how to use the `snappy-java-1.1.10.5.jar` as the default dependency jar.\r\n\r\nFixed by https://github.com/apache/incubator-celeborn/pull/2158\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `108 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`c1120e8`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c1120e8b44dd9b30676cf2028293d33838ab0077?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.41% compared to head [(`7ef0a5c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.14%.\n> Report is 5 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...leborn/common/network/sasl/CelebornSaslClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0NlbGVib3JuU2FzbENsaWVudC5qYXZh) | 0.00% | [44 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/common/network/sasl/SaslClientBootstrap.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xDbGllbnRCb290c3RyYXAuamF2YQ==) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/network/sasl/SaslUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xVdGlscy5qYXZh) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/common/network/sasl/SaslCredentials.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xDcmVkZW50aWFscy5qYXZh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/sasl/SaslTimeoutException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xUaW1lb3V0RXhjZXB0aW9uLmphdmE=) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 75.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2139      +/-   ##\n==========================================\n- Coverage   46.41%   46.14%   -0.26%     \n==========================================\n  Files         175      180       +5     \n  Lines       11370    11492     +122     \n  Branches     1019     1027       +8     \n==========================================\n+ Hits         5276     5302      +26     \n- Misses       5743     5841      +98     \n+ Partials      351      349       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2139?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture @mridulm @RexXiong @FMX @pan3793 @akpatnam25 @rmcyang\r\nCould you please take a look.\r\n\r\n

Thanks! Merging to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `8 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`788b0c3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/788b0c340b6c5d31de76fc12983d60f71c3ef811?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50% compared to head [(`7020533`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.26%.\n> Report is 18 commits behind head on main.\n\n> :exclamation: Current head 7020533 differs from pull request most recent head 99e2d2d. Consider uploading reports for the commit 99e2d2d to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2138      +/-   ##\n==========================================\n- Coverage   46.50%   46.26%   -0.23%     \n==========================================\n  Files         166      175       +9     \n  Lines       10758    11367     +609     \n  Branches      984     1018      +34     \n==========================================\n+ Hits         5002     5258     +256     \n- Misses       5430     5762     +332     \n- Partials      326      347      +21     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2138?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Due to some new changes. This PR is not needed.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2137?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`b79dcd7`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b79dcd78baa5aa3ad46ba4dcf67d5bd22e6683c3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.21% compared to head [(`a723173`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2137?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.35%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2137      +/-   ##\n==========================================\n+ Coverage   46.21%   46.35%   +0.15%     \n==========================================\n  Files         175      175              \n  Lines       11341    11341              \n  Branches     1017     1017              \n==========================================\n+ Hits         5240     5256      +16     \n+ Misses       5753     5740      -13     \n+ Partials      348      345       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2137?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2136?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`af6fd8a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/af6fd8a0e6fdc049fb0ba580f17d3640ffad302f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.21% compared to head [(`ef123bc`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2136?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36%.\n> Report is 5 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2136      +/-   ##\n==========================================\n+ Coverage   46.21%   46.36%   +0.16%     \n==========================================\n  Files         175      175              \n  Lines       11341    11358      +17     \n  Branches     1017     1019       +2     \n==========================================\n+ Hits         5240     5265      +25     \n+ Misses       5753     5740      -13     \n- Partials      348      353       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2136?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `3 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`01feb93`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/01feb93abbd01a2721b4f7c64ace75123e6bf7e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 45.94% compared to head [(`2355173`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.27%.\n> Report is 8 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2135      +/-   ##\n==========================================\n+ Coverage   45.94%   47.27%   +1.33%     \n==========================================\n  Files         180      185       +5     \n  Lines       11505    11673     +168     \n  Branches     1028     1039      +11     \n==========================================\n+ Hits         5285     5517     +232     \n+ Misses       5868     5793      -75     \n- Partials      352      363      +11     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2135?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

+CC @otterc who is working on adding TLS support as part of SASL authentication.\r\n\r\nDo we want to include custom encryption in Celeborn ? Spark 4 has also added support for TLS, and I would expect that to become the default in a future version of spark as well.

+CC @otterc , looks like I wont have time to review this unfortunately.

Looks like it got merged already :-)

> Looks like it got merged already :-)\r\n\r\nThanks, I will come up with a followup to address your comments.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `4 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`ea0fff0`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ea0fff057f11412620c043f6353ecd52fc8e7ca3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.41% compared to head [(`700d737`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | 50.00% | [2 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2134      +/-   ##\n==========================================\n+ Coverage   46.41%   46.54%   +0.14%     \n==========================================\n  Files         175      175              \n  Lines       11377    11379       +2     \n  Branches     1019     1021       +2     \n==========================================\n+ Hits         5279     5295      +16     \n+ Misses       5745     5733      -12     \n+ Partials      353      351       -2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2134?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture, @FMX, @onebox-li, @AngersZhuuuu, could you help to review this follow up to improve the batch operation for consistency of totalInflightReqs, which avoid to duplicate adding or removing batch?

 @FMX, thanks for detailed review. I have addressed above comments. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `14 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`04a1e90`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/04a1e9020769764d1462d90fc7278a7949caa60e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.36% compared to head [(`22ce265`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.21%.\n> Report is 54 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 56.25% | [13 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2133      +/-   ##\n==========================================\n- Coverage   46.36%   46.21%   -0.14%     \n==========================================\n  Files         175      176       +1     \n  Lines       11336    11383      +47     \n  Branches     1016     1022       +6     \n==========================================\n+ Hits         5255     5260       +5     \n- Misses       5737     5774      +37     \n- Partials      344      349       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2133?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Please create a Jira ticket and resolve the conflicts.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `5 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`50575d6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/50575d633ceab62ebf6c62e927169d35551a6ae7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.27% compared to head [(`b47d67f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.48%.\n> Report is 8 commits behind head on main.\n\n> :exclamation: Current head b47d67f differs from pull request most recent head 67b4e36. Consider uploading reports for the commit 67b4e36 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2131      +/-   ##\n==========================================\n- Coverage   47.27%   46.48%   -0.78%     \n==========================================\n  Files         173      175       +2     \n  Lines       11039    11362     +323     \n  Branches     1011     1019       +8     \n==========================================\n+ Hits         5218     5281      +63     \n- Misses       5474     5731     +257     \n- Partials      347      350       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2131?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `73 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`08e7b59`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/08e7b5962b761e2742617607e05f64614b5d57c3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.18% compared to head [(`20e207f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13%.\n> Report is 16 commits behind head on main.\n\n> :exclamation: Current head 20e207f differs from pull request most recent head 94c3bce. Consider uploading reports for the commit 94c3bce to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../org/apache/celeborn/common/meta/DiskFileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9EaXNrRmlsZUluZm8uamF2YQ==) | 53.04% | [31 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/MemoryFileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NZW1vcnlGaWxlSW5mby5qYXZh) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/ReduceFileMeta.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9SZWR1Y2VGaWxlTWV0YS5qYXZh) | 70.00% | [5 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/MapFileMeta.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NYXBGaWxlTWV0YS5qYXZh) | 73.34% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2130      +/-   ##\n==========================================\n- Coverage   47.18%   47.13%   -0.05%     \n==========================================\n  Files         185      189       +4     \n  Lines       11699    11733      +34     \n  Branches     1041     1047       +6     \n==========================================\n+ Hits         5519     5529      +10     \n- Misses       5812     5834      +22     \n- Partials      368      370       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2130?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `108 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`2504b50`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2504b50dd2d170152e9ed39efaa4d2dc68e1adee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.56% compared to head [(`c4fc46b`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.03%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...leborn/common/network/sasl/CelebornSaslClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0NlbGVib3JuU2FzbENsaWVudC5qYXZh) | 0.00% | [44 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/common/network/sasl/SaslClientBootstrap.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xDbGllbnRCb290c3RyYXAuamF2YQ==) | 0.00% | [33 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/network/sasl/SaslUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xVdGlscy5qYXZh) | 0.00% | [10 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../celeborn/common/network/sasl/SaslCredentials.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xDcmVkZW50aWFscy5qYXZh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/sasl/SaslTimeoutException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xUaW1lb3V0RXhjZXB0aW9uLmphdmE=) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 77.78% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2129      +/-   ##\n==========================================\n- Coverage   46.56%   46.03%   -0.52%     \n==========================================\n  Files         175      180       +5     \n  Lines       11377    11492     +115     \n  Branches     1019     1027       +8     \n==========================================\n- Hits         5296     5289       -7     \n- Misses       5732     5852     +120     \n- Partials      349      351       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2129?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2128?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`1c7cd1b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1c7cd1bd1392c8d3fd4396c539696dc79835f8dc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`79e5dc6`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2128?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.12%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2128      +/-   ##\n==========================================\n- Coverage   47.13%   47.12%   -0.00%     \n==========================================\n  Files         173      173              \n  Lines       11034    11034              \n  Branches     1011     1011              \n==========================================\n- Hits         5200     5199       -1     \n  Misses       5494     5494              \n- Partials      340      341       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2128?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@mridulm, pls run `/dev/reformat` before pushing pull request. The check style is not passed.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2126?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`89b6cac`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/89b6cac5abd43c1a2bd89d5fda137222006e2896?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.27% compared to head [(`11e951f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2126?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.29%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2126      +/-   ##\n==========================================\n+ Coverage   47.27%   47.29%   +0.02%     \n==========================================\n  Files         173      173              \n  Lines       11034    11034              \n  Branches     1011     1011              \n==========================================\n+ Hits         5215     5217       +2     \n+ Misses       5481     5472       -9     \n- Partials      338      345       +7     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2126?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks @SteNicholas, looks like this got modified after I ran spotless :-)

> This was extensively tested in our environment and validated to improve the overall performance\r\n\r\n@mridulm, could you provide us with how much performance has been improved in your test environment?

For a 1 TB shuffle expt that @otterc ran, the write stage went from 7 mins to 3.8 mins (with a 10G nic) - the network was close to saturating in this case though.\r\n\r\nFor a 25G nic, it went down from 4.4 mins to 1.9 mins\r\n\r\nThese numbers match what was observed with rack awareness disabled.\r\n\r\nIn both expts, we had 2 racks with 5 nodes each using NVMEs (there were no interrack saturation observed between celeborn racks) and rack awareness was enabled - all spark apps were in other racks.

Thanks! Merged to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `5 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`8a15396`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8a15396cb64140fff83f157f5858862ea44a7205?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`60c4666`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.21%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rn/server/common/service/config/DynamicConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnLmphdmE=) | 60.00% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 71.43% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/service/config/TenantConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9UZW5hbnRDb25maWcuamF2YQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2125      +/-   ##\n==========================================\n+ Coverage   47.13%   47.21%   +0.08%     \n==========================================\n  Files         173      173              \n  Lines       11034    11039       +5     \n  Branches     1011     1011              \n==========================================\n+ Hits         5200     5211      +11     \n+ Misses       5494     5486       -8     \n- Partials      340      342       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2125?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

why do moving files produce lots of code style changes?

@pan3793, the implementation of `ConfigService` is based on Java codes, which are put into Scala package and the format does not work.

> @pan3793, the implementation of `ConfigService` is based on Java codes, which are put into Scala package and the format does not work.\r\n\r\nalright, put such information to "Why are the changes needed?"

@pan3793, thanks for the reminder. I have updated `Why are the changes needed?`. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `55 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`8a15396`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8a15396cb64140fff83f157f5858862ea44a7205?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`32f35ff`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.51%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...ver/common/service/config/DbConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EYkNvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 67.71% | [19 Missing and 12 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9Gc0NvbmZpZ1NlcnZpY2VJbXBsLmphdmE=) | 50.00% | [13 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...r/common/service/config/BaseConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9CYXNlQ29uZmlnU2VydmljZUltcGwuamF2YQ==) | 89.48% | [1 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rn/server/common/service/config/DynamicConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnLmphdmE=) | 60.00% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...on/service/config/DynamicConfigServiceFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9EeW5hbWljQ29uZmlnU2VydmljZUZhY3RvcnkuamF2YQ==) | 66.67% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/service/config/TenantConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmVyL2NvbW1vbi9zZXJ2aWNlL2NvbmZpZy9UZW5hbnRDb25maWcuamF2YQ==) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2124      +/-   ##\n==========================================\n+ Coverage   47.13%   47.51%   +0.38%     \n==========================================\n  Files         173      176       +3     \n  Lines       11034    11182     +148     \n  Branches     1011     1031      +20     \n==========================================\n+ Hits         5200     5312     +112     \n- Misses       5494     5511      +17     \n- Partials      340      359      +19     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2124?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `19 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`d37bb4c`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d37bb4c6824a170a62cbac20321910e8b57d186c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.09% compared to head [(`41cfde7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.28%.\n> Report is 9 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...common/network/server/TransportRequestHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0UmVxdWVzdEhhbmRsZXIuamF2YQ==) | 68.75% | [8 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/server/BaseMessageHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQmFzZU1lc3NhZ2VIYW5kbGVyLmphdmE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2123      +/-   ##\n==========================================\n- Coverage   47.09%   46.28%   -0.81%     \n==========================================\n  Files         173      175       +2     \n  Lines       11024    11357     +333     \n  Branches     1011     1019       +8     \n==========================================\n+ Hits         5191     5255      +64     \n- Misses       5493     5748     +255     \n- Partials      340      354      +14     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2123?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture  @mridulm @RexXiong @FMX @pan3793 @akpatnam25 @rmcyang\r\nCould you please take a look.

@waitinfuture @RexXiong @FMX @pan3793 gentle ping. There has been an initial review. Please help review.

The class name `BaseMessageHandler` is quite confusing, as we have another irrelevant class `MessageHandler`, would it be better to rename it to `RpcHandler` as Spark does? @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2121?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`98cb941`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/98cb941c844023bf946bc215c91b4ddcf587aa28?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.06% compared to head [(`c11c688`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2121?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08%.\n> Report is 52 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2121      +/-   ##\n==========================================\n+ Coverage   47.06%   47.08%   +0.02%     \n==========================================\n  Files         173      173              \n  Lines       10995    11024      +29     \n  Branches     1009     1011       +2     \n==========================================\n+ Hits         5174     5189      +15     \n- Misses       5483     5495      +12     \n- Partials      338      340       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2121?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

IMO this approach is quite crazy. I lean to:\r\n\r\n1. package and upload a patched Spark binary artifacts tarball, then download it in CI and run test cases against it through `spark-submit`; or\r\n2. overwrite some Spark classes and run test cases as normal

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `15 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`98cb941`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/98cb941c844023bf946bc215c91b4ddcf587aa28?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.06% compared to head [(`1b3a677`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.08%.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | 52.64% | [8 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | 54.55% | [4 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | 88.89% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2120      +/-   ##\n==========================================\n+ Coverage   47.06%   47.08%   +0.03%     \n==========================================\n  Files         173      173              \n  Lines       10995    11024      +29     \n  Branches     1009     1011       +2     \n==========================================\n+ Hits         5174     5190      +16     \n- Misses       5483     5493      +10     \n- Partials      338      341       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2120?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

 @RexXiong @FMX @pan3793 @mridulm @akpatnam25 @rmcyang  @waitinfuture \r\n Could you please take a look. 

@otterc, we usually use the `Utils` to format the time/size to improve readability, like `Utils.msDurationToString` or `Utils.nanoDurationToString`.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2119?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`413e4f3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/413e4f3b8015b6e0c121162c8a60154934e23d4f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.20% compared to head [(`63270b3`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2119?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.52%.\n> Report is 9 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2119      +/-   ##\n==========================================\n+ Coverage   47.20%   47.52%   +0.32%     \n==========================================\n  Files         192      192              \n  Lines       11778    11872      +94     \n  Branches     1050     1052       +2     \n==========================================\n+ Hits         5559     5641      +82     \n- Misses       5845     5855      +10     \n- Partials      374      376       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2119?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

> hi @waitinfuture @FMX @onebox-li, please take a review again, the latest algorithm use `Collections#rotate` function.\r\n\r\nI think this change makes sense. LGTM.

> cc @waitinfuture @onebox-li @RexXiong @charlesy6\r\n\r\nOverall LGTM!, `Collections.shuffle` is also applicable.\r\n\r\n

> > cc @waitinfuture @onebox-li @RexXiong @charlesy6\r\n> \r\n> Overall LGTM!, `Collections.shuffle` is also applicable.\r\n\r\nThe initial implementation was shuffle, you can refer to https://github.com/apache/incubator-celeborn/pull/1975 for details.

@exmy thanks for your contribution, can you restore the PR description template and fill it in?

> @exmy thanks for your contribution, can you restore the PR description template and fill it in?\r\n\r\ndone

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2118?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`6623309`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/662330923716d2b5fe70c960f04853063a9d737c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.80% compared to head [(`e7c463f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2118?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.10%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2118      +/-   ##\n==========================================\n+ Coverage   46.80%   47.10%   +0.31%     \n==========================================\n  Files         173      173              \n  Lines       10929    11005      +76     \n  Branches     1009     1009              \n==========================================\n+ Hits         5114     5183      +69     \n- Misses       5477     5484       +7     \n  Partials      338      338              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2118?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2117?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`927d624`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/927d62425bfae99e62278371f526cad07f153d47?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.81% compared to head [(`7c53801`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2117?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.86%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2117      +/-   ##\n==========================================\n+ Coverage   46.81%   46.86%   +0.06%     \n==========================================\n  Files         173      173              \n  Lines       10929    10929              \n  Branches     1009     1009              \n==========================================\n+ Hits         5115     5121       +6     \n+ Misses       5479     5469      -10     \n- Partials      335      339       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2117?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @FMX @cfmcgrady @SteNicholas @waitinfuture 

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2116?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`ad57c8b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ad57c8b91ed8cdbaf9d7371f0d93ad75e861f14f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.94% compared to head [(`2bcfeab`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2116?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.72%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2116      +/-   ##\n==========================================\n- Coverage   46.94%   46.72%   -0.22%     \n==========================================\n  Files         173      173              \n  Lines       10929    10929              \n  Branches     1009     1009              \n==========================================\n- Hits         5130     5105      -25     \n- Misses       5466     5488      +22     \n- Partials      333      336       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2116?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@ErikFang  @waitinfuture  please cc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2114?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`aee4155`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aee41555c658a35b2e3f837d741d2bfd94573f2e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.46% compared to head [(`eaa3d23`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2114?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.81%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2114      +/-   ##\n==========================================\n+ Coverage   46.46%   46.81%   +0.36%     \n==========================================\n  Files         166      173       +7     \n  Lines       10781    10929     +148     \n  Branches      988     1009      +21     \n==========================================\n+ Hits         5008     5115     +107     \n- Misses       5448     5479      +31     \n- Partials      325      335      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2114?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2113?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`788b0c3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/788b0c340b6c5d31de76fc12983d60f71c3ef811?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50% compared to head [(`2dce042`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2113?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.49%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2113      +/-   ##\n==========================================\n- Coverage   46.50%   46.49%   -0.00%     \n==========================================\n  Files         166      166              \n  Lines       10758    10758              \n  Branches      984      984              \n==========================================\n- Hits         5002     5001       -1     \n  Misses       5430     5430              \n- Partials      326      327       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2113?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2111?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3054813`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3054813a0f1060359e0bd12f05b19eaef344c7a1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54% compared to head [(`22be877`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2111?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.53%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2111      +/-   ##\n==========================================\n- Coverage   46.54%   46.53%   -0.00%     \n==========================================\n  Files         166      166              \n  Lines       10746    10746              \n  Branches      982      982              \n==========================================\n- Hits         5001     5000       -1     \n  Misses       5419     5419              \n- Partials      326      327       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2111?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

In the previous implementation, location was first set to location.getPeer(), but in fact CreatePartitionReader failed for location. The log reverses the positions of the two @FMX\r\n\r\n\r\n![image](https://github.com/apache/incubator-celeborn/assets/14961757/87941edd-b717-49c4-8b43-129f5a4115c1)\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2110?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`85c6cf4`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/85c6cf41b9f3c186c3ba1778ccd0feb14af151f1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.06% compared to head [(`254189e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2110?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.23%.\n> Report is 1 commits behind head on branch-0.3.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #2110      +/-   ##\n==============================================\n+ Coverage       46.06%   46.23%   +0.18%     \n==============================================\n  Files             166      166              \n  Lines           10545    10547       +2     \n  Branches          987      989       +2     \n==============================================\n+ Hits             4856     4875      +19     \n+ Misses           5366     5352      -14     \n+ Partials          323      320       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2110?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `2 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`b5c5aa6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b5c5aa6d9d97949bda790076d218fccbc8c9bb4d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.79% compared to head [(`b40a5ad`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54%.\n> Report is 3 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...leborn/common/client/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3Rlck5vdExlYWRlckV4Y2VwdGlvbi5qYXZh) | 33.34% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2109      +/-   ##\n==========================================\n- Coverage   46.79%   46.54%   -0.24%     \n==========================================\n  Files         166      166              \n  Lines       10699    10746      +47     \n  Branches      977      982       +5     \n==========================================\n- Hits         5005     5001       -4     \n- Misses       5373     5419      +46     \n- Partials      321      326       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2109?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2108?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`b5c5aa6`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b5c5aa6d9d97949bda790076d218fccbc8c9bb4d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.79% compared to head [(`3124670`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2108?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.64%.\n> Report is 3 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2108      +/-   ##\n==========================================\n- Coverage   46.79%   46.64%   -0.14%     \n==========================================\n  Files         166      166              \n  Lines       10699    10699              \n  Branches      977      977              \n==========================================\n- Hits         5005     4989      -16     \n- Misses       5373     5386      +13     \n- Partials      321      324       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2108?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Set a configuration item to enable or disable fallback to roundrobin?

@jiaoqingbo, why does this set a configuration item to enable or disable fallback to roundbin? loadaware policy could fallback to roundrobin by default. If there is a configuration to enable fallback, the default behavior is destroyed.

@jiaoqingbo This PR is to complement the fallback mechanism, if there are no usable slots then Master will need to fall back to the round-robin slots allocation mechanism.

Thank you both for your explanations @SteNicholas @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2107?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `12 lines` in your changes are missing coverage. Please review.\n> :exclamation: No coverage uploaded for pull request base (`main@02cea04`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#section-missing-base-commit).\n> Report is 17 commits behind head on main.\n\n> :exclamation: Current head 1a06594 differs from pull request most recent head 0cd5088. Consider uploading reports for the commit 0cd5088 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2107?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...a/org/apache/celeborn/common/rpc/netty/Inbox.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2107?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9JbmJveC5zY2FsYQ==) | 7.70% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2107?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2107   +/-   ##\n=======================================\n  Coverage        ?   46.48%           \n=======================================\n  Files           ?      166           \n  Lines           ?    10758           \n  Branches        ?      984           \n=======================================\n  Hits            ?     5000           \n  Misses          ?     5431           \n  Partials        ?      327           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2107?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture @mridulm @akpatnam25 @@rmcyang Please help review

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2106?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`758018f`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/758018f5125187f467a4889f8aa7aa48e2977aa2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.74% compared to head [(`385fc09`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2106?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.62%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2106      +/-   ##\n==========================================\n- Coverage   46.74%   46.62%   -0.12%     \n==========================================\n  Files         166      166              \n  Lines       10695    10699       +4     \n  Branches      977      977              \n==========================================\n- Hits         4998     4987      -11     \n- Misses       5374     5387      +13     \n- Partials      323      325       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2106?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong, I have updated the check in `RemoteShuffleMaster`. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `115 lines` in your changes are missing coverage. Please review.\n> :exclamation: No coverage uploaded for pull request base (`main@02cea04`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#section-missing-base-commit).\n> Report is 108 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...e/celeborn/common/network/sasl/SaslRpcHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xScGNIYW5kbGVyLmphdmE=) | 66.67% | [11 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/network/sasl/CelebornSaslClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0NlbGVib3JuU2FzbENsaWVudC5qYXZh) | 66.67% | [11 Missing and 4 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/network/sasl/CelebornSaslServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL0NlbGVib3JuU2FzbFNlcnZlci5qYXZh) | 80.33% | [6 Missing and 6 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ork/sasl/anonymous/AnonymousSaslClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL2Fub255bW91cy9Bbm9ueW1vdXNTYXNsQ2xpZW50RmFjdG9yeS5qYXZh) | 47.37% | [7 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ork/sasl/anonymous/AnonymousSaslServerFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL2Fub255bW91cy9Bbm9ueW1vdXNTYXNsU2VydmVyRmFjdG9yeS5qYXZh) | 44.45% | [8 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...eborn/common/network/sasl/SaslClientBootstrap.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xDbGllbnRCb290c3RyYXAuamF2YQ==) | 77.15% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...common/network/server/TransportRequestHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0UmVxdWVzdEhhbmRsZXIuamF2YQ==) | 74.20% | [7 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | 0.00% | [8 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/sasl/SaslTimeoutException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zYXNsL1Nhc2xUaW1lb3V0RXhjZXB0aW9uLmphdmE=) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | 73.69% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| ... and [6 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2105   +/-   ##\n=======================================\n  Coverage        ?   47.59%           \n=======================================\n  Files           ?      180           \n  Lines           ?    11061           \n  Branches        ?     1006           \n=======================================\n  Hits            ?     5263           \n  Misses          ?     5446           \n  Partials        ?      352           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2105?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @RexXiong @FMX @pan3793 could you take a look at this PR?

@mridulm @akpatnam25 @rmcyang Please help review.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Closing this since this was broken down into smaller PRs which got merged.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2104?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`69e14fd`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/69e14fd3419f2d8b61f1a9f09f7a9ce0c452d861?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.60% compared to head [(`ab13138`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2104?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.62%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2104      +/-   ##\n==========================================\n+ Coverage   46.60%   46.62%   +0.02%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n+ Hits         4983     4985       +2     \n+ Misses       5388     5386       -2     \n  Partials      324      324              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2104?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2)

Pls create a jira ticket

Thank you for your reminder. created

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2103?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7263f64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7263f64f234627a50d911575cb2d7a089a62c14d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.61% compared to head [(`2117879`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2103?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.59%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2103      +/-   ##\n==========================================\n- Coverage   46.61%   46.59%   -0.01%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n- Hits         4984     4982       -2     \n- Misses       5386     5387       +1     \n- Partials      325      326       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2103?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2102?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7263f64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7263f64f234627a50d911575cb2d7a089a62c14d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.61% compared to head [(`6ec9f53`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2102?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.59%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2102      +/-   ##\n==========================================\n- Coverage   46.61%   46.59%   -0.01%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n- Hits         4984     4982       -2     \n- Misses       5386     5387       +1     \n- Partials      325      326       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2102?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @lyy-pineapple , could you set your email address in your github account so that the project can include you in the contributor list?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2101?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`7263f64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7263f64f234627a50d911575cb2d7a089a62c14d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.61% compared to head [(`0d93af9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2101?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.64%.\n> Report is 5 commits behind head on main.\n\n> :exclamation: Current head 0d93af9 differs from pull request most recent head 5a8926c. Consider uploading reports for the commit 5a8926c to get more accurate results\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2101      +/-   ##\n==========================================\n+ Coverage   46.61%   46.64%   +0.03%     \n==========================================\n  Files         166      166              \n  Lines       10695    10699       +4     \n  Branches      977      977              \n==========================================\n+ Hits         4984     4989       +5     \n  Misses       5386     5386              \n+ Partials      325      324       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2101?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Hi @kerwin-zk , could you take a look at this PR?

@waitinfuture this feature is not covered by CI, any changes require manual testing, maybe we can put a modified spark tgz in OSS, and write an IT to download it then run tests in CI?

> @waitinfuture this feature is not covered by CI, any changes require manual testing, maybe we can put a modified spark tgz in OSS, and write an IT to download it then run tests in CI?\r\n\r\nmaybe the Github Action cache is enough?

@kerwin-zk, could you help to review this pull request?

Add UT to shuffle writer and reader respectively when schema is null and not null.

@kerwin-zk, I have added `CelebornColumnarShuffleReaderSuite#columnarShuffleReaderNewSerializerInstance` and `ColumnarHashBasedShuffleWriterSuiteJ#createColumnarShuffleWriter`. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `45 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`3c6e469`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c6e4697f3270298ea3dc2549f2979be0854fbc4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.76% compared to head [(`f0a39a9`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.95%.\n> Report is 17 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rn/server/common/service/config/DynamicConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vc2VydmljZS9jb25maWcvRHluYW1pY0NvbmZpZy5qYXZh) | 56.25% | [16 Missing and 5 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ver/common/service/config/FsConfigServiceImpl.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vc2VydmljZS9jb25maWcvRnNDb25maWdTZXJ2aWNlSW1wbC5qYXZh) | 76.48% | [9 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...on/service/config/DynamicConfigServiceFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vc2VydmljZS9jb25maWcvRHluYW1pY0NvbmZpZ1NlcnZpY2VGYWN0b3J5LmphdmE=) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...orn/server/common/service/config/SystemConfig.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vc2VydmljZS9jb25maWcvU3lzdGVtQ29uZmlnLmphdmE=) | 64.29% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 92.31% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rn/server/common/service/config/ConfigService.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vc2VydmljZS9jb25maWcvQ29uZmlnU2VydmljZS5qYXZh) | 75.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2100      +/-   ##\n==========================================\n+ Coverage   46.76%   46.95%   +0.20%     \n==========================================\n  Files         166      173       +7     \n  Lines       10695    10929     +234     \n  Branches      977     1009      +32     \n==========================================\n+ Hits         5000     5131     +131     \n- Misses       5373     5466      +93     \n- Partials      322      332      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2100?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `5 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`7263f64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7263f64f234627a50d911575cb2d7a089a62c14d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.61% compared to head [(`0a4932c`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.22%.\n> Report is 27 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...che/celeborn/common/metrics/source/JVMSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0pWTVNvdXJjZS5zY2FsYQ==) | 0.00% | [5 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2099      +/-   ##\n==========================================\n- Coverage   46.61%   46.22%   -0.38%     \n==========================================\n  Files         166      175       +9     \n  Lines       10695    11341     +646     \n  Branches      977     1017      +40     \n==========================================\n+ Hits         4984     5241     +257     \n- Misses       5386     5753     +367     \n- Partials      325      347      +22     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2099?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `8 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`788b0c3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/788b0c340b6c5d31de76fc12983d60f71c3ef811?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50% compared to head [(`f3934f0`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | 37.50% | [4 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | 25.00% | [0 Missing and 3 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2098      +/-   ##\n==========================================\n+ Coverage   46.50%   46.54%   +0.04%     \n==========================================\n  Files         166      166              \n  Lines       10758    10781      +23     \n  Branches      984      988       +4     \n==========================================\n+ Hits         5002     5017      +15     \n- Misses       5430     5436       +6     \n- Partials      326      328       +2     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2098?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@RexXiong @waitinfuture Take a look at this PR when you have time.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2095?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`3c6e469`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c6e4697f3270298ea3dc2549f2979be0854fbc4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.76% compared to head [(`ccf0af4`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2095?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.59%.\n> Report is 2 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2095      +/-   ##\n==========================================\n- Coverage   46.76%   46.59%   -0.16%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n- Hits         5000     4982      -18     \n- Misses       5373     5387      +14     \n- Partials      322      326       +4     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2095?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2093?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`f0d4319`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f0d4319c1851c5cf5cbca2b6dc2a71a349a5137d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.61% compared to head [(`35c2c2e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2093?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.62%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2093      +/-   ##\n==========================================\n+ Coverage   46.61%   46.62%   +0.01%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n+ Hits         4984     4985       +1     \n  Misses       5386     5386              \n+ Partials      325      324       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2093?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

that resolved by others

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2091?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2091](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2091?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bc7717c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c6e4697f3270298ea3dc2549f2979be0854fbc4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c6e469) will **decrease** coverage by `0.10%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2091      +/-   ##\n==========================================\n- Coverage   46.76%   46.65%   -0.10%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n- Hits         5000     4989      -11     \n- Misses       5373     5384      +11     \n  Partials      322      322              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2091/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2090](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d4427c7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/eb1be3fbf8078cc71e2208095931d9510bf00095?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eb1be3f) will **decrease** coverage by `0.07%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `17.97%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2090      +/-   ##\n==========================================\n- Coverage   46.77%   46.69%   -0.07%     \n==========================================\n  Files         166      166              \n  Lines       10695    10739      +44     \n  Branches      977      981       +4     \n==========================================\n+ Hits         5001     5014      +13     \n- Misses       5373     5404      +31     \n  Partials      321      321              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/network/buffer/NettyManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmV0dHlNYW5hZ2VkQnVmZmVyLmphdmE=) | `63.16% <100.00%> (+4.34%)` | :arrow_up: |\n| [...leborn/common/network/buffer/NioManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmlvTWFuYWdlZEJ1ZmZlci5qYXZh) | `83.34% <100.00%> (+3.34%)` | :arrow_up: |\n| [...e/celeborn/common/network/protocol/RpcRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9ScGNSZXF1ZXN0LmphdmE=) | `69.57% <100.00%> (+9.57%)` | :arrow_up: |\n| [...born/common/network/protocol/StreamChunkSlice.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9TdHJlYW1DaHVua1NsaWNlLmphdmE=) | `88.38% <100.00%> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `58.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `43.58% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoUmVxdWVzdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/buffer/FileSegmentManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvRmlsZVNlZ21lbnRNYW5hZ2VkQnVmZmVyLmphdmE=) | `31.04% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchFailure.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoRmFpbHVyZS5qYXZh) | `19.05% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchSuccess.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoU3VjY2Vzcy5qYXZh) | `43.48% <0.00%> (ø)` | |\n| ... and [11 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2090?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Merged into main. 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `308 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`1c7cd1b`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1c7cd1bd1392c8d3fd4396c539696dc79835f8dc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.13% compared to head [(`af01170`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.22%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...che/celeborn/common/metrics/sink/JsonServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9Kc29uU2VydmxldC5zY2FsYQ==) | 0.00% | [252 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | 0.00% | [25 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | 0.00% | [17 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...celeborn/common/metrics/sink/AbstractServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9BYnN0cmFjdFNlcnZsZXQuc2NhbGE=) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...leborn/common/metrics/sink/PrometheusServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9Qcm9tZXRoZXVzU2VydmxldC5zY2FsYQ==) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 92.86% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2089      +/-   ##\n==========================================\n- Coverage   47.13%   46.22%   -0.91%     \n==========================================\n  Files         173      175       +2     \n  Lines       11034    11336     +302     \n  Branches     1011     1016       +5     \n==========================================\n+ Hits         5200     5239      +39     \n- Misses       5494     5757     +263     \n  Partials      340      340              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2089?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

please update the LICENSE and NOTICE since it introduces the new dependencies, also, fix sbt building system

> please update the LICENSE and NOTICE since it introduces the new dependencies, also, fix sbt building system\r\n\r\n@pan3793  Thank you. I have updated newer version , and fixed sbt building system. Please help me review it again. 

Thank you all @suizhe007 @pan3793 @cfmcgrady, merge to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `43 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`208864a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/208864a807e65d811918098cec0978734042d9ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.60% compared to head [(`819919e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.70%.\n> Report is 94 commits behind head on main.\n\n> :exclamation: Current head 819919e differs from pull request most recent head d874daa. Consider uploading reports for the commit d874daa to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/celeborn/common/meta/MemoryBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NZW1vcnlCdWZmZXJzLmphdmE=) | 0.00% | [24 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...g/apache/celeborn/common/util/MemCacheManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9NZW1DYWNoZU1hbmFnZXIuamF2YQ==) | 37.04% | [13 Missing and 4 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...pache/celeborn/common/meta/FileManagedBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlTWFuYWdlZEJ1ZmZlcnMuamF2YQ==) | 0.00% | [0 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 93.34% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2088      +/-   ##\n==========================================\n+ Coverage   46.60%   46.70%   +0.11%     \n==========================================\n  Files         166      168       +2     \n  Lines       10712    10761      +49     \n  Branches      976      984       +8     \n==========================================\n+ Hits         4991     5025      +34     \n- Misses       5395     5410      +15     \n  Partials      326      326              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2088?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2087?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> :exclamation: No coverage uploaded for pull request base (`main@02cea04`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2087   +/-   ##\n=======================================\n  Coverage        ?   46.74%           \n=======================================\n  Files           ?      166           \n  Lines           ?    10695           \n  Branches        ?      977           \n=======================================\n  Hits            ?     4998           \n  Misses          ?     5374           \n  Partials        ?      323           \n```\n\n\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2086?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> :exclamation: No coverage uploaded for pull request base (`main@02cea04`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#section-missing-base-commit).\n> Report is 10 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2086   +/-   ##\n=======================================\n  Coverage        ?   46.77%           \n=======================================\n  Files           ?      166           \n  Lines           ?    10699           \n  Branches        ?      977           \n=======================================\n  Hits            ?     5003           \n  Misses          ?     5374           \n  Partials        ?      322           \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2086?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

Per https://github.com/databricks/scala-style-guide#traversal-and-zipwithindex, we need to use `while` loop for performance-sensitive code

> I found Objects.hash is even several times faster\r\n\r\nthis is  because `Seq` is an implementation of `List`\r\n\r\nhttps://github.com/scala/scala/blob/ceaf7e68ac93e9bbe8642d06164714b2de709c27/src/library/scala/collection/Seq.scala#L32-L42\r\n\r\n```scala\r\n/** $factoryInfo\r\n *  The current default implementation of a $Coll is a `List`.\r\n *  @define coll sequence\r\n *  @define Coll `Seq`\r\n */\r\nobject Seq extends SeqFactory[Seq] {\r\n  /** $genericCanBuildFromInfo */\r\n  implicit def canBuildFrom[A]: CanBuildFrom[Coll, A, Seq[A]] = ReusableCBF.asInstanceOf[GenericCanBuildFrom[A]]\r\n\r\n  def newBuilder[A]: Builder[A, Seq[A]] = immutable.Seq.newBuilder[A]\r\n}\r\n```\r\n\r\n```scala\r\n    val state = Array(host, rpcPort, pushPort, fetchPort, replicatePort)\r\n    // while\r\n    startTime = System.nanoTime()\r\n    var whileHash = 1\r\n    var i = 0\r\n    while (i < 5) {\r\n      whileHash = 31 * whileHash + state(i).hashCode()\r\n      i = i + 1\r\n    }\r\n    var endTime = System.nanoTime()\r\n    println(endTime - startTime)\r\n\r\n    // while 2\r\n    startTime = System.nanoTime()\r\n    whileHash = 1\r\n    i = 0\r\n    while (i < state.length) {\r\n      whileHash = 31 * whileHash + state(i).hashCode()\r\n      i = i + 1\r\n    }\r\n    endTime = System.nanoTime()\r\n    println(endTime - startTime)\r\n\r\n    startTime = System.nanoTime()\r\n    val objectHash = java.util.Objects.hash(host, rpcPort, pushPort, fetchPort, replicatePort)\r\n    endTime = System.nanoTime()\r\n    println(endTime - startTime)\r\n```\r\n\r\n3924 vs 1821 vs 29459\r\n\r\n

Thanks for @waitinfuture @cfmcgrady suggestions. I will optimize the code and test again.

btw, we have a benchmark framework introduced in https://github.com/apache/incubator-celeborn/pull/1657

> btw, we have a benchmark framework introduced in #1657\r\n\r\nGet it.

These calculations are sensitive to performance(within milliseconds) and it may be biased when using current benchmark framework. So I tested them locally and the results are more intuitive, shown below.\r\n```\r\njava version "1.8.0_261"\r\n=====================\r\norigin costs 1026147 ns, 1.00x\r\nfor seq costs 791501 ns, 1.30x\r\nfor array costs 336341 ns, 3.05x\r\nwhile seq costs 36436 ns, 28.16x\r\nwhile array costs 1082 ns, 948.38x\r\nobject hash costs 9595 ns, 106.95x\r\n```\r\n

> These calculations are sensitive to performance(within milliseconds) and it may be biased when using current benchmark framework.\r\n\r\nThis is not as expected, can you elaborate more? or show your benchmark code?

thanks, @onebox-li @waitinfuture @mridulm @AngersZhuuuu \r\nmerging to main(v0.4.0)/branch-0.3(v0.3.2).

Thanks for all your help!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2085?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2085](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2085?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aad5013) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/208864a807e65d811918098cec0978734042d9ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (208864a) will **increase** coverage by `0.02%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2085      +/-   ##\n==========================================\n+ Coverage   46.60%   46.62%   +0.02%     \n==========================================\n  Files         166      166              \n  Lines       10712    10695      -17     \n  Branches      976      977       +1     \n==========================================\n- Hits         4991     4985       -6     \n+ Misses       5395     5386       -9     \n+ Partials      326      324       -2     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2085/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2084?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2084](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2084?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b6978aa) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/208864a807e65d811918098cec0978734042d9ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (208864a) will **increase** coverage by `0.02%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2084      +/-   ##\n==========================================\n+ Coverage   46.60%   46.62%   +0.02%     \n==========================================\n  Files         166      166              \n  Lines       10712    10695      -17     \n  Branches      976      977       +1     \n==========================================\n- Hits         4991     4985       -6     \n+ Misses       5395     5386       -9     \n+ Partials      326      324       -2     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2084/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2083?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2083](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2083?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b4aa086) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/208864a807e65d811918098cec0978734042d9ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (208864a) will **increase** coverage by `0.17%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head b4aa086 differs from pull request most recent head e95f72b. Consider uploading reports for the commit e95f72b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2083      +/-   ##\n==========================================\n+ Coverage   46.60%   46.77%   +0.17%     \n==========================================\n  Files         166      166              \n  Lines       10712    10703       -9     \n  Branches      976      975       -1     \n==========================================\n+ Hits         4991     5005      +14     \n+ Misses       5395     5376      -19     \n+ Partials      326      322       -4     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2083/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

@waitinfuture, I have addressed above comments. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2082](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2bfc978) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/efa22a4936335d98195ed99d8cabe1fd89d3a3a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (efa22a4) will **decrease** coverage by `0.21%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2082      +/-   ##\n==========================================\n- Coverage   46.70%   46.48%   -0.21%     \n==========================================\n  Files         165      166       +1     \n  Lines       10668    10695      +27     \n  Branches      972      977       +5     \n==========================================\n- Hits         4981     4971      -10     \n- Misses       5362     5398      +36     \n- Partials      325      326       +1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.57% <ø> (-0.04%)` | :arrow_down: |\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `12.83% <0.00%> (+0.33%)` | :arrow_up: |\n\n... and [13 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2082/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Yes, as you have said spark supports using TGT cache. Celeborn does not support that yet. If using celeborn with kerberized HDFS, just setting the principle and keytab could be enough.

it\

@FMX thanks for the confirmation, have you tested the negative cases? e.g. access kerberized HDFS without keytab and TGT, does the error message intuitive?

@liujiayi771 what blocks you creating a folder(e.g. `/opt/hadoop/conf`) and put the Hadoop client configurations under that, then set `export HADOOP_CONF_DIR=/opt/hadoop/conf` in `celeborn-env.sh`?

In practice, we usually add `HADOOP_CONF_DIR` into classpath so that Hadoop client could pick it up from classpath

@liujiayi771 Now, the kerberos login behavior is exactly same with the Hadoop, and the feature of hadoop configuration override is mentioned at https://celeborn.apache.org/docs/latest/migration/#upgrading-from-02-to-03\r\n\r\n> Since 0.3.0, Celeborn supports overriding Hadoop configuration(core-site.xml, hdfs-site.xml, etc.) from Celeborn configuration with the additional prefix `celeborn.hadoop.`. On Spark client side, user should set Hadoop configuration like `spark.celeborn.hadoop.foo=bar`, note that `spark.hadoop.foo=bar` does not take effect; on Flink client and Celeborn Master/Worker side, user should set like `celeborn.hadoop.foo=bar`.\r\n\r\nAlso, we can emphasize that at https://celeborn.apache.org/docs/latest/configuration/ page too

The negative case result looks OK to me. I believe that if users are using HDFS with Kerbero then they should know something about Kerberos.\r\n\r\n> 23/11/09 10:14:52,256 WARN [celeborn-dispatcher-5] Client: Exception encountered while connecting to the server\r\n> org.apache.hadoop.security.AccessControlException: Client cannot authenticate via:[TOKEN, KERBEROS]\r\n> \tat org.apache.hadoop.security.SaslRpcClient.selectSaslClient(SaslRpcClient.java:173)

Hi @oOKevinOo , thanks for this PR! please run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` and `dev/reformat`, see https://github.com/apache/incubator-celeborn/blob/main/CONTRIBUTING.md

> I think we can merge this first, since this PR has a good result for small shuffle files\r\n\r\nthen the PR target branch should be `main` instead of `branch-0.3`?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2081](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8c01f77) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/697571ee8fb0ad1a29a101122f2f2bc9ce4965aa?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (697571e) will **decrease** coverage by `0.16%`.\n> Report is 7 commits behind head on branch-0.3.\n> The diff coverage is `36.77%`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #2081      +/-   ##\n==============================================\n- Coverage       46.17%   46.01%   -0.16%     \n==============================================\n  Files             165      168       +3     \n  Lines           10542    10608      +66     \n  Branches          984      993       +9     \n==============================================\n+ Hits             4867     4880      +13     \n- Misses           5355     5402      +47     \n- Partials          320      326       +6     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/meta/FileManagedBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlTWFuYWdlZEJ1ZmZlcnMuamF2YQ==) | `78.95% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.46% <93.34%> (+0.03%)` | :arrow_up: |\n| [...g/apache/celeborn/common/util/MemCacheManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9NZW1DYWNoZU1hbmFnZXIuamF2YQ==) | `40.75% <40.75%> (ø)` | |\n| [...org/apache/celeborn/common/meta/MemoryBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9NZW1vcnlCdWZmZXJzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n... and [8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2081/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

> > I think we can merge this first, since this PR has a good result for small shuffle files\r\n> \r\n> then the PR target branch should be `main` instead of `branch-0.3`?\r\n\r\nRight, I also think we should merge to main. @oOKevinOo said there are some conflicts with main. I will have a check and try to resolve the conflicts.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2080?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2080](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2080?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d0c70b7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/efa22a4936335d98195ed99d8cabe1fd89d3a3a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (efa22a4) will **decrease** coverage by `0.11%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2080      +/-   ##\n==========================================\n- Coverage   46.70%   46.58%   -0.11%     \n==========================================\n  Files         165      165              \n  Lines       10668    10696      +28     \n  Branches      972      974       +2     \n==========================================\n+ Hits         4981     4982       +1     \n- Misses       5362     5389      +27     \n  Partials      325      325              \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2080/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

cc @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2079?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2079](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2079?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b8850b2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ffbbe257fbb41b27638cfc6ee03201f7f6cc6112?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ffbbe25) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2079      +/-   ##\n==========================================\n+ Coverage   46.57%   46.75%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10696    10696              \n  Branches      974      974              \n==========================================\n+ Hits         4981     5000      +19     \n+ Misses       5389     5375      -14     \n+ Partials      326      321       -5     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2079/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Thanks, merged to main(v0.4.0).\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2078](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (279d19e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **decrease** coverage by `0.01%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `33.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2078      +/-   ##\n==========================================\n- Coverage   46.71%   46.69%   -0.01%     \n==========================================\n  Files         165      165              \n  Lines       10668    10652      -16     \n  Branches      972      971       -1     \n==========================================\n- Hits         4982     4973       -9     \n+ Misses       5362     5355       -7     \n  Partials      324      324              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `45.53% <60.00%> (-0.51%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `16.90% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2078/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

IMO previously `gauge` type of `metrics_SlotsAllocated_Value` is more meaningful, which shows the allocated slots in the last hour. Maybe we can directly use `WorkerInfo#usedSlots`.

> IMO previously `gauge` type of `metrics_SlotsAllocated_Value` is more meaningful, which shows the allocated slots in the last hour. Maybe we can directly use `WorkerInfo#usedSlots`.\r\n\r\nThanks @waitinfuture. IMO using counter here can get the original data for SlotsAllocated. If there is a need to get statistics similar to the previous one hour, we can use increase(metrics_SlotsAllocated_Count[1h]) to get them. Compared with the previous one, using prometheus function to calculate can obtain more accurate results, and the time window size can also be defined according to user needs. May here change the panel to follow previous behavior?\r\nBTW I think `WorkerInfo#usedSlots` is a little different from SlotsAllocated, may add a new panel for it if necessary.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2077?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a275b64`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a275b64b320852acfa5870f40ce21111e39fb6d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54% compared to head [(`081a70f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2077?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.69%.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2077      +/-   ##\n==========================================\n+ Coverage   46.54%   46.69%   +0.15%     \n==========================================\n  Files         166      166              \n  Lines       10746    10746              \n  Branches      982      982              \n==========================================\n+ Hits         5001     5017      +16     \n+ Misses       5419     5406      -13     \n+ Partials      326      323       -3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2077?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

the main branch CI failed after applying this change. cc @FMX @cxzl25 \r\n\r\nhttps://github.com/apache/incubator-celeborn/actions/runs/7057185645/job/19210402302\r\n\r\n```\r\n[info] org.apache.celeborn.tests.mr.WordCountTest *** ABORTED ***\r\n[info]   java.lang.NoClassDefFoundError: org/bouncycastle/operator/OperatorCreationException\r\n[info]   at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$RMActiveServices.serviceInit(ResourceManager.java:888)\r\n[info]   at org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n[info]   at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.createAndInitActiveServices(ResourceManager.java:1410)\r\n[info]   at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.serviceInit(ResourceManager.java:344)\r\n[info]   at org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n[info]   at org.apache.hadoop.yarn.server.MiniYARNCluster.initResourceManager(MiniYARNCluster.java:359)\r\n[info]   at org.apache.hadoop.yarn.server.MiniYARNCluster.access$200(MiniYARNCluster.java:129)\r\n[info]   at org.apache.hadoop.yarn.server.MiniYARNCluster$ResourceManagerWrapper.serviceInit(MiniYARNCluster.java:494)\r\n[info]   at org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n[info]   at org.apache.hadoop.service.CompositeService.serviceInit(CompositeService.java:109)\r\n[info]   at org.apache.hadoop.yarn.server.MiniYARNCluster.serviceInit(MiniYARNCluster.java:327)\r\n[info]   at org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n[info]   at org.apache.celeborn.tests.mr.WordCountTest.beforeAll(WordCountTest.scala:78)\r\n[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n[info]   at org.apache.celeborn.tests.mr.WordCountTest.run(WordCountTest.scala:45)\r\n[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)\r\n[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)\r\n[info]   at sbt.ForkMain$Run.lambda$runTest$1(ForkMain.java:414)\r\n[info]   at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n[info]   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:[114](https://github.com/apache/incubator-celeborn/actions/runs/7057185645/job/19210402302#step:4:115)9)\r\n[info]   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n[info]   at java.lang.Thread.run(Thread.java:750)\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2076?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2076](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2076?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3ad53cc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **not change** coverage.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2076   +/-   ##\n=======================================\n  Coverage   46.71%   46.71%           \n=======================================\n  Files         165      165           \n  Lines       10668    10668           \n  Branches      972      972           \n=======================================\n  Hits         4982     4982           \n  Misses       5362     5362           \n  Partials      324      324           \n```\n\n\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2075](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (509de4b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/efa22a4936335d98195ed99d8cabe1fd89d3a3a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (efa22a4) will **increase** coverage by `0.02%`.\n> The diff coverage is `85.72%`.\n\n> :exclamation: Current head 509de4b differs from pull request most recent head 91b43c0. Consider uploading reports for the commit 91b43c0 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2075      +/-   ##\n==========================================\n+ Coverage   46.70%   46.71%   +0.02%     \n==========================================\n  Files         165      165              \n  Lines       10668    10675       +7     \n  Branches      972      972              \n==========================================\n+ Hits         4981     4986       +5     \n- Misses       5362     5364       +2     \n  Partials      325      325              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/rpc/RpcEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbmRwb2ludC5zY2FsYQ==) | `11.77% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.60% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2075/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

+CC @otterc 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2074?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2074](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2074?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4bc83a1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2074      +/-   ##\n==========================================\n+ Coverage   46.71%   46.82%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10668    10668              \n  Branches      972      972              \n==========================================\n+ Hits         4982     4994      +12     \n+ Misses       5362     5352      -10     \n+ Partials      324      322       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2074/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

As I have changed the way Celeborn supports Kerberos. I think this PR should be closed.

> As I have changed the way Celeborn supports Kerberos. I think this PR should be closed.\n\nNot all people have Celeborn and HDFS in the same cluster, we should keep the configs, and also support use cluster `core-site.xml `and `hdfs-site.xml`

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2073?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`aab073a`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aab073ab1613abd6382bd2e5f93906fec7aeb007?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.57% compared to head [(`bc10bf7`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2073?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.69%.\n> Report is 1 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2073      +/-   ##\n==========================================\n+ Coverage   46.57%   46.69%   +0.13%     \n==========================================\n  Files         166      166              \n  Lines       10743    10746       +3     \n  Branches      981      982       +1     \n==========================================\n+ Hits         5002     5017      +15     \n+ Misses       5417     5406      -11     \n+ Partials      324      323       -1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2073?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

ping @FMX please take a look at this PR

The "dzcxzl" might be your JIRA ID. So I just assign this JIRA to this user. 

Thank you all for your help!

Thanks @liujiayi771 for this PR! Please run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` to automatically generate config docs, and `dev/reformat` to format style. See https://github.com/apache/incubator-celeborn/blob/main/CONTRIBUTING.md#code-style

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2072](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a07a698) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0e5008db191afe75417cdce97deb8232b7ab6fb0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0e5008d) will **decrease** coverage by `0.11%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `48.58%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2072      +/-   ##\n==========================================\n- Coverage   46.82%   46.71%   -0.11%     \n==========================================\n  Files         165      165              \n  Lines       10594    10668      +74     \n  Branches      963      972       +9     \n==========================================\n+ Hits         4960     4982      +22     \n- Misses       5310     5362      +52     \n  Partials      324      324              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.61% <85.00%> (-0.11%)` | :arrow_down: |\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `12.50% <0.00%> (-6.73%)` | :arrow_down: |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2072/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Hi @FMX , could you paste a detailed example of connecting to kerberized HDFS here?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2071](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (88f021f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **decrease** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `56.25%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2071      +/-   ##\n==========================================\n- Coverage   46.71%   46.69%   -0.01%     \n==========================================\n  Files         165      166       +1     \n  Lines       10668    10684      +16     \n  Branches      972      974       +2     \n==========================================\n+ Hits         4982     4988       +6     \n- Misses       5362     5369       +7     \n- Partials      324      327       +3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...g/apache/celeborn/common/util/CollectionUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9Db2xsZWN0aW9uVXRpbHMuamF2YQ==) | `0.00% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.57% <71.43%> (-0.04%)` | :arrow_down: |\n| [...la/org/apache/celeborn/common/util/DiskUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvRGlza1V0aWxzLnNjYWxh) | `44.45% <44.45%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2071/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

@FMX, @waitinfuture, could you help to review this ratio configuration support?

@FMX, any other comments for this update?

any test cases to verify the logic?

@jiaoqingbo, could you describe which logic should verify? Do you mean that the usable size between the reserved size and the space calculated via ratio? Meanwhile, `SlotsAllocatorSuiteJ` has already verified the situation which does not configure `celeborn.worker.storage.disk.reserve.ratio`.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2070?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2070](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2070?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (485924e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0e5008db191afe75417cdce97deb8232b7ab6fb0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0e5008d) will **decrease** coverage by `0.11%`.\n> Report is 7 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2070      +/-   ##\n==========================================\n- Coverage   46.82%   46.71%   -0.11%     \n==========================================\n  Files         165      165              \n  Lines       10594    10668      +74     \n  Branches      963      972       +9     \n==========================================\n+ Hits         4960     4982      +22     \n- Misses       5310     5362      +52     \n  Partials      324      324              \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2070/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

@mridulm @waitinfuture cc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2069?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2069](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2069?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (095d20d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7b185a2562857b35ae4fd6bed7026ebd616eeda9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7b185a2) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2069      +/-   ##\n==========================================\n+ Coverage   46.91%   46.93%   +0.03%     \n==========================================\n  Files         165      165              \n  Lines       10586    10586              \n  Branches      963      963              \n==========================================\n+ Hits         4965     4968       +3     \n+ Misses       5299     5297       -2     \n+ Partials      322      321       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2069/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2068?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2068](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2068?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (87fa3a9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7b185a2562857b35ae4fd6bed7026ebd616eeda9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7b185a2) will **decrease** coverage by `0.07%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2068      +/-   ##\n==========================================\n- Coverage   46.91%   46.83%   -0.07%     \n==========================================\n  Files         165      165              \n  Lines       10586    10586              \n  Branches      963      963              \n==========================================\n- Hits         4965     4957       -8     \n- Misses       5299     5307       +8     \n  Partials      322      322              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2068/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

thanks, merging to main(v0.4.0).

Hi @otterc , thanks for the PR! Please run `UPDATE=1 build/mvn clean test -pl common -am -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` to automatically update the md files.

@otterc, you could refer to contributing guide: [CONTRIBUTING.md#code-style](https://github.com/apache/incubator-celeborn/blob/main/CONTRIBUTING.md#code-style).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2065](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e188051) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7b185a2562857b35ae4fd6bed7026ebd616eeda9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7b185a2) will **decrease** coverage by `0.08%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head e188051 differs from pull request most recent head cb4b26b. Consider uploading reports for the commit cb4b26b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2065      +/-   ##\n==========================================\n- Coverage   46.91%   46.82%   -0.08%     \n==========================================\n  Files         165      165              \n  Lines       10586    10594       +8     \n  Branches      963      963              \n==========================================\n- Hits         4965     4960       -5     \n- Misses       5299     5310      +11     \n- Partials      322      324       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.73% <100.00%> (+0.04%)` | :arrow_up: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `16.90% <100.00%> (+0.17%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2065/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2064?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2064](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2064?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d102530) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c6e4697f3270298ea3dc2549f2979be0854fbc4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c6e469) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2064      +/-   ##\n==========================================\n- Coverage   46.76%   46.75%   -0.00%     \n==========================================\n  Files         166      166              \n  Lines       10695    10695              \n  Branches      977      977              \n==========================================\n- Hits         5000     4999       -1     \n- Misses       5373     5374       +1     \n  Partials      322      322              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2064/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

> I think we should add some UTs.\r\n\r\nCurrently there is not much unit test coverage for `PushDataHandler` at all. I think it is mostly tested via the cluster tests in `org.apache.celeborn.service.deploy.cluster`.  Given that `PushDataHandler` has a lot of async tasks, I think in order to write a UT for it now we would have to restructure the code quite a bit to write a proper UT.  @waitinfuture  lmk what you think 

> > I think we should add some UTs.\r\n> \r\n> Currently there is not much unit test coverage for `PushDataHandler` at all. I think it is mostly tested via the cluster tests in `org.apache.celeborn.service.deploy.cluster`. Given that `PushDataHandler` has a lot of async tasks, I think in order to write a UT for it now we would have to restructure the code quite a bit to write a proper UT. @waitinfuture lmk what you think\r\n\r\nYou are right, currently the UT coverage for Celeborn is relatively low. It will be great to add more UTs. Refactoring is always welcome as long as it helps and does not introduce regression :)

@waitinfuture:\r\n> I‘m fine with this intention. For implementation, how about this:\r\n> \r\n> 1. When `doReplicate == false`, invoke `callback` after the file write logic\r\n> 2. When `doReplicate == true`, keep the current code structure, but\r\n>    2.1 Set status to `SUCCESS` or `FAIL`(with exception) after the file write logic\r\n>    2.2 In `wrappedCallback#onSuccess` and `wrappedCallback#onFailure`, wait for the status to be available before sending ACK (in current PR it will wait for Future complete anyway).\r\n> \r\n> WDYT? cc @mridulm @otterc @rmcyang\r\n\r\nSounds good, that will eliminate the need to change the threading model - and in almost all cases, it wont need to block.\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2063?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2063](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2063?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2b42a1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b45b63f9a56b20c4ca81d5c1cb8429e34a211ef4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b45b63f) will **increase** coverage by `0.10%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2063      +/-   ##\n==========================================\n+ Coverage   46.76%   46.86%   +0.10%     \n==========================================\n  Files         165      165              \n  Lines       10563    10563              \n  Branches      961      961              \n==========================================\n+ Hits         4939     4949      +10     \n+ Misses       5305     5296       -9     \n+ Partials      319      318       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2063/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merge to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2062?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2062](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2062?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4658cad) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b45b63f9a56b20c4ca81d5c1cb8429e34a211ef4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b45b63f) will **increase** coverage by `0.10%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2062      +/-   ##\n==========================================\n+ Coverage   46.76%   46.86%   +0.10%     \n==========================================\n  Files         165      165              \n  Lines       10563    10563              \n  Branches      961      961              \n==========================================\n+ Hits         4939     4949      +10     \n+ Misses       5305     5296       -9     \n+ Partials      319      318       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2062/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `14 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`927d624`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/927d62425bfae99e62278371f526cad07f153d47?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.81% compared to head [(`930129e`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 47.06%.\n> Report is 2 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 80.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | 0.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2061      +/-   ##\n==========================================\n+ Coverage   46.81%   47.06%   +0.26%     \n==========================================\n  Files         173      173              \n  Lines       10929    10995      +66     \n  Branches     1009     1009              \n==========================================\n+ Hits         5115     5174      +59     \n- Misses       5479     5483       +4     \n- Partials      335      338       +3     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2061?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

 @SteNicholas nice idea, this feature is useful for debug memory problem in our spark production

@wangshengjie123, thanks for detailed review. I have addressed above comments. PTAL.

LGTM, thanks  @SteNicholas,  cc @waitinfuture @FMX 

thank you, merging to main(v0.4.0).

Hi @suizhe007 , thanks for this PR! Please run ./dev/reformat to automatically reformat code style :)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2060?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2060](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2060?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (29bff20) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2ce8d6fd95a7755462de2186b1f799ab0ac08427?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ce8d6f) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 29bff20 differs from pull request most recent head e2bee6c. Consider uploading reports for the commit e2bee6c to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2060      +/-   ##\n==========================================\n+ Coverage   46.80%   46.82%   +0.03%     \n==========================================\n  Files         165      165              \n  Lines       10543    10534       -9     \n  Branches      961      957       -4     \n==========================================\n- Hits         4934     4932       -2     \n+ Misses       5290     5282       -8     \n- Partials      319      320       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2060/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2059](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (789bc41) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cf194a5e3a5d17e8dce30e960a345f4d8c38a4ad?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf194a5) will **increase** coverage by `0.18%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `43.75%`.\n\n> :exclamation: Current head 789bc41 differs from pull request most recent head 3ec88fd. Consider uploading reports for the commit 3ec88fd to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2059      +/-   ##\n==========================================\n+ Coverage   46.66%   46.84%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10526    10548      +22     \n  Branches      957      957              \n==========================================\n+ Hits         4911     4940      +29     \n+ Misses       5293     5289       -4     \n+ Partials      322      319       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.69% <87.50%> (-<0.01%)` | :arrow_down: |\n| [...mon/metrics/source/ResourceConsumptionSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1Jlc291cmNlQ29uc3VtcHRpb25Tb3VyY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2059/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@AngersZhuuuu, could you help to review this pull request for support `ResourceConsumption` metric of Celeborn Worker?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2058?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2058](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2058?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a00a665) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/70366edb7cef59ff27bdde888b747a897b1f0a2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (70366ed) will **decrease** coverage by `0.10%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2058      +/-   ##\n==========================================\n- Coverage   46.79%   46.69%   -0.10%     \n==========================================\n  Files         165      165              \n  Lines       10525    10535      +10     \n  Branches      957      961       +4     \n==========================================\n- Hits         4924     4918       -6     \n- Misses       5281     5298      +17     \n+ Partials      320      319       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2058?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2058?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2058/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2057?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2057](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2057?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2c4d4c0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cf194a5e3a5d17e8dce30e960a345f4d8c38a4ad?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf194a5) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2057      +/-   ##\n==========================================\n+ Coverage   46.66%   46.67%   +0.01%     \n==========================================\n  Files         165      165              \n  Lines       10526    10526              \n  Branches      957      957              \n==========================================\n+ Hits         4911     4912       +1     \n  Misses       5293     5293              \n+ Partials      322      321       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2057/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2056?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2056](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2056?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f7ef1a3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/70366edb7cef59ff27bdde888b747a897b1f0a2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (70366ed) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2056      +/-   ##\n==========================================\n- Coverage   46.79%   46.64%   -0.15%     \n==========================================\n  Files         165      165              \n  Lines       10525    10525              \n  Branches      957      957              \n==========================================\n- Hits         4924     4908      -16     \n- Misses       5281     5294      +13     \n- Partials      320      323       +3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2056/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2055?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2055](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2055?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4839ed3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/70366edb7cef59ff27bdde888b747a897b1f0a2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (70366ed) will **decrease** coverage by `0.11%`.\n> The diff coverage is `45.46%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2055      +/-   ##\n==========================================\n- Coverage   46.79%   46.67%   -0.11%     \n==========================================\n  Files         165      165              \n  Lines       10525    10526       +1     \n  Branches      957      957              \n==========================================\n- Hits         4924     4912      -12     \n- Misses       5281     5293      +12     \n- Partials      320      321       +1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2055?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2055?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `83.49% <45.46%> (+0.16%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2055/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

We can refactor the `initializeMemoryAllocator` function to eliminate its dependency on the member variable `TransportClientFactory#conf`. This will allow us to safely remove the `TransportClientFactory#conf` member variable, to prevent performance degradation resulting from erroneous `TransportClientFactory#conf` utilization.

@cfmcgrady cc

thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2054?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2054](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2054?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ab9c071) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/70366edb7cef59ff27bdde888b747a897b1f0a2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (70366ed) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2054      +/-   ##\n==========================================\n+ Coverage   46.79%   46.82%   +0.03%     \n==========================================\n  Files         165      165              \n  Lines       10525    10525              \n  Branches      957      957              \n==========================================\n+ Hits         4924     4927       +3     \n+ Misses       5281     5280       -1     \n+ Partials      320      318       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2054/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@cxzl25, could `LifecycleManager` also log worker address for all `s"AskSync` in this pull request?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2053?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2053](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2053?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (115e27d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cd8acf89c968aad47ae3edcd5b63edc1a76721c7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cd8acf8) will **increase** coverage by `0.08%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `87.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2053      +/-   ##\n==========================================\n+ Coverage   46.68%   46.76%   +0.08%     \n==========================================\n  Files         165      165              \n  Lines       10549    10577      +28     \n  Branches      961      961              \n==========================================\n+ Hits         4924     4945      +21     \n- Misses       5303     5310       +7     \n  Partials      322      322              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2053?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2053?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.72% <87.50%> (+0.03%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2053/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture, @FMX, could you help to review this pull requst? Otherwise I should always resolve the conflicts.

thanks, merging to main(v0.4.0) and branch-0.3(v0.3.2).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2050?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2050](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2050?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e6600b7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/df40a28959d6845e9ddb91a433eae4f062194b54?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (df40a28) will **decrease** coverage by `0.12%`.\n> The diff coverage is `87.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2050      +/-   ##\n==========================================\n- Coverage   46.82%   46.70%   -0.12%     \n==========================================\n  Files         165      165              \n  Lines       10525    10533       +8     \n  Branches      957      957              \n==========================================\n- Hits         4927     4918       -9     \n- Misses       5280     5294      +14     \n- Partials      318      321       +3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2050?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2050?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.69% <87.50%> (-<0.01%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2050/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@kerwin-zk, @waitinfuture, @FMX, could you help to review this configuration for fastest available XXHashFactory instance of `Lz4Decompressor`?

LGTM

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2049](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (643c192) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5d3ae318bf292a3b812032e93101e3529d1cd7fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5d3ae31) will **increase** coverage by `0.18%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2049      +/-   ##\n==========================================\n+ Coverage   46.65%   46.82%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10525    10523       -2     \n  Branches      957      957              \n==========================================\n+ Hits         4909     4926      +17     \n+ Misses       5294     5278      -16     \n+ Partials      322      319       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/rpc/RpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbnYuc2NhbGE=) | `61.91% <0.00%> (ø)` | |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | `17.21% <0.00%> (+0.13%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2049/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2048](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1fff8db) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bf42741ebc29e267c8c68f7a1cec785259a2dad1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf42741) will **increase** coverage by `0.13%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2048      +/-   ##\n==========================================\n+ Coverage   46.72%   46.84%   +0.13%     \n==========================================\n  Files         165      165              \n  Lines       10520    10520              \n  Branches      956      956              \n==========================================\n+ Hits         4914     4927      +13     \n+ Misses       5285     5273      -12     \n+ Partials      321      320       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `71.25% <100.00%> (ø)` | |\n| [...common/network/server/TransportChannelHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0Q2hhbm5lbEhhbmRsZXIuamF2YQ==) | `65.76% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2048/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@mridulm, @FMX, I have documented how to use Error Prone in IntelliJ IDEA. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2046?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2046](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2046?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1b137dc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2758df713ead7fd78fdee9f8a2af2ad2ce377fa9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2758df7) will **decrease** coverage by `0.06%`.\n> Report is 13 commits behind head on main.\n> The diff coverage is `57.15%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2046      +/-   ##\n==========================================\n- Coverage   46.89%   46.82%   -0.06%     \n==========================================\n  Files         165      165              \n  Lines       10531    10525       -6     \n  Branches      959      957       -2     \n==========================================\n- Hits         4937     4927      -10     \n- Misses       5272     5280       +8     \n+ Partials      322      318       -4     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2046?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2046?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `63.53% <57.15%> (-7.72%)` | :arrow_down: |\n\n... and [9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2046/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2045](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a090f00) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0e5008db191afe75417cdce97deb8232b7ab6fb0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0e5008d) will **decrease** coverage by `0.15%`.\n> The diff coverage is `42.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2045      +/-   ##\n==========================================\n- Coverage   46.82%   46.67%   -0.15%     \n==========================================\n  Files         165      165              \n  Lines       10594    10635      +41     \n  Branches      963      970       +7     \n==========================================\n+ Hits         4960     4963       +3     \n- Misses       5310     5346      +36     \n- Partials      324      326       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `68.75% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.63% <62.50%> (-0.09%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.52% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | `53.47% <42.11%> (-17.12%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2045/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Thanks, Merge to main

Cherry-picked to branch-0.3(v0.3.2). Since from 0.3.1 on HDFS is GA, IMO we should cherry-pick related PRs to that.

@waitinfuture, @cfmcgrady, sorry for mistake to redundantly incremented gauges (outstandingFetches/outstandingRpcs/outstandingPushes) every time a new TransportResponseHandler instance is created. I have corrected the gauges and added `TransportResponseHandlerSuiteJ#multipleHandleFetchRequest` to verify the gauge instance count. PTAL.

@cfmcgrady, @waitinfuture, @FMX, sorry for bug that redundantly incremented gauges (outstandingFetches/outstandingRpcs/outstandingPushes) every time a new TransportResponseHandler instance is created in #1992. I have corrected the gauges and added `TransportResponseHandlerSuiteJ#multipleHandleFetchRequest` to verify the gauge instance count. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `3 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`32a6a31`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/32a6a31f84f918712db06982a019c6494b1c2341?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.87% compared to head [(`b373a01`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.98%.\n> Report is 138 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | 80.00% | [1 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | 94.74% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2042      +/-   ##\n==========================================\n+ Coverage   46.87%   46.98%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10520    10543      +23     \n  Branches      956      958       +2     \n==========================================\n+ Hits         4930     4953      +23     \n+ Misses       5272     5271       -1     \n- Partials      318      319       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2042?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2041?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2041](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2041?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (31f23e8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/349ee8b1cb7e0db4e26dafbed4ff6d5e8df60fc1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (349ee8b) will **decrease** coverage by `0.08%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `87.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2041      +/-   ##\n==========================================\n- Coverage   46.83%   46.75%   -0.08%     \n==========================================\n  Files         165      165              \n  Lines       10520    10528       +8     \n  Branches      956      956              \n==========================================\n- Hits         4926     4921       -5     \n- Misses       5275     5286      +11     \n- Partials      319      321       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2041?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2041?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.69% <87.50%> (-<0.01%)` | :arrow_down: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2041/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2040?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2040](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2040?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1745f05) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ed94d8476645d837ebaae6cbf200d0f76bc0880a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ed94d84) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on branch-0.3.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #2040      +/-   ##\n==============================================\n+ Coverage       46.27%   46.29%   +0.02%     \n==============================================\n  Files             165      165              \n  Lines           10431    10431              \n  Branches          970      970              \n==============================================\n+ Hits             4826     4828       +2     \n+ Misses           5286     5285       -1     \n+ Partials          319      318       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2040/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merged to branch-0.3(v0.3.2)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2039](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (45de29d) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/265805a532bce93796791d0056a547cfb795daa5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (265805a) will **decrease** coverage by `0.03%`.\n> The diff coverage is `57.15%`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #2039      +/-   ##\n==============================================\n- Coverage       46.12%   46.08%   -0.03%     \n==============================================\n  Files             165      165              \n  Lines           10431    10416      -15     \n  Branches          970      968       -2     \n==============================================\n- Hits             4810     4799      -11     \n+ Misses           5299     5298       -1     \n+ Partials          322      319       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.75% <ø> (-0.82%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `53.65% <50.00%> (-2.00%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2039/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merging to branch-0.3(v0.3.2)

cc @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2037?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2037](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2037?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ac346e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bd9cb2b1ceae23fa32a81456a4a418b7719ebaa8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bd9cb2b) will **increase** coverage by `0.11%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2037      +/-   ##\n==========================================\n+ Coverage   46.76%   46.87%   +0.11%     \n==========================================\n  Files         165      165              \n  Lines       10535    10520      -15     \n  Branches      958      956       -2     \n==========================================\n+ Hits         4926     4930       +4     \n+ Misses       5285     5272      -13     \n+ Partials      324      318       -6     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2037/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @RexXiong @FMX could you help review this PR? Thanks!

cc @onebox-li 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2036?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2036](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2036?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1841d3f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/349ee8b1cb7e0db4e26dafbed4ff6d5e8df60fc1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (349ee8b) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2036      +/-   ##\n==========================================\n+ Coverage   46.83%   46.87%   +0.04%     \n==========================================\n  Files         165      165              \n  Lines       10520    10520              \n  Branches      956      956              \n==========================================\n+ Hits         4926     4930       +4     \n+ Misses       5275     5272       -3     \n+ Partials      319      318       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2036/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

gentle ping @pan3793 @waitinfuture 

Sorry for late reply. In my grafana v9.3, it seems $interval is a built in automatic variable in grafana. It is automatically set based on time range and has a min value. Maybe there are some version differences. Late LGTM.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2035?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2035](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2035?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe6e16e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/349ee8b1cb7e0db4e26dafbed4ff6d5e8df60fc1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (349ee8b) will **decrease** coverage by `0.24%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2035      +/-   ##\n==========================================\n- Coverage   46.83%   46.58%   -0.24%     \n==========================================\n  Files         165      165              \n  Lines       10520    10520              \n  Branches      956      956              \n==========================================\n- Hits         4926     4900      -26     \n- Misses       5275     5297      +22     \n- Partials      319      323       +4     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2035/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2034?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2034](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2034?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c119a1a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/349ee8b1cb7e0db4e26dafbed4ff6d5e8df60fc1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (349ee8b) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2034   +/-   ##\n=======================================\n  Coverage   46.83%   46.83%           \n=======================================\n  Files         165      165           \n  Lines       10520    10520           \n  Branches      956      956           \n=======================================\n  Hits         4926     4926           \n+ Misses       5275     5274    -1     \n- Partials      319      320    +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2034/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2033?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2033](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2033?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ced12a1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6dc30d39765f6312579856d421b5f89e26f95a7c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6dc30d3) will **decrease** coverage by `0.12%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2033      +/-   ##\n==========================================\n- Coverage   46.90%   46.77%   -0.12%     \n==========================================\n  Files         165      165              \n  Lines       10531    10535       +4     \n  Branches      959      958       -1     \n==========================================\n- Hits         4938     4927      -11     \n- Misses       5271     5285      +14     \n- Partials      322      323       +1     \n```\n\n\n[see 8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2033/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @AngersZhuuuu @boneanxs PTAL if have time :)

Merging to main(v0.4.0)/0.3(v0.3.2)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2032](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (343876f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9b1805e2efcd77d7faa31a7f59f77f4949f60ce5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9b1805e) will **decrease** coverage by `0.08%`.\n> The diff coverage is `57.15%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2032      +/-   ##\n==========================================\n- Coverage   46.76%   46.68%   -0.08%     \n==========================================\n  Files         165      165              \n  Lines       10535    10520      -15     \n  Branches      958      956       -2     \n==========================================\n- Hits         4926     4910      -16     \n- Misses       5285     5288       +3     \n+ Partials      324      322       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `80.00% <100.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.75% <ø> (-0.82%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `53.65% <50.00%> (-2.00%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2032/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merging to main(v0.4.0).

@cfmcgrady, I will fix the bug of adding counter of outstandingFetches, outstandingRpcs and outstandingPushes to metrics .

> thanks, merging to main(v0.4.0).\r\n\r\nHi @cfmcgrady , seems branch-0.3 also needs to revert

> > thanks, merging to main(v0.4.0).\r\n> \r\n> Hi @cfmcgrady , seems branch-0.3 also needs to revert\r\n\r\nraised a new PR https://github.com/apache/incubator-celeborn/pull/2039 for branch-0.3

the bug was introduced in https://github.com/apache/incubator-celeborn/pull/1932

cc @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2031?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2031](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2031?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd86199) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6dc30d39765f6312579856d421b5f89e26f95a7c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6dc30d3) will **increase** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2031      +/-   ##\n==========================================\n+ Coverage   46.90%   46.90%   +0.01%     \n==========================================\n  Files         165      165              \n  Lines       10531    10535       +4     \n  Branches      959      958       -1     \n==========================================\n+ Hits         4938     4940       +2     \n- Misses       5271     5273       +2     \n  Partials      322      322              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2031/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2030?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2030](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2030?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (46c5821) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/655d5762ca1b9271af892cfe369fe0c69cd135e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (655d576) will **increase** coverage by `0.19%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2030      +/-   ##\n==========================================\n+ Coverage   46.74%   46.92%   +0.19%     \n==========================================\n  Files         165      165              \n  Lines       10531    10535       +4     \n  Branches      959      958       -1     \n==========================================\n+ Hits         4922     4943      +21     \n+ Misses       5284     5272      -12     \n+ Partials      325      320       -5     \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2030/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2029?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2029](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2029?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a5b0f37) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/49ea8810376ceb387de0ef855b7e9205101c3958?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (49ea881) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2029   +/-   ##\n=======================================\n  Coverage   46.90%   46.90%           \n=======================================\n  Files         165      165           \n  Lines       10531    10531           \n  Branches      959      959           \n=======================================\n  Hits         4938     4938           \n  Misses       5271     5271           \n  Partials      322      322           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @waitinfuture @pan3793 

cc @FMX could you help review this pr?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2028?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2028](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2028?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2e9b87d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/655d5762ca1b9271af892cfe369fe0c69cd135e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (655d576) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2028      +/-   ##\n==========================================\n+ Coverage   46.74%   46.90%   +0.17%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4922     4939      +17     \n+ Misses       5284     5271      -13     \n+ Partials      325      321       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2028/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2027?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2027](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2027?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5705329) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/655d5762ca1b9271af892cfe369fe0c69cd135e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (655d576) will **increase** coverage by `0.16%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 5705329 differs from pull request most recent head 9f4bf8b. Consider uploading reports for the commit 9f4bf8b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2027      +/-   ##\n==========================================\n+ Coverage   46.74%   46.90%   +0.16%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4922     4938      +16     \n+ Misses       5284     5271      -13     \n+ Partials      325      322       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2027?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/identity/DefaultIdentityProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2027?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L0RlZmF1bHRJZGVudGl0eVByb3ZpZGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2027/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @onebox-li @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2026](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (30e447a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.11%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `25.00%`.\n\n> :exclamation: Current head 30e447a differs from pull request most recent head 43de804. Consider uploading reports for the commit 43de804 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2026      +/-   ##\n==========================================\n+ Coverage   46.64%   46.74%   +0.11%     \n==========================================\n  Files         165      165              \n  Lines       10531    10533       +2     \n  Branches      959      960       +1     \n==========================================\n+ Hits         4911     4923      +12     \n+ Misses       5295     5286       -9     \n+ Partials      325      324       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <100.00%> (ø)` | |\n| [...che/celeborn/common/metrics/source/JVMSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0pWTVNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2026/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks @onebox-li, closing this one.

This is resubmission of #2016.\r\nI was testing it on JDK 11 and later locally - and so did not observe the failures that build system surfaced.\r\nHave added workarounds to fix this, as per error prone documentation.\r\n\r\n+CC @waitinfuture 

@mridulm, could you also test it on JDK17? At present Celeborn supports JDK17.

So looks like there are more failures to be fixed in flink related profiles.\r\nWill convert this back to draft and address those first.

> @mridulm, could you also test it on JDK17? At present Celeborn supports JDK17.\r\n\r\nSeems GA with JDK 17 fails.

Yes, looks like JDK 17 has some specific instructions as well - did not realize Celeborn supports jdk 17 :) will add those as well, after I fix the flink related failures.

> Yes, looks like JDK 17 has some specific instructions as well - did not realize Celeborn supports jdk 17 :) will add those as well, after I fix the flink related failures.\r\n\r\n@mridulm, the [build](https://github.com/apache/incubator-celeborn#build) section has documented the situation of JDK17 support. You could refer this section.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2025?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2025](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2025?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4c2ea29) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6dc30d39765f6312579856d421b5f89e26f95a7c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6dc30d3) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2025      +/-   ##\n==========================================\n+ Coverage   46.90%   46.92%   +0.03%     \n==========================================\n  Files         165      165              \n  Lines       10531    10535       +4     \n  Branches      959      958       -1     \n==========================================\n+ Hits         4938     4943       +5     \n- Misses       5271     5272       +1     \n+ Partials      322      320       -2     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2025/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793\r\nYou mentioned:\r\n> maven scalatest plugin does not support always fork mode\r\n\r\nI am currently running with fork mode = true for all the tests with maven and it is running successfully - can you give more details on this please ? There are so many combinations, I might have missed some !\r\n\r\n\r\n> the main process is driven by @cfmcgrady, and the first step is to make sbt align with maven(almost reached), and then drop maven ...\r\n\r\nI did not find sbt support details, can you point me to it ?\r\nI would prefer to add the support as a follow up if it is not yet merged.\r\n

The flink failures will be addressed by #2029

+CC @waitinfuture , @SteNicholas All the tests pass now

> @pan3793 You mentioned:\r\n> \r\n> > maven scalatest plugin does not support always fork mode\r\n> \r\n> I am currently running with fork mode = true for all the tests with maven and it is running successfully - can you give more details on this please ? There are so many combinations, I might have missed some !\r\n> \r\n> > the main process is driven by @cfmcgrady, and the first step is to make sbt align with maven(almost reached), and then drop maven ...\r\n> \r\n> I did not find sbt support details, can you point me to it ? I would prefer to add the support as a follow up if it is not yet merged.\r\n\r\nHere is sbt doc https://celeborn.apache.org/docs/latest/developers/sbt/

> I am currently running with fork mode = true for all the tests with maven and it is running successfully\r\n\r\nYes, we fixed several cases to make it pass now.\r\n\r\nBasically, when setting `forkMode=once`, all test cases run on the same forked JVM process, which does not much help for projects that compose a lot of singletons(if we initialize one singleton in the previous test case, the following test cases may be affected, so we must add some reset logic for testing purposes)\r\n\r\nThe ideal solution is `forkMode=always`, running each test case in its own forked JVM process, unfortunately, Maven JUnit plugin supports it but scalatest does not.\r\n\r\nhttps://github.com/scalatest/scalatest-maven-plugin/blob/383f396162b7654930758b76a0696d3aa2ce5686/src/main/java/org/scalatest/tools/maven/AbstractScalaTestMojo.java#L162-L168\r\n\r\n> I did not find sbt support details ...\r\n\r\nCurrently, we only provide developer docs with sbt\r\n\r\nhttps://celeborn.apache.org/docs/latest/developers/sbt/

Thanks, merged to main for 0.4

@mridulm seems you didn\

That is done on purpose to minimize spam

alright...

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2023](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (05634de) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f7783249f5ee636177570fc3b25e7c33953a8343?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f778324) will **increase** coverage by `0.01%`.\n> Report is 16 commits behind head on main.\n> The diff coverage is `11.12%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2023      +/-   ##\n==========================================\n+ Coverage   46.75%   46.75%   +0.01%     \n==========================================\n  Files         165      165              \n  Lines       10531    10535       +4     \n  Branches      959      958       -1     \n==========================================\n+ Hits         4923     4925       +2     \n- Misses       5284     5287       +3     \n+ Partials      324      323       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <100.00%> (ø)` | |\n| [...leborn/common/metrics/sink/PrometheusServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9Qcm9tZXRoZXVzU2VydmxldC5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | `10.82% <0.00%> (ø)` | |\n\n... and [8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2023/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2022](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (242c533) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2758df713ead7fd78fdee9f8a2af2ad2ce377fa9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2758df7) will **decrease** coverage by `0.15%`.\n> The diff coverage is `30.77%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2022      +/-   ##\n==========================================\n- Coverage   46.89%   46.74%   -0.15%     \n==========================================\n  Files         165      165              \n  Lines       10531    10537       +6     \n  Branches      959      959              \n==========================================\n- Hits         4937     4924      -13     \n- Misses       5272     5288      +16     \n- Partials      322      325       +3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/network/buffer/NettyManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmV0dHlNYW5hZ2VkQnVmZmVyLmphdmE=) | `58.83% <100.00%> (ø)` | |\n| [...leborn/common/network/buffer/NioManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmlvTWFuYWdlZEJ1ZmZlci5qYXZh) | `80.00% <100.00%> (ø)` | |\n| [...e/celeborn/common/network/protocol/RpcRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9ScGNSZXF1ZXN0LmphdmE=) | `65.22% <100.00%> (+5.22%)` | :arrow_up: |\n| [...born/common/network/protocol/StreamChunkSlice.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9TdHJlYW1DaHVua1NsaWNlLmphdmE=) | `88.38% <100.00%> (ø)` | |\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | `35.79% <100.00%> (ø)` | |\n| [...ommon/network/buffer/FileSegmentManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvRmlsZVNlZ21lbnRNYW5hZ2VkQnVmZmVyLmphdmE=) | `31.04% <0.00%> (ø)` | |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `43.58% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchFailure.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoRmFpbHVyZS5qYXZh) | `19.05% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoUmVxdWVzdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchSuccess.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoU3VjY2Vzcy5qYXZh) | `43.48% <0.00%> (ø)` | |\n| ... and [10 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2022/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

QQ: Is this used from client code which is in the platform classpath ? (like spark, etc).\r\nIf yes, guava version incompat would be something to watch out for.

> QQ: Is this used from client code which is in the platform classpath ? (like spark, etc). If yes, guava version incompat would be something to watch out for.\r\n\r\nThanks for the comment.\r\nThe only possible breaking changes in compatibility are [Objects.toStringHelper -> MoreObjects.toStringHelper](https://github.com/apache/incubator-celeborn/pull/2022/commits/cc059650d23de2af3b22a39133e2001f6f58294c) and the `MoreExecutors.newDirectExecutorService()`, which are both provided since Guava 18.\r\nSpark uses and ships with Guava 14.0.1.\r\nMarked this PR as a draft for further discussion, or closed soon.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2021?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`655d576`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/655d5762ca1b9271af892cfe369fe0c69cd135e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.74% compared to head [(`826787a`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2021?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.74%.\n> Report is 195 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2021      +/-   ##\n==========================================\n- Coverage   46.74%   46.74%   -0.00%     \n==========================================\n  Files         165      165              \n  Lines       10531    10517      -14     \n  Branches      959      956       -3     \n==========================================\n- Hits         4922     4915       -7     \n+ Misses       5284     5283       -1     \n+ Partials      325      319       -6     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2021?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2020?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2020](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2020?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4bea606) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2020      +/-   ##\n==========================================\n+ Coverage   46.64%   46.75%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4923      +12     \n+ Misses       5295     5284      -11     \n+ Partials      325      324       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2020/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2019?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2019](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2019?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (42f524c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.10%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2019      +/-   ##\n==========================================\n+ Coverage   46.64%   46.74%   +0.10%     \n==========================================\n  Files         165      165              \n  Lines       10531    10530       -1     \n  Branches      959      959              \n==========================================\n+ Hits         4911     4921      +10     \n+ Misses       5295     5284      -11     \n  Partials      325      325              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2019?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2019?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2019/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2018?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2018](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2018?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (556e9c9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.27%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2018      +/-   ##\n==========================================\n+ Coverage   46.64%   46.90%   +0.27%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4939      +28     \n+ Misses       5295     5271      -24     \n+ Partials      325      321       -4     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2018/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @RexXiong @FMX please also take a look at this PR.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2017](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (042aff1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.26%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2017      +/-   ##\n==========================================\n+ Coverage   46.64%   46.89%   +0.26%     \n==========================================\n  Files         165      165              \n  Lines       10531    10532       +1     \n  Branches      959      959              \n==========================================\n+ Hits         4911     4938      +27     \n+ Misses       5295     5272      -23     \n+ Partials      325      322       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/network/protocol/PushMergedData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoTWVyZ2VkRGF0YS5qYXZh) | `19.57% <0.00%> (ø)` | |\n| [...e/celeborn/common/network/protocol/OpenStream.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtLmphdmE=) | `65.00% <0.00%> (-1.66%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2017/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Can be merged after #2017, #2018, #2019 and #2020 have been merged.\r\nMarking it as DRAFT until then.

My branch got messed up, will reopen

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2015?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2015](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2015?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf3e7da) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ef412d59329736019a9eaaf0ae425f2496d5a778?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ef412d5) will **increase** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2015      +/-   ##\n==========================================\n+ Coverage   46.72%   46.90%   +0.19%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4920     4939      +19     \n+ Misses       5285     5271      -14     \n+ Partials      326      321       -5     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2015/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I would not do this. the `client` is an independent module that could be used as a library for third-party components to do integration, `client-spark`, `client-mr`, `client-flink` are just the built-in clients for popular computing engines.

> I would not do this. the `client` is an independent module that could be used as a library for third-party components to do integration, `client-spark`, `client-mr`, `client-flink` are just the built-in clients for popular computing engines.\r\n\r\nReasonable, thanks.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2014?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2014](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2014?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9b40cf4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.26%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2014      +/-   ##\n==========================================\n+ Coverage   46.64%   46.90%   +0.26%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4938      +27     \n+ Misses       5295     5271      -24     \n+ Partials      325      322       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2014?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2014?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2014/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @waitinfuture @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2013?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2013](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2013?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (28f50e5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2013      +/-   ##\n==========================================\n+ Coverage   46.64%   46.75%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4923      +12     \n+ Misses       5295     5284      -11     \n+ Partials      325      324       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2013/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Pls create a jira ticket  for this and change the pr title

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2012?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2012](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2012?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ec3779b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2012      +/-   ##\n==========================================\n+ Coverage   46.64%   46.75%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4923      +12     \n+ Misses       5295     5284      -11     \n+ Partials      325      324       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2012/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Pls create a jira ticket  for this and change the pr title

Sure.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2011](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ee63cf3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f93be45506d3ec4a0aa2b4cfb9327a05926071cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f93be45) will **increase** coverage by `0.12%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2011      +/-   ##\n==========================================\n+ Coverage   46.64%   46.75%   +0.12%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4911     4923      +12     \n+ Misses       5295     5284      -11     \n+ Partials      325      324       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/metrics/sink/PrometheusServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9Qcm9tZXRoZXVzU2VydmxldC5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2011/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

not needed

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2010?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2010](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2010?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6089e97) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bcf89da7ddb38756fe8a988ffb557cf65f1c7018?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bcf89da) will **decrease** coverage by `0.26%`.\n> Report is 43 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2010      +/-   ##\n==========================================\n- Coverage   47.02%   46.75%   -0.26%     \n==========================================\n  Files         164      165       +1     \n  Lines       10368    10531     +163     \n  Branches      957      959       +2     \n==========================================\n+ Hits         4874     4923      +49     \n- Misses       5178     5284     +106     \n- Partials      316      324       +8     \n```\n\n\n[see 24 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2010/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

spark-2 module need to change too?

There was an unresolvable design issue identified when `celeborn.client.spark.push.sort.pipeline.enabled` is true, actually, the community decided to delete this feature in the next release.

> There was an unresolvable design issue identified when `celeborn.client.spark.push.sort.pipeline.enabled` is true, actually, the community decided to delete this feature in the next release.\r\n\r\nDo we need to solve this problem first?

@beliefer I think we can minimize the change and port this patch to branch-0.3 too. then delete the related code on the main branch

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2009?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2009](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2009?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f47ff97) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7c5cf49fa765a18df6b1e2b8ed4081c4c093d25c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7c5cf49) will **increase** coverage by `0.01%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2009      +/-   ##\n==========================================\n+ Coverage   46.74%   46.75%   +0.01%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4922     4923       +1     \n  Misses       5284     5284              \n+ Partials      325      324       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2009/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2008?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2008](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2008?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da698f1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7c5cf49fa765a18df6b1e2b8ed4081c4c093d25c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7c5cf49) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2008      +/-   ##\n==========================================\n+ Coverage   46.74%   46.90%   +0.17%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4922     4939      +17     \n+ Misses       5284     5271      -13     \n+ Partials      325      321       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2008/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2007?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2007](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2007?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (51b5d43) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f7783249f5ee636177570fc3b25e7c33953a8343?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f778324) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #2007   +/-   ##\n=======================================\n  Coverage   46.75%   46.75%           \n=======================================\n  Files         165      165           \n  Lines       10531    10531           \n  Branches      959      959           \n=======================================\n  Hits         4923     4923           \n  Misses       5284     5284           \n  Partials      324      324           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2006?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2006](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2006?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eccfa64) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f7783249f5ee636177570fc3b25e7c33953a8343?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f778324) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2006      +/-   ##\n==========================================\n+ Coverage   46.75%   46.90%   +0.15%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4923     4938      +15     \n+ Misses       5284     5271      -13     \n+ Partials      324      322       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2006/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @RexXiong @zwangsheng , could you help take a look at this?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2005?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2005](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2005?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (66a6205) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7456d9a0d271098dacf373dd1378146cdb5849f2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7456d9a) will **increase** coverage by `0.14%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2005      +/-   ##\n==========================================\n+ Coverage   46.74%   46.88%   +0.14%     \n==========================================\n  Files         165      165              \n  Lines       10531    10531              \n  Branches      959      959              \n==========================================\n+ Hits         4922     4936      +14     \n+ Misses       5284     5272      -12     \n+ Partials      325      323       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2005/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2004?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2004](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2004?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6242c65) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9244cf2cf2a6f319f6a6aa78271a2f6cc48b7de3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9244cf2) will **increase** coverage by `0.10%`.\n> Report is 7 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2004      +/-   ##\n==========================================\n+ Coverage   46.64%   46.73%   +0.10%     \n==========================================\n  Files         165      165              \n  Lines       10515    10531      +16     \n  Branches      958      959       +1     \n==========================================\n+ Hits         4904     4921      +17     \n  Misses       5285     5285              \n+ Partials      326      325       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2004?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2004?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2004/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2003](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3fbf347) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0583cdb5a8ae90850103d6d0e1301ffd0a542077?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0583cdb) will **decrease** coverage by `0.06%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `85.46%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2003      +/-   ##\n==========================================\n- Coverage   46.83%   46.76%   -0.06%     \n==========================================\n  Files         165      165              \n  Lines       10563    10586      +23     \n  Branches      961      963       +2     \n==========================================\n+ Hits         4946     4950       +4     \n- Misses       5297     5312      +15     \n- Partials      320      324       +4     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/protocol/RpcNameConstants.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUnBjTmFtZUNvbnN0YW50cy5qYXZh) | `87.50% <100.00%> (+1.79%)` | :arrow_up: |\n| [.../scala/org/apache/celeborn/common/rpc/RpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbnYuc2NhbGE=) | `61.91% <100.00%> (ø)` | |\n| [.../apache/celeborn/common/rpc/netty/Dispatcher.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9EaXNwYXRjaGVyLnNjYWxh) | `33.34% <83.34%> (+1.47%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.69% <89.29%> (+0.01%)` | :arrow_up: |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | `15.70% <73.34%> (-1.51%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2003/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

Hi @onebox-li , do you have recommended dispatcher threads for different roles? We can add them to the document and config template.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2001?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2001](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2001?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (07fb979) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f6dcfaa37fed8d595eaa652ad61fb5992db4cd33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f6dcfaa) will **increase** coverage by `0.18%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2001      +/-   ##\n==========================================\n+ Coverage   46.70%   46.88%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10524    10531       +7     \n  Branches      959      959              \n==========================================\n+ Hits         4914     4936      +22     \n+ Misses       5285     5272      -13     \n+ Partials      325      323       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2001?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2001?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2001/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @waitinfuture @AngersZhuuuu 

Hi @TongWei1105 , thanks for the PR! Please run ./dev/reformat to fix the code style :)

@TongWei1105, could the title of the pull request remove the `WIP`?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2000?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#2000](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2000?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (774398d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7276dd024c45a4efb7b79b61b1c525c2d6ea9488?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7276dd0) will **decrease** coverage by `0.05%`.\n> Report is 40 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 774398d differs from pull request most recent head 888c1d9. Consider uploading reports for the commit 888c1d9 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #2000      +/-   ##\n==========================================\n- Coverage   46.90%   46.84%   -0.05%     \n==========================================\n  Files         165      165              \n  Lines       10531    10549      +18     \n  Branches      959      961       +2     \n==========================================\n+ Hits         4938     4941       +3     \n- Misses       5271     5289      +18     \n+ Partials      322      319       -3     \n```\n\n\n[see 15 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/2000/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, @waitinfuture  

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1999?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1999](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1999?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f71a6a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/640007100a2a166b42c2d4886ac149994154b7d6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6400071) will **decrease** coverage by `0.30%`.\n> Report is 10 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1999      +/-   ##\n==========================================\n- Coverage   47.03%   46.73%   -0.30%     \n==========================================\n  Files         164      165       +1     \n  Lines       10411    10532     +121     \n  Branches      968      959       -9     \n==========================================\n+ Hits         4896     4921      +25     \n- Misses       5196     5286      +90     \n- Partials      319      325       +6     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1999?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1999?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.69% <ø> (+0.11%)` | :arrow_up: |\n\n... and [19 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1999/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1997](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (277ba9e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **decrease** coverage by `0.13%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `6.25%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1997      +/-   ##\n==========================================\n- Coverage   46.71%   46.57%   -0.13%     \n==========================================\n  Files         165      165              \n  Lines       10668    10696      +28     \n  Branches      972      974       +2     \n==========================================\n- Hits         4982     4981       -1     \n- Misses       5362     5389      +27     \n- Partials      324      326       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `62.29% <100.00%> (+0.33%)` | :arrow_up: |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/server/common/http/HttpEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwRW5kcG9pbnQuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.49% <0.00%> (-0.03%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1997/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

@RexXiong, @FMX, @AngersZhuuuu, I have addressed above comments. PTAL.

@FMX, I have address above comments and change `workersAvailable`. PTAL.

@FMX, I have addressed above comments. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1996](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (943101f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/34e6c19192f387596cdd8e9544c3a5fa5b2d5f1c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (34e6c19) will **increase** coverage by `0.18%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `80.77%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1996      +/-   ##\n==========================================\n+ Coverage   46.60%   46.78%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10481    10515      +34     \n  Branches      956      958       +2     \n==========================================\n+ Hits         4884     4918      +34     \n  Misses       5273     5273              \n  Partials      324      324              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...va/org/apache/celeborn/common/meta/DiskStatus.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9EaXNrU3RhdHVzLmphdmE=) | `84.22% <100.00%> (ø)` | |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `55.65% <91.67%> (+2.01%)` | :arrow_up: |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <55.56%> (+0.83%)` | :arrow_up: |\n\n... and [13 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1996/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @SteNicholas, help to review, thanks

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1995](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (81cff6b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/34e6c19192f387596cdd8e9544c3a5fa5b2d5f1c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (34e6c19) will **increase** coverage by `0.05%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `65.39%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1995      +/-   ##\n==========================================\n+ Coverage   46.60%   46.65%   +0.05%     \n==========================================\n  Files         165      165              \n  Lines       10481    10516      +35     \n  Branches      956      959       +3     \n==========================================\n+ Hits         4884     4905      +21     \n- Misses       5273     5286      +13     \n- Partials      324      325       +1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `55.65% <91.67%> (+2.01%)` | :arrow_up: |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <55.56%> (+0.83%)` | :arrow_up: |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [12 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1995/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1994?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1994](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1994?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aff4cb3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f2d6cc7525d309b6dd741e661ac0abce7c671a29?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2d6cc7) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1994      +/-   ##\n==========================================\n- Coverage   46.61%   46.59%   -0.01%     \n==========================================\n  Files         165      165              \n  Lines       10474    10474              \n  Branches      956      956              \n==========================================\n- Hits         4881     4879       -2     \n- Misses       5271     5272       +1     \n- Partials      322      323       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1994/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1993?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1993](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1993?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (04920f7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f2d6cc7525d309b6dd741e661ac0abce7c671a29?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2d6cc7) will **increase** coverage by `0.18%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1993      +/-   ##\n==========================================\n+ Coverage   46.61%   46.78%   +0.18%     \n==========================================\n  Files         165      165              \n  Lines       10474    10481       +7     \n  Branches      956      956              \n==========================================\n+ Hits         4881     4903      +22     \n+ Misses       5271     5259      -12     \n+ Partials      322      319       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1993?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1993?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.62% <100.00%> (+0.04%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1993/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1992](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c479e4f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/640007100a2a166b42c2d4886ac149994154b7d6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6400071) will **decrease** coverage by `0.34%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `77.28%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1992      +/-   ##\n==========================================\n- Coverage   47.03%   46.69%   -0.34%     \n==========================================\n  Files         164      165       +1     \n  Lines       10411    10496      +85     \n  Branches      968      958      -10     \n==========================================\n+ Hits         4896     4900       +4     \n- Misses       5196     5272      +76     \n- Partials      319      324       +5     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `55.65% <91.67%> (+2.01%)` | :arrow_up: |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `36.58% <55.56%> (+0.83%)` | :arrow_up: |\n\n... and [6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1992/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

BTW, shall we update the `celeborn-dashboard.json` accordingly?

@waitinfuture, I have addressed above comments and updated `celeborn-dashboard.json`. PTAL.

I believe we should consider reverting this PR. The gauges (outstandingFetches/outstandingRpcs/outstandingPushes) will be redundantly incremented every time a new `TransportResponseHandler` instance is created. cc @waitinfuture @SteNicholas \r\n```\r\n$ jmap -histo:live 64958 | grep TransportResponseHandler\r\n 153:           355           5680  org.apache.celeborn.common.network.client.TransportResponseHandler$$Lambda$364/609453132\r\n 154:           355           5680  org.apache.celeborn.common.network.client.TransportResponseHandler$$Lambda$365/70336345\r\n 155:           355           5680  org.apache.celeborn.common.network.client.TransportResponseHandler$$Lambda$366/364709022\r\n 280:            30           1440  org.apache.celeborn.common.network.client.TransportResponseHandler\r\n 580:            12            192  org.apache.celeborn.common.network.client.TransportResponseHandler$$Lambda$443/1759640105\r\n```\r\n\r\n```\r\ncurl http://<ip>:<port>/metrics/prometheus | grep OutstandingPushCount | wc -l\r\n1361\r\n```\r\n

reverted in https://github.com/apache/incubator-celeborn/pull/2032

thanks, merging to main(v0.4.0)/branch-0.3(v0.3.2).

@cfmcgrady @cxzl25 @xleoken Thank you!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1989?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1989](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1989?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f3edc0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bcf89da7ddb38756fe8a988ffb557cf65f1c7018?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bcf89da) will **increase** coverage by `0.02%`.\n> Report is 16 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 5f3edc0 differs from pull request most recent head 0fbbdd9. Consider uploading reports for the commit 0fbbdd9 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1989      +/-   ##\n==========================================\n+ Coverage   47.02%   47.03%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10368    10411      +43     \n  Branches      957      968      +11     \n==========================================\n+ Hits         4874     4896      +22     \n- Misses       5178     5196      +18     \n- Partials      316      319       +3     \n```\n\n\n[see 8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1989/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture @cfmcgrady Thank you!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1988?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1988](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1988?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (383a74c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c97628c510f7b8f0a9ca24c197679eb58e7f16f3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c97628c) will **increase** coverage by `0.02%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1988      +/-   ##\n==========================================\n+ Coverage   46.95%   46.97%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10380    10387       +7     \n  Branches      959      959              \n==========================================\n+ Hits         4873     4878       +5     \n- Misses       5189     5190       +1     \n- Partials      318      319       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1988/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1987?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1987](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1987?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (36b4c71) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b3c108f6eadc491f4eadc43e27be9d1068f92f2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b3c108) will **increase** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1987      +/-   ##\n==========================================\n+ Coverage   46.90%   47.00%   +0.11%     \n==========================================\n  Files         164      164              \n  Lines       10411    10411              \n  Branches      968      968              \n==========================================\n+ Hits         4882     4893      +11     \n+ Misses       5208     5197      -11     \n  Partials      321      321              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1987/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merging to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1986](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ab6196) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/dd65e74f997ec9423773d863a5580ad828b0083f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (dd65e74) will **decrease** coverage by `0.35%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 1ab6196 differs from pull request most recent head 4647525. Consider uploading reports for the commit 4647525 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1986      +/-   ##\n==========================================\n- Coverage   46.97%   46.62%   -0.35%     \n==========================================\n  Files         164      165       +1     \n  Lines       10387    10474      +87     \n  Branches      959      956       -3     \n==========================================\n+ Hits         4878     4882       +4     \n- Misses       5190     5271      +81     \n- Partials      319      321       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/server/common/http/HttpEndpoint.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwRW5kcG9pbnQuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1986/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@AngersZhuuuu, could you help to review this pull request? This pull request helps users with Rest API usage to get available API providers.

Thanks, merging to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1985?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1985](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1985?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a2adb54) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/74a5acfd7b5d9954f08bfea3280ba162bbbe240e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (74a5acf) will **decrease** coverage by `0.14%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1985      +/-   ##\n==========================================\n- Coverage   47.10%   46.95%   -0.14%     \n==========================================\n  Files         164      164              \n  Lines       10380    10380              \n  Branches      959      959              \n==========================================\n- Hits         4888     4873      -15     \n- Misses       5178     5189      +11     \n- Partials      314      318       +4     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1985/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

BTW, are you interested in testing JDK 21?

> BTW, are you interested in testing JDK 21?\r\n\r\n@pan3793, I will follow the JDK 17 test progress to test JDK 21.

Merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1984](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (86326e4) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/37a8a09f92588536abc9417d48675a6c6fe6c538?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (37a8a09) will **decrease** coverage by `0.21%`.\n> Report is 4 commits behind head on branch-0.3.\n> The diff coverage is `50.00%`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #1984      +/-   ##\n==============================================\n- Coverage       46.21%   46.00%   -0.21%     \n==============================================\n  Files             165      165              \n  Lines           10364    10366       +2     \n  Branches          959      959              \n==============================================\n- Hits             4789     4768      -21     \n- Misses           5264     5281      +17     \n- Partials          311      317       +6     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/client/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3Rlck5vdExlYWRlckV4Y2VwdGlvbi5qYXZh) | `83.34% <100.00%> (+83.34%)` | :arrow_up: |\n| [...born/common/haclient/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvTWFzdGVyTm90TGVhZGVyRXhjZXB0aW9uLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1984/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1983](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8bf8069) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/62ba44d8daf39ab13726a3579e0adc2e47fa226f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (62ba44d) will **decrease** coverage by `0.16%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `75.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1983      +/-   ##\n==========================================\n- Coverage   47.13%   46.96%   -0.16%     \n==========================================\n  Files         164      164              \n  Lines       10369    10380      +11     \n  Branches      957      959       +2     \n==========================================\n- Hits         4886     4874      -12     \n- Misses       5167     5189      +22     \n- Partials      316      317       +1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (ø)` | |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `84.62% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.56% <100.00%> (ø)` | |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `39.86% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1983/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1982](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (33f74cb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **decrease** coverage by `0.12%`.\n> Report is 25 commits behind head on main.\n> The diff coverage is `80.96%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1982      +/-   ##\n==========================================\n- Coverage   46.96%   46.83%   -0.12%     \n==========================================\n  Files         164      164              \n  Lines       10362    10430      +68     \n  Branches      957      968      +11     \n==========================================\n+ Hits         4865     4884      +19     \n- Misses       5179     5222      +43     \n- Partials      318      324       +6     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `43.58% <100.00%> (+3.72%)` | :arrow_up: |\n| [...orn/common/network/protocol/ChunkFetchFailure.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoRmFpbHVyZS5qYXZh) | `19.05% <ø> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoUmVxdWVzdC5qYXZh) | `0.00% <ø> (-64.28%)` | :arrow_down: |\n| [...orn/common/network/protocol/ChunkFetchSuccess.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoU3VjY2Vzcy5qYXZh) | `43.48% <ø> (ø)` | |\n| [...born/common/network/protocol/StreamChunkSlice.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9TdHJlYW1DaHVua1NsaWNlLmphdmE=) | `88.38% <100.00%> (+2.27%)` | :arrow_up: |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `65.79% <33.34%> (-2.78%)` | :arrow_down: |\n| [...rn/common/network/protocol/TransportableError.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRhYmxlRXJyb3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [14 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1982/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@RexXiong, @FMX, could you help to review this pull request?

Thanks, merge to main

cc @FMX, please take a look if have time :)

This check failed a little strangely because those places were not changed. Can someone help to have a look on this or rerun the check? Thanks.

Failed checks have no connection with this PR, I triggered the checks rerun.

After I ran CI locally, I found that this branch could not pass while the main branch could pass. There is something wrong.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1981?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1981](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1981?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (20e4baf) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/62ba44d8daf39ab13726a3579e0adc2e47fa226f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (62ba44d) will **decrease** coverage by `0.19%`.\n> Report is 6 commits behind head on main.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1981      +/-   ##\n==========================================\n- Coverage   47.13%   46.93%   -0.19%     \n==========================================\n  Files         164      164              \n  Lines       10369    10383      +14     \n  Branches      957      959       +2     \n==========================================\n- Hits         4886     4872      -14     \n- Misses       5167     5191      +24     \n- Partials      316      320       +4     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1981?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1981?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.75% <50.00%> (-0.03%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1981/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1980?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1980](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1980?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a63203f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/438cdf6747a240a5fd6a59e5f8a8d2bfeaac7076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (438cdf6) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1980      +/-   ##\n==========================================\n+ Coverage   46.93%   46.95%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10380    10380              \n  Branches      959      959              \n==========================================\n+ Hits         4871     4873       +2     \n+ Misses       5190     5189       -1     \n+ Partials      319      318       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1980/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merging to main(v0.4.0)

Thanks. @cfmcgrady @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1979?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1979](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1979?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (665c86b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/438cdf6747a240a5fd6a59e5f8a8d2bfeaac7076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (438cdf6) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1979      +/-   ##\n==========================================\n+ Coverage   46.93%   46.95%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10380    10380              \n  Branches      959      959              \n==========================================\n+ Hits         4871     4873       +2     \n+ Misses       5190     5189       -1     \n+ Partials      319      318       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1979/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1978](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2b577da) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6fa669748c565454602d4d44ae179d889fa00495?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6fa6697) will **decrease** coverage by `0.08%`.\n> Report is 11 commits behind head on main.\n> The diff coverage is `34.38%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1978      +/-   ##\n==========================================\n- Coverage   47.01%   46.92%   -0.08%     \n==========================================\n  Files         164      164              \n  Lines       10368    10411      +43     \n  Branches      957      968      +11     \n==========================================\n+ Hits         4873     4884      +11     \n- Misses       5178     5207      +29     \n- Partials      317      320       +3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `40.61% <22.23%> (+0.75%)` | :arrow_up: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `53.65% <36.37%> (-5.17%)` | :arrow_down: |\n\n... and [8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1978/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1977?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1977](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1977?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0529e38) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **decrease** coverage by `0.01%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1977      +/-   ##\n==========================================\n- Coverage   46.96%   46.94%   -0.01%     \n==========================================\n  Files         164      164              \n  Lines       10362    10380      +18     \n  Branches      957      959       +2     \n==========================================\n+ Hits         4865     4872       +7     \n- Misses       5179     5190      +11     \n  Partials      318      318              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1977?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1977?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1977/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks @SteNicholas and all, merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1976?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1976](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1976?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ed5dd11) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a5dfd67d5b9bcb7d5da59f441ed1d60b4bc27cd3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a5dfd67) will **increase** coverage by `0.19%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1976      +/-   ##\n==========================================\n+ Coverage   46.71%   46.90%   +0.19%     \n==========================================\n  Files         165      165              \n  Lines       10532    10531       -1     \n  Branches      959      959              \n==========================================\n+ Hits         4919     4938      +19     \n+ Misses       5287     5271      -16     \n+ Partials      326      322       -4     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1976/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@FMX, @RexXiong, @AngersZhuuuu, could you help to review this pull request? Thanks.

> PartitionTotalWritten and partitionTotalFileCount are used to calculate the average shuffle size for all partitions handled by Celeborn and will be set to 0 periodically. This PR needs some changes.\r\n\r\nYou can get the current partition size and partition file count from the latest heartbeat snapshots if you want to get the current partition size and partition file count.

@RexXiong, @FMX, does it need to add `Running` in metric name, mentioned by @AngersZhuuuu? Meanwhile, should the Rest API provider like `/applications` also add `Running` in path? cc @AngersZhuuuu 

@SteNicholas You can get the active shuffle size and active shuffle file count from the latest worker heartbeat snapshots.\r\n![a](https://github.com/apache/incubator-celeborn/assets/4150993/36c05edc-557e-4d82-90b1-fbca5596a5e8)\r\n![b](https://github.com/apache/incubator-celeborn/assets/4150993/5cdfe74a-f412-4133-9fa6-5fa983023ec5)\r\n

@FMX, I have addressed comments and update to current partition size and partition file count from `updateWorkerHeartbeatMeta`. PTAL.

@FMX, I have used `statusSystem.workers` to calculate the shuffle size and file count with `ResourceConsumption`, which workers include the latest `WorkerInfo` with the updated `userResourceConsumption`. PTAL.

cc @liying919 @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1975?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1975](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1975?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d3c0503) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bcf89da7ddb38756fe8a988ffb557cf65f1c7018?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bcf89da) will **decrease** coverage by `0.00%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1975      +/-   ##\n==========================================\n- Coverage   47.02%   47.01%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10368    10369       +1     \n  Branches      957      957              \n==========================================\n  Hits         4874     4874              \n  Misses       5178     5178              \n- Partials      316      317       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1975/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I tested this patch on a four-worker cluster and ran TPC-DS and Terasort.\r\nBefore this patch,\r\n<img width="1366" alt="截屏2023-10-18 14 34 26" src="https://github.com/apache/incubator-celeborn/assets/4150993/55c03045-eee4-4474-89ad-9be72f6ff3f9">\r\nAfter this patch,\r\n<img width="1285" alt="截屏2023-10-18 16 55 06" src="https://github.com/apache/incubator-celeborn/assets/4150993/dd68a043-7149-402c-b97d-015a36b2fc46">\r\nIgnore the worker core-1-2, it\

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1974?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1974](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1974?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c4a8230) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bcf89da7ddb38756fe8a988ffb557cf65f1c7018?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bcf89da) will **decrease** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head c4a8230 differs from pull request most recent head e5d5780. Consider uploading reports for the commit e5d5780 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1974      +/-   ##\n==========================================\n- Coverage   47.02%   46.99%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10368    10368              \n  Branches      957      957              \n==========================================\n- Hits         4874     4871       -3     \n- Misses       5178     5179       +1     \n- Partials      316      318       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1974?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1974?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.56% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1974/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1973?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1973](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1973?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b7cdb60) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **increase** coverage by `0.15%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `55.56%`.\n\n> :exclamation: Current head b7cdb60 differs from pull request most recent head b39c37a. Consider uploading reports for the commit b39c37a to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1973      +/-   ##\n==========================================\n+ Coverage   46.96%   47.10%   +0.15%     \n==========================================\n  Files         164      164              \n  Lines       10362    10368       +6     \n  Branches      957      955       -2     \n==========================================\n+ Hits         4865     4883      +18     \n+ Misses       5179     5168      -11     \n+ Partials      318      317       -1     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1973?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1973?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `72.50% <55.56%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1973/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1972?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1972](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1972?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0a7aa40) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **increase** coverage by `0.15%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 0a7aa40 differs from pull request most recent head 5559e4b. Consider uploading reports for the commit 5559e4b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1972      +/-   ##\n==========================================\n+ Coverage   46.96%   47.11%   +0.15%     \n==========================================\n  Files         164      164              \n  Lines       10362    10363       +1     \n  Branches      957      957              \n==========================================\n+ Hits         4865     4881      +16     \n+ Misses       5179     5166      -13     \n+ Partials      318      316       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1972?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/client/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1972?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3Rlck5vdExlYWRlckV4Y2VwdGlvbi5qYXZh) | `83.34% <100.00%> (-16.66%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1972/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 Old client may encounter compatibility problem as the serialVersionUID may be different when MasterNotLeaderException changed. We need keep the serialVersionUID consistent first.

@RexXiong, I have generated the `serialVersionUID` with serialver tool of JDK8 and JDK11, which generates the same `serialVersionUID` with -2552475565785098271L. PTAL.

merge to main/0.3

Hi @SteNicholas , seems this PR breaks branch-0.3 compilation, PTAL

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1971?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1971](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1971?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2267aed) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **increase** coverage by `0.19%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1971      +/-   ##\n==========================================\n+ Coverage   46.96%   47.14%   +0.19%     \n==========================================\n  Files         164      164              \n  Lines       10362    10362              \n  Branches      957      957              \n==========================================\n+ Hits         4865     4884      +19     \n+ Misses       5179     5165      -14     \n+ Partials      318      313       -5     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1971?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1971?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.53% <50.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1971/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1970?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1970](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1970?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (35e8b05) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **increase** coverage by `0.03%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1970      +/-   ##\n==========================================\n+ Coverage   46.96%   46.98%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10362    10362              \n  Branches      957      957              \n==========================================\n+ Hits         4865     4868       +3     \n+ Misses       5179     5178       -1     \n+ Partials      318      316       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1970?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1970?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `58.83% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1970/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture this PR is limited to address certain worker CPU load issues we encountered in production, I think we can revise the other places in the follow-up PR.

> @waitinfuture this PR is limited to address certain worker CPU load issues we encountered in production, I think we can revise the other places in the follow-up PR.\r\n\r\nYeah, no problem.

FYI @SteNicholas 

Merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1969?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1969](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1969?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (393e4a3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/34e6c19192f387596cdd8e9544c3a5fa5b2d5f1c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (34e6c19) will **increase** coverage by `0.42%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 393e4a3 differs from pull request most recent head d92688e. Consider uploading reports for the commit d92688e to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1969      +/-   ##\n==========================================\n+ Coverage   46.60%   47.02%   +0.42%     \n==========================================\n  Files         165      164       -1     \n  Lines       10481    10395      -86     \n  Branches      956      959       +3     \n==========================================\n+ Hits         4884     4887       +3     \n+ Misses       5273     5190      -83     \n+ Partials      324      318       -6     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1969?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1969?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.64% <100.00%> (+0.02%)` | :arrow_up: |\n\n... and [9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1969/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1968?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1968](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1968?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5e74687) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/785a035eca94d55b8694c2f607efdd78cb33c417?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (785a035) will **increase** coverage by `0.48%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1968      +/-   ##\n==========================================\n+ Coverage   46.51%   46.99%   +0.48%     \n==========================================\n  Files         164      164              \n  Lines       10341    10368      +27     \n  Branches      954      957       +3     \n==========================================\n+ Hits         4809     4871      +62     \n+ Misses       5218     5179      -39     \n- Partials      314      318       +4     \n```\n\n\n[see 15 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1968/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

\r\nplease run `./dev/reformat` to automatically reformat code style.\r\n\r\n

> please run `./dev/reformat` to automatically reformat code style.\r\n\r\nThank you. `dev/reformat` need some dependencies and download them very slowly.

@waitinfuture @cfmcgrady Thank you!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1967?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1967](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1967?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ad6634) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4465a9229b94ab683b8fb5b6e4e13aafd5996b38?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4465a92) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1967      +/-   ##\n==========================================\n+ Coverage   46.71%   46.84%   +0.14%     \n==========================================\n  Files         165      165              \n  Lines       10668    10668              \n  Branches      972      972              \n==========================================\n+ Hits         4982     4996      +14     \n+ Misses       5362     5350      -12     \n+ Partials      324      322       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1967/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: Codecov offers a browser extension for seamless coverage viewing on GitHub. Try it in [Chrome](https://chrome.google.com/webstore/detail/codecov/gedikamndpbemklijjkncpnolildpbgo) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/codecov/) today!\n

cc @pan3793 @cfmcgrady 

I wrote a script and found that SBT\

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1966?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1966](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1966?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f56e439) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/56276e910f3489bc070846a19813e322b590fd17?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56276e9) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1966      +/-   ##\n==========================================\n+ Coverage   46.96%   47.11%   +0.16%     \n==========================================\n  Files         164      164              \n  Lines       10362    10362              \n  Branches      957      957              \n==========================================\n+ Hits         4865     4881      +16     \n+ Misses       5179     5166      -13     \n+ Partials      318      315       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1966/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @FMX could you take a look at this PR?

Hi @FMX, help to take a review again when free, thanks

Hi @waitinfuture, help to take a review when free, thanks

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1965](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ea69b7e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/84ef527181a58cec829fcefd27fdc65c72831a18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (84ef527) will **increase** coverage by `0.67%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head ea69b7e differs from pull request most recent head 122d43c. Consider uploading reports for the commit 122d43c to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1965      +/-   ##\n==========================================\n+ Coverage   46.50%   47.16%   +0.67%     \n==========================================\n  Files         164      164              \n  Lines       10341    10367      +26     \n  Branches      954      957       +3     \n==========================================\n+ Hits         4808     4889      +81     \n+ Misses       5218     5165      -53     \n+ Partials      315      313       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.56% <100.00%> (+0.03%)` | :arrow_up: |\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | `10.82% <ø> (-1.18%)` | :arrow_down: |\n\n... and [14 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1965/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Should we also change the doc about RESTFUL API? @cxzl25 cc @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1964?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1964](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1964?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d395548) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b2412d077400bbc59aa65cde13e2c855c65e1988?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b2412d0) will **decrease** coverage by `0.09%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1964      +/-   ##\n==========================================\n- Coverage   47.10%   47.00%   -0.09%     \n==========================================\n  Files         164      164              \n  Lines       10361    10369       +8     \n  Branches      956      957       +1     \n==========================================\n- Hits         4879     4873       -6     \n- Misses       5166     5178      +12     \n- Partials      316      318       +2     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1964/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I want to know if the metrics name will be different in different GC?

> I want to know if the metrics name will be different in different GC?\r\n\r\nNo, It will only change related metrics labels. For specific details, you can refer to https://github.com/apache/incubator-celeborn/pull/1939. When use ParNew + CMS, the JVM Memory Pools / GC rows look like below:\r\n![image](https://github.com/apache/incubator-celeborn/assets/19429353/2e2ceff9-201a-436d-a360-50036fa01a46)\r\n![image](https://github.com/apache/incubator-celeborn/assets/19429353/86c9a543-8bae-4b30-860d-774a3b1b6692)\r\n\r\n

How about G1? I remember when I use G1 in a test cluster, it was not same in origin code

Can you provide a screanshot when it shows the whole cluster? Or it only support show one worker?

> Can you provide a screanshot when it shows the whole cluster? Or it only support show one worker?\r\n\r\nThis template now just supports one instance. For JVM metrics, one panel often contains serveal metrics so that we can easily obtain information by comparing related metrics. The cluster perspective may make the diagram a mess. Users can customize the jvm metrics panel of the entire cluster they care about or use explore. But I will change the variable to be multi-selected later to make the template easier to use.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1963?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1963](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1963?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e979c3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c4135dc1b1e8fabf535da63107e66072c408885c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c4135dc) will **increase** coverage by `0.18%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1963      +/-   ##\n==========================================\n+ Coverage   46.96%   47.13%   +0.18%     \n==========================================\n  Files         164      164              \n  Lines       10361    10361              \n  Branches      956      956              \n==========================================\n+ Hits         4865     4883      +18     \n+ Misses       5178     5164      -14     \n+ Partials      318      314       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1963/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merge to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1962?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1962](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1962?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (572cb26) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c4135dc1b1e8fabf535da63107e66072c408885c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c4135dc) will **increase** coverage by `0.16%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `82.36%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1962      +/-   ##\n==========================================\n+ Coverage   46.96%   47.12%   +0.16%     \n==========================================\n  Files         164      164              \n  Lines       10361    10362       +1     \n  Branches      956      957       +1     \n==========================================\n+ Hits         4865     4882      +17     \n+ Misses       5178     5166      -12     \n+ Partials      318      314       -4     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1962?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1962?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | `35.79% <82.36%> (-0.38%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1962/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

@jiaoqingbo, I have sent `PbBacklogAnnouncement` instead of `BacklogAnnouncement` in #1905. But there is compatibility  problem in service for this. This could only send `BacklogAnnouncement` at present.\r\ncc @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1961?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1961](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1961?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (83d5046) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c4135dc1b1e8fabf535da63107e66072c408885c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c4135dc) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1961      +/-   ##\n==========================================\n+ Coverage   46.96%   47.10%   +0.14%     \n==========================================\n  Files         164      164              \n  Lines       10361    10361              \n  Branches      956      956              \n==========================================\n+ Hits         4865     4879      +14     \n+ Misses       5178     5166      -12     \n+ Partials      318      316       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1961/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> @jiaoqingbo, I have sent `PbBacklogAnnouncement` instead of `BacklogAnnouncement` in #1905. But there is compatibility problem in service for this. This could only send `BacklogAnnouncement` at present. cc @RexXiong\r\n\r\nIn ReadClientHandler, the following code converts PbBacklogAnnouncement to BacklogAnnouncement. Why is there a compatibility issue? Why does BufferStreamEnd work? Can you explain it in detail? @SteNicholas \r\n\r\n      case RPC_REQUEST:\r\n        try {\r\n          TransportMessage transportMessage =\r\n              TransportMessage.fromByteBuffer(msg.body().nioByteBuffer());\r\n          switch (transportMessage.getMessageTypeValue()) {\r\n            case BACKLOG_ANNOUNCEMENT_VALUE:\r\n              receive(client, BacklogAnnouncement.fromProto(transportMessage.getParsedPayload()));\r\n              break;

> > @jiaoqingbo, I have sent `PbBacklogAnnouncement` instead of `BacklogAnnouncement` in #1905. But there is compatibility problem in service for this. This could only send `BacklogAnnouncement` at present. cc @RexXiong\r\n> \r\n> In ReadClientHandler, the following code converts PbBacklogAnnouncement to BacklogAnnouncement. Why is there a compatibility issue? Why does BufferStreamEnd work? Can you explain it in detail? @SteNicholas\r\n> \r\n> ```\r\n>   case RPC_REQUEST:\r\n>     try {\r\n>       TransportMessage transportMessage =\r\n>           TransportMessage.fromByteBuffer(msg.body().nioByteBuffer());\r\n>       switch (transportMessage.getMessageTypeValue()) {\r\n>         case BACKLOG_ANNOUNCEMENT_VALUE:\r\n>           receive(client, BacklogAnnouncement.fromProto(transportMessage.getParsedPayload()));\r\n>           break;\r\n> ```\r\n\r\nClient jar in Spark or Flink might not be able to upgrade. So this RPC can not be convert to PB recently.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1960?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`a734b8c`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a734b8cb790756547c822f7b80b91cde8139ab74?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.54% compared to head [(`d13ece2`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1960?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.97%.\n> Report is 149 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1960      +/-   ##\n==========================================\n+ Coverage   46.54%   46.97%   +0.44%     \n==========================================\n  Files         164      164              \n  Lines       10341    10361      +20     \n  Branches      954      956       +2     \n==========================================\n+ Hits         4812     4866      +54     \n+ Misses       5217     5178      -39     \n- Partials      312      317       +5     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1960?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

@waitinfuture, @RexXiong, could you help to review this change?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

IMO we should separate partitionlocations that should trigger revive from those that should not based on their disks status.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1958?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1958](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1958?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (07880fb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a734b8cb790756547c822f7b80b91cde8139ab74?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a734b8c) will **increase** coverage by `0.44%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1958      +/-   ##\n==========================================\n+ Coverage   46.54%   46.97%   +0.44%     \n==========================================\n  Files         164      164              \n  Lines       10341    10361      +20     \n  Branches      954      956       +2     \n==========================================\n+ Hits         4812     4866      +54     \n+ Misses       5217     5178      -39     \n- Partials      312      317       +5     \n```\n\n\n[see 11 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1958/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @xleoken , thanks for the PR! Could you set your email in your github account so that the project can track? Thanks!

> Hi @xleoken , thanks for the PR! Could you set your email in your github account so that the project can track? Thanks!\r\n\r\nWelcome, I got.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1956?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1956](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1956?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6da2021) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/95c9ccfc3e13c68f7bcdb1d3c06859b915501e2e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (95c9ccf) will **increase** coverage by `0.04%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1956      +/-   ##\n==========================================\n+ Coverage   46.34%   46.38%   +0.04%     \n==========================================\n  Files         164      164              \n  Lines       10341    10341              \n  Branches      954      954              \n==========================================\n+ Hits         4792     4796       +4     \n+ Misses       5233     5230       -3     \n+ Partials      316      315       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1956/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1955?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1955](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1955?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e2b24c1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ccea1bda395107cc1460577e0f2d952b6ca1e35e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ccea1bd) will **decrease** coverage by `0.09%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1955      +/-   ##\n==========================================\n- Coverage   46.34%   46.25%   -0.09%     \n==========================================\n  Files         164      164              \n  Lines       10341    10341              \n  Branches      954      954              \n==========================================\n- Hits         4792     4782      -10     \n- Misses       5232     5242      +10     \n  Partials      317      317              \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1955/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

glutensupport.md and docs/README.md should also be updated

> glutensupport.md and docs/README.md should also be updated\r\n\r\n`glutensupport.md` is updated.\r\n\r\n`docs/README.md` is the quick start guide, I think we should provide a conservative guide.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1954?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1954](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1954?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (14e552b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ccea1bda395107cc1460577e0f2d952b6ca1e35e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ccea1bd) will **increase** coverage by `0.08%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1954      +/-   ##\n==========================================\n+ Coverage   46.34%   46.42%   +0.08%     \n==========================================\n  Files         164      164              \n  Lines       10341    10341              \n  Branches      954      954              \n==========================================\n+ Hits         4792     4800       +8     \n+ Misses       5232     5227       -5     \n+ Partials      317      314       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1954?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1954?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `58.83% <100.00%> (+0.50%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1954/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Fortunately when `checkFetchTimeout` is true, `checkPushTimeout` will also be true. cc @onebox-li 

> Fortunately when `checkFetchTimeout` is true, `checkPushTimeout` will also be true. cc @onebox-li\r\n\r\nThank you for the explanation, I will close this PR

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1953?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1953](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1953?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1419a01) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ba0f0ed0b3a3797dd18a4f46418f0df435608a86?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ba0f0ed) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #1953      +/-   ##\n==============================================\n+ Coverage       46.03%   46.15%   +0.12%     \n==============================================\n  Files             165      165              \n  Lines           10363    10363              \n  Branches          958      958              \n==============================================\n+ Hits             4770     4782      +12     \n+ Misses           5277     5266      -11     \n+ Partials          316      315       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1953/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

merged to 0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1951?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1951](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1951?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f1e7943) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/84ef527181a58cec829fcefd27fdc65c72831a18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (84ef527) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1951      +/-   ##\n==========================================\n- Coverage   46.50%   46.48%   -0.01%     \n==========================================\n  Files         164      164              \n  Lines       10341    10341              \n  Branches      954      954              \n==========================================\n- Hits         4808     4806       -2     \n- Misses       5218     5219       +1     \n- Partials      315      316       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1951/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @waitinfuture @onebox-li @cxzl25 

Merged to main/0.3

cc @cxzl25 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1948?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1948](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1948?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0eaa449) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78553f141822dbe415481e074296684948168cd9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (78553f1) will **increase** coverage by `0.04%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 0eaa449 differs from pull request most recent head 0ed8cf2. Consider uploading reports for the commit 0ed8cf2 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1948      +/-   ##\n==========================================\n+ Coverage   46.35%   46.39%   +0.04%     \n==========================================\n  Files         164      164              \n  Lines       10338    10338              \n  Branches      953      953              \n==========================================\n+ Hits         4791     4795       +4     \n+ Misses       5229     5227       -2     \n+ Partials      318      316       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1948?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1948?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.53% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1948/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1947](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (56c0c34) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a9ed7f6a3996148653eaf416900af30de8a83444?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a9ed7f6) will **decrease** coverage by `0.16%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `25.00%`.\n\n> :exclamation: Current head 56c0c34 differs from pull request most recent head 4ec8c7b. Consider uploading reports for the commit 4ec8c7b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1947      +/-   ##\n==========================================\n- Coverage   46.54%   46.37%   -0.16%     \n==========================================\n  Files         164      164              \n  Lines       10337    10338       +1     \n  Branches      953      953              \n==========================================\n- Hits         4810     4793      -17     \n- Misses       5213     5228      +15     \n- Partials      314      317       +3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `70.97% <100.00%> (ø)` | |\n| [...pache/celeborn/server/common/http/HttpServer.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwU2VydmVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1947/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1946](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (68b62f5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ef4fc51d5f2d9d1a707e06cac2c64f3a07082e42?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ef4fc51) will **increase** coverage by `0.16%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1946      +/-   ##\n==========================================\n+ Coverage   46.37%   46.53%   +0.16%     \n==========================================\n  Files         164      164              \n  Lines       10341    10341              \n  Branches      953      954       +1     \n==========================================\n+ Hits         4795     4811      +16     \n+ Misses       5230     5217      -13     \n+ Partials      316      313       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1946/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1945?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1945](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1945?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4156abc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ef4fc51d5f2d9d1a707e06cac2c64f3a07082e42?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ef4fc51) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1945   +/-   ##\n=======================================\n  Coverage   46.37%   46.37%           \n=======================================\n  Files         164      164           \n  Lines       10341    10341           \n  Branches      953      953           \n=======================================\n  Hits         4795     4795           \n  Misses       5230     5230           \n  Partials      316      316           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> ... the thread started by Raft is not a daemon ...\r\n\r\nis it configurable?

Merged to main/0.3

> > ... the thread started by Raft is not a daemon ...\r\n> \r\n> is it configurable?\r\n\r\nLooking at the source code for ratis, there is no support for configuring a thread factory with a daemon.\r\n\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1944?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1944](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1944?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (34bd4c9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/333db39713144693365c836f3b0453769f56a01b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (333db39) will **decrease** coverage by `0.11%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1944      +/-   ##\n==========================================\n- Coverage   46.58%   46.46%   -0.11%     \n==========================================\n  Files         164      164              \n  Lines       10293    10293              \n  Branches      938      938              \n==========================================\n- Hits         4794     4782      -12     \n- Misses       5185     5196      +11     \n- Partials      314      315       +1     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1944/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1941](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e65407d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/333db39713144693365c836f3b0453769f56a01b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (333db39) will **decrease** coverage by `0.05%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `20.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1941      +/-   ##\n==========================================\n- Coverage   46.58%   46.53%   -0.05%     \n==========================================\n  Files         164      164              \n  Lines       10293    10337      +44     \n  Branches      938      953      +15     \n==========================================\n+ Hits         4794     4809      +15     \n- Misses       5185     5214      +29     \n  Partials      314      314              \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | `75.56% <100.00%> (ø)` | |\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1941/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1940?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1940](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1940?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1e74b1d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/333db39713144693365c836f3b0453769f56a01b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (333db39) will **decrease** coverage by `0.07%`.\n> The diff coverage is `73.53%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1940      +/-   ##\n==========================================\n- Coverage   46.58%   46.51%   -0.07%     \n==========================================\n  Files         164      164              \n  Lines       10293    10309      +16     \n  Branches      938      948      +10     \n==========================================\n  Hits         4794     4794              \n- Misses       5185     5199      +14     \n- Partials      314      316       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1940?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1940?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `58.34% <73.53%> (-4.96%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

If this pr is approved, I will add a simple grafana template for [CELEBORN-688](Chttps://issues.apache.org/jira/projects/CELEBORN/issues/CELEBORN-688) according to this change later.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1939?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1939](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1939?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ab044ae) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa9dfd05667275b8c2a3089ff3dcf15389348f8b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa9dfd0) will **increase** coverage by `0.01%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1939      +/-   ##\n==========================================\n+ Coverage   46.60%   46.60%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10293    10325      +32     \n  Branches      938      943       +5     \n==========================================\n+ Hits         4796     4811      +15     \n- Misses       5184     5203      +19     \n+ Partials      313      311       -2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1939?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/metrics/source/JVMSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1939?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0pWTVNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1939/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@onebox-li  Hi, there is an issue after this PR. Prometheus will stop receiving metrics output and report an error.\r\n```\r\nts=2023-10-11T10:30:57.088Z caller=scrape.go:1399 level=debug component="scrape manager" scrape_pool=RSS target=http://core-1-1:9096/metrics/prometheus msg="Append failed" err="strconv.ParseFloat: parsing \\"[]\\": invalid syntax while parsing: \\"metrics_jvm_thread_deadlocks_Value{role=\\\\\\"Worker\\\\\\"} []\\""\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1938?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1938](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1938?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d54f9da) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa9dfd05667275b8c2a3089ff3dcf15389348f8b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa9dfd0) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1938      +/-   ##\n==========================================\n- Coverage   46.60%   46.59%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10293    10293              \n  Branches      938      938              \n==========================================\n- Hits         4796     4795       -1     \n  Misses       5184     5184              \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1938/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1937?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1937](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1937?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f6fb3ba) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3a41db360b1b21c5b4017eceece2d3b5bd0ffda6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3a41db3) will **decrease** coverage by `0.23%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1937      +/-   ##\n==========================================\n- Coverage   46.72%   46.48%   -0.23%     \n==========================================\n  Files         164      164              \n  Lines       10293    10293              \n  Branches      938      938              \n==========================================\n- Hits         4808     4784      -24     \n- Misses       5174     5194      +20     \n- Partials      311      315       +4     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1937/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

+CC @otterc

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1936?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1936](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1936?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (15107b8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/55e85055b80111b6f3662474c8fd500bf6589f2a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (55e8505) will **decrease** coverage by `0.06%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1936      +/-   ##\n==========================================\n- Coverage   46.66%   46.60%   -0.06%     \n==========================================\n  Files         164      164              \n  Lines       10283    10293      +10     \n  Branches      938      938              \n==========================================\n- Hits         4798     4796       -2     \n- Misses       5171     5184      +13     \n+ Partials      314      313       -1     \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1936/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks! Merged to main.

Thanks for the reviews @waitinfuture, @cfmcgrady and @FMX !

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1935?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1935](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1935?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (25f337a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/55e85055b80111b6f3662474c8fd500bf6589f2a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (55e8505) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1935      +/-   ##\n==========================================\n- Coverage   46.66%   46.65%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10283    10283              \n  Branches      938      938              \n==========================================\n- Hits         4798     4797       -1     \n- Misses       5171     5172       +1     \n  Partials      314      314              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1935/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1934?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1934](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1934?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1c811f4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b0addb93484b5c78b47d194251838748e4dd67f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b0addb) will **decrease** coverage by `0.01%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1934      +/-   ##\n==========================================\n- Coverage   46.68%   46.66%   -0.01%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n- Hits         4798     4796       -2     \n- Misses       5168     5170       +2     \n  Partials      314      314              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1934?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1934?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.53% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1934/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Looks like this config is no longer used after https://github.com/apache/incubator-celeborn/pull/1907. 

> Looks like this config is no longer used after #1907.\r\n\r\n+1 for removing this config\r\n\r\ncc @pan3793 

Since the config name changed, shall we add it in migration doc?

> Since the config name changed, shall we add it in migration doc?\r\n\r\nthe config was introduced in version 0.3.2, and v0.3.2 is not released yet, so we do need to do this.

@pjfanning I would appreciate it if you could take a look at this license issue fix

LGTM, thanks! @FMX could you also TAL?

> @pjfanning I would appreciate it if you could take a look at this license issue fix\r\n\r\nDefinitely looks to be on the right track. When this is complete and merged, I can have a look at the jars.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1933?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1933](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1933?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ccfbc67) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a9ed7f6a3996148653eaf416900af30de8a83444?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a9ed7f6) will **decrease** coverage by `0.17%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head ccfbc67 differs from pull request most recent head 8343035. Consider uploading reports for the commit 8343035 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1933      +/-   ##\n==========================================\n- Coverage   46.54%   46.36%   -0.17%     \n==========================================\n  Files         164      164              \n  Lines       10337    10337              \n  Branches      953      953              \n==========================================\n- Hits         4810     4792      -18     \n- Misses       5213     5227      +14     \n- Partials      314      318       +4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1933/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1932](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6c86e01) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2407cae43ab44b6d7a7394736e7c12cbbd51ebb5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2407cae) will **increase** coverage by `0.41%`.\n> Report is 22 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1932      +/-   ##\n==========================================\n+ Coverage   46.57%   46.98%   +0.41%     \n==========================================\n  Files         164      164              \n  Lines       10293    10361      +68     \n  Branches      938      956      +18     \n==========================================\n+ Hits         4793     4867      +74     \n+ Misses       5185     5177       -8     \n- Partials      315      317       +2     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `53.00% <100.00%> (+9.63%)` | :arrow_up: |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `39.86% <ø> (ø)` | |\n| [...eborn/common/network/protocol/BufferStreamEnd.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CdWZmZXJTdHJlYW1FbmQuamF2YQ==) | `0.00% <ø> (ø)` | |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `68.58% <ø> (+8.58%)` | :arrow_up: |\n| [...he/celeborn/common/util/ShuffleBlockInfoUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHVmZmxlQmxvY2tJbmZvVXRpbHMuamF2YQ==) | `86.85% <100.00%> (+1.13%)` | :arrow_up: |\n\n... and [13 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1932/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

As suggested https://github.com/apache/incubator-celeborn/pull/1907#pullrequestreview-1629951713, implemented a new approach that moves the state (stream ids) responsible for deleting unsorted files into the `FileInfo` class. cc @waitinfuture @FMX \r\n\r\n

the `openStream` has become complex enough.\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1931?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1931](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1931?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (38d633a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b21069866db16b7a489658f6b2a40a6a9673a051?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b210698) will **increase** coverage by `0.02%`.\n> Report is 6 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1931      +/-   ##\n==========================================\n+ Coverage   46.82%   46.84%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n+ Hits         4813     4815       +2     \n+ Misses       5156     5155       -1     \n+ Partials      311      310       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1931/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1930?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1930](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1930?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cbb8a42) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/84ef527181a58cec829fcefd27fdc65c72831a18?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (84ef527) will **not change** coverage.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1930   +/-   ##\n=======================================\n  Coverage   46.50%   46.50%           \n=======================================\n  Files         164      164           \n  Lines       10341    10341           \n  Branches      954      954           \n=======================================\n  Hits         4808     4808           \n- Misses       5218     5219    +1     \n+ Partials      315      314    -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1930/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

https://github.com/apache/incubator-celeborn/pull/1933 updates the shading configuration, the SBT part should be updated accordingly

SBT and Maven have different `guava` versions.\r\n\r\n```shell\r\n./build/mvn dependency:tree -Pmr -am -pl client-mr/mr\r\n\r\n[INFO] --- maven-dependency-plugin:3.1.1:tree (default-cli) @ celeborn-client-mr_2.12 ---\r\n[INFO] org.apache.celeborn:celeborn-client-mr_2.12:jar:0.4.0-SNAPSHOT\r\n[INFO] +- org.apache.celeborn:celeborn-common_2.12:jar:0.4.0-SNAPSHOT:compile\r\n[INFO] |  +- com.google.guava:guava:jar:14.0.1:compile\r\n```\r\n\r\n```shell\r\n./build/sbt -Pmr celeborn-client-mr/dependencyTree | grep guava\r\n[info]   | +-com.google.guava:guava:14.0.1 (evicted by: 27.0-jre)\r\n[info]   | +-com.google.guava:guava:27.0-jre\r\n```

we can align the `guava` versions in https://github.com/apache/incubator-celeborn/pull/1928.

> we can align the `guava` versions in #1928.\r\n\r\naddressed in https://github.com/apache/incubator-celeborn/pull/1930/commits/cbb8a4290af3af3f0d153b0d31181f80ed423a37

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1929?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1929](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1929?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (247654d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b0addb93484b5c78b47d194251838748e4dd67f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b0addb) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1929      +/-   ##\n==========================================\n- Coverage   46.68%   46.67%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n- Hits         4798     4797       -1     \n- Misses       5168     5169       +1     \n  Partials      314      314              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1929/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1928?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1928](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1928?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b1406fd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c4135dc1b1e8fabf535da63107e66072c408885c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c4135dc) will **not change** coverage.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head b1406fd differs from pull request most recent head 938459b. Consider uploading reports for the commit 938459b to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1928   +/-   ##\n=======================================\n  Coverage   46.96%   46.96%           \n=======================================\n  Files         164      164           \n  Lines       10361    10361           \n  Branches      956      956           \n=======================================\n  Hits         4865     4865           \n  Misses       5178     5178           \n  Partials      318      318           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @FMX , could you take a look at this?

thanks, merging to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1927?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1927](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1927?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ed3054a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b0addb93484b5c78b47d194251838748e4dd67f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b0addb) will **increase** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1927      +/-   ##\n==========================================\n+ Coverage   46.68%   46.80%   +0.13%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n+ Hits         4798     4811      +13     \n+ Misses       5168     5158      -10     \n+ Partials      314      311       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1927/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1926?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1926](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1926?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5fd0cf4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/428e2660bca3169a36fa01ef4691c8538345d154?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (428e266) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1926      +/-   ##\n==========================================\n- Coverage   46.81%   46.66%   -0.15%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n- Hits         4812     4796      -16     \n- Misses       5156     5169      +13     \n- Partials      312      315       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1926/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1925?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1925](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1925?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c656845) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/428e2660bca3169a36fa01ef4691c8538345d154?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (428e266) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1925      +/-   ##\n==========================================\n- Coverage   46.81%   46.79%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n- Hits         4812     4809       -3     \n- Misses       5156     5158       +2     \n- Partials      312      313       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1925/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

In my local spark 3.2 build, below code snippet is added to trigger DAGScheduler to clean up mapOutputTracker status\r\n```diff\r\ndiff --git a/core/src/main/scala/org/apache/spark/scheduler/DAGScheduler.scala b/core/src/main/scala/org/apache/spark/scheduler/DAGScheduler.scala\r\nindex f97c426348..fef6013d98 100644\r\n--- a/core/src/main/scala/org/apache/spark/scheduler/DAGScheduler.scala\r\n+++ b/core/src/main/scala/org/apache/spark/scheduler/DAGScheduler.scala\r\n@@ -1844,6 +1844,12 @@ private[spark] class DAGScheduler(\r\n             }\r\n           }\r\n\r\n+          // ensure retry of all MapTasks of resubmitted stage attempt\r\n+          // TODO: change to ShuffleManagerIndicator.isRemoteShuffle\r\n+          if (failureMessage.contains("Celeborn FetchFailure: ")) {\r\n+            mapOutputTracker.unregisterAllMapAndMergeOutput(shuffleId)\r\n+          }\r\n+\r\n           if (failedStage.rdd.isBarrier()) {\r\n             failedStage match {\r\n               case failedMapStage: ShuffleMapStage =>\r\n```\r\nthis is also the reason why CelebornFetchFailureSuite fails with community spark in this PR\r\nwill update a commit soon to include the RPC related changes for LifecycleManager to clean up mapOutputTracker

@ErikFang, could you use `dev/reformat` to format the changes?

@ErikFang, could you rebase the latest main branch to resolve conflicts for this pull request?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `17 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`788b0c3`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/788b0c340b6c5d31de76fc12983d60f71c3ef811?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.50% compared to head [(`3226459`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.46%.\n> Report is 1 commits behind head on main.\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | 0.00% | [12 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | 0.00% | [4 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | 85.72% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1924      +/-   ##\n==========================================\n- Coverage   46.50%   46.46%   -0.04%     \n==========================================\n  Files         166      166              \n  Lines       10758    10781      +23     \n  Branches      984      988       +4     \n==========================================\n+ Hits         5002     5008       +6     \n- Misses       5430     5447      +17     \n  Partials      326      326              \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1924?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

update a new commit to address comments related to code style/comment/variable name

Hi @ErikFang , please add license header for new added files

MapOutputTrackerMaster. unregisterAllMapAndMergeOutput() was added in spark 3.2 by [SPARK-32920](https://issues.apache.org/jira/browse/SPARK-32920), so checks with spark 3.0/3.1 fails\r\n\r\nCan you suggest how should I handle this spark 3.x minor version issue in celeborn? @waitinfuture 

`unregisterAllMapAndMergeOutput` was added when we contributed push based shuffle to Apache Spark.\r\nIt replaced the earlier [`unregisterAllMapOutput`](https://github.com/apache/spark/blob/branch-3.1/core/src/main/scala/org/apache/spark/MapOutputTracker.scala#L516) - which should work for 3.1 and older.\r\n

+CC @otterc as well.

Note that `RDD` can override `getOutputDeterministicLevel` - but the default behavior is what you described.

> Note that `RDD` can override `getOutputDeterministicLevel` - but the default behavior is what you described.\r\n\r\nYeah, so it can be that upstream stage is indeterminate while the downstream stage is determinate, and the incorrectness I described before can happen, right?

Top of my head, I cant think of a good scenario where prefix is indeterminate while suffix is determinate [1] ... I was just mentioning from api pov ... For example, in the sample I had shared in dev@ list, I am forcing `DeterministicLevel` to be different :-)\r\n\r\n[1] Perhaps if all output is reduced to a single partition ? Not sure.

I also tested q23ab and results are also good

@waitinfuture, @ErikFang, @mridulm, @otterc, the test result of internal Spark SQL job is successful as follows:\r\n![wecom-temp-164223-b36261fd0b10d3bacdaef3928a45efbb](https://github.com/apache/incubator-celeborn/assets/10048174/2134e972-d4f1-40b8-bf17-1e075d4dec8a)\r\n<img width="1398" alt="image" src="https://github.com/apache/incubator-celeborn/assets/10048174/14750e2b-42ff-42b0-9896-a2d377be9182">\r\n![wecom-temp-82543-e6d89ca9cb6caa6f63f2e73dffb70aeb](https://github.com/apache/incubator-celeborn/assets/10048174/0a62d1fd-cae2-42d8-bddb-80d7d18fe0b6)

rebased the code against latest main branch, renamed HookedCelebornShuffleManager to TestCelebornShuffleManager, added shuffle id with FETCH_FAILURE_ERROR_MSG to help debug, decorated appShuffleTrackerCallback with volatile\r\n\r\nI favor adding NoOpShuffleIdTracker and UT of PbGetShuffleId/PbReportShuffleFetchFailure message handing in a follow-up PR\r\ngentle ping @waitinfuture to take a look

please run ./dev/reformat to automatically reformat code style

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1923?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1923](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1923?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd31c32) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b21069866db16b7a489658f6b2a40a6a9673a051?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b210698) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1923      +/-   ##\n==========================================\n- Coverage   46.82%   46.67%   -0.15%     \n==========================================\n  Files         164      164              \n  Lines       10280    10280              \n  Branches      938      938              \n==========================================\n- Hits         4813     4797      -16     \n- Misses       5156     5169      +13     \n- Partials      311      314       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1923/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @leemingzixxoo , could you add your email address in your github setting so that the project can track your contribution?\r\n![image](https://github.com/apache/incubator-celeborn/assets/948245/145769af-8759-4001-928d-22685a3e2d05)\r\n\r\n

> Hi @leemingzixxoo , could you add your email address in your github setting so that the project can track your contribution? ![image](https://user-images.githubusercontent.com/948245/268916226-145769af-8759-4001-928d-22685a3e2d05.png)\r\n\r\nDone. email address updated

Thanks, merged to main/0.3

Hi @leemingzixxoo , seems your mail address has not correctly set in your github, you can have a check

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1922?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1922](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1922?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (dfad188) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4d35e501a3ccdd2cb9d36440c6139f3e39b838ab?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4d35e50) will **increase** coverage by `0.07%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1922      +/-   ##\n==========================================\n+ Coverage   46.60%   46.67%   +0.07%     \n==========================================\n  Files         164      164              \n  Lines       10264    10280      +16     \n  Branches      938      938              \n==========================================\n+ Hits         4783     4797      +14     \n- Misses       5168     5170       +2     \n  Partials      313      313              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1922?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1922?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.53% <100.00%> (+0.08%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1922/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1921?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1921](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1921?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e9f7e6d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fbeb5a62ecf2451f15c8b05491c1a6ef2e46a106?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fbeb5a6) will **increase** coverage by `0.12%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1921      +/-   ##\n==========================================\n+ Coverage   46.57%   46.69%   +0.12%     \n==========================================\n  Files         164      164              \n  Lines       10246    10280      +34     \n  Branches      937      938       +1     \n==========================================\n+ Hits         4771     4799      +28     \n- Misses       5160     5168       +8     \n+ Partials      315      313       -2     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1921/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @FMX 

thanks for the review. @pan3793 @cxzl25 \r\n\r\nmerging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1920?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1920](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1920?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3d6813b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/107f3df8ba79036ccaec54d0e095d69643570d02?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (107f3df) will **decrease** coverage by `0.16%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1920      +/-   ##\n==========================================\n- Coverage   46.73%   46.57%   -0.16%     \n==========================================\n  Files         164      164              \n  Lines       10247    10264      +17     \n  Branches      937      938       +1     \n==========================================\n- Hits         4788     4779       -9     \n- Misses       5147     5170      +23     \n- Partials      312      315       +3     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1920/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1919](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1c1a779) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2b79692585c3e8f600bbab8a31ebfe781fe77184?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2b79692) will **increase** coverage by `0.09%`.\n> The diff coverage is `72.73%`.\n\n> :exclamation: Current head 1c1a779 differs from pull request most recent head 8fc72a8. Consider uploading reports for the commit 8fc72a8 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1919      +/-   ##\n==========================================\n+ Coverage   46.91%   47.00%   +0.09%     \n==========================================\n  Files         164      164              \n  Lines       10383    10366      -17     \n  Branches      959      957       -2     \n==========================================\n+ Hits         4870     4871       +1     \n+ Misses       5193     5178      -15     \n+ Partials      320      317       -3     \n```\n\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.55% <84.22%> (-0.01%)` | :arrow_down: |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1919/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1918?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1918](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1918?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8cd0c9c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/045c682c8901314d2b1171fbd481857334e885b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (045c682) will **increase** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1918      +/-   ##\n==========================================\n+ Coverage   46.59%   46.62%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10247    10246       -1     \n  Branches      937      937              \n==========================================\n+ Hits         4774     4776       +2     \n+ Misses       5159     5157       -2     \n+ Partials      314      313       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1918?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1918?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `16.74% <0.00%> (+0.04%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1918/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1917?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1917](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1917?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (75d8fb9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/03fc00e6a6177da3a6c8205e4b47551d4c791ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (03fc00e) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1917      +/-   ##\n==========================================\n+ Coverage   46.58%   46.59%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10247    10247              \n  Branches      937      937              \n==========================================\n+ Hits         4773     4774       +1     \n  Misses       5160     5160              \n+ Partials      314      313       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1917/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1916](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f714cbf) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf42013f0c5b530e040f19a1c1305af5fd04c7a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf4201) will **increase** coverage by `0.10%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `41.18%`.\n\n> :exclamation: Current head f714cbf differs from pull request most recent head ab1b55c. Consider uploading reports for the commit ab1b55c to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1916      +/-   ##\n==========================================\n+ Coverage   46.51%   46.60%   +0.10%     \n==========================================\n  Files         164      164              \n  Lines       10228    10264      +36     \n  Branches      936      938       +2     \n==========================================\n+ Hits         4757     4783      +26     \n- Misses       5158     5168      +10     \n  Partials      313      313              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <0.00%> (-0.01%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.45% <87.50%> (-0.03%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1916/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1915?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1915](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1915?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b60f49b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/03fc00e6a6177da3a6c8205e4b47551d4c791ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (03fc00e) will **increase** coverage by `0.01%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1915      +/-   ##\n==========================================\n+ Coverage   46.58%   46.59%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10247    10247              \n  Branches      937      937              \n==========================================\n+ Hits         4773     4774       +1     \n+ Misses       5160     5159       -1     \n  Partials      314      314              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1915?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1915?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.45% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1915/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1914?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1914](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1914?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (970350c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/03fc00e6a6177da3a6c8205e4b47551d4c791ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (03fc00e) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1914      +/-   ##\n==========================================\n- Coverage   46.58%   46.57%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10247    10247              \n  Branches      937      937              \n==========================================\n- Hits         4773     4772       -1     \n  Misses       5160     5160              \n- Partials      314      315       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1914/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1913?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1913](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1913?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6700a3b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e0c00ecd3828abcf8a11d1fac39c183825db934d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0c00ec) will **decrease** coverage by `0.00%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1913      +/-   ##\n==========================================\n- Coverage   46.61%   46.61%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10247    10256       +9     \n  Branches      937      937              \n==========================================\n+ Hits         4776     4780       +4     \n- Misses       5158     5160       +2     \n- Partials      313      316       +3     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1913?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1913?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.50% <100.00%> (+0.05%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1913/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LICENSE related stuff need to update

Merged to main

LGTM, thanks!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1912?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1912](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1912?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (37ee50e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e0c00ecd3828abcf8a11d1fac39c183825db934d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0c00ec) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1912   +/-   ##\n=======================================\n  Coverage   46.61%   46.61%           \n=======================================\n  Files         164      164           \n  Lines       10247    10247           \n  Branches      937      937           \n=======================================\n  Hits         4776     4776           \n  Misses       5158     5158           \n  Partials      313      313           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1911?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1911](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1911?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (dd68c51) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e0c00ecd3828abcf8a11d1fac39c183825db934d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0c00ec) will **decrease** coverage by `0.02%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1911      +/-   ##\n==========================================\n- Coverage   46.61%   46.58%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10247    10247              \n  Branches      937      937              \n==========================================\n- Hits         4776     4773       -3     \n- Misses       5158     5159       +1     \n- Partials      313      315       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1911/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1910](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bad8977) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f1713dacaf9afb09792951c2f7a87bc5812a8139?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f1713da) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1910      +/-   ##\n==========================================\n- Coverage   46.69%   46.64%   -0.05%     \n==========================================\n  Files         164      164              \n  Lines       10280    10283       +3     \n  Branches      938      938              \n==========================================\n- Hits         4799     4795       -4     \n- Misses       5168     5173       +5     \n- Partials      313      315       +2     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/protocol/PushDataHandShake.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YUhhbmRTaGFrZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...celeborn/common/network/protocol/RegionFinish.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25GaW5pc2guamF2YQ==) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | `0.00% <ø> (ø)` | |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `65.63% <0.00%> (-6.78%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1910/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This fails branch-0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1909?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1909](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1909?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (be13d93) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0e53a3d55231967e1bbd8e47ab99906836f4f550?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0e53a3d) will **increase** coverage by `0.11%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1909      +/-   ##\n==========================================\n+ Coverage   46.50%   46.60%   +0.11%     \n==========================================\n  Files         164      164              \n  Lines       10222    10247      +25     \n  Branches      936      937       +1     \n==========================================\n+ Hits         4753     4775      +22     \n- Misses       5156     5158       +2     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1909?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1909?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.45% <100.00%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1909/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> LGTM, thanks! BTW, I think we can reduce default value of `celeborn.worker.monitor.disk.check.interval` to trigger device check more frequent.\r\n\r\nSet the same value as heartbeatInterval or a lower value?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1908?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1908](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1908?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b2bcd7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e0c00ecd3828abcf8a11d1fac39c183825db934d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0c00ec) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1908      +/-   ##\n==========================================\n- Coverage   46.61%   46.59%   -0.01%     \n==========================================\n  Files         164      164              \n  Lines       10247    10247              \n  Branches      937      937              \n==========================================\n- Hits         4776     4774       -2     \n- Misses       5158     5159       +1     \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1908/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1907](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9af22ee) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8b4fe73d4ff49dc2bd98a44b519b5ca98285b0d9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8b4fe73) will **increase** coverage by `0.03%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `54.55%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1907      +/-   ##\n==========================================\n+ Coverage   46.56%   46.58%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10238    10256      +18     \n  Branches      936      938       +2     \n==========================================\n+ Hits         4766     4777      +11     \n- Misses       5157     5165       +8     \n+ Partials      315      314       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `39.86% <0.00%> (-1.49%)` | :arrow_down: |\n| [...eborn/common/network/protocol/BufferStreamEnd.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CdWZmZXJTdHJlYW1FbmQuamF2YQ==) | `0.00% <ø> (-30.00%)` | :arrow_down: |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `73.34% <100.00%> (+0.92%)` | :arrow_up: |\n| [...he/celeborn/common/util/ShuffleBlockInfoUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHVmZmxlQmxvY2tJbmZvVXRpbHMuamF2YQ==) | `86.85% <100.00%> (+1.13%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1907/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @waitinfuture @FMX 

Can we have a switch to disable deleting original shuffle data files, so that both original and sorted files are retained until shuffle unregisters?

raised a new PR https://github.com/apache/incubator-celeborn/pull/1932

hi, @FMX \r\nI raised a new PR  https://github.com/apache/incubator-celeborn/pull/1932 based on the suggestion https://github.com/apache/incubator-celeborn/pull/1907#pullrequestreview-1629951713, some logic you commented is out of date, please take another look.

> fix workingdir\

> > fix workingdir\

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1906?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1906](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1906?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9b264af) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf42013f0c5b530e040f19a1c1305af5fd04c7a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf4201) will **increase** coverage by `0.06%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1906      +/-   ##\n==========================================\n+ Coverage   46.51%   46.57%   +0.06%     \n==========================================\n  Files         164      164              \n  Lines       10228    10238      +10     \n  Branches      936      936              \n==========================================\n+ Hits         4757     4767      +10     \n+ Misses       5158     5157       -1     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1906?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ava/org/apache/celeborn/common/util/JavaUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1906?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9KYXZhVXRpbHMuamF2YQ==) | `48.15% <100.00%> (+2.90%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1906/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1905](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (903dce4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/55e85055b80111b6f3662474c8fd500bf6589f2a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (55e8505) will **decrease** coverage by `0.07%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1905      +/-   ##\n==========================================\n- Coverage   46.66%   46.59%   -0.07%     \n==========================================\n  Files         164      164              \n  Lines       10283    10293      +10     \n  Branches      938      938              \n==========================================\n- Hits         4798     4795       -3     \n- Misses       5171     5184      +13     \n  Partials      314      314              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `39.86% <0.00%> (-1.49%)` | :arrow_down: |\n| [...n/common/network/protocol/BacklogAnnouncement.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CYWNrbG9nQW5ub3VuY2VtZW50LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eborn/common/network/protocol/BufferStreamEnd.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CdWZmZXJTdHJlYW1FbmQuamF2YQ==) | `0.00% <0.00%> (-30.00%)` | :arrow_down: |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <ø> (ø)` | |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1905?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `60.00% <0.00%> (-5.62%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

```\r\n2023-09-13T11:41:04.1056748Z 23/09/13 11:41:04,085 ERROR [data-client-50-1] ReadClientHandler: Unexpected msg type RPC_REQUEST content RpcRequest{requestId=268, body=NettyManagedBuffer{buf=UnpooledSlicedByteBuf(ridx: 0, widx: 17, cap: 17/17, unwrapped: UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeNoCleanerDirectByteBuf(ridx: 89, widx: 89, cap: 1024))}}\r\n```\r\n\r\nReadClientHandler needs modifications to receive rpc requests.  Sizable CI failures mean that something is wrong.

Thanks merge to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1903?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`0bf4201`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf42013f0c5b530e040f19a1c1305af5fd04c7a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.51% compared to head [(`0c96f50`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1903?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.60%.\n> Report is 248 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1903      +/-   ##\n==========================================\n+ Coverage   46.51%   46.60%   +0.09%     \n==========================================\n  Files         164      164              \n  Lines       10228    10247      +19     \n  Branches      936      937       +1     \n==========================================\n+ Hits         4757     4775      +18     \n  Misses       5158     5158              \n- Partials      313      314       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1903?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1902?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1902](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1902?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8335f65) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf42013f0c5b530e040f19a1c1305af5fd04c7a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf4201) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1902      +/-   ##\n==========================================\n+ Coverage   46.51%   46.52%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10228    10228              \n  Branches      936      936              \n==========================================\n+ Hits         4757     4758       +1     \n+ Misses       5158     5156       -2     \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1902/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1901?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1901](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1901?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (65c9e66) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0e53a3d55231967e1bbd8e47ab99906836f4f550?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0e53a3d) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1901      +/-   ##\n==========================================\n+ Coverage   46.50%   46.51%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10222    10228       +6     \n  Branches      936      936              \n==========================================\n+ Hits         4753     4757       +4     \n- Misses       5156     5157       +1     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1901?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1901?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.49% <100.00%> (+0.03%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1901/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3.\r\n\r\nThe 0.3.1 is voting, I suppose this is not a critical issue to fail the vote, and this fix will be included in 0.3.2 and 0.4.0

Even it exceeds the max length, the GitHub review page and IDEA editor still look good.\r\n<img width="1949" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/6725827e-9ab5-4a9e-94c1-3fbc4e66f766">\r\n\r\n<img width="1761" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/b54c6a06-8c64-4805-b2f3-70aa354d4129">\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1897?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1897](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1897?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0793cad) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/50c70265b51c4ecedb4fd6bf77e69d86bbf34d79?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (50c7026) will **decrease** coverage by `0.00%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1897      +/-   ##\n==========================================\n- Coverage   46.48%   46.48%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10226    10222       -4     \n  Branches      937      936       -1     \n==========================================\n- Hits         4753     4751       -2     \n+ Misses       5159     5158       -1     \n+ Partials      314      313       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1897?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1897?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `16.70% <100.00%> (-0.64%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1897/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1896?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1896](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1896?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (804038f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cb8ace406bd6df21dd8c16a4afcf8e0377e456ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cb8ace4) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1896   +/-   ##\n=======================================\n  Coverage   46.52%   46.52%           \n=======================================\n  Files         164      164           \n  Lines       10226    10226           \n  Branches      937      937           \n=======================================\n  Hits         4757     4757           \n  Misses       5156     5156           \n  Partials      313      313           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1895?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1895](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1895?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da6601a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cb8ace406bd6df21dd8c16a4afcf8e0377e456ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cb8ace4) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1895      +/-   ##\n==========================================\n- Coverage   46.52%   46.51%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10226    10226              \n  Branches      937      937              \n==========================================\n- Hits         4757     4756       -1     \n  Misses       5156     5156              \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1895/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1894?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1894](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1894?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (981dcf4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7ab674393bb5b23d313c9c441ac478ef44ebe98d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7ab6743) will **decrease** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1894      +/-   ##\n==========================================\n- Coverage   46.63%   46.50%   -0.12%     \n==========================================\n  Files         164      164              \n  Lines       10226    10226              \n  Branches      937      937              \n==========================================\n- Hits         4768     4755      -13     \n- Misses       5145     5158      +13     \n  Partials      313      313              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1894/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1893?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1893](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1893?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e675f9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a77a8eb8fddb331aaaf6001356cd1eaab42ff4df?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a77a8eb) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1893      +/-   ##\n==========================================\n- Coverage   46.64%   46.48%   -0.15%     \n==========================================\n  Files         164      164              \n  Lines       10226    10226              \n  Branches      937      937              \n==========================================\n- Hits         4769     4753      -16     \n- Misses       5145     5159      +14     \n- Partials      312      314       +2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1893/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

Thanks for proposing this change, there also are some issues with `df` command inside the container, moving to Java API should fix it too.

> Thanks for proposing this change, there also are some issues with `df` command inside the container, moving to Java API should fix it too.\r\n\r\n`DeviceInfo#getDeviceAndDiskInfos` also uses `df -ah`, this should be OK with container.

`StorageManager#updateDiskInfos` uses `FileStore#getUsableSpace`, I think they should be unified.

The output of `df`(no matter which options are used) inside the container is always problematic.\r\n\r\n<img width="599" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/c1cb93b7-ffe8-4012-8a4d-be372d03972b">\r\n\r\n<img width="1149" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/5a919a8b-5de0-4c51-b942-893af65b548b">\r\n\r\n\r\nref: https://github.com/moby/moby/issues/27191

> The output of `df`(no matter which options are used) inside the container is always problematic.\r\n> \r\n> <img alt="image" width="599" src="https://user-images.githubusercontent.com/26535726/266895889-c1cb93b7-ffe8-4012-8a4d-be372d03972b.png"> <img alt="image" width="1149" src="https://user-images.githubusercontent.com/26535726/266895917-5a919a8b-5de0-4c51-b942-893af65b548b.png">\r\n> ref: [moby/moby#27191](https://github.com/moby/moby/issues/27191)\r\n\r\nMaybe we should change to `mount` ?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1892?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1892](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1892?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1a6c7bd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a77a8eb8fddb331aaaf6001356cd1eaab42ff4df?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a77a8eb) will **decrease** coverage by `0.11%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1892      +/-   ##\n==========================================\n- Coverage   46.64%   46.52%   -0.11%     \n==========================================\n  Files         164      164              \n  Lines       10226    10226              \n  Branches      937      937              \n==========================================\n- Hits         4769     4757      -12     \n- Misses       5145     5156      +11     \n- Partials      312      313       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1892/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> Maybe we should change to `mount`?\r\n\r\n@waitinfuture the first output comes from `kubectl describe pod <pod-name>`, we can not get the result inside the Pod. In short, the command `df` does work properly inside the container, if possible, we should always use Java API.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1891?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1891](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1891?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (12ab62f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/38a68163e028b360325df8c224f3ca59588392f9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (38a6816) will **decrease** coverage by `0.07%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `40.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1891      +/-   ##\n==========================================\n- Coverage   46.50%   46.43%   -0.07%     \n==========================================\n  Files         164      164              \n  Lines       10223    10226       +3     \n  Branches      936      937       +1     \n==========================================\n- Hits         4753     4747       -6     \n- Misses       5157     5165       +8     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1891?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1891?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `84.41% <40.00%> (-1.44%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1891/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1890?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1890](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1890?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (36eeaf8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bf0deae752bf79bd749c491571254b1a0798bbf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf0deae) will **increase** coverage by `0.02%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1890      +/-   ##\n==========================================\n+ Coverage   46.51%   46.52%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10221    10223       +2     \n  Branches      936      936              \n==========================================\n+ Hits         4753     4755       +2     \n  Misses       5155     5155              \n  Partials      313      313              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1890/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

 thanks, merging to main(v0.4.0) to recover CI.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1889?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1889](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1889?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (76fe3fb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bf0deae752bf79bd749c491571254b1a0798bbf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf0deae) will **decrease** coverage by `0.02%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1889      +/-   ##\n==========================================\n- Coverage   46.51%   46.48%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10221    10226       +5     \n  Branches      936      937       +1     \n==========================================\n  Hits         4753     4753              \n- Misses       5155     5159       +4     \n- Partials      313      314       +1     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1889/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

Merging to main/0.3

BTW, maybe we can also Simplify this in this PR:\r\n\r\nhttps://github.com/apache/incubator-celeborn/blob/bf0deae752bf79bd749c491571254b1a0798bbf3/common/src/main/scala/org/apache/celeborn/common/meta/WorkerInfo.scala#L239

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1888](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a7593e4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bf0deae752bf79bd749c491571254b1a0798bbf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf0deae) will **increase** coverage by `0.16%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1888      +/-   ##\n==========================================\n+ Coverage   46.51%   46.66%   +0.16%     \n==========================================\n  Files         164      164              \n  Lines       10221    10223       +2     \n  Branches      936      936              \n==========================================\n+ Hits         4753     4770      +17     \n+ Misses       5155     5144      -11     \n+ Partials      313      309       -4     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `47.49% <0.00%> (+1.11%)` | :arrow_up: |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.85% <100.00%> (+0.14%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1888/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1887?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1887](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1887?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2f9f35a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bf0deae752bf79bd749c491571254b1a0798bbf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf0deae) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1887      +/-   ##\n==========================================\n- Coverage   46.51%   46.50%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n- Hits         4753     4752       -1     \n  Misses       5155     5155              \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1887/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1886?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1886](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1886?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (45118a8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9e01aac501862c445b72a91c188d1ecd704d501e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9e01aac) will **decrease** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1886      +/-   ##\n==========================================\n- Coverage   46.51%   46.41%   -0.09%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n- Hits         4753     4743      -10     \n- Misses       5155     5164       +9     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1886?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1886?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.35% <ø> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1886/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1885?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Comparison is base [(`b1e3d66`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b1e3d661e6e7db255867159b639c3b345566b2e4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.62% compared to head [(`7d9471f`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1885?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.52%.\n> Report is 215 commits behind head on main.\n\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1885      +/-   ##\n==========================================\n- Coverage   46.62%   46.52%   -0.10%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n- Hits         4765     4754      -11     \n- Misses       5144     5154      +10     \n- Partials      312      313       +1     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1885?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @waitinfuture @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1884?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1884](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1884?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cee444a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d53b6e53c719d588da7f68185a2c5b8c453daa48?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d53b6e5) will **decrease** coverage by `0.00%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head cee444a differs from pull request most recent head fd21901. Consider uploading reports for the commit fd21901 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1884      +/-   ##\n==========================================\n- Coverage   46.52%   46.51%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n- Hits         4754     4753       -1     \n- Misses       5154     5155       +1     \n  Partials      313      313              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1884/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1883?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1883](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1883?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (862fbaf) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d53b6e53c719d588da7f68185a2c5b8c453daa48?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d53b6e5) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1883      +/-   ##\n==========================================\n- Coverage   46.52%   46.50%   -0.01%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n- Hits         4754     4752       -2     \n- Misses       5154     5155       +1     \n- Partials      313      314       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1883/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1882?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1882](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1882?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (06e2719) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b66eaff880e91864a21c96dbac94fa5f8cd84f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b66eaff) will **increase** coverage by `0.01%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `85.72%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1882      +/-   ##\n==========================================\n+ Coverage   46.52%   46.53%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10205    10221      +16     \n  Branches      936      936              \n==========================================\n+ Hits         4747     4755       +8     \n- Misses       5145     5154       +9     \n+ Partials      313      312       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1882?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1882?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.46% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1882/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1881?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1881](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1881?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0ef895e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d53b6e53c719d588da7f68185a2c5b8c453daa48?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d53b6e5) will **increase** coverage by `0.01%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1881      +/-   ##\n==========================================\n+ Coverage   46.52%   46.53%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n+ Hits         4754     4755       +1     \n  Misses       5154     5154              \n+ Partials      313      312       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1881/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zhongqiangczq Is this a bugfix? Does it need to be merged to 0.3.1?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1880?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1880](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1880?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (764310c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b66eaff880e91864a21c96dbac94fa5f8cd84f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b66eaff) will **increase** coverage by `0.01%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1880      +/-   ##\n==========================================\n+ Coverage   46.52%   46.53%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10205    10221      +16     \n  Branches      936      936              \n==========================================\n+ Hits         4747     4755       +8     \n- Misses       5145     5154       +9     \n+ Partials      313      312       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1880/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1879?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1879](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1879?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (85b1862) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b66eaff880e91864a21c96dbac94fa5f8cd84f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b66eaff) will **increase** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1879      +/-   ##\n==========================================\n+ Coverage   46.52%   46.53%   +0.01%     \n==========================================\n  Files         164      164              \n  Lines       10205    10221      +16     \n  Branches      936      936              \n==========================================\n+ Hits         4747     4755       +8     \n- Misses       5145     5154       +9     \n+ Partials      313      312       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1879/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1878?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1878](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1878?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c50f1f6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8d005b8d39ce37a7cd1b4dcc5fd181f78179cd8f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8d005b8) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1878      +/-   ##\n==========================================\n+ Coverage   46.49%   46.52%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10221    10221              \n  Branches      936      936              \n==========================================\n+ Hits         4751     4754       +3     \n+ Misses       5156     5154       -2     \n+ Partials      314      313       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1878/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I thinks we should at least test for velox backend to see if this PR works.

@ulysses-you cc

looks fine to me

Test passed\r\n![image](https://github.com/apache/incubator-celeborn/assets/107825064/9cf36611-9986-4f69-8a92-84e1b91cd1e8)\r\n

> Test passed ![image](https://user-images.githubusercontent.com/107825064/265667985-9cf36611-9986-4f69-8a92-84e1b91cd1e8.png)\r\n\r\nThanks, merging to main/0.3

cc @AngersZhuuuu @pan3793 @cfmcgrady @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1877](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2f09ecb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b66eaff880e91864a21c96dbac94fa5f8cd84f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b66eaff) will **decrease** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `37.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1877      +/-   ##\n==========================================\n- Coverage   46.52%   46.50%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10205    10221      +16     \n  Branches      936      936              \n==========================================\n+ Hits         4747     4752       +5     \n- Misses       5145     5155      +10     \n- Partials      313      314       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.46% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1877/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main/0.3

ping @FMX @RexXiong cc @pan3793 @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1876?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1876](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1876?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e790d90) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b66eaff880e91864a21c96dbac94fa5f8cd84f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b66eaff) will **increase** coverage by `0.20%`.\n> The diff coverage is `85.72%`.\n\n> :exclamation: Current head e790d90 differs from pull request most recent head 3408ac9. Consider uploading reports for the commit 3408ac9 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1876      +/-   ##\n==========================================\n+ Coverage   46.52%   46.71%   +0.20%     \n==========================================\n  Files         164      164              \n  Lines       10205    10212       +7     \n  Branches      936      936              \n==========================================\n+ Hits         4747     4770      +23     \n+ Misses       5145     5132      -13     \n+ Partials      313      310       -3     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1876?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1876?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.46% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1876/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 I prefer to merge this PR into 0.3.1

comments addressed, PTAL @pan3793 @RexXiong @cfmcgrady 

Thanks, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1875?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1875](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1875?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bf7447a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1bdba1582f16fa489ed20e98dfa4ab76d76e571a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1bdba15) will **decrease** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1875      +/-   ##\n==========================================\n- Coverage   46.53%   46.41%   -0.11%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n- Hits         4738     4726      -12     \n- Misses       5134     5145      +11     \n- Partials      312      313       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1875/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1874?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1874](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1874?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (07673a3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/194f0fcf09aa008514d4eae581da6e4320d873c6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (194f0fc) will **increase** coverage by `0.09%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1874      +/-   ##\n==========================================\n+ Coverage   46.41%   46.50%   +0.09%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4726     4735       +9     \n+ Misses       5145     5135      -10     \n- Partials      313      314       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1874/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1873?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1873](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1873?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (79770ca) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/505ba804c7d7890922e09aaacd2b155c70328a35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (505ba80) will **increase** coverage by `0.19%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1873      +/-   ##\n==========================================\n+ Coverage   46.48%   46.67%   +0.19%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4733     4752      +19     \n+ Misses       5136     5122      -14     \n+ Partials      315      310       -5     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1873/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1872?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1872](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1872?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1c7de82) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/505ba804c7d7890922e09aaacd2b155c70328a35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (505ba80) will **increase** coverage by `0.03%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1872      +/-   ##\n==========================================\n+ Coverage   46.48%   46.51%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4733     4736       +3     \n+ Misses       5136     5135       -1     \n+ Partials      315      313       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1872/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1871?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1871](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1871?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e43322a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/505ba804c7d7890922e09aaacd2b155c70328a35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (505ba80) will **increase** coverage by `0.05%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1871      +/-   ##\n==========================================\n+ Coverage   46.48%   46.53%   +0.05%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4733     4738       +5     \n+ Misses       5136     5134       -2     \n+ Partials      315      312       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1871/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1870?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1870](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1870?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (35032cc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/505ba804c7d7890922e09aaacd2b155c70328a35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (505ba80) will **increase** coverage by `0.05%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1870      +/-   ##\n==========================================\n+ Coverage   46.48%   46.53%   +0.05%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4733     4738       +5     \n+ Misses       5136     5134       -2     \n+ Partials      315      312       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1870/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The UT failure is introduced by https://github.com/apache/incubator-celeborn/pull/1812 and fixed by https://github.com/apache/incubator-celeborn/pull/1871

Thank you @waitinfuture for the notification, I retriggered the CI manually

LGTM, thanks! Merged to main.

cc @waitinfuture @ulysses-you 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1869?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1869](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1869?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d7a92c9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/505ba804c7d7890922e09aaacd2b155c70328a35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (505ba80) will **increase** coverage by `0.03%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1869      +/-   ##\n==========================================\n+ Coverage   46.48%   46.51%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10184    10184              \n  Branches      936      936              \n==========================================\n+ Hits         4733     4736       +3     \n+ Misses       5136     5135       -1     \n+ Partials      315      313       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1869/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Some UT failure is introduced by https://github.com/apache/incubator-celeborn/pull/1812 and fixed by https://github.com/apache/incubator-celeborn/pull/1871

Note:\r\n1. In CelebornShuffleReader constructor, partition index args comes before map index args.\r\n2. In Celeborn SparkShuffleManager#getReader, map index args comes before partition index args.\r\n\r\nDue to gluten, we can not change the args order in  CelebornShuffleReader constructor.\r\nDue to Spark, we can not change the args order in SparkShuffleManager#getReader.

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1868?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1868](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1868?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c9de432) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e2c42faed9b268de38420ed94fe64a3b09a940d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e2c42fa) will **increase** coverage by `0.05%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1868      +/-   ##\n==========================================\n+ Coverage   46.46%   46.51%   +0.05%     \n==========================================\n  Files         163      164       +1     \n  Lines       10164    10184      +20     \n  Branches      936      936              \n==========================================\n+ Hits         4722     4736      +14     \n- Misses       5130     5135       +5     \n- Partials      312      313       +1     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1868/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1867?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1867](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1867?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (06e13d9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7e373feea789102ba37ab850a303abb3605ede2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e373fe) will **decrease** coverage by `0.00%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1867      +/-   ##\n==========================================\n- Coverage   46.46%   46.46%   -0.00%     \n==========================================\n  Files         163      163              \n  Lines       10164    10165       +1     \n  Branches      936      936              \n==========================================\n  Hits         4722     4722              \n- Misses       5130     5131       +1     \n  Partials      312      312              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1867?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1867?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `45.34% <0.00%> (-0.61%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1865?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1865](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1865?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4e90bd4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e2c42faed9b268de38420ed94fe64a3b09a940d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e2c42fa) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1865   +/-   ##\n=======================================\n  Coverage   46.46%   46.46%           \n=======================================\n  Files         163      163           \n  Lines       10164    10164           \n  Branches      936      936           \n=======================================\n  Hits         4722     4722           \n  Misses       5130     5130           \n  Partials      312      312           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1864?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1864](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1864?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d3906ad) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7e373feea789102ba37ab850a303abb3605ede2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e373fe) will **increase** coverage by `0.12%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1864      +/-   ##\n==========================================\n+ Coverage   46.46%   46.58%   +0.12%     \n==========================================\n  Files         163      163              \n  Lines       10164    10164              \n  Branches      936      936              \n==========================================\n+ Hits         4722     4734      +12     \n+ Misses       5130     5119      -11     \n+ Partials      312      311       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1864/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1863?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1863](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1863?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0793d8b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d7e900fa9a4804ace3f539bd072e50be96e9dd6e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d7e900f) will **decrease** coverage by `0.10%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 0793d8b differs from pull request most recent head 84ac600. Consider uploading reports for the commit 84ac600 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1863      +/-   ##\n==========================================\n- Coverage   46.49%   46.39%   -0.10%     \n==========================================\n  Files         164      164              \n  Lines       10222    10221       -1     \n  Branches      936      936              \n==========================================\n- Hits         4752     4741      -11     \n- Misses       5156     5166      +10     \n  Partials      314      314              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1863/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Sorry for late reply. Please review again if have time @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1862?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1862](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1862?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a16a3d8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/27669080fbfb009cbe9b0f3bce555561acfadb59?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2766908) will **not change** coverage.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1862   +/-   ##\n=======================================\n  Coverage   46.44%   46.44%           \n=======================================\n  Files         163      163           \n  Lines       10164    10164           \n  Branches      936      936           \n=======================================\n  Hits         4720     4720           \n  Misses       5131     5131           \n  Partials      313      313           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1861?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1861](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1861?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a857aa0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/30496a15503c85cf3d17631de5685739edc46b40?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (30496a1) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1861      +/-   ##\n==========================================\n- Coverage   46.46%   46.44%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10164    10164              \n  Branches      936      936              \n==========================================\n- Hits         4722     4720       -2     \n- Misses       5130     5131       +1     \n- Partials      312      313       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1861/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1858?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1858](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1858?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (67cd9c6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a11a5e9750640ae027b8ccf3381066a1ab378f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a11a5e9) will **decrease** coverage by `0.09%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1858      +/-   ##\n==========================================\n- Coverage   46.54%   46.44%   -0.09%     \n==========================================\n  Files         163      163              \n  Lines       10153    10164      +11     \n  Branches      934      936       +2     \n==========================================\n- Hits         4725     4720       -5     \n- Misses       5116     5131      +15     \n- Partials      312      313       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1858?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1858?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.56% <0.00%> (-0.02%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1858/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1857?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1857](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1857?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (09682bc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/27669080fbfb009cbe9b0f3bce555561acfadb59?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2766908) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1857   +/-   ##\n=======================================\n  Coverage   46.44%   46.44%           \n=======================================\n  Files         163      163           \n  Lines       10164    10164           \n  Branches      936      936           \n=======================================\n  Hits         4720     4720           \n  Misses       5131     5131           \n  Partials      313      313           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1857/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1856?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1856](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1856?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0caf6e4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fda735391a4920609c270effce3dc579ea6616af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fda7353) will **decrease** coverage by `0.16%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1856      +/-   ##\n==========================================\n- Coverage   46.63%   46.46%   -0.16%     \n==========================================\n  Files         163      163              \n  Lines       10164    10164              \n  Branches      936      936              \n==========================================\n- Hits         4739     4722      -17     \n- Misses       5115     5130      +15     \n- Partials      310      312       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1856/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1855?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1855](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1855?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (348d6a7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a11a5e9750640ae027b8ccf3381066a1ab378f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a11a5e9) will **decrease** coverage by `0.05%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1855      +/-   ##\n==========================================\n- Coverage   46.54%   46.49%   -0.05%     \n==========================================\n  Files         163      163              \n  Lines       10153    10164      +11     \n  Branches      934      936       +2     \n==========================================\n  Hits         4725     4725              \n- Misses       5116     5127      +11     \n  Partials      312      312              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1855?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1855?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.56% <0.00%> (-0.02%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Close with another pr test

cc @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1854?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1854](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1854?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (105271e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a11a5e9750640ae027b8ccf3381066a1ab378f4c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a11a5e9) will **decrease** coverage by `0.02%`.\n> Report is 28 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1854      +/-   ##\n==========================================\n- Coverage   46.54%   46.52%   -0.02%     \n==========================================\n  Files         163      164       +1     \n  Lines       10153    10221      +68     \n  Branches      934      936       +2     \n==========================================\n+ Hits         4725     4754      +29     \n- Misses       5116     5154      +38     \n- Partials      312      313       +1     \n```\n\n\n[see 8 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1854/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady @waitinfuture Ready for review

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1853?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1853](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1853?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aeb9aae) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7ab8c58aa755fb2a69906ec31d154ea52e806979?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7ab8c58) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1853      +/-   ##\n==========================================\n+ Coverage   46.52%   46.54%   +0.02%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n+ Hits         4723     4725       +2     \n+ Misses       5117     5116       -1     \n+ Partials      313      312       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1853/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1852?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1852](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1852?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6c21d57) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7e373feea789102ba37ab850a303abb3605ede2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e373fe) will **increase** coverage by `0.06%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1852      +/-   ##\n==========================================\n+ Coverage   46.46%   46.52%   +0.06%     \n==========================================\n  Files         163      164       +1     \n  Lines       10164    10184      +20     \n  Branches      936      936              \n==========================================\n+ Hits         4722     4737      +15     \n- Misses       5130     5134       +4     \n- Partials      312      313       +1     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1852/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

GA passed, PTAL. cc @pan3793 @waitinfuture 

thanks for the review. @SteNicholas @waitinfuture @pan3793 \r\n\r\nmerging to main(v0.4.0).

cc @SteNicholas 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1851?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1851](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1851?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e1c15a8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d701d3ae2c40e42de7a937362a895333b1763463?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d701d3a) will **decrease** coverage by `0.01%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1851      +/-   ##\n==========================================\n- Coverage   46.54%   46.52%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n- Hits         4725     4723       -2     \n- Misses       5116     5117       +1     \n- Partials      312      313       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1851/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1850?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1850](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1850?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0fdabce) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2c07c55e7781e8c0f551ee669d007b33c856cadb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2c07c55) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1850   +/-   ##\n=======================================\n  Coverage   46.70%   46.70%           \n=======================================\n  Files         163      163           \n  Lines       10153    10153           \n  Branches      934      934           \n=======================================\n  Hits         4741     4741           \n  Misses       5103     5103           \n  Partials      309      309           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1849?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1849](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1849?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fc36ad2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5e3e9e442aa62c758770f9ed262910f2c4544ae9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5e3e9e4) will **increase** coverage by `0.04%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1849      +/-   ##\n==========================================\n+ Coverage   46.66%   46.70%   +0.04%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n+ Hits         4737     4741       +4     \n+ Misses       5105     5103       -2     \n+ Partials      311      309       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1849/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> Could you also paste the UT results without/with this PR?\r\n\r\nSure.\r\n\r\nBefore this PR, following the current unit test, you will encounter problems:\r\n\r\n![截屏2023-08-28 20 20 53](https://github.com/apache/incubator-celeborn/assets/52876270/be66054b-17ea-4d22-acf9-5e48b6383200)\r\n\r\nStack:\r\n```log\r\njava.lang.IllegalMonitorStateException was thrown.java.lang.IllegalMonitorStateException\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat org.apache.celeborn.service.deploy.worker.storage.StorageManager.$anonfun$saveAllCommittedFileInfosToDB$1(StorageManager.scala:264)\r\n\tat org.apache.celeborn.service.deploy.worker.storage.StorageManager.$anonfun$saveAllCommittedFileInfosToDB$1$adapted(StorageManager.scala:264)\r\n\tat scala.collection.Iterator.foreach(Iterator.scala:943)\r\n\tat scala.collection.Iterator.foreach$(Iterator.scala:943)\r\n\tat scala.collection.AbstractIterator.foreach(Iterator.scala:1431)\r\n\tat scala.collection.IterableLike.foreach(IterableLike.scala:74)\r\n\tat scala.collection.IterableLike.foreach$(IterableLike.scala:73)\r\n\tat scala.collection.AbstractIterable.foreach(Iterable.scala:56)\r\n\tat org.apache.celeborn.service.deploy.worker.storage.StorageManager.saveAllCommittedFileInfosToDB(StorageManager.scala:264)\r\n\tat org.apache.celeborn.service.deploy.worker.storage.StorageManagerSuite.$anonfun$new$1(StorageManagerSuite.scala:32)\r\n\tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n\tat org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)\r\n\tat org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)\r\n\tat org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:22)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:20)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike$$anon$1.apply(AnyFunSuiteLike.scala:226)\r\n\tat org.apache.celeborn.CelebornFunSuite.withFixture(CelebornFunSuite.scala:157)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.invokeWithFixture$1(AnyFunSuiteLike.scala:224)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$runTest$1(AnyFunSuiteLike.scala:236)\r\n\tat org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTest(AnyFunSuiteLike.scala:236)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTest$(AnyFunSuiteLike.scala:218)\r\n\tat org.apache.celeborn.CelebornFunSuite.org$scalatest$BeforeAndAfterEach$$super$runTest(CelebornFunSuite.scala:35)\r\n\tat org.scalatest.BeforeAndAfterEach.runTest(BeforeAndAfterEach.scala:234)\r\n\tat org.scalatest.BeforeAndAfterEach.runTest$(BeforeAndAfterEach.scala:227)\r\n\tat org.apache.celeborn.CelebornFunSuite.runTest(CelebornFunSuite.scala:35)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$runTests$1(AnyFunSuiteLike.scala:269)\r\n\tat org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)\r\n\tat org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)\r\n\tat org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTests(AnyFunSuiteLike.scala:269)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTests$(AnyFunSuiteLike.scala:268)\r\n\tat org.scalatest.funsuite.AnyFunSuite.runTests(AnyFunSuite.scala:1564)\r\n\tat org.scalatest.Suite.run(Suite.scala:1114)\r\n\tat org.scalatest.Suite.run$(Suite.scala:1096)\r\n\tat org.scalatest.funsuite.AnyFunSuite.org$scalatest$funsuite$AnyFunSuiteLike$$super$run(AnyFunSuite.scala:1564)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$run$1(AnyFunSuiteLike.scala:273)\r\n\tat org.scalatest.SuperEngine.runImpl(Engine.scala:535)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.run(AnyFunSuiteLike.scala:273)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.run$(AnyFunSuiteLike.scala:272)\r\n\tat org.apache.celeborn.CelebornFunSuite.org$scalatest$BeforeAndAfterAll$$super$run(CelebornFunSuite.scala:35)\r\n\tat org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)\r\n\tat org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n\tat org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n\tat org.apache.celeborn.CelebornFunSuite.run(CelebornFunSuite.scala:35)\r\n\tat org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:47)\r\n\tat org.scalatest.tools.Runner$.$anonfun$doRunRunRunDaDoRunRun$13(Runner.scala:1321)\r\n\tat org.scalatest.tools.Runner$.$anonfun$doRunRunRunDaDoRunRun$13$adapted(Runner.scala:1315)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:1315)\r\n\tat org.scalatest.tools.Runner$.$anonfun$runOptionallyWithPassFailReporter$24(Runner.scala:992)\r\n\tat org.scalatest.tools.Runner$.$anonfun$runOptionallyWithPassFailReporter$24$adapted(Runner.scala:970)\r\n\tat org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:1481)\r\n\tat org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:970)\r\n\tat org.scalatest.tools.Runner$.run(Runner.scala:798)\r\n\tat org.scalatest.tools.Runner.run(Runner.scala)\r\n\tat org.jetbrains.plugins.scala.testingSupport.scalaTest.ScalaTestRunner.runScalaTest2or3(ScalaTestRunner.java:43)\r\n\tat org.jetbrains.plugins.scala.testingSupport.scalaTest.ScalaTestRunner.main(ScalaTestRunner.java:26)\r\n```\r\n\r\nAfter this PR:\r\n\r\n![截屏2023-08-28 20 22 13](https://github.com/apache/incubator-celeborn/assets/52876270/ef7eb773-8df9-44de-9cac-5d1314b54f72)\r\n\r\n

cc @zy-jordan 

I have tested in pre cluster.

> I have tested in pre cluster.\r\n\r\nThanks, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1848?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1848](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1848?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0beafa2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f027a25db1d59f7aa19826c02864487e1fe772f5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f027a25) will **decrease** coverage by `0.00%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1848      +/-   ##\n==========================================\n- Coverage   46.68%   46.67%   -0.00%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n- Hits         4739     4738       -1     \n- Misses       5104     5106       +2     \n+ Partials      310      309       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1848?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1848?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `45.95% <ø> (-4.05%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1848/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1847?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1847](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1847?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (396319e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2b657c5243b73a0e41e853291b8b46fb36873348?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2b657c5) will **decrease** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1847      +/-   ##\n==========================================\n- Coverage   46.52%   46.50%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n- Hits         4723     4721       -2     \n- Misses       5117     5118       +1     \n- Partials      313      314       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1847/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 

Thanks, merged to main

Note: it may take a while for the website to sync.

cc @pan3793 @waitinfuture 

Also cc @zhouyifan279, as he is working for Spark 3.5 adaption

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1844?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1844](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1844?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (31fd40a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2b657c5243b73a0e41e853291b8b46fb36873348?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2b657c5) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1844      +/-   ##\n==========================================\n+ Coverage   46.52%   46.54%   +0.02%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n+ Hits         4723     4725       +2     \n+ Misses       5117     5116       -1     \n+ Partials      313      312       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1844/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1843?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1843](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1843?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (62eb73a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5e3e9e442aa62c758770f9ed262910f2c4544ae9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5e3e9e4) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1843      +/-   ##\n==========================================\n+ Coverage   46.66%   46.70%   +0.04%     \n==========================================\n  Files         163      163              \n  Lines       10153    10153              \n  Branches      934      934              \n==========================================\n+ Hits         4737     4741       +4     \n+ Misses       5105     5103       -2     \n+ Partials      311      309       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1843/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @kerwin-zk 

LGTM. Thanks!

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1842?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1842](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1842?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a167b63) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3700dd169198af3982ff3525624eec2c1a59597?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b3700dd) will **decrease** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1842      +/-   ##\n==========================================\n- Coverage   46.48%   46.46%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10143    10143              \n  Branches      934      934              \n==========================================\n- Hits         4714     4712       -2     \n- Misses       5118     5119       +1     \n- Partials      311      312       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1842/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1840](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d67eaa7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/57a35ca3496f7680298e30817f34ebd2477931ed?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (57a35ca) will **decrease** coverage by `0.05%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `50.00%`.\n\n> :exclamation: Current head d67eaa7 differs from pull request most recent head 14da267. Consider uploading reports for the commit 14da267 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1840      +/-   ##\n==========================================\n- Coverage   46.60%   46.54%   -0.05%     \n==========================================\n  Files         163      163              \n  Lines       10143    10153      +10     \n  Branches      934      934              \n==========================================\n- Hits         4726     4725       -1     \n- Misses       5107     5116       +9     \n- Partials      310      312       +2     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.59% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <83.34%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1840/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1839?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1839](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1839?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bfed85b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/b3700dd169198af3982ff3525624eec2c1a59597?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b3700dd) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1839      +/-   ##\n==========================================\n- Coverage   46.48%   46.46%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10143    10143              \n  Branches      934      934              \n==========================================\n- Hits         4714     4712       -2     \n- Misses       5118     5119       +1     \n- Partials      311      312       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1839/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1838?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1838](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1838?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f3b42d1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/57a35ca3496f7680298e30817f34ebd2477931ed?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (57a35ca) will **decrease** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1838      +/-   ##\n==========================================\n- Coverage   46.60%   46.48%   -0.11%     \n==========================================\n  Files         163      163              \n  Lines       10143    10143              \n  Branches      934      934              \n==========================================\n- Hits         4726     4714      -12     \n- Misses       5107     5118      +11     \n- Partials      310      311       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1838/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Although this is for metrics correctness, may drop down the performance, would be nice if you could test with a bit larger scale data

> Although this is for metrics correctness, may drop down the performance, would be nice if you could test with a bit larger scale data\r\n\r\n@pan3793 I tested it locally, it won\

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1837?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1837](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1837?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f1d767d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1550f92086f15ff49ddac0a4f36b70dc445aeed2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1550f92) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1837   +/-   ##\n=======================================\n  Coverage   46.45%   46.45%           \n=======================================\n  Files         163      163           \n  Lines       10135    10135           \n  Branches      934      934           \n=======================================\n  Hits         4707     4707           \n  Misses       5117     5117           \n  Partials      311      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, and this PR is merged via JIRA_ACCESS_TOKEN

BTW, the prompt of "fix version(s)" seems incorrect\r\n\r\n<img width="589" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/815cae5a-9085-46cc-84d6-4346b37c0e4f">\r\n

Thanks! This is really useful.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1836?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1836](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1836?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9ac9883) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1550f92086f15ff49ddac0a4f36b70dc445aeed2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1550f92) will **decrease** coverage by `0.01%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 9ac9883 differs from pull request most recent head df014a5. Consider uploading reports for the commit df014a5 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1836      +/-   ##\n==========================================\n- Coverage   46.45%   46.43%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n- Hits         4707     4705       -2     \n- Misses       5117     5118       +1     \n- Partials      311      312       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1836/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1834?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1834](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1834?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0fb99b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1550f92086f15ff49ddac0a4f36b70dc445aeed2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1550f92) will **increase** coverage by `0.18%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `88.89%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1834      +/-   ##\n==========================================\n+ Coverage   46.45%   46.62%   +0.18%     \n==========================================\n  Files         163      163              \n  Lines       10135    10143       +8     \n  Branches      934      934              \n==========================================\n+ Hits         4707     4728      +21     \n+ Misses       5117     5106      -11     \n+ Partials      311      309       -2     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1834?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1834?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <88.89%> (+0.01%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1834/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1832?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1832](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1832?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d241d86) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa35c1cafc4b2933531db10ea8c6d31c950c59a2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa35c1c) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1832   +/-   ##\n=======================================\n  Coverage   46.43%   46.43%           \n=======================================\n  Files         163      163           \n  Lines       10135    10135           \n  Branches      934      934           \n=======================================\n  Hits         4705     4705           \n  Misses       5118     5118           \n  Partials      312      312           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1832/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thank you @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1831?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1831](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1831?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (269b9ce) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa35c1cafc4b2933531db10ea8c6d31c950c59a2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa35c1c) will **increase** coverage by `0.06%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1831      +/-   ##\n==========================================\n+ Coverage   46.43%   46.48%   +0.06%     \n==========================================\n  Files         163      163              \n  Lines       10135    10143       +8     \n  Branches      934      934              \n==========================================\n+ Hits         4705     4714       +9     \n  Misses       5118     5118              \n+ Partials      312      311       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1831/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1830?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1830](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1830?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd3c9be) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0295e9f3f1f5781af124ae319e202a2594a103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f0295e) will **decrease** coverage by `0.24%`.\n> Report is 120 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1830      +/-   ##\n==========================================\n- Coverage   46.81%   46.56%   -0.24%     \n==========================================\n  Files         162      164       +2     \n  Lines       10012    10237     +225     \n  Branches      923      937      +14     \n==========================================\n+ Hits         4686     4766      +80     \n- Misses       5019     5158     +139     \n- Partials      307      313       +6     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1830?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1830?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.45% <100.00%> (+0.22%)` | :arrow_up: |\n\n... and [26 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1830/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @JQ-Cao @SteNicholas 

Ping @SteNicholas @cfmcgrady @zwangsheng  All comments are addressed. How about the latest change?

Thanks, merging to main

@pan3793 @cfmcgrady  All comments are addressed, how about now?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1829?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1829](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1829?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8890db2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ad890e93818de518d4b34b01b7b75e7b7e326c21?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ad890e9) will **decrease** coverage by `0.15%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1829      +/-   ##\n==========================================\n- Coverage   46.59%   46.43%   -0.15%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n- Hits         4721     4705      -16     \n- Misses       5105     5118      +13     \n- Partials      309      312       +3     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1829?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1829?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1829/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM. BTW, I think default 0.5 for `celeborn.worker.directMemoryRatioToResume` is too small, shall we change to 0.7?

> LGTM. BTW, I think default 0.5 for `celeborn.worker.directMemoryRatioToResume` is too small, shall we change to 0.7?\r\n\r\n+1 for setting default resume ratio to `0.7`, I tried set `0.65` on a production-scale cluster with good results. Sounds `0.7` is reasonable.\r\n

> > LGTM. BTW, I think default 0.5 for `celeborn.worker.directMemoryRatioToResume` is too small, shall we change to 0.7?\r\n> \r\n> +1 for setting default resume ratio to `0.7`, I tried set `0.65` on a production-scale cluster with good results. Sounds `0.7` is reasonable.\r\n\r\n@zwangsheng Nice, so maybe we can change the default value in this PR and the svg can be changed at the same time.

>  Nice, so maybe we can change the default value in this PR and the svg can be changed at the same time.\r\n\r\nUpdated. @waitinfuture 

Thanks! Merged to main/0.3 using https://github.com/apache/incubator-celeborn/pull/1832

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1828?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1828](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1828?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (841a4ec) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/479510cb9cdba5dfec37169d04d0344d50511947?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (479510c) will **not change** coverage.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1828   +/-   ##\n=======================================\n  Coverage   46.45%   46.45%           \n=======================================\n  Files         163      163           \n  Lines       10135    10135           \n  Branches      934      934           \n=======================================\n  Hits         4707     4707           \n  Misses       5117     5117           \n  Partials      311      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks! Merged to main/0.3

cc @pan3793 @zwangsheng @cfmcgrady @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1827?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1827](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1827?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bdecf25) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8e69acc0f9aa22a53058c125cfce548d1614d57b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8e69acc) will **decrease** coverage by `0.03%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1827      +/-   ##\n==========================================\n- Coverage   46.61%   46.57%   -0.03%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n- Hits         4723     4719       -4     \n- Misses       5104     5106       +2     \n- Partials      308      310       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1827/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main for 0.4

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1826?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1826](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1826?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f5deeb7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d6c4334a11ee3ba16ffe1dcbfbb31ed43ef8bd6c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d6c4334) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1826   +/-   ##\n=======================================\n  Coverage   46.41%   46.41%           \n=======================================\n  Files         163      163           \n  Lines       10135    10135           \n  Branches      934      934           \n=======================================\n  Hits         4703     4703           \n  Misses       5119     5119           \n  Partials      313      313           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1825](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (961c72f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e1656616ad1ccf3d981d30896da28b8ce3e61f21?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e165661) will **increase** coverage by `0.14%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `33.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1825      +/-   ##\n==========================================\n+ Coverage   46.45%   46.59%   +0.14%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n+ Hits         4707     4721      +14     \n+ Misses       5117     5105      -12     \n+ Partials      311      309       -2     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | `12.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.59% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | `36.18% <ø> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `75.53% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1825/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

sbt CI passed.\r\n\r\n\r\n![截屏2023-08-22 下午7 19 29](https://github.com/apache/incubator-celeborn/assets/8537877/d199688c-70ad-4d46-9573-5baf312fb9a0)\r\n\r\n

cc @zwangsheng @pan3793 @RexXiong could you take a look at this PR?

@mddxhj please fill in the PR description with the necessary introduction on how it works.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1824?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1824](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1824?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (924fa14) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/37e62f7e55f3d3fb187c2c40e1c6aabebb3cefb2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (37e62f7) will **decrease** coverage by `0.06%`.\n> Report is 64 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1824      +/-   ##\n==========================================\n- Coverage   46.59%   46.52%   -0.06%     \n==========================================\n  Files         163      164       +1     \n  Lines       10135    10223      +88     \n  Branches      934      936       +2     \n==========================================\n+ Hits         4721     4755      +34     \n- Misses       5105     5155      +50     \n- Partials      309      313       +4     \n```\n\n\n[see 13 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1824/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).

I believe this PR isn\

maybe "[CELEBORN-900] Prefer to use jemalloc for memory allocation"

@mddxhj thanks for updating, left some comments. and please update the PR title too.

Merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1822?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1822](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1822?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5ed7cd2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/30d979f6854508824531e553b289119da89ae565?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (30d979f) will **increase** coverage by `0.14%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1822      +/-   ##\n==========================================\n+ Coverage   46.45%   46.59%   +0.14%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n+ Hits         4707     4721      +14     \n+ Misses       5117     5105      -12     \n+ Partials      311      309       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1822/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1821?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1821](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1821?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1dbcab2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/30d979f6854508824531e553b289119da89ae565?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (30d979f) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1821      +/-   ##\n==========================================\n- Coverage   46.45%   46.43%   -0.01%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n- Hits         4707     4705       -2     \n- Misses       5117     5118       +1     \n- Partials      311      312       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1821?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1821?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <ø> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1821/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1819?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1819](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1819?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5fbd11a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f47d0a56b3d56fbdc4b9c93053231545228b9b4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f47d0a) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1819      +/-   ##\n==========================================\n+ Coverage   46.43%   46.59%   +0.16%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n+ Hits         4705     4721      +16     \n+ Misses       5118     5105      -13     \n+ Partials      312      309       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1819/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1818?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1818](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1818?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eb8fe2b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/57fdbf08c293534ea8b62245d1172225f41d8be2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (57fdbf0) will **not change** coverage.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1818   +/-   ##\n=======================================\n  Coverage   46.45%   46.45%           \n=======================================\n  Files         163      163           \n  Lines       10135    10135           \n  Branches      934      934           \n=======================================\n  Hits         4707     4707           \n  Misses       5117     5117           \n  Partials      311      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Sounds like a dirty cache issue, are you plan to disable the cache permanently?

> Sounds like a dirty cache issue, are you plan to disable the cache permanently?\r\n\r\nWe can enable the cache for SBT CI in the separate PR using `actions/cache` instead of `actions/setup-java`. 

thanks, merging to branch main(v0.4.0)

cc @cfmcgrady @pan3793 @RexXiong @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1817?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1817](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1817?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5eb697a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1bf93991bc7ea656dd5618a3d8bf156a04621637?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1bf9399) will **decrease** coverage by `0.08%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1817      +/-   ##\n==========================================\n- Coverage   46.69%   46.61%   -0.08%     \n==========================================\n  Files         162      163       +1     \n  Lines       10123    10135      +12     \n  Branches      933      934       +1     \n==========================================\n- Hits         4726     4723       -3     \n- Misses       5092     5104      +12     \n- Partials      305      308       +3     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1817?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1817?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <100.00%> (+0.01%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1817/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> LGTM. thank you for the tests.\r\n\r\nUpdated 3T TPCDS benchmark, merging to main/0.3, thanks!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1816?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1816](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1816?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a29111f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4a4a37ed171efb85f1bce0b46396ba0f4360377b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4a4a37e) will **increase** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1816      +/-   ##\n==========================================\n+ Coverage   46.53%   46.54%   +0.01%     \n==========================================\n  Files         162      162              \n  Lines       10123    10124       +1     \n  Branches      933      933              \n==========================================\n+ Hits         4710     4711       +1     \n  Misses       5105     5105              \n  Partials      308      308              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1816?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1816?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <100.00%> (+0.01%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1814?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1814](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1814?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6471257) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d701d3ae2c40e42de7a937362a895333b1763463?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d701d3a) will **decrease** coverage by `0.07%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1814      +/-   ##\n==========================================\n- Coverage   46.54%   46.47%   -0.07%     \n==========================================\n  Files         163      163              \n  Lines       10153    10164      +11     \n  Branches      934      936       +2     \n==========================================\n- Hits         4725     4723       -2     \n- Misses       5116     5128      +12     \n- Partials      312      313       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1814?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1814?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.56% <0.00%> (-0.02%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1814/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture, I have addressed above comments. PTAL.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1813?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1813](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1813?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b3e00b1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/307872d4f7702656f518fa678816329d0babb339?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (307872d) will **not change** coverage.\n> Report is 1 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1813   +/-   ##\n=======================================\n  Coverage   46.53%   46.53%           \n=======================================\n  Files         162      162           \n  Lines       10123    10123           \n  Branches      933      933           \n=======================================\n  Hits         4710     4710           \n  Misses       5105     5105           \n  Partials      308      308           \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1813?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1813?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.48% <100.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1812](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5706451) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3a64a8b7cb80485444e9da922b710557b76d1f55?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3a64a8b) will **increase** coverage by `0.01%`.\n> Report is 50 commits behind head on main.\n> The diff coverage is `91.67%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1812      +/-   ##\n==========================================\n+ Coverage   46.51%   46.52%   +0.01%     \n==========================================\n  Files         162      164       +2     \n  Lines       10123    10184      +61     \n  Branches      933      936       +3     \n==========================================\n+ Hits         4708     4737      +29     \n- Misses       5106     5134      +28     \n- Partials      309      313       +4     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/common/util/FileChannelUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9GaWxlQ2hhbm5lbFV0aWxzLmphdmE=) | `75.00% <ø> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.35% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.47% <91.67%> (-0.01%)` | :arrow_down: |\n\n... and [9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1812/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture Comments addressed. Just ignore the failed UT,  CI backed by SBT seems unstable.

> Make this method logical ...\r\n\r\nAny details? What problem do you find in the current implementation?

> > Make this method logical ...\r\n> \r\n> Any details? What problem do you find in the current implementation?\r\n\r\nThe main thing is to add unit tests to ensure that this piece of logic is changed by mistake.\r\n\r\nThe modification of the method is to reduce judgments and avoid making unnecessary comparisons before the method returns.

As sbt unit test fail, WIP @cfmcgrady 

> As sbt unit test fail, WIP @cfmcgrady\r\n\r\nFixed in https://github.com/apache/incubator-celeborn/pull/1818. cc @zwangsheng 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1811?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1811](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1811?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7a517ce) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f47d0a56b3d56fbdc4b9c93053231545228b9b4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f47d0a) will **increase** coverage by `0.02%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1811      +/-   ##\n==========================================\n+ Coverage   46.43%   46.45%   +0.02%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n+ Hits         4705     4707       +2     \n+ Misses       5118     5117       -1     \n+ Partials      312      311       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1811/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zwangsheng Could you please help by revising the state diagram `docs/assets/img/backpressure.svg` in line with this refactor? The current state diagram `docs/assets/img/backpressure.svg` is unclear. \r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1809?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1809](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1809?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5cf9219) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3a64a8b7cb80485444e9da922b710557b76d1f55?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3a64a8b) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1809   +/-   ##\n=======================================\n  Coverage   46.51%   46.51%           \n=======================================\n  Files         162      162           \n  Lines       10123    10123           \n  Branches      933      933           \n=======================================\n  Hits         4708     4708           \n  Misses       5106     5106           \n  Partials      309      309           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1809/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @JQ-Cao @zy-jordan  @pan3793 @AngersZhuuuu @cfmcgrady @RexXiong @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1808?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1808](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1808?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (028865c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/54622814cc750854500075d9d29aaf2ff7a27d9c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5462281) will **decrease** coverage by `0.21%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1808      +/-   ##\n==========================================\n- Coverage   46.73%   46.51%   -0.21%     \n==========================================\n  Files         162      162              \n  Lines       10078    10123      +45     \n  Branches      927      933       +6     \n==========================================\n- Hits         4709     4708       -1     \n- Misses       5060     5106      +46     \n  Partials      309      309              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1808/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1807?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1807](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1807?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (985f3e1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/54622814cc750854500075d9d29aaf2ff7a27d9c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5462281) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1807      +/-   ##\n==========================================\n- Coverage   46.73%   46.59%   -0.13%     \n==========================================\n  Files         162      162              \n  Lines       10078    10078              \n  Branches      927      927              \n==========================================\n- Hits         4709     4695      -14     \n- Misses       5060     5072      +12     \n- Partials      309      311       +2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1807/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

sorry for misreading before, the `volatile` should guarantees atomicity. cc @waitinfuture \r\n\r\nAfter digging into the problem more deeply, I found that the main issue is with something we call "async push".\r\n\r\nThe task thread might get interrupted for various reasons, and one common scenario is when you kill the task in the UI tab. Even though the task thread was stopped, the asynchronous push thread continued running and triggered the `pushData` operation. This led to illegal access to data, ultimately causing a crash in the JVM.\r\n\r\nI\

> u\r\n\r\nThanks @cfmcgrady for the explanation, my first thought is that we should at least catch interruptted exception and cancel the executor service.

a test case to reproduce this bug.\r\n\r\n```diff\r\ndiff --git a/client-spark/common/src/main/java/org/apache/spark/shuffle/celeborn/SortBasedPusher.java b/client-spark/common/src/main/java/org/apache/spark/shuffle/celeborn/SortBasedPusher.java\r\nindex 305f83bc..0353fdb8 100644\r\n--- a/client-spark/common/src/main/java/org/apache/spark/shuffle/celeborn/SortBasedPusher.java\r\n+++ b/client-spark/common/src/main/java/org/apache/spark/shuffle/celeborn/SortBasedPusher.java\r\n@@ -21,6 +21,7 @@ import java.io.IOException;\r\n import java.util.LinkedList;\r\n import java.util.concurrent.ExecutorService;\r\n import java.util.concurrent.LinkedBlockingQueue;\r\n+import java.util.concurrent.atomic.AtomicBoolean;\r\n import java.util.concurrent.atomic.LongAdder;\r\n import java.util.function.Consumer;\r\n \r\n@@ -272,6 +273,7 @@ public class SortBasedPusher extends MemoryConsumer {\r\n     executorService.submit(\r\n         () -> {\r\n           try {\r\n+            SortBasedPusher.setPushFlag();\r\n             pushData();\r\n             asyncPushing = false;\r\n           } catch (IOException ie) {\r\n@@ -456,4 +458,10 @@ public class SortBasedPusher extends MemoryConsumer {\r\n   public long getUsed() {\r\n     return super.getUsed();\r\n   }\r\n+\r\n+  public final static AtomicBoolean pushFlag = new AtomicBoolean(false);\r\n+\r\n+  public static void setPushFlag() {\r\n+    pushFlag.set(true);\r\n+  }\r\n }\r\ndiff --git a/tests/spark-it/src/test/scala/org/apache/celeborn/tests/spark/CelebornPipelineSortSuite.scala b/tests/spark-it/src/test/scala/org/apache/celeborn/tests/spark/CelebornPipelineSortSuite.scala\r\nindex 5288ac7a..3d21728c 100644\r\n--- a/tests/spark-it/src/test/scala/org/apache/celeborn/tests/spark/CelebornPipelineSortSuite.scala\r\n+++ b/tests/spark-it/src/test/scala/org/apache/celeborn/tests/spark/CelebornPipelineSortSuite.scala\r\n@@ -17,14 +17,14 @@\r\n \r\n package org.apache.celeborn.tests.spark\r\n \r\n-import org.apache.spark.SparkConf\r\n+import org.apache.spark.{SparkConf, TaskContext}\r\n import org.apache.spark.sql.SparkSession\r\n import org.scalatest.BeforeAndAfterEach\r\n import org.scalatest.funsuite.AnyFunSuite\r\n-\r\n import org.apache.celeborn.client.ShuffleClient\r\n import org.apache.celeborn.common.CelebornConf\r\n import org.apache.celeborn.common.protocol.ShuffleMode\r\n+import org.apache.spark.shuffle.celeborn.SortBasedPusher\r\n \r\n class CelebornPipelineSortSuite extends AnyFunSuite\r\n   with SparkTestBase\r\n@@ -57,4 +57,32 @@ class CelebornPipelineSortSuite extends AnyFunSuite\r\n \r\n     ss.stop()\r\n   }\r\n+\r\n+\r\n+  test("celeborn spark integration test - pipeline bug") {\r\n+    val sparkConf = new SparkConf().setAppName("celeborn-demo").setMaster("local[8]")\r\n+      .set(s"spark.${CelebornConf.CLIENT_PUSH_SORT_PIPELINE_ENABLED.key}", "true")\r\n+      .set(s"spark.${CelebornConf.CLIENT_PUSH_SORT_RANDOMIZE_PARTITION_ENABLED.key}", "true")\r\n+      .set(s"spark.${CelebornConf.CLIENT_PUSH_SORT_MEMORY_THRESHOLD.key}", "128m")\r\n+\r\n+    val ss = SparkSession.builder()\r\n+      .config(updateSparkConf(sparkConf, ShuffleMode.SORT))\r\n+      .getOrCreate()\r\n+    val t = new Thread() {\r\n+      override def run(): Unit = {\r\n+        while(!SortBasedPusher.pushFlag.get()) {}\r\n+        println("try cancel job.")\r\n+        Thread.sleep(1000)\r\n+        ss.sparkContext.cancelJobGroup("test pipeline")\r\n+      }\r\n+    }\r\n+    t.start()\r\n+    ss.sparkContext.setJobGroup("test pipeline", "test pipeline", true)\r\n+    try {\r\n+      ss.sparkContext.parallelize(1 to 24000, 8).flatMap(_ => (1 to 4800).iterator.map(n => n)).repartition(128).count()\r\n+    } catch {\r\n+      case e: Exception =>\r\n+        e.printStackTrace()\r\n+    }\r\n+  }\r\n }\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1806?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1806](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1806?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4503dc7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/516bdc7e08f0d7cb2cde943b853394dda6592de9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (516bdc7) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1806      +/-   ##\n==========================================\n+ Coverage   46.57%   46.75%   +0.18%     \n==========================================\n  Files         162      162              \n  Lines       10078    10078              \n  Branches      927      927              \n==========================================\n+ Hits         4693     4711      +18     \n+ Misses       5073     5059      -14     \n+ Partials      312      308       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1806/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1805?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1805](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1805?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fed5817) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3ec218878afc2285015405b9f7332dbe0afd694b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3ec2188) will **decrease** coverage by `0.01%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1805      +/-   ##\n==========================================\n- Coverage   46.75%   46.73%   -0.01%     \n==========================================\n  Files         162      162              \n  Lines       10077    10077              \n  Branches      927      927              \n==========================================\n- Hits         4710     4708       -2     \n- Misses       5059     5060       +1     \n- Partials      308      309       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1805/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1804?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1804](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1804?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5494c6a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1bf93991bc7ea656dd5618a3d8bf156a04621637?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1bf9399) will **decrease** coverage by `0.24%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1804      +/-   ##\n==========================================\n- Coverage   46.69%   46.45%   -0.24%     \n==========================================\n  Files         162      163       +1     \n  Lines       10123    10135      +12     \n  Branches      933      934       +1     \n==========================================\n- Hits         4726     4707      -19     \n- Misses       5092     5117      +25     \n- Partials      305      311       +6     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1804/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM, was this patch tested? and should we update the docs accordingly?

> LGTM, was this patch tested? and should we update the docs accordingly?\r\n\r\nLocal dry-run with `helm install celeborn-beta charts/celeborn --dry-run  `, following is output:\r\n```yaml\r\nNAME: celeborn-beta\r\nLAST DEPLOYED: Tue Aug 15 10:29:30 2023\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: celeborn/templates/configmap.yaml\r\n#\r\n# Licensed to the Apache Software Foundation (ASF) under one or more\r\n# contributor license agreements.  See the NOTICE file distributed with\r\n# this work for additional information regarding copyright ownership.\r\n# The ASF licenses this file to You under the Apache License, Version 2.0\r\n# (the "License"); you may not use this file except in compliance with\r\n# the License.  You may obtain a copy of the License at\r\n#\r\n#    http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an "AS IS" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n#\r\n\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: celeborn-beta-conf\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\ndata:\r\n  celeborn-defaults.conf: |-\r\n    celeborn.master.endpoints=celeborn-beta-master-0.celeborn-beta-master-svc.default.svc.cluster.local,celeborn-beta-master-1.celeborn-beta-master-svc.default.svc.cluster.local,celeborn-beta-master-2.celeborn-beta-master-svc.default.svc.cluster.local,\r\n    celeborn.master.ha.node.0.host=celeborn-beta-master-0.celeborn-beta-master-svc.default.svc.cluster.local\r\n    celeborn.master.ha.node.1.host=celeborn-beta-master-1.celeborn-beta-master-svc.default.svc.cluster.local\r\n    celeborn.master.ha.node.2.host=celeborn-beta-master-2.celeborn-beta-master-svc.default.svc.cluster.local\r\n    celeborn.master.ha.ratis.raft.server.storage.dir=/mnt/celeborn_ratis\r\n    celeborn.worker.storage.dirs=/mnt/disk1:disktype=HDD,/mnt/disk2:disktype=HDD,/mnt/disk3:disktype=HDD,/mnt/disk4:disktype=HDD\r\n    celeborn.application.heartbeat.timeout=120s\r\n    celeborn.master.ha.enabled=true\r\n    celeborn.master.metrics.prometheus.port=9098\r\n    celeborn.metrics.enabled=true\r\n    celeborn.push.stageEnd.timeout=120s\r\n    celeborn.rpc.dispatcher.numThreads=4\r\n    celeborn.rpc.io.clientThreads=64\r\n    celeborn.rpc.io.numConnectionsPerPeer=2\r\n    celeborn.rpc.io.serverThreads=64\r\n    celeborn.shuffle.chunk.size=8m\r\n    celeborn.worker.fetch.io.threads=32\r\n    celeborn.worker.flusher.buffer.size=256K\r\n    celeborn.worker.heartbeat.timeout=120s\r\n    celeborn.worker.metrics.prometheus.port=9096\r\n    celeborn.worker.monitor.disk.enabled=false\r\n    celeborn.worker.push.io.threads=32\r\n\r\n  celeborn-env.sh: |\r\n    CELEBORN_MASTER_JAVA_OPTS="-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-master.out -Dio.netty.leakDetectionLevel=advanced"\r\n    CELEBORN_MASTER_MEMORY="2g"\r\n    CELEBORN_NO_DAEMONIZE="1"\r\n    CELEBORN_WORKER_JAVA_OPTS="-XX:-PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:gc-worker.out -Dio.netty.leakDetectionLevel=advanced"\r\n    CELEBORN_WORKER_MEMORY="2g"\r\n    CELEBORN_WORKER_OFFHEAP_MEMORY="12g"\r\n    TZ="Asia/Shanghai" \r\n\r\n  log4j2.xml: |-\r\n    <?xml version="1.0" encoding="UTF-8"?>\r\n    <!--\r\n    ~ Licensed to the Apache Software Foundation (ASF) under one or more\r\n    ~ contributor license agreements.  See the NOTICE file distributed with\r\n    ~ this work for additional information regarding copyright ownership.\r\n    ~ The ASF licenses this file to You under the Apache License, Version 2.0\r\n    ~ (the "License"); you may not use this file except in compliance with\r\n    ~ the License.  You may obtain a copy of the License at\r\n    ~\r\n    ~     http://www.apache.org/licenses/LICENSE-2.0\r\n    ~\r\n    ~ Unless required by applicable law or agreed to in writing, software\r\n    ~ distributed under the License is distributed on an "AS IS" BASIS,\r\n    ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    ~ See the License for the specific language governing permissions and\r\n    ~ limitations under the License.\r\n    -->\r\n    <!--\r\n    ~ Extra logging related to initialization of Log4j.\r\n    ~ Set to debug or trace if log4j initialization is failing.\r\n    -->\r\n    <Configuration status="INFO">\r\n        <Appenders>\r\n            <Console name="stdout" target="SYSTEM_OUT">\r\n                <!--\r\n                  ~ In the pattern layout configuration below, we specify an explicit `%ex` conversion\r\n                  ~ pattern for logging Throwables. If this was omitted, then (by default) Log4J would\r\n                  ~ implicitly add an `%xEx` conversion pattern which logs stacktraces with additional\r\n                  ~ class packaging information. That extra information can sometimes add a substantial\r\n                  ~ performance overhead, so we disable it in our default logging config.\r\n                  -->\r\n                <PatternLayout pattern="%d{yy/MM/dd HH:mm:ss,SSS} %p [%t] %c{1}: %m%n%ex"/>\r\n            </Console>\r\n            <RollingRandomAccessFile name="file" fileName="${env:CELEBORN_LOG_DIR}/celeborn.log"\r\n                                     filePattern="${env:CELEBORN_LOG_DIR}/celeborn.log.%d-%i">\r\n                <PatternLayout pattern="%d{yy/MM/dd HH:mm:ss,SSS} %p [%t] %c{1}: %m%n%ex"/>\r\n                <Policies>\r\n                    <SizeBasedTriggeringPolicy size="200 MB"/>\r\n                </Policies>\r\n                <DefaultRolloverStrategy max="7">\r\n                    <Delete basePath="${env:CELEBORN_LOG_DIR}" maxDepth="1">\r\n                        <IfFileName glob="celeborn.log*">\r\n                            <IfAny>\r\n                                <IfAccumulatedFileSize exceeds="1 GB" />\r\n                                <IfAccumulatedFileCount exceeds="10" />\r\n                            </IfAny>\r\n                        </IfFileName>\r\n                    </Delete>\r\n                </DefaultRolloverStrategy>\r\n            </RollingRandomAccessFile>\r\n        </Appenders>\r\n\r\n        <Loggers>\r\n            <Root level="INFO">\r\n                <AppenderRef ref="stdout"/>\r\n                <AppenderRef ref="file"/>\r\n            </Root>\r\n            <Logger name="org.apache.hadoop.hdfs" level="WARN" additivity="false">\r\n                <Appender-ref ref="stdout" level="WARN" />\r\n                <Appender-ref ref="file" level="WARN"/>\r\n            </Logger>\r\n        </Loggers>\r\n    </Configuration>\r\n\r\n  metrics.properties: >-\r\n    *.sink.prometheusServlet.class=org.apache.celeborn.common.metrics.sink.PrometheusServlet\r\n---\r\n# Source: celeborn/templates/master-service.yaml\r\n#\r\n# Licensed to the Apache Software Foundation (ASF) under one or more\r\n# contributor license agreements.  See the NOTICE file distributed with\r\n# this work for additional information regarding copyright ownership.\r\n# The ASF licenses this file to You under the Apache License, Version 2.0\r\n# (the "License"); you may not use this file except in compliance with\r\n# the License.  You may obtain a copy of the License at\r\n#\r\n#    http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an "AS IS" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n#\r\n\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: celeborn-beta-master-svc\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  type: ClusterIP\r\n  ports:\r\n    - port: 9097\r\n      targetPort: 9097\r\n      protocol: TCP\r\n      name: celeborn-master\r\n  clusterIP: None\r\n  selector:\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/role: master\r\n    app.kubernetes.io/instance: celeborn-beta\r\n---\r\n# Source: celeborn/templates/worker-service.yaml\r\n#\r\n# Licensed to the Apache Software Foundation (ASF) under one or more\r\n# contributor license agreements.  See the NOTICE file distributed with\r\n# this work for additional information regarding copyright ownership.\r\n# The ASF licenses this file to You under the Apache License, Version 2.0\r\n# (the "License"); you may not use this file except in compliance with\r\n# the License.  You may obtain a copy of the License at\r\n#\r\n#    http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an "AS IS" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n#\r\n\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: celeborn-beta-worker-svc\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  type: ClusterIP\r\n  clusterIP: None\r\n  selector:\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/role: worker\r\n    app.kubernetes.io/instance: celeborn-beta\r\n---\r\n# Source: celeborn/templates/master-statefulset.yaml\r\n#\r\n# Licensed to the Apache Software Foundation (ASF) under one or more\r\n# contributor license agreements.  See the NOTICE file distributed with\r\n# this work for additional information regarding copyright ownership.\r\n# The ASF licenses this file to You under the Apache License, Version 2.0\r\n# (the "License"); you may not use this file except in compliance with\r\n# the License.  You may obtain a copy of the License at\r\n#\r\n#    http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an "AS IS" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n#\r\n\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: celeborn-beta-master\r\n  labels:\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/name: celeborn\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\n    app.kubernetes.io/role: master\r\n    helm.sh/chart: celeborn-0.1.0\r\n    app.kubernetes.io/instance: celeborn-beta\r\n    app.kubernetes.io/version: "0.2.1"\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: celeborn\r\n      app.kubernetes.io/instance: celeborn-beta\r\n      app.kubernetes.io/version: "0.2.1"\r\n      app.kubernetes.io/role: master\r\n      app.kubernetes.io/instance: celeborn-beta\r\n  serviceName: celeborn-beta-master-svc\r\n  replicas: 3\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: celeborn\r\n        app.kubernetes.io/instance: celeborn-beta\r\n        app.kubernetes.io/version: "0.2.1"\r\n        app.kubernetes.io/role: master\r\n        app.kubernetes.io/tag: 0.1.1-6badd20\r\n        app.kubernetes.io/instance: celeborn-beta\r\n    spec:\r\n      affinity:\r\n        podAntiAffinity:\r\n          requiredDuringSchedulingIgnoredDuringExecution:\r\n          - labelSelector:\r\n              matchExpressions:\r\n              - key: app.kubernetes.io/name\r\n                operator: In\r\n                values:\r\n                - celeborn\r\n              - key: app.kubernetes.io/role\r\n                operator: In\r\n                values:\r\n                - master\r\n            topologyKey: kubernetes.io/hostname\r\n      securityContext:\r\n        fsGroup: 10006\r\n        runAsGroup: 10006\r\n        runAsUser: 10006\r\n      hostNetwork: false\r\n      dnsPolicy: ClusterFirst\r\n      initContainers:\r\n      - name: chown-celeborn-master-volume\r\n        image: alpine:3.18\r\n        imagePullPolicy: Always\r\n        securityContext:\r\n          runAsUser: 0\r\n        command:\r\n        - chown\r\n        - 10006:10006\r\n        - /mnt/celeborn_ratis\r\n        volumeMounts:\r\n          - name: celeborn-master-vol-0\r\n            mountPath: /mnt/celeborn_ratis\r\n      containers:\r\n      - name: celeborn\r\n        image: "aliyunemr/remote-shuffle-service:0.1.1-6badd20"\r\n        imagePullPolicy: Always\r\n        command:\r\n          - "/usr/bin/tini"\r\n          - "--"\r\n          - "/bin/sh"\r\n          - \

The volume name looks need to update.

> The volume name looks need to update.\r\n\r\nThe name of `HostPath` and `EmptyDir` are only valid in pod scope and are not applied for as kubernetes resource.\r\n\r\nWe can ignore that, but for the sake of seriousness, we can just call it with release name.\r\n

Updated local dry-run output.

Thanks! Merged to main/0.3

sbt should be updated too, cc @cfmcgrady

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1803?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1803](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1803?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bc34be2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **decrease** coverage by `0.00%`.\n> Report is 6 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head bc34be2 differs from pull request most recent head b3b5973. Consider uploading reports for the commit b3b5973 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1803      +/-   ##\n==========================================\n- Coverage   46.60%   46.59%   -0.00%     \n==========================================\n  Files         162      162              \n  Lines       10079    10078       -1     \n  Branches      928      927       -1     \n==========================================\n- Hits         4696     4695       -1     \n+ Misses       5073     5072       -1     \n- Partials      310      311       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1803/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Would you mind updating the file `project/CelebornBuild.scala`, following the same rule as we do in the Flink assembly project?\r\n\r\n```diff\r\n           val cp = (assembly / fullClasspath).value\r\n           cp filter { v =>\r\n             val name = v.data.getName\r\n-            !(name.startsWith("celeborn-") || name.startsWith("protobuf-java-") ||\r\n-              name.startsWith("guava-") || name.startsWith("netty-") || name.startsWith("commons-lang3-"))\r\n+            !(name.startsWith("celeborn-") ||\r\n+                name.startsWith("protobuf-java-") ||\r\n+                name.startsWith("guava-") ||\r\n+                name.startsWith("netty-") ||\r\n+                name.startsWith("commons-lang3-") ||\r\n+                name.startsWith("RoaringBitmap-"))\r\n           }\r\n         },\r\n\r\n           ShadeRule.rename("com.google.protobuf.**" -> "org.apache.celeborn.shaded.com.google.protobuf.@1").inAll,\r\n           ShadeRule.rename("com.google.common.**" -> "org.apache.celeborn.shaded.com.google.common.@1").inAll,\r\n           ShadeRule.rename("io.netty.**" -> "org.apache.celeborn.shaded.io.netty.@1").inAll,\r\n-          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll\r\n+          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll,\r\n+          ShadeRule.rename("org.roaringbitmap.**" -> "org.apache.celeborn.shaded.org.roaringbitmap.@1").inAll\r\n         ),\r\n\r\n         (assembly / assemblyMergeStrategy) := {\r\n```\r\n

BTW, NOTICE for the shaded module should be updated too

> Would you mind updating the file `project/CelebornBuild.scala`, following the same rule as we do in the Flink assembly project?\r\n> \r\n> ```diff\r\n>            val cp = (assembly / fullClasspath).value\r\n>            cp filter { v =>\r\n>              val name = v.data.getName\r\n> -            !(name.startsWith("celeborn-") || name.startsWith("protobuf-java-") ||\r\n> -              name.startsWith("guava-") || name.startsWith("netty-") || name.startsWith("commons-lang3-"))\r\n> +            !(name.startsWith("celeborn-") ||\r\n> +                name.startsWith("protobuf-java-") ||\r\n> +                name.startsWith("guava-") ||\r\n> +                name.startsWith("netty-") ||\r\n> +                name.startsWith("commons-lang3-") ||\r\n> +                name.startsWith("RoaringBitmap-"))\r\n>            }\r\n>          },\r\n> \r\n>            ShadeRule.rename("com.google.protobuf.**" -> "org.apache.celeborn.shaded.com.google.protobuf.@1").inAll,\r\n>            ShadeRule.rename("com.google.common.**" -> "org.apache.celeborn.shaded.com.google.common.@1").inAll,\r\n>            ShadeRule.rename("io.netty.**" -> "org.apache.celeborn.shaded.io.netty.@1").inAll,\r\n> -          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll\r\n> +          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll,\r\n> +          ShadeRule.rename("org.roaringbitmap.**" -> "org.apache.celeborn.shaded.org.roaringbitmap.@1").inAll\r\n>          ),\r\n> \r\n>          (assembly / assemblyMergeStrategy) := {\r\n> ```\r\n\r\nOK，I‘ll update it.\r\n\r\n> BTW, NOTICE for the shaded module should be updated too\r\n\r\nRoaringBitmap has no notice and its using Apache Licencese V2. We already contains its license info in LICENSE-binary file.\r\n\r\n> Would you mind updating the file `project/CelebornBuild.scala`, following the same rule as we do in the Flink assembly project?\r\n> \r\n> ```diff\r\n>            val cp = (assembly / fullClasspath).value\r\n>            cp filter { v =>\r\n>              val name = v.data.getName\r\n> -            !(name.startsWith("celeborn-") || name.startsWith("protobuf-java-") ||\r\n> -              name.startsWith("guava-") || name.startsWith("netty-") || name.startsWith("commons-lang3-"))\r\n> +            !(name.startsWith("celeborn-") ||\r\n> +                name.startsWith("protobuf-java-") ||\r\n> +                name.startsWith("guava-") ||\r\n> +                name.startsWith("netty-") ||\r\n> +                name.startsWith("commons-lang3-") ||\r\n> +                name.startsWith("RoaringBitmap-"))\r\n>            }\r\n>          },\r\n> \r\n>            ShadeRule.rename("com.google.protobuf.**" -> "org.apache.celeborn.shaded.com.google.protobuf.@1").inAll,\r\n>            ShadeRule.rename("com.google.common.**" -> "org.apache.celeborn.shaded.com.google.common.@1").inAll,\r\n>            ShadeRule.rename("io.netty.**" -> "org.apache.celeborn.shaded.io.netty.@1").inAll,\r\n> -          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll\r\n> +          ShadeRule.rename("org.apache.commons.**" -> "org.apache.celeborn.shaded.org.apache.commons.@1").inAll,\r\n> +          ShadeRule.rename("org.roaringbitmap.**" -> "org.apache.celeborn.shaded.org.roaringbitmap.@1").inAll\r\n>          ),\r\n> \r\n>          (assembly / assemblyMergeStrategy) := {\r\n> ```\r\n\r\nI\

> BTW, NOTICE for the shaded module should be updated too\r\n\r\nRoarbingBitmap has no notice and its using apache license. We already contains its license info in LICENSE-binary. Is there anything else need to put in NOTICE?

Not the NOTICE-binary, technically, each jar we published to maven central should contain its own NOTICE file, which reflects the real content itself. For shaded jars, we need to maintain the NOTICE file manually.

> Not the NOTICE-binary, technically, each jar we published to maven central should contain its own NOTICE file, which reflects the real content itself. For shaded jars, we need to maintain the NOTICE file manually.\r\n\r\nAny reference for bundle notice into jar file？

https://github.com/apache/kyuubi/tree/master/externals/kyuubi-spark-sql-engine/src/main/resources/META-INF

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1802?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1802](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1802?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (60fc52d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0d1261632dca9d67a1684cb22c1e92d7da6bb5d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0d12616) will **decrease** coverage by `0.07%`.\n> Report is 10 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1802      +/-   ##\n==========================================\n- Coverage   46.76%   46.69%   -0.07%     \n==========================================\n  Files         162      162              \n  Lines       10077    10123      +46     \n  Branches      927      933       +6     \n==========================================\n+ Hits         4712     4726      +14     \n- Misses       5058     5092      +34     \n+ Partials      307      305       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1802/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merging to main(v0.4.0).

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1801?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1801](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1801?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d857bb8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0d1261632dca9d67a1684cb22c1e92d7da6bb5d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0d12616) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1801      +/-   ##\n==========================================\n- Coverage   46.76%   46.75%   -0.01%     \n==========================================\n  Files         162      162              \n  Lines       10077    10078       +1     \n  Branches      927      927              \n==========================================\n- Hits         4712     4711       -1     \n- Misses       5058     5059       +1     \n- Partials      307      308       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1801?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1801?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.44% <100.00%> (+0.01%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1801/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

thanks, merge to main

![截屏2023-08-08 18 08 16](https://github.com/apache/incubator-celeborn/assets/52876270/94ac51b6-922e-46ed-a0fc-f869d7ccc48e)\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1800?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1800](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1800?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7286c42) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d7e900fa9a4804ace3f539bd072e50be96e9dd6e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d7e900f) will **increase** coverage by `0.03%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1800      +/-   ##\n==========================================\n+ Coverage   46.49%   46.51%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10222    10228       +6     \n  Branches      936      936              \n==========================================\n+ Hits         4752     4757       +5     \n- Misses       5156     5157       +1     \n  Partials      314      314              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1800?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1800?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.49% <100.00%> (+0.03%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1800/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Marked as draft, should do some logic optimize before this.

CI fail related to #1844, will rebase and test agine.

> ![截屏2023-08-08 18 08 16](https://user-images.githubusercontent.com/52876270/259065655-94ac51b6-922e-46ed-a0fc-f869d7ccc48e.png)\r\n\r\nAccording to the snapshot, the metrics will monotonously increase. Is it better to define the metric as `pause time in last xxx minutes`?

@waitinfuture \r\nSorry for late reply, current add logic to force append pause spent time after N TRIM action.\r\n\r\nAs your comment to show `pause time in last xxx minutes`, IMO, users may care about how long the cluster in back-pressure state over this time.  `pause time in last xxx minutes` can tell us state in specifies the time frame, but not tell us macroscopically about the pause for the whole duration.\r\n\r\nCurrent PR implementation can do both of the things mentioned above.\r\n\r\nIf you have any other ideas, please let me know.

@waitinfuture Thanks for your review, made correction, PTAL

Celeborn only publishes shaded client module jars, if the javadoc is not enforced, we can simply ignore it.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1799?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1799](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1799?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7b721f3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **increase** coverage by `0.13%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1799      +/-   ##\n==========================================\n+ Coverage   46.60%   46.73%   +0.13%     \n==========================================\n  Files         162      162              \n  Lines       10079    10077       -2     \n  Branches      928      927       -1     \n==========================================\n+ Hits         4696     4708      +12     \n+ Misses       5073     5060      -13     \n+ Partials      310      309       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1799/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main(v0.4.0)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1798?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1798](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1798?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (37dc65a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **decrease** coverage by `0.01%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1798      +/-   ##\n==========================================\n- Coverage   46.60%   46.59%   -0.01%     \n==========================================\n  Files         162      162              \n  Lines       10079    10077       -2     \n  Branches      928      927       -1     \n==========================================\n- Hits         4696     4694       -2     \n+ Misses       5073     5072       -1     \n- Partials      310      311       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1798/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1797?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1797](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1797?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (71a60a6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/30d979f6854508824531e553b289119da89ae565?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (30d979f) will **increase** coverage by `0.14%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1797      +/-   ##\n==========================================\n+ Coverage   46.45%   46.59%   +0.14%     \n==========================================\n  Files         163      163              \n  Lines       10135    10135              \n  Branches      934      934              \n==========================================\n+ Hits         4707     4721      +14     \n+ Misses       5117     5105      -12     \n+ Partials      311      309       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1797/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Add this to github CI?

@cfmcgrady thanks for working on this.\r\n\r\nIMO, the dependencies auditing in Celeborn is a bit complex compared with Spark, since Celeborn is composed of client, master, and worker, all of them have different runtime jars.\r\n\r\nBut I think we can merge the classpath of master and worker, which simplifies both packaging scripts and dependencies auditing, then the dependencies auditing only needs to take care of client and server dependencies.\r\n\r\n- dependencise-client-flink-1.14\r\n- dependencise-client-flink-...\r\n- dependencise-client-spark-2.4\r\n- dependencise-client-spark-...\r\n- dependencise-server

And I think we can focus on sbt for this new feature, mvn has some cache issues which are hard to overcome

> Add this to github CI?\r\n\r\nI intend to introduce a GitHub Action job once sbt and maven dependencies have been aligned. @AngersZhuuuu 

1. Audit the dependencies module by module as suggested.\r\n2. As Maven remains the predominant build tool among users, the dependencies list in this PR is generated using Maven.\r\ncc @pan3793 @waitinfuture 

the diff between sbt and maven, `-` for maven, `+` for sbt\r\n\r\n```diff\r\ndiff --git a/dev/deps/dependencies-client-flink-1.14 b/dev/deps/dependencies-client-flink-1.14\r\nindex 7e8c870f..bbc28ab9 100644\r\n--- a/dev/deps/dependencies-client-flink-1.14\r\n+++ b/dev/deps/dependencies-client-flink-1.14\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.8.0//lz4-java-1.8.0.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.15//scala-library-2.12.15.jar\r\n scala-reflect/2.12.15//scala-reflect-2.12.15.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.2-1//zstd-jni-1.5.2-1.jar\r\ndiff --git a/dev/deps/dependencies-client-flink-1.15 b/dev/deps/dependencies-client-flink-1.15\r\nindex 7e8c870f..bbc28ab9 100644\r\n--- a/dev/deps/dependencies-client-flink-1.15\r\n+++ b/dev/deps/dependencies-client-flink-1.15\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.8.0//lz4-java-1.8.0.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.15//scala-library-2.12.15.jar\r\n scala-reflect/2.12.15//scala-reflect-2.12.15.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.2-1//zstd-jni-1.5.2-1.jar\r\ndiff --git a/dev/deps/dependencies-client-flink-1.17 b/dev/deps/dependencies-client-flink-1.17\r\nindex 7e8c870f..bbc28ab9 100644\r\n--- a/dev/deps/dependencies-client-flink-1.17\r\n+++ b/dev/deps/dependencies-client-flink-1.17\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.8.0//lz4-java-1.8.0.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.15//scala-library-2.12.15.jar\r\n scala-reflect/2.12.15//scala-reflect-2.12.15.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.2-1//zstd-jni-1.5.2-1.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-2.4 b/dev/deps/dependencies-client-spark-2.4\r\nindex 917a0444..2dd3df6c 100644\r\n--- a/dev/deps/dependencies-client-spark-2.4\r\n+++ b/dev/deps/dependencies-client-spark-2.4\r\n@@ -24,11 +24,9 @@ guava/14.0.1//guava-14.0.1.jar\r\n hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n-jackson-annotations/2.6.7//jackson-annotations-2.6.7.jar\r\n-jackson-core/2.6.7//jackson-core-2.6.7.jar\r\n-jackson-databind/2.6.7.3//jackson-databind-2.6.7.3.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.4.0//lz4-java-1.4.0.jar\r\n@@ -51,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -76,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.11.12//scala-library-2.11.12.jar\r\n scala-reflect/2.11.12//scala-reflect-2.11.12.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.4.4-3//zstd-jni-1.4.4-3.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-3.0 b/dev/deps/dependencies-client-spark-3.0\r\nindex 5005ba52..5ebe3463 100644\r\n--- a/dev/deps/dependencies-client-spark-3.0\r\n+++ b/dev/deps/dependencies-client-spark-3.0\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.7.1//lz4-java-1.7.1.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.10//scala-library-2.12.10.jar\r\n scala-reflect/2.12.10//scala-reflect-2.12.10.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.4.4-3//zstd-jni-1.4.4-3.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-3.1 b/dev/deps/dependencies-client-spark-3.1\r\nindex 6e8fd970..772fd3f2 100644\r\n--- a/dev/deps/dependencies-client-spark-3.1\r\n+++ b/dev/deps/dependencies-client-spark-3.1\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.7.1//lz4-java-1.7.1.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.10//scala-library-2.12.10.jar\r\n scala-reflect/2.12.10//scala-reflect-2.12.10.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.4.8-1//zstd-jni-1.4.8-1.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-3.2 b/dev/deps/dependencies-client-spark-3.2\r\nindex 6fbebf79..32e829d7 100644\r\n--- a/dev/deps/dependencies-client-spark-3.2\r\n+++ b/dev/deps/dependencies-client-spark-3.2\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.7.1//lz4-java-1.7.1.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.15//scala-library-2.12.15.jar\r\n scala-reflect/2.12.15//scala-reflect-2.12.15.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.0-4//zstd-jni-1.5.0-4.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-3.3 b/dev/deps/dependencies-client-spark-3.3\r\nindex 7e8c870f..bbc28ab9 100644\r\n--- a/dev/deps/dependencies-client-spark-3.3\r\n+++ b/dev/deps/dependencies-client-spark-3.3\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.8.0//lz4-java-1.8.0.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -73,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.15//scala-library-2.12.15.jar\r\n scala-reflect/2.12.15//scala-reflect-2.12.15.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.2-1//zstd-jni-1.5.2-1.jar\r\ndiff --git a/dev/deps/dependencies-client-spark-3.4 b/dev/deps/dependencies-client-spark-3.4\r\nindex 8c570f49..591177f5 100644\r\n--- a/dev/deps/dependencies-client-spark-3.4\r\n+++ b/dev/deps/dependencies-client-spark-3.4\r\n@@ -25,7 +25,8 @@ hadoop-client-api/3.2.4//hadoop-client-api-3.2.4.jar\r\n hadoop-client-runtime/3.2.4//hadoop-client-runtime-3.2.4.jar\r\n htrace-core4/4.1.0-incubating//htrace-core4-4.1.0-incubating.jar\r\n jcl-over-slf4j/1.7.36//jcl-over-slf4j-1.7.36.jar\r\n-jsr305/1.3.9//jsr305-1.3.9.jar\r\n+jna/4.2.2//jna-4.2.2.jar\r\n+jsr305/3.0.2//jsr305-3.0.2.jar\r\n jul-to-slf4j/1.7.36//jul-to-slf4j-1.7.36.jar\r\n leveldbjni-all/1.8//leveldbjni-all-1.8.jar\r\n lz4-java/1.8.0//lz4-java-1.8.0.jar\r\n@@ -48,6 +49,7 @@ netty-codec-xml/4.1.93.Final//netty-codec-xml-4.1.93.Final.jar\r\n netty-codec/4.1.93.Final//netty-codec-4.1.93.Final.jar\r\n netty-common/4.1.93.Final//netty-common-4.1.93.Final.jar\r\n netty-handler-proxy/4.1.93.Final//netty-handler-proxy-4.1.93.Final.jar\r\n+netty-handler-ssl-ocsp/4.1.93.Final//netty-handler-ssl-ocsp-4.1.93.Final.jar\r\n netty-handler/4.1.93.Final//netty-handler-4.1.93.Final.jar\r\n netty-resolver-dns-classes-macos/4.1.93.Final//netty-resolver-dns-classes-macos-4.1.93.Final.jar\r\n netty-resolver-dns-native-macos/4.1.93.Final/osx-aarch_64/netty-resolver-dns-native-macos-4.1.93.Final-osx-aarch_64.jar\r\n@@ -56,12 +58,8 @@ netty-resolver-dns/4.1.93.Final//netty-resolver-dns-4.1.93.Final.jar\r\n netty-resolver/4.1.93.Final//netty-resolver-4.1.93.Final.jar\r\n netty-transport-classes-epoll/4.1.93.Final//netty-transport-classes-epoll-4.1.93.Final.jar\r\n netty-transport-classes-kqueue/4.1.93.Final//netty-transport-classes-kqueue-4.1.93.Final.jar\r\n-netty-transport-native-epoll/4.1.87.Final/linux-aarch_64/netty-transport-native-epoll-4.1.87.Final-linux-aarch_64.jar\r\n-netty-transport-native-epoll/4.1.87.Final/linux-x86_64/netty-transport-native-epoll-4.1.87.Final-linux-x86_64.jar\r\n netty-transport-native-epoll/4.1.93.Final/linux-aarch_64/netty-transport-native-epoll-4.1.93.Final-linux-aarch_64.jar\r\n netty-transport-native-epoll/4.1.93.Final/linux-x86_64/netty-transport-native-epoll-4.1.93.Final-linux-x86_64.jar\r\n-netty-transport-native-kqueue/4.1.87.Final/osx-aarch_64/netty-transport-native-kqueue-4.1.87.Final-osx-aarch_64.jar\r\n-netty-transport-native-kqueue/4.1.87.Final/osx-x86_64/netty-transport-native-kqueue-4.1.87.Final-osx-x86_64.jar\r\n netty-transport-native-kqueue/4.1.93.Final/osx-aarch_64/netty-transport-native-kqueue-4.1.93.Final-osx-aarch_64.jar\r\n netty-transport-native-kqueue/4.1.93.Final/osx-x86_64/netty-transport-native-kqueue-4.1.93.Final-osx-x86_64.jar\r\n netty-transport-native-unix-common/4.1.93.Final//netty-transport-native-unix-common-4.1.93.Final.jar\r\n@@ -77,6 +75,6 @@ ratis-thirdparty-misc/1.0.4//ratis-thirdparty-misc-1.0.4.jar\r\n scala-library/2.12.17//scala-library-2.12.17.jar\r\n scala-reflect/2.12.17//scala-reflect-2.12.17.jar\r\n shims/0.9.32//shims-0.9.32.jar\r\n-slf4j-api/1.7.36//slf4j-api-1.7.36.jar\r\n+slf4j-api/2.0.7//slf4j-api-2.0.7.jar\r\n snakeyaml/1.33//snakeyaml-1.33.jar\r\n zstd-jni/1.5.2-5//zstd-jni-1.5.2-5.jar\r\n```

Hi @cfmcgrady, would you like to add how to use this script audit dependencies into `${PROJECT_HOME}/CONTRIBUTING.md`, since we added how to build configurations docs in this.

> Hi @cfmcgrady, would you like to add how to use this script audit dependencies into `${PROJECT_HOME}/CONTRIBUTING.md`, since we added how to build configurations docs in this.\r\n\r\nGood catch, Thank you for the reminder, let me fix the ci first.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1796?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1796](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1796?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e78f9e3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **increase** coverage by `0.17%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1796      +/-   ##\n==========================================\n+ Coverage   46.60%   46.76%   +0.17%     \n==========================================\n  Files         162      162              \n  Lines       10079    10077       -2     \n  Branches      928      927       -1     \n==========================================\n+ Hits         4696     4712      +16     \n+ Misses       5073     5058      -15     \n+ Partials      310      307       -3     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1796?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1796?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1796/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1795?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1795](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1795?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b15425a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **increase** coverage by `0.16%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1795      +/-   ##\n==========================================\n+ Coverage   46.60%   46.75%   +0.16%     \n==========================================\n  Files         162      162              \n  Lines       10079    10078       -1     \n  Branches      928      927       -1     \n==========================================\n+ Hits         4696     4711      +15     \n+ Misses       5073     5059      -14     \n+ Partials      310      308       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1795/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @waitinfuture PTAL when you have time

Good job! The article is clear and detailed.

Thanks, merged to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1794?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1794](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1794?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2e39042) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **decrease** coverage by `0.11%`.\n> Report is 7 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 2e39042 differs from pull request most recent head e85c244. Consider uploading reports for the commit e85c244 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1794      +/-   ##\n==========================================\n- Coverage   46.60%   46.49%   -0.11%     \n==========================================\n  Files         162      162              \n  Lines       10079    10103      +24     \n  Branches      928      929       +1     \n==========================================\n  Hits         4696     4696              \n- Misses       5073     5097      +24     \n  Partials      310      310              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1794?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1794?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.61% <0.00%> (-0.06%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1794/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1793?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1793](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1793?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5d7c2e6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6ea1ee2ec424c1011eef80a5d74c54cc1464f471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ea1ee2) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1793   +/-   ##\n=======================================\n  Coverage   46.60%   46.60%           \n=======================================\n  Files         162      162           \n  Lines       10079    10079           \n  Branches      928      928           \n=======================================\n  Hits         4696     4696           \n  Misses       5073     5073           \n  Partials      310      310           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Late LGTM, please use `dev/merge_pr.py` to merge PR, it canonicalizes the commit message and simplifies the backport process. 

> Late LGTM, please use `dev/merge_pr.py` to merge PR, it canonicalizes the commit message and simplifies the backport process.\r\n\r\nok.

Alright. BTW, better using a new JIRA ticket instead of FOLLOWUP for cross-version PR, because it will confuse users which is the actually fixed version.

> Alright. BTW, better using a new JIRA ticket instead of FOLLOWUP for cross-version PR, because it will confuse users which is the actually fixed version.\r\n\r\nThanks, will do this way in the future.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1791](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2106e86) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/35fe63e4a9d4dfa5c98920a5b1df7c7784ca23be?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (35fe63e) will **increase** coverage by `0.20%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `52.64%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1791      +/-   ##\n==========================================\n+ Coverage   46.80%   47.00%   +0.20%     \n==========================================\n  Files         162      162              \n  Lines       10012    10038      +26     \n  Branches      923      927       +4     \n==========================================\n+ Hits         4685     4717      +32     \n+ Misses       5018     5013       -5     \n+ Partials      309      308       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `63.30% <22.23%> (-2.06%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `41.36% <33.34%> (+0.31%)` | :arrow_up: |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.72% <100.00%> (+0.43%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1791/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1790](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (34dcbd6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/39ab731b8584c34f8d40e914836be70b0f70addb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (39ab731) will **increase** coverage by `0.23%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `70.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1790      +/-   ##\n==========================================\n+ Coverage   46.78%   47.00%   +0.23%     \n==========================================\n  Files         162      162              \n  Lines       10012    10032      +20     \n  Branches      923      923              \n==========================================\n+ Hits         4683     4715      +32     \n+ Misses       5019     5011       -8     \n+ Partials      310      306       -4     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.68% <0.00%> (-0.01%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.36% <87.50%> (+0.01%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1790/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The code change LGTM, but would you mind supplying some background why should we limit the worker number for single shuffle? And any suggestion for the value setting?

> The code change LGTM, but would you mind supplying some background why should we limit the worker number for single shuffle? And any suggestion for the value setting?\r\n\r\n@pan3793 Updated, please take a look again.

Thanks, merging to main/0.3

cc @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1789?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1789](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1789?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4ae10d0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **increase** coverage by `0.16%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1789      +/-   ##\n==========================================\n+ Coverage   46.78%   46.94%   +0.16%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4699      +16     \n+ Misses       5019     5006      -13     \n+ Partials      310      307       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1789/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @cfmcgrady @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1787?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1787](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1787?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0200045) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3e266c0cf6247245ab7bcd3e1abb49cf4ece0bca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3e266c0) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1787      +/-   ##\n==========================================\n+ Coverage   46.78%   46.80%   +0.02%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4685       +2     \n+ Misses       5019     5018       -1     \n+ Partials      310      309       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1787/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1786?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1786](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1786?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8de4165) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3e266c0cf6247245ab7bcd3e1abb49cf4ece0bca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3e266c0) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1786      +/-   ##\n==========================================\n+ Coverage   46.78%   46.80%   +0.02%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4685       +2     \n+ Misses       5019     5018       -1     \n+ Partials      310      309       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1786/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main.

Also cherry-picked to branch-0.3(v0.3.2)

ping @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1785?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1785](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1785?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ec5687b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **increase** coverage by `0.16%`.\n> Report is 6 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1785      +/-   ##\n==========================================\n+ Coverage   46.78%   46.94%   +0.16%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4699      +16     \n+ Misses       5019     5006      -13     \n+ Partials      310      307       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1785/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1784?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1784](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1784?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4b026ae) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6e9a98a28ffe09f8842f4676d2b4fcf04e2736bb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e9a98a) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 4b026ae differs from pull request most recent head 3dd544e. Consider uploading reports for the commit 3dd544e to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1784      +/-   ##\n==========================================\n- Coverage   46.80%   46.76%   -0.03%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n- Hits         4685     4681       -4     \n- Misses       5018     5020       +2     \n- Partials      309      311       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1784/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

<img width="896" alt="截屏2023-08-02 11 27 07" src="https://github.com/apache/incubator-celeborn/assets/4150993/97639f15-e74b-4448-aed9-68d01f9fb5fc">\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1783?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1783](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1783?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe05ea6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3e266c0cf6247245ab7bcd3e1abb49cf4ece0bca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3e266c0) will **increase** coverage by `0.02%`.\n> Report is 1 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1783      +/-   ##\n==========================================\n+ Coverage   46.78%   46.80%   +0.02%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4685       +2     \n+ Misses       5019     5018       -1     \n+ Partials      310      309       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1783/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @cfmcgrady @FMX 

ping @zhongqiangczq @pan3793 @FMX comments addressed, please take a look again

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1782?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1782](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1782?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (843ee0a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **not change** coverage.\n> Report is 5 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1782   +/-   ##\n=======================================\n  Coverage   46.78%   46.78%           \n=======================================\n  Files         162      162           \n  Lines       10012    10012           \n  Branches      923      923           \n=======================================\n  Hits         4683     4683           \n  Misses       5019     5019           \n  Partials      310      310           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1782/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1781?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1781](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1781?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cb89dac) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **increase** coverage by `0.02%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1781      +/-   ##\n==========================================\n+ Coverage   46.78%   46.80%   +0.02%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4685       +2     \n+ Misses       5019     5018       -1     \n+ Partials      310      309       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1781/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @zhongqiangczq @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1780?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1780](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1780?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2516051) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f869ab25b65d9fe10be1a43e70e6c59d7412a492?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f869ab2) will **not change** coverage.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1780   +/-   ##\n=======================================\n  Coverage   46.94%   46.94%           \n=======================================\n  Files         162      162           \n  Lines       10012    10012           \n  Branches      923      923           \n=======================================\n  Hits         4699     4699           \n  Misses       5006     5006           \n  Partials      307      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1779?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1779](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1779?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (259263b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **increase** coverage by `0.10%`.\n> Report is 13 commits behind head on main.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1779      +/-   ##\n==========================================\n+ Coverage   46.78%   46.88%   +0.10%     \n==========================================\n  Files         162      162              \n  Lines       10012    10027      +15     \n  Branches      923      923              \n==========================================\n+ Hits         4683     4700      +17     \n+ Misses       5019     5018       -1     \n+ Partials      310      309       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1779?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1779?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.44% <100.00%> (+0.08%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1779/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Also, I think this PR deserves e2e test.

As discussed offline, we need to re-design this feature.

Updated. Ping @waitinfuture @RexXiong .

cc @pan3793 @cfmcgrady @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1778?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1778](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1778?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (20daea7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/37a9c633b372746daaa04b0f72659c8b715dd981?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (37a9c63) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1778      +/-   ##\n==========================================\n- Coverage   46.96%   46.80%   -0.15%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n- Hits         4701     4685      -16     \n- Misses       5005     5018      +13     \n- Partials      306      309       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1778/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main.

the diff between sbt and maven after this PR.\r\n\r\n```diff\r\ndiff --git a/maven-files.out b/sbt-files.out\r\nindex fa4de49..7fb6567 100644\r\n--- a/maven-files.out\r\n+++ b/sbt-files.out\r\n@@ -1,7 +1,6 @@\r\n ./celeborn-client-spark-3-shaded_2.12-0.4.0-SNAPSHOT.jar\r\n-./META-INF/DEPENDENCIES\r\n+./META-INF/INDEX.LIST\r\n ./META-INF/io.netty.versions.properties\r\n-./META-INF/LICENSE\r\n ./META-INF/LICENSE.txt\r\n ./META-INF/MANIFEST.MF\r\n ./META-INF/maven/com.google.guava/guava/pom.properties\r\n@@ -68,23 +67,12 @@\r\n ./META-INF/maven/io.netty/netty-transport-sctp/pom.xml\r\n ./META-INF/maven/io.netty/netty-transport-udt/pom.properties\r\n ./META-INF/maven/io.netty/netty-transport-udt/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3-shaded_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3-shaded_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-common_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.xml\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.properties\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.xml\r\n ./META-INF/maven/org.jctools/jctools-core/pom.properties\r\n ./META-INF/maven/org.jctools/jctools-core/pom.xml\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_aarch_64.so\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_x86_64.so\r\n-./META-INF/NOTICE\r\n ./META-INF/NOTICE.txt\r\n ./META-INF/services/reactor.blockhound.integration.BlockHoundIntegration\r\n ./org/apache/celeborn/client/ApplicationHeartbeater$$anon$1.class\r\n@@ -802,6 +790,8 @@\r\n ./org/apache/celeborn/common/write/SimplePushStrategy.class\r\n ./org/apache/celeborn/common/write/SlowStartPushStrategy$CongestControlContext.class\r\n ./org/apache/celeborn/common/write/SlowStartPushStrategy.class\r\n+./org/apache/celeborn/package$.class\r\n+./org/apache/celeborn/package.class\r\n ./org/apache/celeborn/reflect/DynClasses$1.class\r\n ./org/apache/celeborn/reflect/DynClasses$Builder.class\r\n ./org/apache/celeborn/reflect/DynClasses.class\r\n```

Many Netty deps are needed to exclude, would prefer to build depList first.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

addressed in https://github.com/apache/incubator-celeborn/pull/1831

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1776?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1776](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1776?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3cc0e1e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f869ab25b65d9fe10be1a43e70e6c59d7412a492?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f869ab2) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1776   +/-   ##\n=======================================\n  Coverage   46.94%   46.94%           \n=======================================\n  Files         162      162           \n  Lines       10012    10012           \n  Branches      923      923           \n=======================================\n  Hits         4699     4699           \n  Misses       5006     5006           \n  Partials      307      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main.

cc @pan3793 @cfmcgrady @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1775?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1775](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1775?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cc4eaf0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0295e9f3f1f5781af124ae319e202a2594a103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f0295e) will **decrease** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1775      +/-   ##\n==========================================\n- Coverage   46.81%   46.69%   -0.11%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n- Hits         4686     4674      -12     \n- Misses       5019     5030      +11     \n- Partials      307      308       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1775/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main.

cc @pan3793 @waitinfuture @zy-jordan 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1774?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1774](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1774?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f3ee17) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0295e9f3f1f5781af124ae319e202a2594a103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f0295e) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 5f3ee17 differs from pull request most recent head 9862e98. Consider uploading reports for the commit 9862e98 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1774      +/-   ##\n==========================================\n- Coverage   46.81%   46.80%   -0.00%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n- Hits         4686     4685       -1     \n+ Misses       5019     5018       -1     \n- Partials      307      309       +2     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1774/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

the suite ran as expected now.\r\n```\r\n[INFO] Running org.apache.celeborn.client.write.DataPushQueueSuiteJ\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.278 s - in org.apache.celeborn.client.write.DataPushQueueSuiteJ\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1773?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1773](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1773?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3554db8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **not change** coverage.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1773   +/-   ##\n=======================================\n  Coverage   46.78%   46.78%           \n=======================================\n  Files         162      162           \n  Lines       10012    10012           \n  Branches      923      923           \n=======================================\n  Hits         4683     4683           \n  Misses       5019     5019           \n  Partials      310      310           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1773/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady @pan3793 @FMX 

Thanks, merging to main

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1772?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1772](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1772?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (71fd0e0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bacfb54447f9d5b7cb4b371d7a7aed1895181471?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bacfb54) will **decrease** coverage by `0.10%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 71fd0e0 differs from pull request most recent head 621062c. Consider uploading reports for the commit 621062c to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1772      +/-   ##\n==========================================\n- Coverage   46.75%   46.65%   -0.10%     \n==========================================\n  Files         162      162              \n  Lines       10046    10012      -34     \n  Branches      927      923       -4     \n==========================================\n- Hits         4696     4670      -26     \n- Misses       5028     5032       +4     \n+ Partials      322      310      -12     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1772/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1771?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1771](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1771?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eceaf48) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6cd1355488c74e2f82acea6c9f6da1b197c42dea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6cd1355) will **increase** coverage by `0.18%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1771      +/-   ##\n==========================================\n+ Coverage   46.78%   46.96%   +0.18%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n+ Hits         4683     4701      +18     \n+ Misses       5019     5005      -14     \n+ Partials      310      306       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1771/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1770?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1770](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1770?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6f2384f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0db2150731adbe6d4e5f3e38fde0af6df0943eb8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0db2150) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1770   +/-   ##\n=======================================\n  Coverage   46.67%   46.67%           \n=======================================\n  Files         162      162           \n  Lines       10012    10012           \n  Branches      923      923           \n=======================================\n  Hits         4672     4672           \n  Misses       5031     5031           \n  Partials      309      309           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1770/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1769?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1769](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1769?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (97b68d1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c5ddf9b2ca0e531d255be5ab69b56598435b2206?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c5ddf9b) will **decrease** coverage by `0.19%`.\n> Report is 7 commits behind head on main.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 97b68d1 differs from pull request most recent head d367a85. Consider uploading reports for the commit d367a85 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1769      +/-   ##\n==========================================\n- Coverage   46.88%   46.69%   -0.19%     \n==========================================\n  Files         162      162              \n  Lines       10026    10012      -14     \n  Branches      925      923       -2     \n==========================================\n- Hits         4700     4674      -26     \n- Misses       5009     5030      +21     \n+ Partials      317      308       -9     \n```\n\n\n[see 9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1769/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady @pan3793 comments addressed, please take a look again

Thanks, merging to main

ping @waitinfuture @RexXiong @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1768](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (389c674) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4a4a37ed171efb85f1bce0b46396ba0f4360377b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4a4a37e) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1768      +/-   ##\n==========================================\n- Coverage   46.53%   46.48%   -0.05%     \n==========================================\n  Files         162      163       +1     \n  Lines       10123    10134      +11     \n  Branches      933      934       +1     \n==========================================\n  Hits         4710     4710              \n- Misses       5105     5116      +11     \n  Partials      308      308              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/server/common/http/HttpUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1768?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwVXRpbHMuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @RexXiong 

ping @pan3793 @waitinfuture @RexXiong 

Shall we consider idempotent here?

I suppose the change is safe, and the protobuf definition can be cleaned too.\r\n\r\n@FMX could you please take a look? as you touched this part last time.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1767?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1767](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1767?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8a04307) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2ab88f773aa08f50a3bde1eec7885f77901c5e32?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ab88f7) will **increase** coverage by `0.02%`.\n> Report is 8 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1767      +/-   ##\n==========================================\n+ Coverage   46.74%   46.76%   +0.02%     \n==========================================\n  Files         162      162              \n  Lines       10026     9992      -34     \n  Branches      925      921       -4     \n==========================================\n- Hits         4686     4672      -14     \n+ Misses       5021     5014       -7     \n+ Partials      319      306      -13     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1767?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1767?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.69% <ø> (+0.09%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1767/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> I suppose the change is safe, and the protobuf definition can be cleaned too.\r\n> \r\n> @FMX could you please take a look? as you touched this part last time.\r\n\r\nYea, cleaned

This causes problem on using 0.3.0 client access to 0.3.1-SNAPSHOT server\r\n\r\n```\r\n2023-08-07 15:09:05.805 ERROR [rpc-server-4-5] NettyRpcHandler#80 - Error while invoking RpcHandler#receive() on RPC id 176\r\njava.io.InvalidObjectException: enum constant RELEASE_SLOTS does not exist in class org.apache.celeborn.common.protocol.MessageType\r\n\tat java.io.ObjectInputStream.readEnum(ObjectInputStream.java:2158)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1663)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat org.apache.celeborn.common.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:76)\r\n\tat org.apache.celeborn.common.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:110)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcEnv.$anonfun$deserialize$2(NettyRpcEnv.scala:269)\r\n\tat scala.util.DynamicVariable.withValue(DynamicVariable.scala:62)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcEnv.deserialize(NettyRpcEnv.scala:316)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcEnv.$anonfun$deserialize$1(NettyRpcEnv.scala:268)\r\n\tat scala.util.DynamicVariable.withValue(DynamicVariable.scala:62)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcEnv.deserialize(NettyRpcEnv.scala:268)\r\n\tat org.apache.celeborn.common.rpc.netty.RequestMessage$.apply(NettyRpcEnv.scala:506)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcHandler.internalReceive(NettyRpcEnv.scala:594)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcHandler.processRpc(NettyRpcEnv.scala:564)\r\n\tat org.apache.celeborn.common.rpc.netty.NettyRpcHandler.receive(NettyRpcEnv.scala:542)\r\n\tat org.apache.celeborn.common.network.server.TransportRequestHandler.handle(TransportRequestHandler.java:77)\r\n\tat org.apache.celeborn.common.network.server.TransportChannelHandler.channelRead(TransportChannelHandler.java:151)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat org.apache.celeborn.common.network.util.TransportFrameDecoder.channelRead(TransportFrameDecoder.java:74)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\nCaused by: java.lang.IllegalArgumentException: No enum constant org.apache.celeborn.common.protocol.MessageType.RELEASE_SLOTS\r\n\tat java.lang.Enum.valueOf(Enum.java:238)\r\n\tat java.io.ObjectInputStream.readEnum(ObjectInputStream.java:2155)\r\n\t... 45 more\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1766?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1766](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1766?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ac9f8be) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e16b26762bbbc6e0a5541e9e4a3c620064555735?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e16b267) will **decrease** coverage by `0.00%`.\n> Report is 3 commits behind head on main.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head ac9f8be differs from pull request most recent head afe16b8. Consider uploading reports for the commit afe16b8 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1766      +/-   ##\n==========================================\n- Coverage   46.74%   46.74%   -0.00%     \n==========================================\n  Files         162      162              \n  Lines       10026    10027       +1     \n  Branches      925      926       +1     \n==========================================\n  Hits         4686     4686              \n  Misses       5021     5021              \n- Partials      319      320       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1766?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1766?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.24% <0.00%> (-0.03%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1764?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1764](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1764?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (77a72ee) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f0295e9f3f1f5781af124ae319e202a2594a103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f0295e) will **decrease** coverage by `0.00%`.\n> Report is 4 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1764      +/-   ##\n==========================================\n- Coverage   46.81%   46.80%   -0.00%     \n==========================================\n  Files         162      162              \n  Lines       10012    10012              \n  Branches      923      923              \n==========================================\n- Hits         4686     4685       -1     \n+ Misses       5019     5018       -1     \n- Partials      307      309       +2     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1764/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

diff between the `celeborn-client-flink-1.17-shaded_2.12-0.4.0-SNAPSHOT.jar` file in sbt and maven:\r\n\r\n```diff\r\ndiff --git a/maven-files.out b/sbt-files.out\r\nindex 8228cae..8db58f9 100644\r\n--- a/maven-files.out\r\n+++ b/sbt-files.out\r\n@@ -1,19 +1,6 @@\r\n ./celeborn-client-flink-1.17-shaded_2.12-0.4.0-SNAPSHOT.jar\r\n-./google/protobuf/any.proto\r\n-./google/protobuf/api.proto\r\n-./google/protobuf/compiler/plugin.proto\r\n-./google/protobuf/descriptor.proto\r\n-./google/protobuf/duration.proto\r\n-./google/protobuf/empty.proto\r\n-./google/protobuf/field_mask.proto\r\n-./google/protobuf/source_context.proto\r\n-./google/protobuf/struct.proto\r\n-./google/protobuf/timestamp.proto\r\n-./google/protobuf/type.proto\r\n-./google/protobuf/wrappers.proto\r\n-./META-INF/DEPENDENCIES\r\n+./META-INF/INDEX.LIST\r\n ./META-INF/io.netty.versions.properties\r\n-./META-INF/LICENSE\r\n ./META-INF/LICENSE.txt\r\n ./META-INF/MANIFEST.MF\r\n ./META-INF/maven/com.google.guava/guava/pom.properties\r\n@@ -80,53 +67,12 @@\r\n ./META-INF/maven/io.netty/netty-transport-sctp/pom.xml\r\n ./META-INF/maven/io.netty/netty-transport-udt/pom.properties\r\n ./META-INF/maven/io.netty/netty-transport-udt/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-1.17_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-1.17_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-1.17-shaded_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-1.17-shaded_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-flink-common_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.xml\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.properties\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.xml\r\n ./META-INF/maven/org.jctools/jctools-core/pom.properties\r\n ./META-INF/maven/org.jctools/jctools-core/pom.xml\r\n-./META-INF/native-image/io.netty/netty-buffer/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-codec-dns/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-haproxy/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-http2/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-http2/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-codec-http/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-http/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-codec-memcache/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-mqtt/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-codec-redis/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-smtp/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-socks/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-stomp/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-codec-xml/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-common/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-handler/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-handler/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-handler-proxy/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-resolver-dns/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-resolver-dns/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-transport-classes-epoll/jni-config.json\r\n-./META-INF/native-image/io.netty/netty-transport-classes-epoll/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-transport-classes-epoll/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-transport-classes-epoll/resource-config.json\r\n-./META-INF/native-image/io.netty/netty-transport/generated/handlers/reflect-config.json\r\n-./META-INF/native-image/io.netty/netty-transport/native-image.properties\r\n-./META-INF/native-image/io.netty/netty-transport/reflection-config.json\r\n-./META-INF/native-image/io.netty/netty-transport-sctp/generated/handlers/reflect-config.json\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_aarch_64.so\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_x86_64.so\r\n-./META-INF/NOTICE\r\n ./META-INF/NOTICE.txt\r\n ./META-INF/services/reactor.blockhound.integration.BlockHoundIntegration\r\n ./org/apache/celeborn/client/ApplicationHeartbeater$$anon$1.class\r\n@@ -844,6 +790,8 @@\r\n ./org/apache/celeborn/common/write/SimplePushStrategy.class\r\n ./org/apache/celeborn/common/write/SlowStartPushStrategy$CongestControlContext.class\r\n ./org/apache/celeborn/common/write/SlowStartPushStrategy.class\r\n+./org/apache/celeborn/package$.class\r\n+./org/apache/celeborn/package.class\r\n ./org/apache/celeborn/plugin/flink/AbstractRemoteShuffleEnvironment.class\r\n ./org/apache/celeborn/plugin/flink/AbstractRemoteShuffleInputGateFactory.class\r\n ./org/apache/celeborn/plugin/flink/AbstractRemoteShuffleResultPartitionFactory.class\r\n@@ -6664,4 +6612,3 @@\r\n ./org/apache/celeborn/shaded/org/roaringbitmap/RunContainer.class\r\n ./org/apache/celeborn/shaded/org/roaringbitmap/Util.class\r\n ./org/apache/celeborn/shaded/org/roaringbitmap/WordStorage.class\r\n-./TransportMessages.proto\r\n```

Ping @RexXiong @FMX @zhongqiangczq could you take a look at this PR? thanks!

can sbt still use the maven local repository to avoid download dependencies again ?

> can sbt still use the maven local repository to avoid download dependencies again ?\r\n\r\nGood catch, it should be, let me raise a separate PR to support this.

Thanks, merged to main

@pan3793 @waitinfuture 

Can we strip the leading timestamp from logs too?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1763?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1763](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1763?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3f45bb3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e708c3cd25269f860159ea6b36ab232a553574e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e708c3c) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1763      +/-   ##\n==========================================\n- Coverage   46.74%   46.72%   -0.01%     \n==========================================\n  Files         162      162              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n- Hits         4686     4684       -2     \n- Misses       5021     5022       +1     \n- Partials      319      320       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1763/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> Can we strip the leading timestamp from logs too?\r\n\r\ndone

LGTM

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1761?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1761](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1761?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d92ad8e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e16b26762bbbc6e0a5541e9e4a3c620064555735?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e16b267) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1761      +/-   ##\n==========================================\n+ Coverage   46.74%   46.86%   +0.12%     \n==========================================\n  Files         162      162              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n+ Hits         4686     4698      +12     \n+ Misses       5021     5010      -11     \n+ Partials      319      318       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1761/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM.

Thanks, merged to main/0.3

BTW, the project is investigating migrating the building system from maven to sbt (https://github.com/apache/incubator-celeborn/pull/1757) to gain faster building speed and better developer experience, similar to [SPARK-44173](https://issues.apache.org/jira/browse/SPARK-44173).

@pan3793 We will probably stick to mvn internally for now, but when/if we migrate to sbt, we might need to do a similar thing where we are able to pass in a custom sbt flag in the make-distribution.sh script. Thanks for the heads up in any case!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1760?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1760](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1760?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eede0bc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6427ed35cd63497191cfc13e7675710a4aa82d96?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6427ed3) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1760      +/-   ##\n==========================================\n+ Coverage   46.72%   46.88%   +0.17%     \n==========================================\n  Files         161      162       +1     \n  Lines       10021    10026       +5     \n  Branches      925      925              \n==========================================\n+ Hits         4681     4700      +19     \n+ Misses       5021     5009      -12     \n+ Partials      319      317       -2     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1760/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Oops...\r\n\r\nMissing `com.github.ghik:silencer-plugin_2.12.10:1.7.13` in Maven central repository\r\n\r\nhttps://mvnrepository.com/artifact/com.github.ghik/silencer-plugin\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1759](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0972183) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2ab88f773aa08f50a3bde1eec7885f77901c5e32?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ab88f7) will **increase** coverage by `0.04%`.\n> Report is 6 commits behind head on main.\n> The diff coverage is `73.69%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1759      +/-   ##\n==========================================\n+ Coverage   46.74%   46.77%   +0.04%     \n==========================================\n  Files         162      162              \n  Lines       10026    10045      +19     \n  Branches      925      926       +1     \n==========================================\n+ Hits         4686     4698      +12     \n- Misses       5021     5027       +6     \n- Partials      319      320       +1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.28% <87.50%> (+0.01%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1759/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @pan3793 @RexXiong  @cfmcgrady Any more suggestion?

cc @turboFei, you may be interested in this feature.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1758?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1758](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1758?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ec8b3b3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2ab88f773aa08f50a3bde1eec7885f77901c5e32?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ab88f7) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1758   +/-   ##\n=======================================\n  Coverage   46.74%   46.74%           \n=======================================\n  Files         162      162           \n  Lines       10026    10026           \n  Branches      925      925           \n=======================================\n  Hits         4686     4686           \n  Misses       5021     5021           \n  Partials      319      319           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks! Merged to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1757?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1757](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1757?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fab0da0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6427ed35cd63497191cfc13e7675710a4aa82d96?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6427ed3) will **increase** coverage by `0.08%`.\n> Report is 9 commits behind head on main.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1757      +/-   ##\n==========================================\n+ Coverage   46.72%   46.79%   +0.08%     \n==========================================\n  Files         161      162       +1     \n  Lines       10021    10046      +25     \n  Branches      925      927       +2     \n==========================================\n+ Hits         4681     4700      +19     \n- Misses       5021     5026       +5     \n- Partials      319      320       +1     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1757/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @waitinfuture @AngersZhuuuu @FMX 

Can we add some instruction at someplace as well? e.g. how to set mirror, the frequently used commands

> Can we add some instruction at someplace as well? e.g. how to set mirror, the frequently used commands\r\n\r\nMaybe we can refer to the Akka?\r\n\r\nhttps://github.com/akka/akka/blob/ca1341365cb4db8ba5f61699da4d90991a3d1d59/project/AkkaBuild.scala#L273-L309\r\n\r\n\r\n```scala\r\n  lazy val welcomeSettings: Seq[Setting[_]] =\r\n    CliOptions.runningOnCi\r\n      .ifTrue(Seq())\r\n      .getOrElse(Seq(onLoadMessage :=\r\n        s"""\r\n           |\r\n           |                        .~!77!^                            :::          :::\r\n           |                     .^!???????~                          .5GP:        .5GP:\r\n           |                   :~???????????!              ...        .PGP:      . .5GP:      .     ...\r\n           |                .~7??????????????!          ~J5PPP5J!Y5Y. .5GP:  .?557..5GP:  .?557..!J5PPP5?!55J\r\n           |             .^!??????????????????7.      :5GGY!~~!JPGGP. .5GP:.7PGY^  .5GP:.7PGY^ ^5GGJ!~~!YGGG5\r\n           |           :~7?????????????????????7.     YGG!      ^PGP. .5GP?PG5^    .5GP?PG5^  .PGP^      ~GGY\r\n           |        .^7?????????????JJYY55555YYJ?.   .5GG^      .PGP. .5GGG5GP7.   .5GGG5GP7. :PGP:      :PGY\r\n           |      :!????????????JY5PPGGGGGGGGGGGP5^   ~PGP7:..:!5GGP: .PGG~ ~5BP!  .5GG~ ~5BP! !GG5!:..:7PGG5.\r\n           |   .~7??????????JY5PGGGGGGGGGGGGGGGGGGP^   :?5GGPPPPJJPGG7 5GP:  .7PGY^.5GP:   7PGY^^JPGGPPPP?JPGP!\r\n           |  :??????????JYPGGGGPPPPPGGGGGGGGGGGGGGJ     .:^^^:.  :^^: :::     .::: :::     .:::  .:^^^:.  :^^.\r\n           |  ^????????7???7~~^::::::^^~!?Y5GGGGGGG7\r\n           |   ^!7??7~:.                   .^7YPP57\r\n           |     ...                           .:.\r\n           |                                                                                                      \r\n           | ${version.value}\r\n           |\r\n           |\r\n           | Useful sbt tasks:\r\n           | > testOnly *.AnySpec         Only run a selected test\r\n           | > verifyCodeStyle            Verify code style\r\n           | > applyCodeStyle             Apply code style\r\n           | > sortImports                Sort the imports\r\n           | > mimaReportBinaryIssues     Check binary issues\r\n           | > validatePullRequest        Validate pull request\r\n           | > akka-docs/paradox          Build documentation\r\n           | > akka-docs/paradoxBrowse    Browse the generated documentation\r\n           |\r\n           | Contributing guide: https://github.com/akka/akka/blob/main/CONTRIBUTING.md\r\n           | tips: prefix commands with + to run against cross Scala versions.\r\n           |\r\n           |""".stripMargin))\r\n```

> Maybe we can refer to the Akka?\r\n\r\nI believe we can list "the frequently used commands" in Akka way.\r\n\r\nBut for "how to set mirror", maybe another place. Especially, I believe there will be lots of people stuck on downloading `build/sbt` launcher jar, and the sbt launcher bootstrap phase because of the network issues.

Also cc @LuciferYang

@waitinfuture @RexXiong @FMX @AngersZhuuuu would you please take a look?\r\n\r\nnote: if you encounter network issue, run the following command to apply mirror\r\n```\r\ncp build/sbt-config/repositories-cn.template build/sbt-config/repositories-local\r\n```

Thanks, merging to main

Thanks @cfmcgrady for this PR! I tested and it really speeded up build time. Just wonder do you have a plan to add a doc describing building Celeborn?

I plan to add the doc, once the following task is finished. cc @waitinfuture \r\n\r\n- [ ] https://github.com/apache/incubator-celeborn/pull/1764\r\n- [ ] https://github.com/apache/incubator-celeborn/pull/1771

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1756?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1756](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1756?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (94c1df7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/67c18e6607efececd2757c80689c9451528a4812?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (67c18e6) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1756      +/-   ##\n==========================================\n+ Coverage   46.72%   46.88%   +0.16%     \n==========================================\n  Files         161      161              \n  Lines       10021    10021              \n  Branches      925      925              \n==========================================\n+ Hits         4681     4697      +16     \n+ Misses       5021     5008      -13     \n+ Partials      319      316       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1756/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1755?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1755](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1755?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1676cd0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8e849645eb3de0f6b889a14b45b618ad7a1de33c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8e84964) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 1676cd0 differs from pull request most recent head d2affed. Consider uploading reports for the commit d2affed to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1755      +/-   ##\n==========================================\n+ Coverage   46.70%   46.72%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10022    10021       -1     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4681       +1     \n+ Misses       5022     5021       -1     \n+ Partials      320      319       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1755/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @FMX @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1754?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1754](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1754?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (acae4df) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/070d8bc0f8572cfa4c8b16e6a47e705eb9c756f4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (070d8bc) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1754      +/-   ##\n==========================================\n+ Coverage   46.72%   46.84%   +0.12%     \n==========================================\n  Files         161      161              \n  Lines       10021    10021              \n  Branches      925      925              \n==========================================\n+ Hits         4681     4693      +12     \n+ Misses       5021     5010      -11     \n+ Partials      319      318       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1754/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks! Merging to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1753?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1753](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1753?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (263626e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/070d8bc0f8572cfa4c8b16e6a47e705eb9c756f4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (070d8bc) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 263626e differs from pull request most recent head 1867701. Consider uploading reports for the commit 1867701 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1753      +/-   ##\n==========================================\n- Coverage   46.72%   46.70%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines       10021    10021              \n  Branches      925      925              \n==========================================\n- Hits         4681     4679       -2     \n- Misses       5021     5022       +1     \n- Partials      319      320       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1753/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @cfmcgrady @AngersZhuuuu @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1752?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1752](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1752?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d742a9c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8e849645eb3de0f6b889a14b45b618ad7a1de33c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8e84964) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head d742a9c differs from pull request most recent head 459e8f9. Consider uploading reports for the commit 459e8f9 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1752      +/-   ##\n==========================================\n+ Coverage   46.70%   46.86%   +0.16%     \n==========================================\n  Files         161      161              \n  Lines       10022    10021       -1     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4695      +15     \n+ Misses       5022     5009      -13     \n+ Partials      320      317       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1752/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1751?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1751](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1751?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (09e7dbd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8e849645eb3de0f6b889a14b45b618ad7a1de33c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8e84964) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1751      +/-   ##\n==========================================\n+ Coverage   46.70%   46.72%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10022    10022              \n  Branches      925      925              \n==========================================\n+ Hits         4680     4682       +2     \n+ Misses       5022     5021       -1     \n+ Partials      320      319       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1751/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1750](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (69d81d7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d786e0ecf5ac930d08103929487658826afc10e2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d786e0e) will **decrease** coverage by `0.48%`.\n> The diff coverage is `76.20%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1750      +/-   ##\n==========================================\n- Coverage   47.04%   46.55%   -0.48%     \n==========================================\n  Files         162      162              \n  Lines       10038    10059      +21     \n  Branches      927      928       +1     \n==========================================\n- Hits         4721     4682      -39     \n- Misses       5011     5067      +56     \n- Partials      306      310       +4     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/protocol/Message.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.00% <ø> (-12.00%)` | :arrow_down: |\n| [...e/celeborn/common/network/protocol/OpenStream.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtLmphdmE=) | `0.00% <ø> (-56.41%)` | :arrow_down: |\n| [.../common/network/protocol/OpenStreamWithCredit.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtV2l0aENyZWRpdC5qYXZh) | `0.00% <ø> (ø)` | |\n| [...celeborn/common/network/protocol/StreamHandle.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9TdHJlYW1IYW5kbGUuamF2YQ==) | `0.00% <ø> (-52.63%)` | :arrow_down: |\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `72.42% <76.20%> (+72.42%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1750/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1749?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1749](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1749?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a4f1e41) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8e849645eb3de0f6b889a14b45b618ad7a1de33c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8e84964) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1749      +/-   ##\n==========================================\n+ Coverage   46.70%   46.72%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10022    10021       -1     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4681       +1     \n+ Misses       5022     5021       -1     \n+ Partials      320      319       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1749?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1749?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.27% <100.00%> (-<0.01%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1749/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady 

Thanks, merged to main/0.3

This patch dramatically reduces the CPU usage\r\n\r\n![image](https://github.com/apache/incubator-celeborn/assets/26535726/346b28c3-91f6-4732-8665-86ef6fa3dfba)\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1748](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4d0d80b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/27521547f09b330d7a25848ef3a3a08162ed4639?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2752154) will **increase** coverage by `0.05%`.\n> The diff coverage is `46.16%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1748      +/-   ##\n==========================================\n+ Coverage   46.70%   46.74%   +0.05%     \n==========================================\n  Files         161      162       +1     \n  Lines       10022    10026       +4     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4686       +6     \n+ Misses       5022     5021       -1     \n+ Partials      320      319       -1     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...la/org/apache/celeborn/server/common/Service.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vU2VydmljZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/server/common/http/HttpServer.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwU2VydmVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `70.97% <33.34%> (ø)` | |\n| [...apache/celeborn/common/util/CelebornExitKind.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5FeGl0S2luZC5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1748/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @pan3793 @cfmcgrady 

cc @pan3793 @AngersZhuuuu @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1747?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1747](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1747?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (45ce753) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/27521547f09b330d7a25848ef3a3a08162ed4639?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2752154) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 45ce753 differs from pull request most recent head 8a7a6c3. Consider uploading reports for the commit 8a7a6c3 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1747      +/-   ##\n==========================================\n+ Coverage   46.70%   46.72%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10022    10022              \n  Branches      925      925              \n==========================================\n+ Hits         4680     4682       +2     \n+ Misses       5022     5021       -1     \n+ Partials      320      319       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1747/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

the arrow indicating data flow from Mapper1 to Worker2 is missing on line 6 in file `docs/assets/img/softsplit.svg`

cc @pan3793 @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1746?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1746](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1746?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (975623d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4af5114e178d3a442f88195c30b792c62ec99b0a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4af5114) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1746      +/-   ##\n==========================================\n+ Coverage   46.68%   46.84%   +0.16%     \n==========================================\n  Files         161      161              \n  Lines       10026    10022       -4     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4694      +14     \n+ Misses       5026     5010      -16     \n+ Partials      320      318       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1746/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

is svg editable? usually we should provide the editable source file of image too

ping @pan3793 @AngersZhuuuu comments addressed, please take a look again

> ... They are relative small.\r\n\r\n@waitinfuture I\

> > ... They are relative small.\r\n> \r\n> @waitinfuture I\

Thanks, merging to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1745?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1745](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1745?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (954a980) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4af5114e178d3a442f88195c30b792c62ec99b0a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4af5114) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1745      +/-   ##\n==========================================\n+ Coverage   46.68%   46.86%   +0.18%     \n==========================================\n  Files         161      161              \n  Lines       10026    10022       -4     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4696      +16     \n+ Misses       5026     5009      -17     \n+ Partials      320      317       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1745/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 @cfmcgrady  updated, please take a look again

Thanks, merging to main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1744?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1744](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1744?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c180cb7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4af5114e178d3a442f88195c30b792c62ec99b0a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4af5114) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1744      +/-   ##\n==========================================\n+ Coverage   46.68%   46.70%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n+ Hits         4680     4682       +2     \n+ Misses       5026     5025       -1     \n+ Partials      320      319       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1744/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1743](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3aa7643) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4af5114e178d3a442f88195c30b792c62ec99b0a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4af5114) will **increase** coverage by `0.15%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1743      +/-   ##\n==========================================\n+ Coverage   46.68%   46.83%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines       10026    10019       -7     \n  Branches      925      925              \n==========================================\n+ Hits         4680     4691      +11     \n+ Misses       5026     5012      -14     \n+ Partials      320      316       -4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/network/protocol/MessageEncoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlRW5jb2Rlci5qYXZh) | `59.38% <100.00%> (ø)` | |\n| [...orn/common/network/util/TransportFrameDecoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydEZyYW1lRGVjb2Rlci5qYXZh) | `87.66% <100.00%> (+16.07%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1743/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ORZ. Could you explain the rationale behind Flink implementing its own frame decoding logic `TransportFrameDecoderWithBufferSupplier` instead of utilizing an existing implementation `TransportFrameDecoder`? cc @waitinfuture 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1742](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d84673a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4af5114e178d3a442f88195c30b792c62ec99b0a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4af5114) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1742      +/-   ##\n==========================================\n+ Coverage   46.68%   46.70%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10026    10022       -4     \n  Branches      925      925              \n==========================================\n  Hits         4680     4680              \n+ Misses       5026     5022       -4     \n  Partials      320      320              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...la/org/apache/celeborn/server/common/Service.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vU2VydmljZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1742/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM. cc @cfmcgrady as you touch it recently.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1741?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1741](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1741?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a2be663) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4669d1e31c79826b3a510297690322265272b42a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4669d1e) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1741      +/-   ##\n==========================================\n- Coverage   46.84%   46.68%   -0.15%     \n==========================================\n  Files         161      161              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n- Hits         4696     4680      -16     \n- Misses       5013     5026      +13     \n- Partials      317      320       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1741/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 @waitinfuture @FMX @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1739?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1739](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1739?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (020da07) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f15c2a7a683d5ed26372cb4616a7e94bca0bc8ee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f15c2a7) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1739      +/-   ##\n==========================================\n- Coverage   46.70%   46.66%   -0.03%     \n==========================================\n  Files         161      161              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n- Hits         4682     4678       -4     \n- Misses       5025     5027       +2     \n- Partials      319      321       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1739/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1738?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1738](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1738?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ff8eba8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6a5e3ed794d034751bd3cd209a7447a7e94de041?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6a5e3ed) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1738   +/-   ##\n=======================================\n  Coverage   46.70%   46.70%           \n=======================================\n  Files         161      161           \n  Lines       10026    10026           \n  Branches      925      925           \n=======================================\n  Hits         4682     4682           \n  Misses       5025     5025           \n  Partials      319      319           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1737?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1737](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1737?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c28b17) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6a5e3ed794d034751bd3cd209a7447a7e94de041?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6a5e3ed) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1737      +/-   ##\n==========================================\n- Coverage   46.70%   46.68%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines       10026    10026              \n  Branches      925      925              \n==========================================\n- Hits         4682     4680       -2     \n- Misses       5025     5026       +1     \n- Partials      319      320       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1737/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1736?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1736](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1736?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0f2c529) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/405b2801fa96c18c987d26bf16a777041da0410e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (405b280) will **increase** coverage by `0.08%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1736      +/-   ##\n==========================================\n+ Coverage   46.63%   46.71%   +0.08%     \n==========================================\n  Files         161      161              \n  Lines       10009    10022      +13     \n  Branches      925      924       -1     \n==========================================\n+ Hits         4667     4681      +14     \n+ Misses       5023     5021       -2     \n- Partials      319      320       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1736?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1736?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `34.00% <33.34%> (+4.38%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1736/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I think adding a shared allocator metric would be reasonable. The shared allocator didn’t belong to any existing allocator metrics.

Thanks @waitinfuture @FMX the reply, got it, I will update this pr later.

cc @pan3793 @cfmcgrady @AngersZhuuuu @RexXiong 

@pan3793 comments addressed, please take a look again.

Test failure seems related

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1735?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1735](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1735?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (18fc5ba) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/14c6e5719f762acaa08daee6a556096e861fb5f8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (14c6e57) will **decrease** coverage by `0.08%`.\n> The diff coverage is `88.24%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1735      +/-   ##\n==========================================\n- Coverage   46.77%   46.68%   -0.08%     \n==========================================\n  Files         161      161              \n  Lines       10009    10026      +17     \n  Branches      925      925              \n==========================================\n- Hits         4681     4680       -1     \n- Misses       5011     5026      +15     \n- Partials      317      320       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1735?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1735?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.28% <88.24%> (+0.01%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1735/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1734?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1734](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1734?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (20671ab) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/405b2801fa96c18c987d26bf16a777041da0410e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (405b280) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1734      +/-   ##\n==========================================\n+ Coverage   46.63%   46.77%   +0.14%     \n==========================================\n  Files         161      161              \n  Lines       10009    10009              \n  Branches      925      925              \n==========================================\n+ Hits         4667     4681      +14     \n+ Misses       5023     5011      -12     \n+ Partials      319      317       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1734/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 

Merged to main/0.3(for 0.3.1)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1733](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7411951) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c8ad39d9bddde7f07214b4aa91074ca0840d738c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c8ad39d) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1733      +/-   ##\n==========================================\n+ Coverage   46.61%   46.63%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10009    10009              \n  Branches      925      925              \n==========================================\n+ Hits         4665     4667       +2     \n+ Misses       5024     5023       -1     \n+ Partials      320      319       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | `75.29% <ø> (ø)` | |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <ø> (ø)` | |\n| [.../celeborn/common/network/buffer/ManagedBuffer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTWFuYWdlZEJ1ZmZlci5qYXZh) | `100.00% <ø> (ø)` | |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.30% <ø> (ø)` | |\n| [...orn/common/network/protocol/ChunkFetchSuccess.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoU3VjY2Vzcy5qYXZh) | `43.48% <ø> (ø)` | |\n| [...orn/common/network/protocol/MessageWithHeader.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlV2l0aEhlYWRlci5qYXZh) | `58.07% <ø> (ø)` | |\n| [...common/network/server/TransportChannelHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0Q2hhbm5lbEhhbmRsZXIuamF2YQ==) | `65.76% <ø> (ø)` | |\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.27% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1733/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @FMX @waitinfuture @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1732?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1732](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1732?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ea619c8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1109e2c8f4468ab6d19632a6f3e7afba89e9b913?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1109e2c) will **increase** coverage by `0.07%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1732      +/-   ##\n==========================================\n+ Coverage   46.67%   46.74%   +0.07%     \n==========================================\n  Files         161      161              \n  Lines       10014    10029      +15     \n  Branches      925      927       +2     \n==========================================\n+ Hits         4673     4687      +14     \n  Misses       5024     5024              \n- Partials      317      318       +1     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1732/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1731?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1731](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1731?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ac9c100) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c8ad39d9bddde7f07214b4aa91074ca0840d738c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c8ad39d) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1731      +/-   ##\n==========================================\n- Coverage   46.61%   46.59%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines       10009    10009              \n  Branches      925      925              \n==========================================\n- Hits         4665     4663       -2     \n- Misses       5024     5025       +1     \n- Partials      320      321       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1731/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1730?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1730](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1730?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf1efdf) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/16d9c657c2b0605d8708a62392bb10b98749b2aa?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (16d9c65) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head cf1efdf differs from pull request most recent head 47250bf. Consider uploading reports for the commit 47250bf to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1730   +/-   ##\n=======================================\n  Coverage   46.60%   46.60%           \n=======================================\n  Files         161      161           \n  Lines       10029    10029           \n  Branches      927      927           \n=======================================\n  Hits         4673     4673           \n  Misses       5036     5036           \n  Partials      320      320           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1730/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@onebox-li thanks, I agree that we should suppress the noisy logs. I have experienced that the client excluded all workers and then stuck, will this change help or make it hard to identify such cases?

> @onebox-li thanks, I agree that we should suppress the noisy logs. I have experienced that the client excluded all workers and then stuck, will this change help or make it hard to identify such cases?\r\n\r\nI think it may help a bit, too many same logs seem harder to troubleshoot and drown out other important logs.

Furthermore, I have been unable to locate any documentation pertaining to the `data` module.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1729?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1729](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1729?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aebe280) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/16d9c657c2b0605d8708a62392bb10b98749b2aa?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (16d9c65) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1729      +/-   ##\n==========================================\n+ Coverage   46.60%   46.62%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines       10029    10029              \n  Branches      927      927              \n==========================================\n+ Hits         4673     4675       +2     \n+ Misses       5036     5035       -1     \n+ Partials      320      319       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1729/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1727](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5e2474c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1109e2c8f4468ab6d19632a6f3e7afba89e9b913?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1109e2c) will **decrease** coverage by `0.04%`.\n> The diff coverage is `20.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1727      +/-   ##\n==========================================\n- Coverage   46.67%   46.62%   -0.04%     \n==========================================\n  Files         161      161              \n  Lines       10014    10029      +15     \n  Branches      925      927       +2     \n==========================================\n+ Hits         4673     4675       +2     \n- Misses       5024     5035      +11     \n- Partials      317      319       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...la/org/apache/celeborn/server/common/Service.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vU2VydmljZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/server/common/http/HttpServer.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwU2VydmVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `70.97% <50.00%> (-4.03%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Is it possible to run unit tests in parallel after this change?

Thanks, merged to main/0.3

> Is it possible to run unit tests in parallel after this change?\r\n\r\nNo, currently, we have hard code like the following. However, I believe that it can be readily restructured if we want to run tests parallel\r\n\r\nhttps://github.com/apache/incubator-celeborn/blob/1109e2c8f4468ab6d19632a6f3e7afba89e9b913/worker/src/test/scala/org/apache/celeborn/service/deploy/cluster/ReadWriteTestBase.scala#L37

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1726?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1726](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1726?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9cf81fd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c8ad39d9bddde7f07214b4aa91074ca0840d738c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c8ad39d) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 9cf81fd differs from pull request most recent head eb01969. Consider uploading reports for the commit eb01969 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1726      +/-   ##\n==========================================\n+ Coverage   46.61%   46.77%   +0.16%     \n==========================================\n  Files         161      161              \n  Lines       10009    10009              \n  Branches      925      925              \n==========================================\n+ Hits         4665     4681      +16     \n+ Misses       5024     5011      -13     \n+ Partials      320      317       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1726/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @FMX @RexXiong @pan3793 @cfmcgrady 

ping @pan3793 @cfmcgrady @waitinfuture @FMX  Have fix the code after revert, how about current?

Thanks, merged to main/0.3(for 0.3.1)

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1725?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1725](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1725?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fee79f7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9ec223edd7a99c71d74a0f9c64595219e8359d20?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9ec223e) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1725      +/-   ##\n==========================================\n- Coverage   46.83%   46.81%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines       10014    10014              \n  Branches      925      925              \n==========================================\n- Hits         4689     4687       -2     \n- Misses       5011     5012       +1     \n- Partials      314      315       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1725?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1725?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.31% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1725/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @AngersZhuuuu 

cc @zhongqiangczq 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1723?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1723](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1723?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f7b57df) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1ec4f4a9f558f2686351c4765be9b7c5621ef778?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ec4f4a) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1723      +/-   ##\n==========================================\n+ Coverage   46.80%   46.82%   +0.03%     \n==========================================\n  Files         161      161              \n  Lines        9993     9993              \n  Branches      923      923              \n==========================================\n+ Hits         4676     4678       +2     \n+ Misses       5001     5000       -1     \n+ Partials      316      315       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1723?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1723?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.27% <ø> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1723/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1722?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1722](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1722?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (110af22) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a4687716d2f1fcc4bf487ced70c0fb6b5de037f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a468771) will **increase** coverage by `0.03%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1722      +/-   ##\n==========================================\n+ Coverage   46.75%   46.77%   +0.03%     \n==========================================\n  Files         161      161              \n  Lines        9986     9986              \n  Branches      922      922              \n==========================================\n+ Hits         4668     4670       +2     \n+ Misses       5004     5003       -1     \n+ Partials      314      313       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1722?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1722?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1722/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @cfmcgrady @RexXiong 

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1721?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1721](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1721?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6d0abfa) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a4687716d2f1fcc4bf487ced70c0fb6b5de037f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a468771) will **decrease** coverage by `0.18%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1721      +/-   ##\n==========================================\n- Coverage   46.75%   46.57%   -0.18%     \n==========================================\n  Files         161      161              \n  Lines        9986     9986              \n  Branches      922      922              \n==========================================\n- Hits         4668     4650      -18     \n- Misses       5004     5018      +14     \n- Partials      314      318       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1721?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1721?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <100.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1721/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1720](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (59aab44) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a4687716d2f1fcc4bf487ced70c0fb6b5de037f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a468771) will **decrease** coverage by `0.09%`.\n> The diff coverage is `82.15%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1720      +/-   ##\n==========================================\n- Coverage   46.75%   46.66%   -0.09%     \n==========================================\n  Files         161      161              \n  Lines        9986     9993       +7     \n  Branches      922      923       +1     \n==========================================\n- Hits         4668     4662       -6     \n- Misses       5004     5013       +9     \n- Partials      314      318       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `31.71% <37.50%> (+3.66%)` | :arrow_up: |\n| [...ache/celeborn/common/write/SimplePushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2ltcGxlUHVzaFN0cmF0ZWd5LmphdmE=) | `62.50% <100.00%> (ø)` | |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `76.20% <100.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.27% <100.00%> (+0.04%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1720/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @AngersZhuuuu @RexXiong 

>  This PR limits total inflight push requests, as 0.2.1-incubating does.\r\n\r\nWhich commit changed the semantic?

> \r\n\r\n@pan3793 https://github.com/apache/incubator-celeborn/pull/1102

The logic LGTM, please rename all related variables and method names

Thanks, merged to main/0.3

cc @pan3793 @RexXiong @AngersZhuuuu @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1719](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (57c5912) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a4687716d2f1fcc4bf487ced70c0fb6b5de037f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a468771) will **increase** coverage by `0.06%`.\n> The diff coverage is `34.79%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1719      +/-   ##\n==========================================\n+ Coverage   46.75%   46.80%   +0.06%     \n==========================================\n  Files         161      161              \n  Lines        9986    10013      +27     \n  Branches      922      925       +3     \n==========================================\n+ Hits         4668     4686      +18     \n- Misses       5004     5012       +8     \n- Partials      314      315       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.58% <0.00%> (-0.02%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.31% <72.73%> (+0.08%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1719/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This seems a killer for the long-running Spark application, thanks for fixing it.

Thanks for the review, merging to main/0.3

After discussion, we decided to revert this one and in favor of CELEBORN-804

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1718?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1718](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1718?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ebd27b2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e1337972e8d71b6616de028bda070c28b368e677?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e133797) will **decrease** coverage by `0.14%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1718      +/-   ##\n==========================================\n- Coverage   46.80%   46.66%   -0.14%     \n==========================================\n  Files         161      161              \n  Lines        9995     9995              \n  Branches      924      924              \n==========================================\n- Hits         4677     4663      -14     \n- Misses       5005     5017      +12     \n- Partials      313      315       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1718?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1718?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1718/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady 

also update the `writeTime` logic for Spark 2 client?

> also update the `writeTime` logic for Spark 2 client?\r\n\r\ndone

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1716](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (176cfb1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/efc9a875e906b67930c2713bb6a979164984be24?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (efc9a87) will **decrease** coverage by `0.17%`.\n> Report is 5 commits behind head on main.\n> The diff coverage is `75.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1716      +/-   ##\n==========================================\n- Coverage   46.86%   46.68%   -0.17%     \n==========================================\n  Files         162      162              \n  Lines       10027    10088      +61     \n  Branches      923      929       +6     \n==========================================\n+ Hits         4698     4709      +11     \n- Misses       5019     5071      +52     \n+ Partials      310      308       -2     \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `37.94% <61.54%> (+8.31%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.47% <100.00%> (+0.04%)` | :arrow_up: |\n\n... and [12 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1716/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Will disable cache hurt performance and increase cpu usage?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

cc @waitinfuture 

BTW, I rolled this patch on a small cluster, it shows helps with memory reduction without \r\nobvious performance dropping.\r\n\r\nBefore (cache enabled)\r\n![image](https://github.com/apache/incubator-celeborn/assets/26535726/8a010d63-8b0c-4492-b61d-4a5a3c2ec4a9)\r\n![image](https://github.com/apache/incubator-celeborn/assets/26535726/02cef36e-6dc1-4fba-a65c-18ce20658709)\r\n\r\nAfter (cache disabled)\r\n![image](https://github.com/apache/incubator-celeborn/assets/26535726/fbabb829-8db8-40a2-bbc9-3347823a904d)\r\n![image](https://github.com/apache/incubator-celeborn/assets/26535726/cef321f5-8410-4df0-8f91-c0ce5cde6842)

the netty memory grows more slowly than before in our production environment after applying this patch.\r\n\r\nBefore this PR (cache enabled)\r\n\r\n![截屏2023-08-09 上午11 04 17](https://github.com/apache/incubator-celeborn/assets/8537877/64c33275-0142-46b6-968e-fe4497485212)\r\n\r\nAfter this PR (cache disabled)\r\n\r\n![截屏2023-08-09 上午11 04 54](https://github.com/apache/incubator-celeborn/assets/8537877/ac79f0d3-6af1-4278-8033-e7582896a7bc)\r\n

Thanks! Merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1714?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1714](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1714?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a1f6985) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/03717375fc4fde88d4d3c117a68de45289aba69b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0371737) will **decrease** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1714      +/-   ##\n==========================================\n- Coverage   46.82%   46.66%   -0.16%     \n==========================================\n  Files         161      161              \n  Lines        9995     9995              \n  Branches      924      924              \n==========================================\n- Hits         4679     4663      -16     \n- Misses       5004     5017      +13     \n- Partials      312      315       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1714/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1713?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1713](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1713?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bbb0e7d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/03717375fc4fde88d4d3c117a68de45289aba69b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0371737) will **decrease** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1713      +/-   ##\n==========================================\n- Coverage   46.82%   46.66%   -0.16%     \n==========================================\n  Files         161      161              \n  Lines        9995     9995              \n  Branches      924      924              \n==========================================\n- Hits         4679     4663      -16     \n- Misses       5004     5017      +13     \n- Partials      312      315       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1713/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1711?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1711](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1711?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4903798) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/dcf6be29d8422f3ff678639cc513d293e546593b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (dcf6be2) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1711      +/-   ##\n==========================================\n+ Coverage   46.63%   46.80%   +0.18%     \n==========================================\n  Files         161      161              \n  Lines        9995     9995              \n  Branches      924      924              \n==========================================\n+ Hits         4660     4677      +17     \n+ Misses       5020     5005      -15     \n+ Partials      315      313       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1711/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1710?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1710](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1710?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (146b8d1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fd82855e8be21d42b034d4f343b0e5f24a86ff0c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd82855) will **increase** coverage by `0.69%`.\n> The diff coverage is `28.58%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1710      +/-   ##\n==========================================\n+ Coverage   46.06%   46.75%   +0.69%     \n==========================================\n  Files         161      161              \n  Lines       10011     9986      -25     \n  Branches      928      922       -6     \n==========================================\n+ Hits         4611     4668      +57     \n+ Misses       5090     5004      -86     \n- Partials      310      314       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1710?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1710?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `57.98% <28.58%> (+1.51%)` | :arrow_up: |\n\n... and [6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1710/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @RexXiong @AngersZhuuuu @cfmcgrady @FMX 

cc @cfmcgrady, this may be the root cause of your monitored "memory leak"

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1709?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1709](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1709?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eed7ad3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d64e0091f167462bacd358992ece4b151d673249?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d64e009) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1709      +/-   ##\n==========================================\n+ Coverage   46.51%   46.66%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines       10026     9995      -31     \n  Branches      928      924       -4     \n==========================================\n  Hits         4663     4663              \n+ Misses       5048     5017      -31     \n  Partials      315      315              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1709?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1709?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.60% <ø> (+0.07%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

merged to main/0.3

I verify this patch by running 1T TeraSort with 4g on-heap memory and 2g off-heap memory.\r\n\r\nBefore, the GC swallowed lots of CPU, Netty\

Good catch!

Hi @zy-jordan , thanks for the PR! BTW, could you post some perf number before/after this PR? And please add a license header for new-added files.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: `34 lines` in your changes are missing coverage. Please review.\n> Comparison is base [(`39ab731`)](https://app.codecov.io/gh/apache/incubator-celeborn/commit/39ab731b8584c34f8d40e914836be70b0f70addb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.78% compared to head [(`0c30a24`)](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) 46.60%.\n> Report is 303 commits behind head on main.\n\n> :exclamation: Current head 0c30a24 differs from pull request most recent head 25dc5a9. Consider uploading reports for the commit 25dc5a9 to get more accurate results\n\n| [Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...pache/celeborn/common/meta/FileManagedBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlTWFuYWdlZEJ1ZmZlcnMuamF2YQ==) | 13.34% | [11 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...rg/apache/celeborn/common/meta/SortedFileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9Tb3J0ZWRGaWxlSW5mby5qYXZh) | 35.00% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...he/celeborn/common/util/ShuffleBlockInfoUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHVmZmxlQmxvY2tJbmZvVXRpbHMuamF2YQ==) | 46.16% | [5 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | 50.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1708      +/-   ##\n==========================================\n- Coverage   46.78%   46.60%   -0.17%     \n==========================================\n  Files         162      162              \n  Lines       10012    10039      +27     \n  Branches      923      934      +11     \n==========================================\n- Hits         4683     4678       -5     \n- Misses       5019     5041      +22     \n- Partials      310      320      +10     \n```\n\n\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1708?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n

I ran the same SQL task on both the old version and the new version of the worker. The SortTime monitoring results for the old version are as follows,\r\n![image](https://github.com/apache/incubator-celeborn/assets/82567833/9db71da5-ce6c-49d1-90f0-a0f3d67a85e4)\r\nand the SortTime monitoring results for the new version are as follows.\r\n![image](https://github.com/apache/incubator-celeborn/assets/82567833/9badf588-3e44-4e50-8683-663fff2afab4)\r\nThe Max SortTime decreased from 4.45 minutes to 1.45 minutes.\r\n\r\n

Never expected to sort a shuffle file with multithread could get such improvements. Bravo.

And the approach has transitioned from reading a single large shuffle file to reading multiple fixed-sized shuffle files.\r\n![image](https://github.com/apache/incubator-celeborn/assets/82567833/66d890d1-8128-4c62-be14-b80ce6c01055)\r\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @pan3793 

maybe 64 is fine, let me test

My test shows that 128~256 works better in low memory cases (2g off-heap memory per worker)\r\n\r\nWhen lower than 128, the CPU cost is very high on CompositeBuffer compaction, and there is a high probability that "direct memory usage" < "disk buffer size", since pause is judged by "direct memory usage", OOM happens frequently.\r\n\r\nEven with 128, sometimes "direct memory usage" < "disk buffer size"\r\n\r\n```\r\nDirect memory usage: 1476.0 MiB/2.0 GiB, disk buffer size: 1850.7 MiB\r\n```\r\n\r\nOn the other hand, with the growth of "maxComponents", memory fragmentation grows rapidly too.\r\n\r\nMy final choice is 192. But I think setting 128 in default should be fine considering most users will give it a larger resource than me.\r\n\r\n<img width="1661" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/49d0522d-1739-4e90-b6c6-1a6ec223c491">\r\n\r\n<img width="1274" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/c4c829b6-5983-4f77-90c9-3a2a5f97e1f0">\r\n\r\n<img width="1317" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/db9b7c53-bac8-47fb-90e6-1594aafe8ea5">\r\n\r\n<img width="1251" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/60a33054-f18e-4ad7-8692-c3242a299534">\r\n

> My test shows that 128~256 works better in low memory cases (2g off-heap memory per worker)\r\n> \r\n> When lower than 128, the CPU cost is very high on CompositeBuffer compaction, and there is a high probability that "direct memory usage" < "disk buffer size", since pause is judged by "direct memory usage", OOM happens frequently.\r\n> \r\n> Even with 128, sometimes "direct memory usage" < "disk buffer size"\r\n> \r\n> ```\r\n> Direct memory usage: 1476.0 MiB/2.0 GiB, disk buffer size: 1850.7 MiB\r\n> ```\r\n> \r\n> On the other hand, with the growth of "maxComponents", memory fragmentation grows rapidly too.\r\n> \r\n> My final choice is 192. But I think setting 128 in default should be fine considering most users will give it a larger resource than me.\r\n> \r\n> <img alt="image" width="1661" src="https://user-images.githubusercontent.com/26535726/252643124-49d0522d-1739-4e90-b6c6-1a6ec223c491.png"> <img alt="image" width="1274" src="https://user-images.githubusercontent.com/26535726/252643266-c4c829b6-5983-4f77-90c9-3a2a5f97e1f0.png"> <img alt="image" width="1317" src="https://user-images.githubusercontent.com/26535726/252643371-db9b7c53-bac8-47fb-90e6-1594aafe8ea5.png"> <img alt="image" width="1251" src="https://user-images.githubusercontent.com/26535726/252643557-60a33054-f18e-4ad7-8692-c3242a299534.png">\r\n\r\nThanks @pan3793 for the detailed profiling! I have changed the default value to 128 according to your suggestion. I also agree that optimal settings depend on environment and workloads.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1707?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1707](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1707?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0d13ee1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d64e0091f167462bacd358992ece4b151d673249?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d64e009) will **increase** coverage by `0.15%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 0d13ee1 differs from pull request most recent head 20c3601. Consider uploading reports for the commit 20c3601 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1707      +/-   ##\n==========================================\n+ Coverage   46.51%   46.66%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines       10026     9995      -31     \n  Branches      928      924       -4     \n==========================================\n  Hits         4663     4663              \n+ Misses       5048     5017      -31     \n  Partials      315      315              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1707?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1707?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.60% <ø> (+0.07%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1707?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <100.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @AngersZhuuuu @RexXiong @pan3793 

I reviewed the code logic for push merged data, and I think push merged data does not have similar issue, because newer DataBatches do use the new location.\r\n```\r\n} else if (request.reviveStatus == StatusCode.SUCCESS.getValue()) {\r\n  PartitionLocation newLoc = reducePartitionMap.get(shuffleId).get(request.partitionId);\r\n  DataBatches newDataBatches =\r\n      newDataBatchesMap.computeIfAbsent(genAddressPair(newLoc), (s) -> new DataBatches());\r\n  newDataBatches.addDataBatch(newLoc, batch.batchId, batch.body);\r\n}\r\n```\r\nAnd ```client.pushMergedData(mergedData, pushDataTimeout, wrappedCallback)``` does not reuse the Callback.

cc @RexXiong @pan3793 @AngersZhuuuu @cfmcgrady 

> \r\n\r\n@cfmcgrady Good point! Also @AngersZhuuuu reminded me about that. I added more cases, and without https://github.com/apache/incubator-celeborn/pull/1702 the UT will fail:\r\n![image](https://github.com/apache/incubator-celeborn/assets/948245/5b072bee-29e2-4add-a2dd-9e8a98e9047f)\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1705?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1705](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1705?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (73c3947) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e47ec10cefacf4fc5e59630359350bf437a8e020?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e47ec10) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 73c3947 differs from pull request most recent head 80c6919. Consider uploading reports for the commit 80c6919 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1705      +/-   ##\n==========================================\n- Coverage   46.62%   46.48%   -0.13%     \n==========================================\n  Files         161      161              \n  Lines       10018    10026       +8     \n  Branches      928      928              \n==========================================\n- Hits         4670     4660      -10     \n- Misses       5035     5051      +16     \n- Partials      313      315       +2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1705/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1704?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1704](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1704?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0c07602) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e47ec10cefacf4fc5e59630359350bf437a8e020?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e47ec10) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 0c07602 differs from pull request most recent head 8e48ec6. Consider uploading reports for the commit 8e48ec6 to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1704   +/-   ##\n=======================================\n  Coverage   46.62%   46.62%           \n=======================================\n  Files         161      161           \n  Lines       10018    10018           \n  Branches      928      928           \n=======================================\n  Hits         4670     4670           \n  Misses       5035     5035           \n  Partials      313      313           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 

maybe 4 or 8 for `celeborn.worker.flusher.threads`? I would say SSD adoption is increasing rapidly but not dominating this area today.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1702?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1702](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1702?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (24624fc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/9f09ac6ce9006c65ac04118fec1b5ced3d701ebd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9f09ac6) will **decrease** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1702      +/-   ##\n==========================================\n- Coverage   46.62%   46.43%   -0.18%     \n==========================================\n  Files         161      161              \n  Lines       10018    10018              \n  Branches      928      928              \n==========================================\n- Hits         4670     4651      -19     \n- Misses       5035     5051      +16     \n- Partials      313      316       +3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1702/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 

Would it be possible to add a unit test to validate? @RexXiong 

Celeborn CI has errors. you can fix by running command `UPDATE=1 build/mvn clean test -pl common -am -Pspark-3.3 -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite`\r\n![image](https://github.com/apache/incubator-celeborn/assets/96606293/9c8f56b2-1374-4d04-b24c-88ea0be53fd1)\r\n

> Celeborn CI has errors. you can fix by running command `UPDATE=1 build/mvn clean test -pl common -am -Pspark-3.3 -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite` ![image](https://user-images.githubusercontent.com/96606293/252347164-9c8f56b2-1374-4d04-b24c-88ea0be53fd1.png)\r\n\r\ndone

Would it be possible to add a unit test to validate that the newly added configuration functions as intended? 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1701?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1701](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1701?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e415e4c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a7ff28c26d9701ae3958513bdcc2b42df1a4c0af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a7ff28c) will **increase** coverage by `0.26%`.\n> The diff coverage is `87.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1701      +/-   ##\n==========================================\n+ Coverage   46.41%   46.67%   +0.26%     \n==========================================\n  Files         161      161              \n  Lines       10011    10026      +15     \n  Branches      928      928              \n==========================================\n+ Hits         4646     4679      +33     \n+ Misses       5050     5035      -15     \n+ Partials      315      312       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1701?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1701?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <87.50%> (+0.04%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1701/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1700?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1700](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1700?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (51ebb17) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/52dcd3b5df9c6ee27261f776545b341ceeeabdcd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (52dcd3b) will **increase** coverage by `0.37%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 51ebb17 differs from pull request most recent head 6870caa. Consider uploading reports for the commit 6870caa to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1700      +/-   ##\n==========================================\n+ Coverage   46.06%   46.43%   +0.37%     \n==========================================\n  Files         161      161              \n  Lines       10011    10018       +7     \n  Branches      928      928              \n==========================================\n+ Hits         4611     4651      +40     \n+ Misses       5090     5051      -39     \n- Partials      310      316       +6     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1700/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1699?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1699](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1699?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e07d9f5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/334f0e5ba4ad3aadd1869ad0590cbd3a60a77bee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (334f0e5) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1699      +/-   ##\n==========================================\n+ Coverage   46.43%   46.48%   +0.05%     \n==========================================\n  Files         161      161              \n  Lines       10018    10018              \n  Branches      928      928              \n==========================================\n+ Hits         4651     4656       +5     \n+ Misses       5051     5047       -4     \n+ Partials      316      315       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1699/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @FMX @AngersZhuuuu @pan3793

The memory overhead comes from the unused spaces of each component, and compaction can reduce those spaces?

> The memory overhead comes from the unused spaces of each component, and compaction can reduce those spaces?\r\n\r\nRight. Without compaction, there could be many memory fragments. For small offheap setup, this could cause unnecessary trim.

ping @waitinfuture @FMX @pan3793 Could you take a look.\r\nThis pr only for main branch.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1696?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1696](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1696?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (942ee18) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/52dcd3b5df9c6ee27261f776545b341ceeeabdcd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (52dcd3b) will **increase** coverage by `0.39%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1696      +/-   ##\n==========================================\n+ Coverage   46.06%   46.45%   +0.39%     \n==========================================\n  Files         161      161              \n  Lines       10011    10018       +7     \n  Branches      928      928              \n==========================================\n+ Hits         4611     4653      +42     \n+ Misses       5090     5050      -40     \n- Partials      310      315       +5     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1696?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1696?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1696/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1695?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1695](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1695?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (dd2551d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/52dcd3b5df9c6ee27261f776545b341ceeeabdcd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (52dcd3b) will **increase** coverage by `0.36%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1695      +/-   ##\n==========================================\n+ Coverage   46.06%   46.42%   +0.36%     \n==========================================\n  Files         161      161              \n  Lines       10011    10011              \n  Branches      928      928              \n==========================================\n+ Hits         4611     4647      +36     \n+ Misses       5090     5048      -42     \n- Partials      310      316       +6     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1695?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1695?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.19% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1695/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Only affect metrics?

> Only affect metrics?\r\n\r\nYes, sorted file size summary is only used in metric. So there is no other side effects.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1691?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1691](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1691?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b94c288) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a556b02bc1e898f09781bf562fd0a4896c8ed344?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a556b02) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1691      +/-   ##\n==========================================\n+ Coverage   46.25%   46.39%   +0.14%     \n==========================================\n  Files         161      161              \n  Lines       10011    10011              \n  Branches      928      928              \n==========================================\n+ Hits         4630     4644      +14     \n+ Misses       5074     5051      -23     \n- Partials      307      316       +9     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1691/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady 

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1690?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1690](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1690?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe928c4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ed035d7ab076636287dc5120186da7064c456320?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ed035d7) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head fe928c4 differs from pull request most recent head 6d53a7e. Consider uploading reports for the commit 6d53a7e to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1690      +/-   ##\n==========================================\n- Coverage   46.11%   46.07%   -0.03%     \n==========================================\n  Files         161      161              \n  Lines       10011    10011              \n  Branches      928      928              \n==========================================\n- Hits         4616     4612       -4     \n- Misses       5086     5088       +2     \n- Partials      309      311       +2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1690/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @zhongqiangczq, this is a critical fix, should be included in 0.3.0

cc @zwangsheng, the error you hit several days ago may be caused by this one.

nice catch! manually tested, memory manager actions can be transformed from `pausePushDataAndResumeReplicate` to `resumeAll` as expected now.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1688?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1688](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1688?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bb5f270) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ed035d7ab076636287dc5120186da7064c456320?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ed035d7) will **decrease** coverage by `0.01%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1688      +/-   ##\n==========================================\n- Coverage   46.11%   46.09%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines       10011    10011              \n  Branches      928      928              \n==========================================\n- Hits         4616     4614       -2     \n- Misses       5086     5087       +1     \n- Partials      309      310       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1688?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1688?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.35% <50.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1688/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1687](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1aa44de) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2bd1d86d41d78774e28c9631008921042ebee593?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2bd1d86) will **decrease** coverage by `0.10%`.\n> The diff coverage is `57.90%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1687      +/-   ##\n==========================================\n- Coverage   46.33%   46.22%   -0.10%     \n==========================================\n  Files         161      161              \n  Lines        9996    10011      +15     \n  Branches      924      928       +4     \n==========================================\n- Hits         4631     4627       -4     \n- Misses       5059     5077      +18     \n- Partials      306      307       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.35% <46.67%> (-0.31%)` | :arrow_down: |\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `81.82% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1687/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady 

Thanks, merged to main/0.3

cc @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1686](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (29a159a) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/80d00dab21ffa3c8d014e59b2973d6878bad498e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (80d00da) will **decrease** coverage by `0.35%`.\n> The diff coverage is `84.62%`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #1686      +/-   ##\n==============================================\n- Coverage       46.31%   45.96%   -0.35%     \n==============================================\n  Files             161      162       +1     \n  Lines            9996    10304     +308     \n  Branches          924     1020      +96     \n==============================================\n+ Hits             4629     4735     +106     \n- Misses           5060     5251     +191     \n- Partials          307      318      +11     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | `70.11% <75.00%> (-5.17%)` | :arrow_down: |\n| [...born/common/haclient/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvTWFzdGVyTm90TGVhZGVyRXhjZXB0aW9uLmphdmE=) | `100.00% <100.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1686/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

As suggested by @cfmcgrady, we can apply this patch only for `branch-0.3`

Closed via https://github.com/apache/incubator-celeborn/commit/0703980842567b48bcea98aaa0c5de07d9b72290

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1685?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1685](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1685?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (98a8c3b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3af5c231c70fb1771619f04989815508412f40bb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3af5c23) will **increase** coverage by `0.05%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 98a8c3b differs from pull request most recent head fc7e865. Consider uploading reports for the commit fc7e865 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1685      +/-   ##\n==========================================\n+ Coverage   46.23%   46.27%   +0.05%     \n==========================================\n  Files         161      161              \n  Lines        9960     9990      +30     \n  Branches      920      924       +4     \n==========================================\n+ Hits         4604     4622      +18     \n- Misses       5053     5061       +8     \n- Partials      303      307       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1685?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1685?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.15% <100.00%> (-<0.01%)` | :arrow_down: |\n\n... and [7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1685/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @cfmcgrady 

BTW, I notice the current `Dispatcher` code is ported from Spark 2.x, SPARK-29398 changed it a lot in Spark 3.0, we may want to update the code in the future if necessary.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1684](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (79a3e4a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/09881f5cff4c0e6843afd942bb3932bb1758232c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (09881f5) will **decrease** coverage by `0.09%`.\n> The diff coverage is `66.67%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1684      +/-   ##\n==========================================\n- Coverage   46.27%   46.17%   -0.09%     \n==========================================\n  Files         161      161              \n  Lines        9990     9996       +6     \n  Branches      924      924              \n==========================================\n- Hits         4622     4615       -7     \n- Misses       5061     5072      +11     \n- Partials      307      309       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/common/rpc/netty/Dispatcher.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9EaXNwYXRjaGVyLnNjYWxh) | `31.87% <20.00%> (+0.35%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.19% <100.00%> (+0.04%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1684/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

cc @AngersZhuuuu @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1683](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (23fd935) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3af5c231c70fb1771619f04989815508412f40bb?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3af5c23) will **decrease** coverage by `0.11%`.\n> The diff coverage is `38.10%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1683      +/-   ##\n==========================================\n- Coverage   46.23%   46.11%   -0.11%     \n==========================================\n  Files         161      161              \n  Lines        9960     9990      +30     \n  Branches      920      924       +4     \n==========================================\n+ Hits         4604     4606       +2     \n- Misses       5053     5074      +21     \n- Partials      303      310       +7     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `50.00% <ø> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <0.00%> (-<0.01%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.66% <ø> (ø)` | |\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `19.24% <4.77%> (-66.48%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.15% <88.24%> (-<0.01%)` | :arrow_down: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1683/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@cfmcgrady We use `Reqs` in several configurations, and "max" also is an abbr of "maximum" :)

> @cfmcgrady We use `Reqs` in several configurations, and "max" also is an abbr of "maximum" :)\r\n\r\nok, Spark also has the key like `spark.reducer.maxReqsInFlight`

cc @FMX @AngersZhuuuu @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1682?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1682](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1682?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fa3db94) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5b3f43dffc7c40a25ac60d3de3b9951de5a6216e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5b3f43d) will **decrease** coverage by `0.08%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1682      +/-   ##\n==========================================\n- Coverage   46.24%   46.16%   -0.08%     \n==========================================\n  Files         161      161              \n  Lines        9957     9957              \n  Branches      920      920              \n==========================================\n- Hits         4604     4596       -8     \n- Misses       5050     5053       +3     \n- Partials      303      308       +5     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1682?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1682?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.18% <100.00%> (+0.05%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1682/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1681?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1681](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1681?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (24ae80e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5b3f43dffc7c40a25ac60d3de3b9951de5a6216e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5b3f43d) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1681   +/-   ##\n=======================================\n  Coverage   46.24%   46.24%           \n=======================================\n  Files         161      161           \n  Lines        9957     9957           \n  Branches      920      920           \n=======================================\n  Hits         4604     4604           \n  Misses       5050     5050           \n  Partials      303      303           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1680?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1680](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1680?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4450b02) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5b3f43dffc7c40a25ac60d3de3b9951de5a6216e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5b3f43d) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1680      +/-   ##\n==========================================\n+ Coverage   46.24%   46.26%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines        9957     9960       +3     \n  Branches      920      920              \n==========================================\n+ Hits         4604     4607       +3     \n  Misses       5050     5050              \n  Partials      303      303              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1680?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1680?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.16% <100.00%> (+0.02%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1679?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1679](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1679?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (781b7bc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5b3f43dffc7c40a25ac60d3de3b9951de5a6216e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5b3f43d) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1679      +/-   ##\n==========================================\n+ Coverage   46.24%   46.37%   +0.14%     \n==========================================\n  Files         161      161              \n  Lines        9957     9957              \n  Branches      920      920              \n==========================================\n+ Hits         4604     4617      +13     \n+ Misses       5050     5040      -10     \n+ Partials      303      300       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1679/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1678](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (063bc9c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de0fd8cc44275ff78bb3d9228be0d94db57b79d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de0fd8c) will **increase** coverage by `0.05%`.\n> The diff coverage is `29.73%`.\n\n> :exclamation: Current head 063bc9c differs from pull request most recent head e6ff705. Consider uploading reports for the commit e6ff705 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1678      +/-   ##\n==========================================\n+ Coverage   46.22%   46.27%   +0.05%     \n==========================================\n  Files         161      161              \n  Lines        9957     9990      +33     \n  Branches      920      924       +4     \n==========================================\n+ Hits         4602     4622      +20     \n- Misses       5051     5061      +10     \n- Partials      304      307       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `50.00% <ø> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <0.00%> (-<0.01%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.66% <ø> (ø)` | |\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `19.24% <4.77%> (-66.48%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.15% <83.34%> (+0.02%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1678/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> \r\n\r\nUpdated. 

Since Spark 3.3, the `--add-opens` list is added no matter JDK version you are using.\r\n\r\ne.g. Spark 3.3.1 with Java 8\r\n<img width="1703" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/a812aac7-cd17-4e25-bd71-309837bf6c03">\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1677?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1677](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1677?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7538aff) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de0fd8cc44275ff78bb3d9228be0d94db57b79d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de0fd8c) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1677   +/-   ##\n=======================================\n  Coverage   46.22%   46.22%           \n=======================================\n  Files         161      161           \n  Lines        9957     9957           \n  Branches      920      920           \n=======================================\n  Hits         4602     4602           \n  Misses       5051     5051           \n  Partials      304      304           \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1677/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

FYI:\r\n\r\n[JEP 403](https://openjdk.java.net/jeps/403) targeted for [JDK 17](https://openjdk.java.net/projects/jdk/17/) will remove `--illegal-access` flag. That will be equivalent to `--illegal-access=deny`.\r\n\r\nthis means using reflection to invoke protected methods of exported `java.*` APIs will no longer work. For example:\r\n\r\n```shell\r\n> /Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/jshell\r\n|  欢迎使用 JShell -- 版本 17.0.7\r\n|  要大致了解该版本, 请键入: /help intro\r\n\r\njshell> java.nio.ByteBuffer direct = java.nio.ByteBuffer.allocateDirect(1);\r\ndirect ==> java.nio.DirectByteBuffer[pos=0 lim=1 cap=1]\r\n\r\njshell> direct.getClass().getDeclaredConstructor(long.class, int.class).setAccessible(true);\r\n|  异常错误 java.lang.reflect.InaccessibleObjectException：Unable to make private java.nio.DirectByteBuffer(long,int) accessible: module java.base does not "opens java.nio" to unnamed module @34c45dca\r\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:354)\r\n|        at AccessibleObject.checkCanSetAccessible (AccessibleObject.java:297)\r\n|        at Constructor.checkCanSetAccessible (Constructor.java:188)\r\n|        at Constructor.setAccessible (Constructor.java:181)\r\n|        at (#2:1)\r\n\r\njshell>\r\n\r\n```\r\n\r\n\r\n```shell\r\n>  /Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/jshell -R --add-opens=java.base/java.nio=ALL-UNNAMED\r\n|  欢迎使用 JShell -- 版本 17.0.7\r\n|  要大致了解该版本, 请键入: /help intro\r\n\r\njshell> java.nio.ByteBuffer direct = java.nio.ByteBuffer.allocateDirect(1);\r\ndirect ==> java.nio.DirectByteBuffer[pos=0 lim=1 cap=1]\r\n\r\njshell> direct.getClass().getDeclaredConstructor(long.class, int.class).setAccessible(true);\r\n\r\njshell>\r\n```

> Since Spark 3.3, the `--add-opens` list is added no matter JDK version you are using.\r\n> \r\n> e.g. Spark 3.3.1 with Java 8 <img alt="image" width="1703" src="https://user-images.githubusercontent.com/26535726/250923341-a812aac7-cd17-4e25-bd71-309837bf6c03.png">\r\n\r\nthis is because we have the flag `-XX:+IgnoreUnrecognizedVMOptions` for the JDK 8\r\n\r\n```shell\r\n> java -version                                                                                                                                                                                                 \r\nopenjdk version "1.8.0_362"\r\nOpenJDK Runtime Environment (Temurin)(build 1.8.0_362-b09)\r\nOpenJDK 64-Bit Server VM (Temurin)(build 25.362-b09, mixed mode)\r\n> java --add-opens=java.base/java.nio=ALL-UNNAMED -version \r\nUnrecognized option: --add-opens=java.base/java.nio=ALL-UNNAMED\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n> java -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.nio=ALL-UNNAMED -version\r\nopenjdk version "1.8.0_362"\r\nOpenJDK Runtime Environment (Temurin)(build 1.8.0_362-b09)\r\nOpenJDK 64-Bit Server VM (Temurin)(build 25.362-b09, mixed mode)\r\n```

@cfmcgrady thanks for supplying additional information

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1676?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1676](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1676?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2edda32) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/693172d0bd0614674405f6af863f5f0a361b5f3a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (693172d) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 2edda32 differs from pull request most recent head 8be2ac1. Consider uploading reports for the commit 8be2ac1 to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1676   +/-   ##\n=======================================\n  Coverage   46.22%   46.22%           \n=======================================\n  Files         161      161           \n  Lines        9957     9957           \n  Branches      920      920           \n=======================================\n  Hits         4602     4602           \n  Misses       5051     5051           \n  Partials      304      304           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1675](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fdf3fc6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/693172d0bd0614674405f6af863f5f0a361b5f3a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (693172d) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1675      +/-   ##\n==========================================\n- Coverage   46.22%   46.20%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines        9957     9931      -26     \n  Branches      920      920              \n==========================================\n- Hits         4602     4588      -14     \n+ Misses       5051     5043       -8     \n+ Partials      304      300       -4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `87.50% <ø> (-0.96%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.02% <ø> (-0.12%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `64.98% <100.00%> (-0.39%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1675/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1674](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c3b71a9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7880c52fff9586453cd923945e57cc87c1769103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7880c52) will **increase** coverage by `0.24%`.\n> The diff coverage is `71.88%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1674      +/-   ##\n==========================================\n+ Coverage   46.25%   46.48%   +0.24%     \n==========================================\n  Files         161      162       +1     \n  Lines        9963     9988      +25     \n  Branches      920      920              \n==========================================\n+ Hits         4607     4642      +35     \n+ Misses       5053     5045       -8     \n+ Partials      303      301       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/network/protocol/DataMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9EYXRhTWVzc2FnZS5qYXZh) | `65.39% <65.39%> (ø)` | |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `41.92% <100.00%> (+0.87%)` | :arrow_up: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `61.17% <100.00%> (+1.17%)` | :arrow_up: |\n\n... and [12 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1674/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

+1 for this approach to gain extensibility for data messages\r\n\r\n

@pan3793 Updated. Is there anything more to address?

This PR will be remade to follow new design. 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1673?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1673](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1673?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (02fbf34) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a1be02b4fa696ca62f8f258161aad0859aad8fd2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a1be02b) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1673      +/-   ##\n==========================================\n+ Coverage   46.19%   46.22%   +0.04%     \n==========================================\n  Files         161      161              \n  Lines        9957     9957              \n  Branches      920      920              \n==========================================\n+ Hits         4599     4602       +3     \n+ Misses       5054     5051       -3     \n  Partials      304      304              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1673/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1672?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1672](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1672?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7917552) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7880c52fff9586453cd923945e57cc87c1769103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7880c52) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1672      +/-   ##\n==========================================\n+ Coverage   46.25%   46.39%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines        9963     9963              \n  Branches      920      920              \n==========================================\n+ Hits         4607     4621      +14     \n+ Misses       5053     5041      -12     \n+ Partials      303      301       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1672/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @kerwin-zk @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1671?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1671](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1671?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (162a65b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/381165d4e7ef1229bd88f08381cbd96f5cc91414?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (381165d) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1671   +/-   ##\n=======================================\n  Coverage   46.07%   46.07%           \n=======================================\n  Files         161      161           \n  Lines       10002    10002           \n  Branches      962      962           \n=======================================\n  Hits         4607     4607           \n  Misses       5092     5092           \n  Partials      303      303           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

cc @cfmcgrady 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1670](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2f26b44) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5c7ecb83029e0eae0c1637496fa6fcb40b148243?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5c7ecb8) will **decrease** coverage by `0.00%`.\n> The diff coverage is `35.30%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1670      +/-   ##\n==========================================\n- Coverage   46.25%   46.24%   -0.00%     \n==========================================\n  Files         161      161              \n  Lines        9984     9957      -27     \n  Branches      960      920      -40     \n==========================================\n- Hits         4617     4604      -13     \n+ Misses       5066     5050      -16     \n- Partials      301      303       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/meta/FileManagedBuffers.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlTWFuYWdlZEJ1ZmZlcnMuamF2YQ==) | `78.95% <0.00%> (+3.95%)` | :arrow_up: |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `41.05% <0.00%> (ø)` | |\n| [...leborn/common/network/util/NettyMemoryMetrics.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5TWVtb3J5TWV0cmljcy5qYXZh) | `0.00% <ø> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `58.51% <ø> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/common/metrics/MetricLabels.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljTGFiZWxzLnNjYWxh) | `80.00% <0.00%> (-10.00%)` | :arrow_down: |\n| [...leborn/common/metrics/sink/PrometheusServlet.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc2luay9Qcm9tZXRoZXVzU2VydmxldC5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/common/metrics/source/JVMCPUSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0pWTUNQVVNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/common/util/FunctionConverter.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvRnVuY3Rpb25Db252ZXJ0ZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ava/org/apache/celeborn/common/util/JavaUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9KYXZhVXRpbHMuamF2YQ==) | `45.26% <50.00%> (ø)` | |\n| ... and [2 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1670/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

would you mind to add a unit test?

> would you mind to add a unit test?\r\n\r\n@cfmcgrady done.

Please regenerate the docs, and others LGTM.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1669](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (83343d0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6e35745736f7248ac4782958d79967c934f512df?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e35745) will **increase** coverage by `0.09%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 83343d0 differs from pull request most recent head b3141f3. Consider uploading reports for the commit b3141f3 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1669      +/-   ##\n==========================================\n+ Coverage   46.09%   46.18%   +0.09%     \n==========================================\n  Files         161      161              \n  Lines        9984    10002      +18     \n  Branches      960      962       +2     \n==========================================\n+ Hits         4601     4618      +17     \n- Misses       5079     5083       +4     \n+ Partials      304      301       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/protocol/CompressionCodec.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvQ29tcHJlc3Npb25Db2RlYy5qYXZh) | `100.00% <100.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.14% <100.00%> (+0.02%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1669/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1668?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1668](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1668?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fff7dd8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6e35745736f7248ac4782958d79967c934f512df?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e35745) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1668      +/-   ##\n==========================================\n- Coverage   46.09%   46.04%   -0.04%     \n==========================================\n  Files         161      161              \n  Lines        9984     9998      +14     \n  Branches      960      962       +2     \n==========================================\n+ Hits         4601     4603       +2     \n- Misses       5079     5092      +13     \n+ Partials      304      303       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1668?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1668?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1668/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

ping @pan3793 @waitinfuture @RexXiong @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1667?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1667](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1667?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (13629c4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6e35745736f7248ac4782958d79967c934f512df?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e35745) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1667      +/-   ##\n==========================================\n+ Coverage   46.09%   46.11%   +0.03%     \n==========================================\n  Files         161      161              \n  Lines        9984     9984              \n  Branches      960      960              \n==========================================\n+ Hits         4601     4603       +2     \n+ Misses       5079     5078       -1     \n+ Partials      304      303       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1667?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/protocol/RpcNameConstants.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1667?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUnBjTmFtZUNvbnN0YW50cy5qYXZh) | `85.72% <ø> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1667/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@FMX @RexXiong @waitinfuture you may want to take a look

Thanks, merged to main/0.3

Names change looks good to me. The patch content will need some modification. How about changing the content by the way?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1666](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3e71ac8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1fd8833756721291d62db5151a8b9ccb91ea2c66?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1fd8833) will **decrease** coverage by `0.30%`.\n> The diff coverage is `19.38%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1666      +/-   ##\n==========================================\n- Coverage   46.41%   46.11%   -0.30%     \n==========================================\n  Files         161      161              \n  Lines        9949     9984      +35     \n  Branches      957      960       +3     \n==========================================\n- Hits         4617     4603      -14     \n- Misses       5031     5078      +47     \n- Partials      301      303       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/PushData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YS5qYXZh) | `20.00% <ø> (ø)` | |\n| [...orn/common/network/protocol/PushDataHandShake.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YUhhbmRTaGFrZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...leborn/common/network/protocol/PushMergedData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoTWVyZ2VkRGF0YS5qYXZh) | `19.57% <ø> (ø)` | |\n| [...celeborn/common/network/protocol/RegionFinish.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25GaW5pc2guamF2YQ==) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | `0.00% <ø> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `60.00% <ø> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.46% <0.00%> (ø)` | |\n| ... and [5 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1666/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> Names change looks good to me. The patch content will need some modification. How about changing the content by the way?\r\n\r\nYea, changed,

have done all of these in https://github.com/apache/incubator-celeborn/pull/1664

ping @waitinfuture @RexXiong @kerwin-zk @FMX @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1664](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (90fc851) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7880c52fff9586453cd923945e57cc87c1769103?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7880c52) will **decrease** coverage by `0.03%`.\n> The diff coverage is `57.15%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1664      +/-   ##\n==========================================\n- Coverage   46.25%   46.21%   -0.03%     \n==========================================\n  Files         161      161              \n  Lines        9963     9957       -6     \n  Branches      920      920              \n==========================================\n- Hits         4607     4601       -6     \n  Misses       5053     5053              \n  Partials      303      303              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | `75.29% <ø> (ø)` | |\n| [...eleborn/common/internal/config/ConfigBuilder.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdCdWlsZGVyLnNjYWxh) | `77.56% <ø> (ø)` | |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `78.90% <ø> (ø)` | |\n| [...leborn/common/internal/config/ConfigProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdQcm92aWRlci5zY2FsYQ==) | `50.00% <ø> (ø)` | |\n| [...he/celeborn/common/metrics/CelebornHistogram.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvQ2VsZWJvcm5IaXN0b2dyYW0uc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/common/metrics/MetricsConfig.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc0NvbmZpZy5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.79% <ø> (+0.67%)` | :arrow_up: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.66% <0.00%> (ø)` | |\n| [...che/celeborn/common/protocol/RpcNameConstants.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUnBjTmFtZUNvbnN0YW50cy5qYXZh) | `85.72% <100.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.14% <100.00%> (ø)` | |\n| ... and [1 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1664/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @FMX @waitinfuture @pan3793 @RexXiong Could you take a look

Thanks @AngersZhuuuu for this Refactor! Seems we lack UTs for columnar shuffle/Codegen @kerwin-zk 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1663](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cd520d1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1fd8833756721291d62db5151a8b9ccb91ea2c66?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1fd8833) will **decrease** coverage by `0.14%`.\n> The diff coverage is `19.38%`.\n\n> :exclamation: Current head cd520d1 differs from pull request most recent head 5118d9f. Consider uploading reports for the commit 5118d9f to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1663      +/-   ##\n==========================================\n- Coverage   46.41%   46.27%   -0.14%     \n==========================================\n  Files         161      161              \n  Lines        9949     9984      +35     \n  Branches      957      960       +3     \n==========================================\n+ Hits         4617     4619       +2     \n- Misses       5031     5065      +34     \n+ Partials      301      300       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/PushData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YS5qYXZh) | `20.00% <ø> (ø)` | |\n| [...orn/common/network/protocol/PushDataHandShake.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YUhhbmRTaGFrZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...leborn/common/network/protocol/PushMergedData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoTWVyZ2VkRGF0YS5qYXZh) | `19.57% <ø> (ø)` | |\n| [...celeborn/common/network/protocol/RegionFinish.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25GaW5pc2guamF2YQ==) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | `0.00% <ø> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `60.00% <ø> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.46% <0.00%> (ø)` | |\n| ... and [5 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1663/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1662?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1662](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1662?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6ddb607) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/bd7c2ea35a88318f7356e85aa285707aaa6cf32c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bd7c2ea) will **increase** coverage by `0.26%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1662      +/-   ##\n==========================================\n+ Coverage   46.15%   46.41%   +0.26%     \n==========================================\n  Files         161      161              \n  Lines        9948     9949       +1     \n  Branches      957      957              \n==========================================\n+ Hits         4591     4617      +26     \n+ Misses       5054     5031      -23     \n+ Partials      303      301       -2     \n```\n\n\n[see 11 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1662/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1661](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b3c9675) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fd0cf11eca2872c66bfb76cd6d873f793bf102b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd0cf11) will **decrease** coverage by `0.03%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1661      +/-   ##\n==========================================\n- Coverage   46.21%   46.18%   -0.03%     \n==========================================\n  Files         161      161              \n  Lines        9948     9948              \n  Branches      957      957              \n==========================================\n- Hits         4596     4593       -3     \n- Misses       5050     5053       +3     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/client/MasterNotLeaderException.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3Rlck5vdExlYWRlckV4Y2VwdGlvbi5qYXZh) | `100.00% <ø> (ø)` | |\n| [...rg/apache/celeborn/common/client/MasterClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vY2xpZW50L01hc3RlckNsaWVudC5qYXZh) | `75.29% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1661/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1660?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1660](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1660?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8c7e844) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fd0cf11eca2872c66bfb76cd6d873f793bf102b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd0cf11) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1660      +/-   ##\n==========================================\n+ Coverage   46.21%   46.35%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines        9948     9948              \n  Branches      957      957              \n==========================================\n+ Hits         4596     4610      +14     \n+ Misses       5050     5038      -12     \n+ Partials      302      300       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1660/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

as we are here, would you mind updating the terminology within the Drawio file and regenerating the jpg file?

> as we are here, would you mind updating the terminology within the Drawio file and regenerating the jpg file?\r\n\r\nDone

> > as we are here, would you mind updating the terminology within the Drawio file and regenerating the jpg file?\r\n> \r\n> Done\r\n\r\nforget uploading the regenerated jpg file?

> > > as we are here, would you mind updating the terminology within the Drawio file and regenerating the jpg file?\r\n> > \r\n> > \r\n> > Done\r\n> \r\n> forget uploading the regenerated jpg file?\r\n\r\nNot used now, after discuss, delete it directly

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1659?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1659](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1659?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cd4a639) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fd0cf11eca2872c66bfb76cd6d873f793bf102b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fd0cf11) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1659      +/-   ##\n==========================================\n+ Coverage   46.21%   46.22%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines        9948     9948              \n  Branches      957      957              \n==========================================\n+ Hits         4596     4597       +1     \n+ Misses       5050     5047       -3     \n- Partials      302      304       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1659?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1659?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `81.82% <100.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1659/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

ping @pan3793 @waitinfuture @FMX @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1658](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7017f95) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/742815f28517bcd0067bdbc4c17b7bd274d9bdb1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (742815f) will **increase** coverage by `0.35%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1658      +/-   ##\n==========================================\n+ Coverage   46.09%   46.43%   +0.35%     \n==========================================\n  Files         161      161              \n  Lines        9984     9945      -39     \n  Branches      960      918      -42     \n==========================================\n+ Hits         4601     4617      +16     \n+ Misses       5079     5027      -52     \n+ Partials      304      301       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/network/protocol/TransportMessage.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRNZXNzYWdlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.54% <0.00%> (+0.09%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1658/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Field addition and deletion are both compatible when deserialization with same serialVersionUID of java object, so I add a new field messageTypeValue for TransportMessage and mark messageType as deprecated, then messageType can be removed in next version. This change can compatible with old clients -> new server. @pan3793  @AngersZhuuuu 

cc @waitinfuture @FMX 

@pan3793  I know a framework named "JMH" is designed for this scenario. I wound whether simple tests can give accurate performance results.

> @pan3793 I know a framework named "JMH" is designed for this scenario. I wound whether simple tests can give accurate performance results.\r\n\r\nThis framework is borrowed from Spark, the accuracy is based on how benchmark cases are designed

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1657?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1657](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1657?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8666800) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78327ebd4a25f6b3052b7741acc0da6ad9b2ebb0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (78327eb) will **increase** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1657      +/-   ##\n==========================================\n+ Coverage   46.15%   46.18%   +0.03%     \n==========================================\n  Files         161      161              \n  Lines        9948     9983      +35     \n  Branches      957      960       +3     \n==========================================\n+ Hits         4591     4610      +19     \n- Misses       5054     5073      +19     \n+ Partials      303      300       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1657?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1657?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `16.47% <0.00%> (-1.22%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1657/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1656?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1656](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1656?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (38532e3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/52dcd3b5df9c6ee27261f776545b341ceeeabdcd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (52dcd3b) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1656      +/-   ##\n==========================================\n+ Coverage   46.06%   46.23%   +0.17%     \n==========================================\n  Files         161      161              \n  Lines       10011     9980      -31     \n  Branches      928      924       -4     \n==========================================\n+ Hits         4611     4613       +2     \n+ Misses       5090     5058      -32     \n+ Partials      310      309       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1656?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1656?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.60% <ø> (+0.07%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1656/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @FMX I think we can  merge this into main branch?

LGTM, thanks to @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1654?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1654](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1654?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5780ad2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c6d90b5e5a9130eeff75c3d366c913ce1899b69?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c6d90b) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1654      +/-   ##\n==========================================\n+ Coverage   46.19%   46.21%   +0.03%     \n==========================================\n  Files         161      161              \n  Lines        9948     9948              \n  Branches      957      957              \n==========================================\n+ Hits         4594     4596       +2     \n+ Misses       5051     5050       -1     \n+ Partials      303      302       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1654/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1653?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1653](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1653?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8ba2002) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c2352a2f9f59406add470235a159606382e6db9e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c2352a2) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1653   +/-   ##\n=======================================\n  Coverage   46.20%   46.20%           \n=======================================\n  Files         161      161           \n  Lines        9949     9949           \n  Branches      957      957           \n=======================================\n  Hits         4596     4596           \n  Misses       5051     5051           \n  Partials      302      302           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Also cc @luciferYang

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1652?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1652](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1652?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9659773) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c2352a2f9f59406add470235a159606382e6db9e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c2352a2) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1652      +/-   ##\n==========================================\n- Coverage   46.20%   46.19%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines        9949     9948       -1     \n  Branches      957      957              \n==========================================\n- Hits         4596     4594       -2     \n  Misses       5051     5051              \n- Partials      302      303       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1652?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/serializer/SerializationDebugger.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1652?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3NlcmlhbGl6ZXIvU2VyaWFsaXphdGlvbkRlYnVnZ2VyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1652/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @pan3793 @FMX 

> I think no, the protobuf binary encoding format does not contains the message name\r\n\r\n+1

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1651?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1651](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1651?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4d05a74) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4c4e18b0d6e40b57326cc431fd79bbaf2c43353f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4c4e18b) will **decrease** coverage by `0.14%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1651      +/-   ##\n==========================================\n- Coverage   46.32%   46.18%   -0.14%     \n==========================================\n  Files         161      161              \n  Lines        9949     9949              \n  Branches      957      957              \n==========================================\n- Hits         4608     4594      -14     \n- Misses       5040     5052      +12     \n- Partials      301      303       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1651?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1651?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.46% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1651/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1650?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1650](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1650?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b47f264) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ad13b04f2e7efe77ef130af66058f5879ed89029?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ad13b04) will **increase** coverage by `0.11%`.\n> The diff coverage is `72.73%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1650      +/-   ##\n==========================================\n+ Coverage   46.10%   46.20%   +0.11%     \n==========================================\n  Files         161      161              \n  Lines        9971     9949      -22     \n  Branches      965      957       -8     \n==========================================\n  Hits         4596     4596              \n+ Misses       5073     5051      -22     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1650?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1650?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <72.73%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1650/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1649?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1649](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1649?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c0b98a5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1a53db22cec1a1b393949898857d2301a9dbadb8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1a53db2) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head c0b98a5 differs from pull request most recent head dcde5c4. Consider uploading reports for the commit dcde5c4 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1649      +/-   ##\n==========================================\n+ Coverage   46.18%   46.33%   +0.16%     \n==========================================\n  Files         161      161              \n  Lines        9948     9948              \n  Branches      957      957              \n==========================================\n+ Hits         4593     4608      +15     \n+ Misses       5053     5039      -14     \n+ Partials      302      301       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1649/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1648?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1648](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1648?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d82aa8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a672db719a5b2eb3be43f26b52cfc6c321fa15b0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a672db7) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1648      +/-   ##\n==========================================\n- Coverage   46.11%   46.09%   -0.02%     \n==========================================\n  Files         161      161              \n  Lines        9968     9968              \n  Branches      962      962              \n==========================================\n- Hits         4596     4594       -2     \n- Misses       5070     5071       +1     \n- Partials      302      303       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1648/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @FMX @waitinfuture @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1647?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1647](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1647?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c7cdfa8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/590198eceab12e7e07d2b541a8308ee17805077a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (590198e) will **increase** coverage by `0.23%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1647      +/-   ##\n==========================================\n+ Coverage   46.08%   46.30%   +0.23%     \n==========================================\n  Files         161      161              \n  Lines        9976     9957      -19     \n  Branches      965      960       -5     \n==========================================\n+ Hits         4596     4610      +14     \n+ Misses       5078     5047      -31     \n+ Partials      302      300       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1647?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1647?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.44% <ø> (+0.04%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1647/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1646?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1646](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1646?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3df47b4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3985a5cbd7d51503bcd570c7f6af2bd323d125a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3985a5c) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1646      +/-   ##\n==========================================\n+ Coverage   45.99%   46.17%   +0.18%     \n==========================================\n  Files         161      161              \n  Lines        9994     9987       -7     \n  Branches      973      970       -3     \n==========================================\n+ Hits         4596     4610      +14     \n+ Misses       5096     5077      -19     \n+ Partials      302      300       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1646?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1646?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.39% <ø> (+0.02%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1646/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @FMX 

Thanks , merge to main/branch-0.3

ping @pan3793 @waitinfuture @FMX 

I guess it maybe useful if we decide to provide a Web UI on master.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1645?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1645](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1645?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c67075a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3985a5cbd7d51503bcd570c7f6af2bd323d125a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3985a5c) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1645      +/-   ##\n==========================================\n+ Coverage   45.99%   46.14%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines        9994     9982      -12     \n  Branches      973      968       -5     \n==========================================\n+ Hits         4596     4605       +9     \n+ Misses       5096     5076      -20     \n+ Partials      302      301       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1645?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1645?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.40% <ø> (+0.03%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1645/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> I guess it maybe useful if we decide to provide a Web UI on master.\r\n\r\nIf web UI use RPC, it reuse, but we also can get such information throw HTTP request.

Merged to main/0.3

ping @pan3793 @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1644?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1644](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1644?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b908859) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3985a5cbd7d51503bcd570c7f6af2bd323d125a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3985a5c) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1644      +/-   ##\n==========================================\n+ Coverage   45.99%   46.04%   +0.05%     \n==========================================\n  Files         161      161              \n  Lines        9994     9984      -10     \n  Branches      973      970       -3     \n==========================================\n  Hits         4596     4596              \n+ Misses       5096     5086      -10     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1644?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1644?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.40% <ø> (+0.02%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1644/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 @waitinfuture 

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1642?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1642](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1642?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e161191) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3985a5cbd7d51503bcd570c7f6af2bd323d125a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3985a5c) will **increase** coverage by `0.15%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1642      +/-   ##\n==========================================\n+ Coverage   45.99%   46.13%   +0.15%     \n==========================================\n  Files         161      161              \n  Lines        9994     9994              \n  Branches      973      973              \n==========================================\n+ Hits         4596     4610      +14     \n+ Misses       5096     5084      -12     \n+ Partials      302      300       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1642?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1642?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1642/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Is it compatibility ok to change field name?

Changing a field name will not affect the protobuf encoding or compatibility between applications that use proto definitions which differ only by field names.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1641?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1641](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1641?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b9f659a) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1241f093faea336d8742134a430896675ff33237?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1241f09) will **increase** coverage by `0.15%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #1641      +/-   ##\n==============================================\n+ Coverage       46.01%   46.15%   +0.15%     \n==============================================\n  Files             161      161              \n  Lines            9990     9994       +4     \n  Branches          973      973              \n==============================================\n+ Hits             4596     4612      +16     \n+ Misses           5092     5083       -9     \n+ Partials          302      299       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1641?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1641?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (-<0.01%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1641/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1640?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1640](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1640?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (57dddd4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3985a5cbd7d51503bcd570c7f6af2bd323d125a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3985a5c) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 57dddd4 differs from pull request most recent head 001a2bd. Consider uploading reports for the commit 001a2bd to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1640   +/-   ##\n=======================================\n  Coverage   45.99%   45.99%           \n=======================================\n  Files         161      161           \n  Lines        9994     9994           \n  Branches      973      973           \n=======================================\n  Hits         4596     4596           \n  Misses       5096     5096           \n  Partials      302      302           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The flaky actually occurs "shuffle key not expired, diskInfo.actualUsableSpace < 0, no space", increase "celeborn.client.shuffle.expired.checkInterval" from 5s to 20s should help, the rest are refactoring.

Thanks, merged to main/0.3

> The flaky actually occurs "shuffle key not expired, diskInfo.actualUsableSpace < 0, no space", increase "celeborn.client.shuffle.expired.checkInterval" from 10s to 20s should help, the rest are refactoring.\r\n\r\nThanks for explaining this, but you mean ```from 5s```?

right, from 5s to 20s

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1639](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (84e69dc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1fd8833756721291d62db5151a8b9ccb91ea2c66?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1fd8833) will **decrease** coverage by `0.16%`.\n> The diff coverage is `18.30%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1639      +/-   ##\n==========================================\n- Coverage   46.41%   46.25%   -0.16%     \n==========================================\n  Files         161      161              \n  Lines        9949     9949              \n  Branches      957      957              \n==========================================\n- Hits         4617     4601      -16     \n- Misses       5031     5044      +13     \n- Partials      301      304       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/PushData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YS5qYXZh) | `20.00% <ø> (ø)` | |\n| [...orn/common/network/protocol/PushDataHandShake.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoRGF0YUhhbmRTaGFrZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...leborn/common/network/protocol/PushMergedData.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QdXNoTWVyZ2VkRGF0YS5qYXZh) | `19.57% <ø> (ø)` | |\n| [...celeborn/common/network/protocol/RegionFinish.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25GaW5pc2guamF2YQ==) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/network/protocol/RegionStart.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWdpb25TdGFydC5qYXZh) | `0.00% <ø> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `60.00% <ø> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.46% <0.00%> (ø)` | |\n| ... and [5 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1639/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

ping @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1638](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (916aba1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/33cf343d201fda18db397119ab7cffe0a19d7db9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (33cf343) will **increase** coverage by `0.02%`.\n> The diff coverage is `29.42%`.\n\n> :exclamation: Current head 916aba1 differs from pull request most recent head 68edee3. Consider uploading reports for the commit 68edee3 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1638      +/-   ##\n==========================================\n+ Coverage   45.98%   45.99%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines        9990     9990              \n  Branches      973      973              \n==========================================\n+ Hits         4593     4594       +1     \n+ Misses       5095     5093       -2     \n- Partials      302      303       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.70% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.30% <100.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `62.50% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1638/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

BTW, I have serveal ideas about the congestion that I would like to confirm.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1637](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2bce020) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fe2f76dba6ad8c6c130a23527ba9c94c225909e5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe2f76d) will **decrease** coverage by `0.01%`.\n> The diff coverage is `35.72%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1637      +/-   ##\n==========================================\n- Coverage   46.03%   46.01%   -0.01%     \n==========================================\n  Files         160      161       +1     \n  Lines        9952     9991      +39     \n  Branches      971      973       +2     \n==========================================\n+ Hits         4580     4596      +16     \n- Misses       5070     5093      +23     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (-1.87%)` | :arrow_down: |\n| [...apache/celeborn/common/protocol/ReviveRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUmV2aXZlUmVxdWVzdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (-0.01%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.70% <0.00%> (-0.03%)` | :arrow_down: |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `76.20% <33.34%> (-1.22%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.30% <100.00%> (+0.07%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1637?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <100.00%> (+0.09%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @AngersZhuuuu could you take a look at this?

ping @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1636?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1636](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1636?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a52d0d6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/33cf343d201fda18db397119ab7cffe0a19d7db9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (33cf343) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1636      +/-   ##\n==========================================\n+ Coverage   45.98%   46.01%   +0.04%     \n==========================================\n  Files         161      161              \n  Lines        9990     9990              \n  Branches      973      973              \n==========================================\n+ Hits         4593     4596       +3     \n+ Misses       5095     5092       -3     \n  Partials      302      302              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1636/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This approach looks clean, please fill in the PR description, and we can also delete the migration guide part

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1635?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1635](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1635?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (98beb99) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/33cf343d201fda18db397119ab7cffe0a19d7db9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (33cf343) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 98beb99 differs from pull request most recent head 3670bd3. Consider uploading reports for the commit 3670bd3 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1635      +/-   ##\n==========================================\n- Coverage   45.98%   45.96%   -0.01%     \n==========================================\n  Files         161      161              \n  Lines        9990     9994       +4     \n  Branches      973      973              \n==========================================\n  Hits         4593     4593              \n- Misses       5095     5099       +4     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1635?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1635?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (-<0.01%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Have you tested client side is 0.3.0 and server side is 0.2.1?

> Have you tested client side is 0.3.0 and server side is 0.2.1?\r\n\r\nSeems only print a error message\r\n```\r\n logError("Error while send heartbeat", t)\r\n```

> > Have you tested client side is 0.3.0 and server side is 0.2.1?\r\n> \r\n> Seems only print a error message\r\n> \r\n> ```\r\n>  logError("Error while send heartbeat", t)\r\n> ```\r\nyes, it will print the error as you says. The error is caused by  timeout exception or  ClassCastException

Could you update migration guide? The previous "ignore" tips is useless now

BTW, I suppose at least the dual compatibility should be guaranteed before 1.0. e.g.\r\n\r\n0.2 client compatible with [0.2, 0.3] server\r\n0.3 client compatible with [0.3, 0.4] server\r\n0.4 client compatible with [0.4, 0.5] server\r\n\r\nThis allows users to upgrade Master/Worker first then client and still allows developers to rapidly introduce breaking changes.

> Could you update migration guide? The previous "ignore" tips is useless now\r\n\r\ni have delete those tips and add an tip that client 0.3.0 is not compatible with server 0.2.x.

Thanks, merged to main/0.3 (FYI, I update the content of migration guide)

cc @pan3793 @RexXiong

The fix LGTM.\r\n\r\nBTW, I see `scheduleAtFixedRate` used in several places, some places may be replaced by `scheduleAtFixedDelay` to avoid concurrency execution and happen-before issues.

> \r\n\r\nAccording to the comments on ```scheduleAtFixedRate```, no concurrent execution will happen\r\n```\r\nIf any execution of this task takes longer than its period, then subsequent executions may start late, but will not concurrently execute.\r\n```

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1633](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8f45fdc) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fe2f76dba6ad8c6c130a23527ba9c94c225909e5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe2f76d) will **decrease** coverage by `0.03%`.\n> The diff coverage is `40.68%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1633      +/-   ##\n==========================================\n- Coverage   46.03%   45.99%   -0.03%     \n==========================================\n  Files         160      161       +1     \n  Lines        9952     9990      +38     \n  Branches      971      973       +2     \n==========================================\n+ Hits         4580     4594      +14     \n- Misses       5070     5093      +23     \n- Partials      302      303       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (-1.87%)` | :arrow_down: |\n| [...apache/celeborn/common/protocol/ReviveRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUmV2aXZlUmVxdWVzdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (-0.01%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.70% <0.00%> (-0.03%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <95.66%> (+0.09%)` | :arrow_up: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.30% <100.00%> (+0.07%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1633/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merge to master/branch-0.3!

Thanks @AngersZhuuuu for this refactor, just wondering if there is plan to erase all ```blacklist``` in the codebase? cc @pan3793 Is it necessary?

> Thanks @AngersZhuuuu for this refactor, just wondering if there is plan to erase all `blacklist` in the codebase? cc @pan3793 Is it necessary?\r\n\r\nAfter the code is stable, I will do this again. It changed so much these days

ping @pan3793 

cc @cfmcgrady too

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1632?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1632](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1632?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7a0bda2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/22b21295e8ac59cff76b494c4ee8acf103ff6773?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (22b2129) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1632      +/-   ##\n==========================================\n+ Coverage   45.91%   46.00%   +0.09%     \n==========================================\n  Files         159      160       +1     \n  Lines        9924     9952      +28     \n  Branches      970      971       +1     \n==========================================\n+ Hits         4556     4577      +21     \n- Misses       5068     5073       +5     \n- Partials      300      302       +2     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1632/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1631?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1631](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1631?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b3fcf69) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/809c76a2e4fad4499dc27328bc00e0129bd69f69?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (809c76a) will **increase** coverage by `0.20%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1631      +/-   ##\n==========================================\n+ Coverage   45.88%   46.08%   +0.20%     \n==========================================\n  Files         159      160       +1     \n  Lines        9924     9931       +7     \n  Branches      970      971       +1     \n==========================================\n+ Hits         4553     4576      +23     \n+ Misses       5071     5056      -15     \n+ Partials      300      299       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1631/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1629?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1629](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1629?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e7842aa) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/22b21295e8ac59cff76b494c4ee8acf103ff6773?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (22b2129) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1629      +/-   ##\n==========================================\n+ Coverage   45.91%   46.08%   +0.17%     \n==========================================\n  Files         159      160       +1     \n  Lines        9924     9931       +7     \n  Branches      970      971       +1     \n==========================================\n+ Hits         4556     4576      +20     \n+ Misses       5068     5056      -12     \n+ Partials      300      299       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1629?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1629?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `85.72% <ø> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1629/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1628?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1628](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1628?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c05df00) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1b3ec61690e3ff23565c953f51cc815342d52c84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1b3ec61) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1628      +/-   ##\n==========================================\n- Coverage   45.92%   45.88%   -0.03%     \n==========================================\n  Files         159      159              \n  Lines        9935     9924      -11     \n  Branches      970      970              \n==========================================\n- Hits         4562     4553       -9     \n+ Misses       5075     5071       -4     \n- Partials      298      300       +2     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1628/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1627?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1627](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1627?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b5eece3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1b3ec61690e3ff23565c953f51cc815342d52c84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1b3ec61) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1627      +/-   ##\n==========================================\n- Coverage   45.92%   45.87%   -0.04%     \n==========================================\n  Files         159      159              \n  Lines        9935     9924      -11     \n  Branches      970      970              \n==========================================\n- Hits         4562     4552      -10     \n+ Misses       5075     5070       -5     \n- Partials      298      302       +4     \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1627/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

the diff between sbt and maven\r\n\r\n```diff\r\ndiff --git a/tmp/maven-files.out b/tmp/sbt-files.out\r\nindex d56ee78..e61150c 100644\r\n--- a/tmp/maven-files.out\r\n+++ b/tmp/sbt-files.out\r\n@@ -1,8 +1,6 @@\r\n-./META-INF/DEPENDENCIES\r\n-./META-INF/LICENSE\r\n+./META-INF/INDEX.LIST\r\n ./META-INF/LICENSE.txt\r\n ./META-INF/MANIFEST.MF\r\n-./META-INF/NOTICE\r\n ./META-INF/NOTICE.txt\r\n ./META-INF/io.netty.versions.properties\r\n ./META-INF/maven/com.google.guava/guava/pom.properties\r\n@@ -69,16 +67,6 @@\r\n ./META-INF/maven/io.netty/netty-transport-udt/pom.xml\r\n ./META-INF/maven/io.netty/netty-transport/pom.properties\r\n ./META-INF/maven/io.netty/netty-transport/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3-shaded_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3-shaded_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-3_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client-spark-common_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-client_2.12/pom.xml\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.properties\r\n-./META-INF/maven/org.apache.celeborn/celeborn-common_2.12/pom.xml\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.properties\r\n ./META-INF/maven/org.apache.commons/commons-lang3/pom.xml\r\n ./META-INF/maven/org.jctools/jctools-core/pom.properties\r\n@@ -86,7 +74,7 @@\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_aarch_64.so\r\n ./META-INF/native/liborg_apache_celeborn_shaded_netty_transport_native_epoll_x86_64.so\r\n ./META-INF/services/reactor.blockhound.integration.BlockHoundIntegration\r\n-./celeborn-client-spark-3-shaded_2.12-0.4.0-SNAPSHOT.jar\r\n+./celeborn-client-spark-3-shaded-assembly-0.4.0-SNAPSHOT.jar\r\n ./org/apache/celeborn/client/ApplicationHeartbeater$$anon$1.class\r\n ./org/apache/celeborn/client/ApplicationHeartbeater.class\r\n ./org/apache/celeborn/client/ApplyNewLocationCallContext$.class\r\n```

The SBT is extremely faster than Maven, and its interactive CLI has a better experience for running tests.\r\n\r\nPersonally, I lean to switch the building tool from Maven to SBT, as Spark does [SPARK-44173](https://issues.apache.org/jira/browse/SPARK-44173), but this needs a consensus of the community :)

Thanks for this PR 😄

There is an additional benefit if we decide to migrate to SBT.\r\n\r\nhttps://github.com/scalatest/scalatest-maven-plugin/issues/99

Collected concerns from the PPMC:\r\n\r\n- someone has a bad experience about sbt network, we should provide clear docs to setup the mirror to speedup the bootstrap and dependencies download\r\n- as Celeborn supports different Spark/Flink versions, the equivalent functionality like Maven profiles should be provided via sbt too, with IDEA support.

> \r\n\r\nThanks @pan3793 , and another concern from @RexXiong is the learning curve of sbt

> another concern from @RexXiong is the learning curve of sbt\r\n\r\nI definitely understand it, until I found https://spark.apache.org/developer-tools.html and try it on developing Spark

> someone has a bad experience about sbt network, we should provide clear docs to setup the mirror to speedup the bootstrap and dependencies download\r\n\r\n\r\n1. for bootstrap\r\n\r\nThe bootstrap script currently supports passing environment variables `DEFAULT_ARTIFACT_REPOSITORY`  to specify an artifact repository, which enables expedited download of the launcher JAR file. \r\n\r\n```shell \r\n> rm build/sbt-launch-1.9.0.jar\r\n> export DEFAULT_ARTIFACT_REPOSITORY=https://mirrors.huaweicloud.com/repository/maven/ && ./build/sbt\r\n```\r\n\r\n2. for dependencies\r\n\r\nThe Delta project provided a good [reference](https://github.com/delta-io/delta/blob/master/build/sbt-config/repositories). By default, the `sbt` will read repository URLs from the `~/.sbt/repositories` host path.\r\n\r\n\r\n```shell\r\n\r\n> cat ~/.sbt/repositories\r\n[repositories]\r\n  local\r\n  local-preloaded-ivy: file:///${sbt.preloaded-${sbt.global.base-${user.home}/.sbt}/preloaded/}, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext]\r\n  local-preloaded: file:///${sbt.preloaded-${sbt.global.base-${user.home}/.sbt}/preloaded/}\r\n  huawei-central: https://mirrors.huaweicloud.com/repository/maven/\r\n  aliyun-maven: https://maven.aliyun.com/nexus/content/groups/public\r\n  gcs-maven-central-mirror: https://maven-central.storage-download.googleapis.com/repos/central/data/\r\n  typesafe-ivy-releases: https://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly\r\n  sbt-ivy-snapshots: https://repo.scala-sbt.org/scalasbt/ivy-snapshots/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext], bootOnly\r\n  sbt-plugin-releases: https://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]\r\n  bintray-spark-packages: https://dl.bintray.com/spark-packages/maven/\r\n  typesafe-releases: https://repo.typesafe.com/typesafe/releases/\r\n```\r\n\r\n\r\n```\r\nsbt:celeborn-parent> project spark-3-shaded\r\n[info] set current project to celeborn-client-spark-3-shaded (in build file:/Users/fchen/Project/bigdata/celeborn/)\r\nsbt:celeborn-client-spark-3-shaded> assembly\r\n[warn] spark-core_2.12-3.3.1.jar no longer exists at /Users/fchen/Library/Caches/Coursier/v1/https/mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-core_2.12/3.3.1/spark-core_2.12-3.3.1.jar\r\n[info] Updating\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-core_2.12/3.3.1/spark-core_2.12-3.3.1.pom\r\n  100.0% [##########] 36.9 KiB (70.4 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-parent_2.12/3.3.1/spark-parent_2.12-3.3.1.pom\r\n  100.0% [##########] 137.4 KiB (832.5 KiB / s)\r\n[info] Resolved  dependencies\r\n[info] Updating\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-sql_2.12/3.3.1/spark-sql_2.12-3.3.1.pom\r\n  100.0% [##########] 18.0 KiB (252.9 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-launcher_2.12/3.3.1/spark-launcher_2.12-3.3.1.pom\r\n  100.0% [##########] 8.5 KiB (128.1 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-network-shuffle_2.12/3.3.1/spark-network-shuffle_2.12-3.3.1.pom\r\n  100.0% [##########] 8.5 KiB (87.6 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-tags_2.12/3.3.1/spark-tags_2.12-3.3.1.pom\r\n  100.0% [##########] 5.7 KiB (34.1 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-catalyst_2.12/3.3.1/spark-catalyst_2.12-3.3.1.pom\r\n  100.0% [##########] 11.3 KiB (59.9 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-kvstore_2.12/3.3.1/spark-kvstore_2.12-3.3.1.pom\r\n  100.0% [##########] 8.3 KiB (44.1 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-sketch_2.12/3.3.1/spark-sketch_2.12-3.3.1.pom\r\n  100.0% [##########] 6.2 KiB (29.8 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-unsafe_2.12/3.3.1/spark-unsafe_2.12-3.3.1.pom\r\n  100.0% [##########] 8.1 KiB (38.5 KiB / s)\r\nhttps://mirrors.huaweicloud.com/repository/maven/org/apache/spark/spark-network-common_2.12/3.3.1/spark-network-common_2.12-3.3.1.pom\r\n  100.0% [##########] 12.4 KiB (163.1 KiB / s)\r\n```\r\n

> as Celeborn supports different Spark/Flink versions, the equivalent functionality like Maven profiles should be provided via sbt too, with IDEA support.\r\n\r\nPassing Maven profiles to `sbt` is currently supported. However, integration with IntelliJ IDEA has not yet been tested. \r\n

> > as Celeborn supports different Spark/Flink versions, the equivalent functionality like Maven profiles should be provided via sbt too, with IDEA support.\r\n> \r\n> Passing Maven profiles to `sbt` is currently supported. However, integration with IntelliJ IDEA has not yet been tested.\r\n\r\nThis can be achieved by\r\n\r\n<img width="1012" alt="image" src="https://github.com/apache/incubator-celeborn/assets/26535726/66c3a7dc-1f8c-43b4-b29f-557f76361d0c">\r\n\r\nA further thought, we may not be limited to using Maven style, the original goal is to easily switch different properties groups, maybe we can\r\n\r\n1. let sbt support parse and apply `sbt -P<profile1>,<profile2> -P<profile3> ...`\r\n2. define profile specific properties in\r\n   ```\r\n   sbt-<profile1>.properteis\r\n   sbt-<profile2>.properteis\r\n   sbt-<profile3>.properteis\r\n   ```\r\n3. define `sbt-active-properties.txt`(ignored by git)\r\n4. the priority of profile is \r\n4.1. `sbt -P`\r\n4.2. `sbt-active-properties.txt`

@cfmcgrady Do you have time to start a pure SBT building system?

BTW, I think we can introduce a dependency audit mechanism like [Spark](https://github.com/apache/spark/blob/master/dev/deps/spark-deps-hadoop-3-hive-2.3) does, we may need to merge `master-jars` and `worker-jars` before doing that.

> @cfmcgrady Do you have time to start a pure SBT building system?\r\n\r\n1. I have recently been evaluating the feasibility of running CI via sbt based on this PR, and have successfully validated it.\r\n2. Since developers in the community lack experience with using sbt for builds, I am contemplating the possibility and complexity of transitioning from a pom-based project to a pure sbt project. do you have any suggestions? cc @pan3793 @waitinfuture 

@FMX @zhongqiangczq 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1626?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1626](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1626?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d497d50) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1b3ec61690e3ff23565c953f51cc815342d52c84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1b3ec61) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1626      +/-   ##\n==========================================\n+ Coverage   45.92%   46.05%   +0.14%     \n==========================================\n  Files         159      159              \n  Lines        9935     9924      -11     \n  Branches      970      970              \n==========================================\n+ Hits         4562     4570       +8     \n+ Misses       5075     5056      -19     \n  Partials      298      298              \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1626/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1625?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1625](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1625?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cd42679) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1b3ec61690e3ff23565c953f51cc815342d52c84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1b3ec61) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1625      +/-   ##\n==========================================\n+ Coverage   45.92%   45.95%   +0.04%     \n==========================================\n  Files         159      159              \n  Lines        9935     9935              \n  Branches      970      970              \n==========================================\n+ Hits         4562     4565       +3     \n+ Misses       5075     5072       -3     \n  Partials      298      298              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1625/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> LGTM, thanks for fixing. This is a bug rather than minor, please fill a ticket for it.\r\n\r\nupdated.

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1624](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2baf612) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b82ecdfa0869c76c8473023aabc37a48b2433d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b82ecd) will **decrease** coverage by `0.06%`.\n> The diff coverage is `7.15%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1624      +/-   ##\n==========================================\n- Coverage   45.92%   45.86%   -0.06%     \n==========================================\n  Files         159      159              \n  Lines        9935     9919      -16     \n  Branches      970      969       -1     \n==========================================\n- Hits         4562     4548      -14     \n+ Misses       5075     5071       -4     \n- Partials      298      300       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...la/org/apache/celeborn/common/rpc/RpcAddress.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNBZGRyZXNzLnNjYWxh) | `25.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.70% <0.00%> (+0.15%)` | :arrow_up: |\n| [...pache/celeborn/common/rpc/RpcEndpointAddress.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbmRwb2ludEFkZHJlc3Muc2NhbGE=) | `53.85% <40.00%> (+25.85%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1624/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Currently users can start worker with ./sbin/start-worker.sh rss://${masterhost}:${masterport}, so seems this breaks the user interface.

Add migration guide then?

> Add migration guide then?\r\n\r\nYeah, I think we need to doc this.

@waitinfuture FYI, the migration guide is added, please take another look.

Test\r\n```\r\nhelm install celeborn charts/celeborn --dry-run \r\n```\r\nImportant Output\r\n```\r\nceleborn.worker.storage.dirs=/mnt/disk1:diskType=HDD,/mnt/disk2:diskType=HDD,/mnt/disk3:diskType=HDD,/mnt/disk4:diskType=HDD\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1623?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1623](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1623?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a368a1f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b82ecdfa0869c76c8473023aabc37a48b2433d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b82ecd) will **decrease** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1623      +/-   ##\n==========================================\n- Coverage   45.92%   45.76%   -0.16%     \n==========================================\n  Files         159      159              \n  Lines        9935     9935              \n  Branches      970      970              \n==========================================\n- Hits         4562     4546      -16     \n- Misses       5075     5088      +13     \n- Partials      298      301       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1623/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1622](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (32d0ab3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/2b82194ce0e37f38d5896577757181fac9921277?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2b82194) will **decrease** coverage by `0.13%`.\n> The diff coverage is `63.16%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1622      +/-   ##\n==========================================\n- Coverage   46.05%   45.91%   -0.13%     \n==========================================\n  Files         159      159              \n  Lines        9919     9924       +5     \n  Branches      969      970       +1     \n==========================================\n- Hits         4567     4556      -11     \n- Misses       5055     5068      +13     \n- Partials      297      300       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.74% <50.00%> (+0.04%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.02% <60.00%> (-0.01%)` | :arrow_down: |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `60.00% <100.00%> (+1.67%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1622/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

There is another issue, that `ShuffleClientImpl#genAddressPair` does not support hostname contains `-`\r\n\r\n```\r\njava.lang.RuntimeException: org.apache.spark.SparkException: Job aborted due to stage failure: Task 11657 in stage 0.0 failed 4 times, most recent failure: Lost task 11657.3 in stage 0.0 (TID 12747) (10.153.253.198 executor 157): java.lang.ArrayIndexOutOfBoundsException: 1\r\n\tat org.apache.celeborn.client.ShuffleClientImpl.doPushMergedData(ShuffleClientImpl.java:874)\r\n\tat org.apache.celeborn.client.ShuffleClientImpl.pushOrMergeData(ShuffleClientImpl.java:735)\r\n\tat org.apache.celeborn.client.ShuffleClientImpl.mergeData(ShuffleClientImpl.java:827)\r\n\tat org.apache.spark.shuffle.celeborn.SortBasedPusher.pushData(SortBasedPusher.java:140)\r\n\tat org.apache.spark.shuffle.celeborn.SortBasedPusher.insertRecord(SortBasedPusher.java:192)\r\n\tat org.apache.spark.shuffle.celeborn.SortBasedShuffleWriter.fastWrite0(SortBasedShuffleWriter.java:192)\r\n\tat org.apache.spark.shuffle.celeborn.SortBasedShuffleWriter.write(SortBasedShuffleWriter.java:145)\r\n\tat org.apache.spark.shuffle.ShuffleWriteProcessor.write(ShuffleWriteProcessor.scala:59)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:99)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:52)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:136)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:548)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1508)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:551)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n```

Just wonder if we should doc about ```celeborn.network.bind.preferIpAddress``` in k8s deployment?

> Just wonder if we should doc about `celeborn.network.bind.preferIpAddress` in k8s deployment?\r\n\r\nlet me update the docs

@waitinfuture FYI, docs is updated

Thanks, merged to main/0.3

cc @pan3793 @AngersZhuuuu @RexXiong @zhongqiangczq @FMX please take a look at this PR.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1621](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e579801) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/679f9cbf58907717846bcdc3391cefd8ea6d165f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (679f9cb) will **increase** coverage by `0.18%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1621      +/-   ##\n==========================================\n+ Coverage   45.77%   45.94%   +0.18%     \n==========================================\n  Files         159      159              \n  Lines        9943     9935       -8     \n  Branches      970      970              \n==========================================\n+ Hits         4550     4564      +14     \n+ Misses       5092     5074      -18     \n+ Partials      301      297       -4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.39% <0.00%> (-0.11%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.55% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1621/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks for the review, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1620?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1620](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1620?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (22a36e6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/679f9cbf58907717846bcdc3391cefd8ea6d165f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (679f9cb) will **increase** coverage by `0.19%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1620      +/-   ##\n==========================================\n+ Coverage   45.77%   45.95%   +0.19%     \n==========================================\n  Files         159      159              \n  Lines        9943     9935       -8     \n  Branches      970      970              \n==========================================\n+ Hits         4550     4565      +15     \n+ Misses       5092     5072      -20     \n+ Partials      301      298       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1620?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1620?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.04% <100.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1620/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1619](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (09a419c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/679f9cbf58907717846bcdc3391cefd8ea6d165f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (679f9cb) will **increase** coverage by `0.27%`.\n> The diff coverage is `89.37%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1619      +/-   ##\n==========================================\n+ Coverage   45.77%   46.03%   +0.27%     \n==========================================\n  Files         159      160       +1     \n  Lines        9943     9952       +9     \n  Branches      970      971       +1     \n==========================================\n+ Hits         4550     4580      +30     \n+ Misses       5092     5070      -22     \n- Partials      301      302       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...g/apache/celeborn/common/protocol/StorageInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvU3RvcmFnZUluZm8uamF2YQ==) | `70.59% <87.50%> (-0.62%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.04% <89.75%> (+0.01%)` | :arrow_up: |\n\n... and [6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1619/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> \r\n\r\nI see, better to doc about the supported configurations/combinations.

> Member\r\n\r\nI think this section could be added to the deployment docs.

> \r\n\r\nThanks, please also test and doc the scenario where both local disks and hdfs exist.

I tested this patch on a small cluster with 4 nodes( 8 vCPU, 32 GB).\r\n\r\nTest scenarios:\r\n1. Local disks.\r\n2. Local disks + HDFS.\r\n3. HDFS.\r\n\r\nAll tests passed and performance matched expectations.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n

cc @AngersZhuuuu @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1618?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1618](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1618?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0cae28e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/679f9cbf58907717846bcdc3391cefd8ea6d165f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (679f9cb) will **increase** coverage by `0.12%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1618      +/-   ##\n==========================================\n+ Coverage   45.77%   45.88%   +0.12%     \n==========================================\n  Files         159      159              \n  Lines        9943     9943              \n  Branches      970      970              \n==========================================\n+ Hits         4550     4561      +11     \n+ Misses       5092     5083       -9     \n+ Partials      301      299       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1618?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1618?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.04% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1618/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1617?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1617](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1617?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2986c27) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8194407558976f53ab33a6668bfbab1544c80119?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8194407) will **decrease** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1617      +/-   ##\n==========================================\n- Coverage   45.79%   45.77%   -0.02%     \n==========================================\n  Files         159      159              \n  Lines        9943     9943              \n  Branches      970      970              \n==========================================\n- Hits         4552     4550       -2     \n- Misses       5091     5092       +1     \n- Partials      300      301       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1617?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1617?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `58.51% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1617/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1616?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1616](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1616?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (404adc3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8194407558976f53ab33a6668bfbab1544c80119?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (8194407) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1616   +/-   ##\n=======================================\n  Coverage   45.79%   45.79%           \n=======================================\n  Files         159      159           \n  Lines        9943     9943           \n  Branches      970      970           \n=======================================\n  Hits         4552     4552           \n  Misses       5091     5091           \n  Partials      300      300           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1615?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1615](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1615?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4296ab4) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f4f6d953f2fecbe2f321ad9495f76a7079d4ca8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f4f6d9) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1615   +/-   ##\n=======================================\n  Coverage   45.78%   45.78%           \n=======================================\n  Files         159      159           \n  Lines        9941     9941           \n  Branches      970      970           \n=======================================\n  Hits         4550     4550           \n  Misses       5092     5092           \n  Partials      299      299           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1614?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1614](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1614?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4fc9bea) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5f4f6d953f2fecbe2f321ad9495f76a7079d4ca8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f4f6d9) will **increase** coverage by `0.13%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1614      +/-   ##\n==========================================\n+ Coverage   45.78%   45.90%   +0.13%     \n==========================================\n  Files         159      159              \n  Lines        9941     9943       +2     \n  Branches      970      970              \n==========================================\n+ Hits         4550     4563      +13     \n+ Misses       5092     5082      -10     \n+ Partials      299      298       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1614?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1614?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | `17.09% <100.00%> (+0.60%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1614/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1613?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1613](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1613?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (71a9e8a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d634db54712a0924862581a8c9630f3b22cd1cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d634db) will **increase** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1613      +/-   ##\n==========================================\n+ Coverage   45.73%   45.92%   +0.19%     \n==========================================\n  Files         159      159              \n  Lines        9944     9941       -3     \n  Branches      972      970       -2     \n==========================================\n+ Hits         4547     4564      +17     \n+ Misses       5098     5080      -18     \n+ Partials      299      297       -2     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1613/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1612?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1612](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1612?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (426b582) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/255661bbb765bb8009fdb8f53d3d26b392704ab6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (255661b) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 426b582 differs from pull request most recent head c2dfa35. Consider uploading reports for the commit c2dfa35 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1612      +/-   ##\n==========================================\n- Coverage   45.90%   45.74%   -0.15%     \n==========================================\n  Files         159      159              \n  Lines        9945     9941       -4     \n  Branches      972      970       -2     \n==========================================\n- Hits         4564     4547      -17     \n- Misses       5084     5095      +11     \n- Partials      297      299       +2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1612/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Can we use [Collapsible blocks](https://squidfunk.github.io/mkdocs-material/reference/admonitions/#collapsible-blocks) for stacktrace?

> Can we use [Collapsible blocks](https://squidfunk.github.io/mkdocs-material/reference/admonitions/#collapsible-blocks) for stacktrace?\r\n\r\ndone

cc @FMX @RexXiong @AngersZhuuuu @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1611?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1611](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1611?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fe0f27b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/255661bbb765bb8009fdb8f53d3d26b392704ab6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (255661b) will **decrease** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1611      +/-   ##\n==========================================\n- Coverage   45.90%   45.76%   -0.14%     \n==========================================\n  Files         159      159              \n  Lines        9945     9945              \n  Branches      972      972              \n==========================================\n- Hits         4564     4550      -14     \n- Misses       5084     5096      +12     \n- Partials      297      299       +2     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1611/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @RexXiong @FMX @pan3793 @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1610](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2ae9c1f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/255661bbb765bb8009fdb8f53d3d26b392704ab6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (255661b) will **decrease** coverage by `0.12%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 2ae9c1f differs from pull request most recent head aec6219. Consider uploading reports for the commit aec6219 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1610      +/-   ##\n==========================================\n- Coverage   45.90%   45.77%   -0.12%     \n==========================================\n  Files         159      159              \n  Lines        9945     9942       -3     \n  Branches      972      970       -2     \n==========================================\n- Hits         4564     4550      -14     \n- Misses       5084     5093       +9     \n- Partials      297      299       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `58.11% <ø> (+2.98%)` | :arrow_up: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `62.50% <0.00%> (-1.37%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1610/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The configuration should be sufficient to provide such information.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1609?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1609](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1609?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a96e104) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d634db54712a0924862581a8c9630f3b22cd1cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d634db) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1609      +/-   ##\n==========================================\n+ Coverage   45.73%   45.76%   +0.04%     \n==========================================\n  Files         159      159              \n  Lines        9944     9944              \n  Branches      972      972              \n==========================================\n+ Hits         4547     4550       +3     \n+ Misses       5098     5095       -3     \n  Partials      299      299              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1609/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Right, user chose compress type already enough.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1607?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1607](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1607?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (809e323) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d634db54712a0924862581a8c9630f3b22cd1cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d634db) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1607      +/-   ##\n==========================================\n+ Coverage   45.73%   45.74%   +0.02%     \n==========================================\n  Files         159      159              \n  Lines        9944     9944              \n  Branches      972      972              \n==========================================\n+ Hits         4547     4548       +1     \n+ Misses       5098     5096       -2     \n- Partials      299      300       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1607?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1607?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `81.82% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1607/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @RexXiong @AngersZhuuuu @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1606?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1606](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1606?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (068f554) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d634db54712a0924862581a8c9630f3b22cd1cd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d634db) will **increase** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1606      +/-   ##\n==========================================\n+ Coverage   45.73%   45.76%   +0.03%     \n==========================================\n  Files         159      159              \n  Lines        9944     9945       +1     \n  Branches      972      972              \n==========================================\n+ Hits         4547     4550       +3     \n+ Misses       5098     5096       -2     \n  Partials      299      299              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1606?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1606?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.50% <0.00%> (-<0.01%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1606/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> \r\n\r\nWe want a worker be either in the excluded list, or in the shutting down list, exclusively. If a worker is in excluded list, then LIfecycleManager will not trigger commit files when handle heartbeat response; on the other hand, if a worker is in the shutting down list, LifecycleManager will trigger commit files on it. So we must make it correct that a shutting down worker be in the shutting down list.

cc @pan3793 @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1605](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (02ba74c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/222ed267b0db779af60e6925a0f117fab8d7ea61?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (222ed26) will **decrease** coverage by `0.19%`.\n> The diff coverage is `90.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1605      +/-   ##\n==========================================\n- Coverage   45.94%   45.74%   -0.19%     \n==========================================\n  Files         159      159              \n  Lines        9951     9944       -7     \n  Branches      970      972       +2     \n==========================================\n- Hits         4571     4548      -23     \n- Misses       5085     5096      +11     \n- Partials      295      300       +5     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `55.13% <88.89%> (-0.42%)` | :arrow_down: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `63.88% <100.00%> (-0.15%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1605/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This is not a simple refactor, it fixes bugs, please correct the title and "Does this PR introduce any user-facing change?"

> This is not a simple refactor, it fixes bugs, please correct the title and "Does this PR introduce any user-facing change?"\r\n\r\ndone

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1604?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1604](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1604?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9c4364b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1ba6dee32480b24703b73a0d5e445257d117e5b7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ba6dee) will **increase** coverage by `0.25%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1604      +/-   ##\n==========================================\n+ Coverage   45.68%   45.93%   +0.25%     \n==========================================\n  Files         159      159              \n  Lines        9915     9951      +36     \n  Branches      970      970              \n==========================================\n+ Hits         4529     4570      +41     \n+ Misses       5088     5084       -4     \n+ Partials      298      297       -1     \n```\n\n\n[see 10 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1604/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

cc @pan3793 @AngersZhuuuu @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1603?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1603](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1603?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c1d5af2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d7107d607b853ab61b8299f83de2e3dacfa7e3c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d7107d) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1603      +/-   ##\n==========================================\n- Coverage   45.81%   45.81%   -0.00%     \n==========================================\n  Files         159      159              \n  Lines        9950     9951       +1     \n  Branches      970      970              \n==========================================\n  Hits         4558     4558              \n- Misses       5094     5095       +1     \n  Partials      298      298              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1603/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

wrong commit?

The code can be simplified by pattern match to avoid nested if-else\r\n```\r\n      failedWorker.asScala.foreach {\r\n        case (worker, (StatusCode.WORKER_SHUTDOWN, _)) =>\r\n          shuttingWorkers.add(worker)\r\n        case (worker, (statusCode, registerTime)) if !blacklist.containsKey(worker) =>\r\n          blacklist.put(worker, (statusCode, registerTime))\r\n        case (worker, (statusCode, _))\r\n            if Array(\r\n              StatusCode.NO_AVAILABLE_WORKING_DIR,\r\n              StatusCode.RESERVE_SLOTS_FAILED,\r\n              StatusCode.UNKNOWN_WORKER).contains(statusCode) =>\r\n          blacklist.put(worker, (statusCode, blacklist.get(worker)._2))\r\n        case _ =>\r\n      }\r\n```\r\n\r\nor\r\n````\r\n      failedWorker.asScala.foreach {\r\n        case (worker, (StatusCode.WORKER_SHUTDOWN, _)) =>\r\n          shuttingWorkers.add(worker)\r\n        case (worker, (statusCode, registerTime)) if !blacklist.containsKey(worker) =>\r\n          blacklist.put(worker, (statusCode, registerTime))\r\n        case (worker, (statusCode, _))\r\n            if statusCode == StatusCode.NO_AVAILABLE_WORKING_DIR\r\n              || statusCode == StatusCode.RESERVE_SLOTS_FAILED\r\n              || statusCode == StatusCode.UNKNOWN_WORKER =>\r\n          blacklist.put(worker, (statusCode, blacklist.get(worker)._2))\r\n        case _ =>\r\n      }\r\n```

> \r\n\r\nRefined, thanks :)

Thanks, merged to main/0.3

ping @AngersZhuuuu @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1602?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1602](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1602?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d34e940) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d7107d607b853ab61b8299f83de2e3dacfa7e3c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d7107d) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1602      +/-   ##\n==========================================\n- Coverage   45.81%   45.81%   -0.00%     \n==========================================\n  Files         159      159              \n  Lines        9950     9951       +1     \n  Branches      970      970              \n==========================================\n  Hits         4558     4558              \n- Misses       5094     5095       +1     \n  Partials      298      298              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1602/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

I think we should assume the producer always produces immutable collections, and handle this case on the consumer side.\r\n\r\n```patch\r\nclass WorkerInfo(\r\n    val host: String,\r\n    val rpcPort: Int,\r\n    val pushPort: Int,\r\n    val fetchPort: Int,\r\n    val replicatePort: Int,\r\n-   val diskInfos: util.Map[String, DiskInfo],\r\n+   _diskInfos: util.Map[String, DiskInfo],\r\n    val userResourceConsumption: util.Map[UserIdentifier, ResourceConsumption],\r\n    var endpoint: RpcEndpointRef) extends Serializable with Logging {\r\n+\r\n+   val diskInfos = new util.HashMap[String, DiskInfo](_diskInfos)\r\n```

This PR is reworked by https://github.com/apache/incubator-celeborn/pull/1605, closing this.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1601?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1601](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1601?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ff52523) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d7107d607b853ab61b8299f83de2e3dacfa7e3c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d7107d) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1601   +/-   ##\n=======================================\n  Coverage   45.81%   45.81%           \n=======================================\n  Files         159      159           \n  Lines        9950     9950           \n  Branches      970      970           \n=======================================\n  Hits         4558     4558           \n  Misses       5094     5094           \n  Partials      298      298           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zhongqiangczq pls take a look, if we need modify shuffleClient at the same time. 

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1600](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cc85e22) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/7d7107d607b853ab61b8299f83de2e3dacfa7e3c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7d7107d) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1600      +/-   ##\n==========================================\n- Coverage   45.81%   45.81%   -0.00%     \n==========================================\n  Files         159      159              \n  Lines        9950     9951       +1     \n  Branches      970      970              \n==========================================\n  Hits         4558     4558              \n- Misses       5094     5095       +1     \n  Partials      298      298              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/internal/config/ConfigBuilder.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdCdWlsZGVyLnNjYWxh) | `77.56% <ø> (ø)` | |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `78.90% <ø> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `57.41% <ø> (ø)` | |\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | `12.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.13% <0.00%> (ø)` | |\n| [...che/celeborn/common/metrics/source/JVMSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0pWTVNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.51% <0.00%> (ø)` | |\n| [...pache/celeborn/common/util/FunctionConverter.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvRnVuY3Rpb25Db252ZXJ0ZXIuc2NhbGE=) | `0.00% <ø> (ø)` | |\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | `36.18% <ø> (ø)` | |\n| ... and [1 more](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1600?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture @AngersZhuuuu 

cc @AngersZhuuuu @RexXiong @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1598?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1598](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1598?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c858553) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1ba6dee32480b24703b73a0d5e445257d117e5b7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ba6dee) will **increase** coverage by `0.04%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1598      +/-   ##\n==========================================\n+ Coverage   45.68%   45.71%   +0.04%     \n==========================================\n  Files         159      159              \n  Lines        9915     9915              \n  Branches      970      970              \n==========================================\n+ Hits         4529     4532       +3     \n+ Misses       5088     5085       -3     \n  Partials      298      298              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1598?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1598?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <50.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1598/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1597?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1597](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1597?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (641e4c2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa3bb0ac3b11d3fffeadcd6104e9c3792860c7da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa3bb0a) will **increase** coverage by `0.22%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1597      +/-   ##\n==========================================\n+ Coverage   45.48%   45.69%   +0.22%     \n==========================================\n  Files         158      159       +1     \n  Lines        9848     9915      +67     \n  Branches      965      970       +5     \n==========================================\n+ Hits         4478     4530      +52     \n- Misses       5073     5086      +13     \n- Partials      297      299       +2     \n```\n\n\n[see 9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1597/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 Is this necessary? Compile results are correct.\r\n<img width="552" alt="截屏2023-06-16 15 04 11" src="https://github.com/apache/incubator-celeborn/assets/4150993/af78cf6d-2380-4c80-9276-4341e8fa06e8">\r\n

`(short)755` does not mean octal `0755`\r\n```\r\njshell> System.out.println(755)\r\n755\r\n\r\njshell> System.out.println(0755)\r\n493\r\n```

@pan3793  There is no permission issue here.  Check the result \r\ndrwxr-xr-x   - emr-user hadoop          0 2023-06-20 15:06 /celeborn/rss-worker\r\n\r\nHere are the hadoop codes explained why\r\n```\r\n  public void fromShort(short n) {\r\n    FsAction[] v = FSACTION_VALUES;\r\n    set(v[(n >>> 6) & 7], v[(n >>> 3) & 7], v[n & 7], (((n >>> 9) & 1) == 1) );\r\n  }\r\n```

I see, close then

@pan3793 After more testing, I think you are right. Short cannot be used here.

cc @FMX please take a look

Thanks, merged to main/0.3

ping @RexXiong @waitinfuture @FMX 

ping @RexXiong @waitinfuture  Any more suggestion?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1594?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1594](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1594?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f795ce3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/da853473302d4df793f3d5d60a211b948c1b9997?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da85347) will **increase** coverage by `0.20%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1594      +/-   ##\n==========================================\n+ Coverage   45.66%   45.85%   +0.20%     \n==========================================\n  Files         158      159       +1     \n  Lines        9859     9915      +56     \n  Branches      969      970       +1     \n==========================================\n+ Hits         4501     4546      +45     \n- Misses       5059     5073      +14     \n+ Partials      299      296       -3     \n```\n\n\n[see 9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1594/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1593](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7a68fb8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/da853473302d4df793f3d5d60a211b948c1b9997?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da85347) will **decrease** coverage by `0.18%`.\n> The diff coverage is `62.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1593      +/-   ##\n==========================================\n- Coverage   45.66%   45.47%   -0.18%     \n==========================================\n  Files         158      158              \n  Lines        9859     9853       -6     \n  Branches      969      965       -4     \n==========================================\n- Hits         4501     4480      -21     \n- Misses       5059     5076      +17     \n+ Partials      299      297       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/common/metrics/MetricsConfig.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc0NvbmZpZy5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.12% <83.34%> (-<0.01%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1593/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @FMX @waitinfuture @RexXiong Have I missed some another files?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1592?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1592](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1592?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da283fe) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/da853473302d4df793f3d5d60a211b948c1b9997?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da85347) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1592      +/-   ##\n==========================================\n- Coverage   45.66%   45.65%   -0.01%     \n==========================================\n  Files         158      158              \n  Lines        9859     9853       -6     \n  Branches      969      965       -4     \n==========================================\n- Hits         4501     4497       -4     \n- Misses       5059     5061       +2     \n+ Partials      299      295       -4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1592?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1592?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.12% <ø> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1592/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1591?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1591](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1591?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e8bf87e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f2357bf75cb06232b738130b90dd31a678287234?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2357bf) will **decrease** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1591      +/-   ##\n==========================================\n- Coverage   45.67%   45.48%   -0.18%     \n==========================================\n  Files         158      158              \n  Lines        9857     9853       -4     \n  Branches      969      965       -4     \n==========================================\n- Hits         4501     4481      -20     \n- Misses       5057     5074      +17     \n+ Partials      299      298       -1     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1591/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM, thanks @onebox-li. For the test failure, we can just remove  STAGE_ENDED/MAP_ENDED related code from FlinkShuffleClientImpl, as that would not happen in Flink.

thanks @RexXiong for reply, I am not sure about that because I find flink batch support Speculative Execution since 1.16. In my env, I just use rss for spark now, so forget flink-client. May I remove all the mapperEnded judge and these two status code?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1590?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1590](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1590?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6fdec33) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/47cded835f68254ea95fa9482b27f302b9ddf4af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (47cded8) will **decrease** coverage by `0.19%`.\n> The diff coverage is `58.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1590      +/-   ##\n==========================================\n- Coverage   45.67%   45.48%   -0.19%     \n==========================================\n  Files         158      158              \n  Lines        9856     9848       -8     \n  Branches      969      965       -4     \n==========================================\n- Hits         4501     4478      -23     \n- Misses       5057     5073      +16     \n+ Partials      298      297       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1590?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1590?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.59% <58.34%> (-1.46%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1590/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3\r\n

Does it break 0.2/0.3 compatibility?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1589](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (16f8202) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/47cded835f68254ea95fa9482b27f302b9ddf4af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (47cded8) will **increase** coverage by `0.01%`.\n> The diff coverage is `37.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1589      +/-   ##\n==========================================\n+ Coverage   45.67%   45.68%   +0.01%     \n==========================================\n  Files         158      158              \n  Lines        9856     9859       +3     \n  Branches      969      969              \n==========================================\n+ Hits         4501     4503       +2     \n- Misses       5057     5058       +1     \n  Partials      298      298              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/network/protocol/Heartbeat.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9IZWFydGJlYXQuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/util/TransportFrameDecoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydEZyYW1lRGVjb2Rlci5qYXZh) | `89.78% <50.00%> (+2.28%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1589/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> Does it break 0.2/0.3 compatibility?\r\n\r\nIntroduce by [Add worker/client heartbeat](https://github.com/apache/incubator-celeborn/pull/1457), would break 0.3.

> LGTM, as long as it does not break 0.2 client communicate to 0.3 server\r\n\r\nIt breaks 0.2->0.3 server, so disable push/fetch heartbeat by default in this pr. cc @zhongqiangczq 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1588](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a612be5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/809c76a2e4fad4499dc27328bc00e0129bd69f69?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (809c76a) will **increase** coverage by `0.13%`.\n> The diff coverage is `27.09%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1588      +/-   ##\n==========================================\n+ Coverage   45.88%   46.01%   +0.13%     \n==========================================\n  Files         159      161       +2     \n  Lines        9924     9990      +66     \n  Branches      970      973       +3     \n==========================================\n+ Hits         4553     4596      +43     \n- Misses       5071     5092      +21     \n- Partials      300      302       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `65.37% <0.00%> (-1.87%)` | :arrow_down: |\n| [...apache/celeborn/common/protocol/ReviveRequest.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUmV2aXZlUmVxdWVzdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.38% <0.00%> (-0.01%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `17.70% <0.00%> (-0.03%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <91.67%> (+0.11%)` | :arrow_up: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.30% <100.00%> (+0.07%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1588/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @onebox-li  @pan3793 @RexXiong @AngersZhuuuu @FMX  , please take a look at this PR.

ping @waitinfuture @pan3793 @RexXiong WDYT?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1587](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9f39a84) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f2357bf75cb06232b738130b90dd31a678287234?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2357bf) will **increase** coverage by `0.05%`.\n> The diff coverage is `81.71%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1587      +/-   ##\n==========================================\n+ Coverage   45.67%   45.72%   +0.05%     \n==========================================\n  Files         158      159       +1     \n  Lines        9857     9919      +62     \n  Branches      969      974       +5     \n==========================================\n+ Hits         4501     4534      +33     \n- Misses       5057     5082      +25     \n- Partials      299      303       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `19.01% <0.00%> (-0.03%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `67.25% <65.86%> (-2.14%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `41.05% <100.00%> (+1.82%)` | :arrow_up: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `88.47% <100.00%> (+0.97%)` | :arrow_up: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.23% <100.00%> (+0.08%)` | :arrow_up: |\n| [.../apache/celeborn/common/read/FetchRequestInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcmVhZC9GZXRjaFJlcXVlc3RJbmZvLmphdmE=) | `100.00% <100.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.24% <100.00%> (+0.12%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1587/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1586?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1586](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1586?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (241f37b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6177476b18beca2ae20b05b06483c118db74fe5a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6177476) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1586      +/-   ##\n==========================================\n+ Coverage   45.41%   45.41%   +0.01%     \n==========================================\n  Files         158      158              \n  Lines        9830     9832       +2     \n  Branches      968      969       +1     \n==========================================\n+ Hits         4463     4464       +1     \n  Misses       5066     5066              \n- Partials      301      302       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1586?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1586?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.51% <0.00%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1586/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @FMX , could you add more details in the issue description? Thanks!

> logTrace(s"Received Revive request, " +\r\n\r\nDetails added.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1585?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1585](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1585?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b5f4c1d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3fb896b11f8df32b32279405974a0d2b61c73faf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3fb896b) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1585      +/-   ##\n==========================================\n+ Coverage   45.44%   45.59%   +0.16%     \n==========================================\n  Files         158      158              \n  Lines        9830     9830              \n  Branches      968      968              \n==========================================\n+ Hits         4466     4481      +15     \n+ Misses       5063     5051      -12     \n+ Partials      301      298       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1585/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Seems also we can do some refactor for `incBytesWritten`?

> Seems also we can do some refactor for `incBytesWritten`?\r\n\r\nagreed, maybe we can do the refactor in a separate PR, as the current PR primarily focuses on optimizing performance.

> > Seems also we can do some refactor for `incBytesWritten`?\r\n> \r\n> agreed, maybe we can do the refactor in a separate PR, as the current PR primarily focuses on optimizing performance.\r\n\r\nYea

Will these cause the UI update lag?

Anyway, the performance improvement looks nice, +1 to get it in.

Thanks, merged to main/0.3

Hi @cfmcgrady , thanks for the PR! Seems this improvement can also be applied to HashBasedShuffleWriters, could you also send a PR to improve them?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1584?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1584](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1584?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f48986c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6177476b18beca2ae20b05b06483c118db74fe5a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6177476) will **increase** coverage by `0.45%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head f48986c differs from pull request most recent head 3c72c93. Consider uploading reports for the commit 3c72c93 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1584      +/-   ##\n==========================================\n+ Coverage   45.41%   45.85%   +0.45%     \n==========================================\n  Files         158      159       +1     \n  Lines        9830     9915      +85     \n  Branches      968      970       +2     \n==========================================\n+ Hits         4463     4546      +83     \n- Misses       5066     5073       +7     \n+ Partials      301      296       -5     \n```\n\n\n[see 13 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1584/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture any concerns? As we are actively changing code in this area, better to make this one get in first

ping @waitinfuture WDYT?

ping @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1583](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fb0b239) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf841006aa7d97dd14cdc1ffba04f371a6b31fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf8410) will **decrease** coverage by `0.16%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1583      +/-   ##\n==========================================\n- Coverage   45.56%   45.39%   -0.16%     \n==========================================\n  Files         158      158              \n  Lines        9830     9831       +1     \n  Branches      968      968              \n==========================================\n- Hits         4478     4462      -16     \n- Misses       5054     5067      +13     \n- Partials      298      302       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `68.82% <0.00%> (-0.74%)` | :arrow_down: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `64.04% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1583/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1582?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1582](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1582?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7a69373) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf841006aa7d97dd14cdc1ffba04f371a6b31fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf8410) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1582      +/-   ##\n==========================================\n- Coverage   45.56%   45.41%   -0.15%     \n==========================================\n  Files         158      158              \n  Lines        9830     9830              \n  Branches      968      968              \n==========================================\n- Hits         4478     4463      -15     \n- Misses       5054     5066      +12     \n- Partials      298      301       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1582/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @pan3793 @AngersZhuuuu @RexXiong \r\nBTW, shall we decrease the default value of ```celeborn.client.excludedWorker.expireTimeout```?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1581?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1581](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1581?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fb41a38) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1fca5da553639598bdaec70a13ac0e0727af2239?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1fca5da) will **decrease** coverage by `0.00%`.\n> The diff coverage is `85.72%`.\n\n> :exclamation: Current head fb41a38 differs from pull request most recent head 4cdc927. Consider uploading reports for the commit 4cdc927 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1581      +/-   ##\n==========================================\n- Coverage   45.46%   45.46%   -0.00%     \n==========================================\n  Files         158      158              \n  Lines        9849     9837      -12     \n  Branches      969      968       -1     \n==========================================\n- Hits         4477     4471       -6     \n+ Misses       5071     5065       -6     \n  Partials      301      301              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1581?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1581?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <85.72%> (+0.01%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1581/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@pan3793 Addressed comments, please take a look again.

cc @RexXiong @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1580?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1580](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1580?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6efc5b5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/70cadef599571835f21ca671b17441199de805a9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (70cadef) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1580      +/-   ##\n==========================================\n+ Coverage   45.43%   45.44%   +0.02%     \n==========================================\n  Files         158      158              \n  Lines        9830     9830              \n  Branches      968      968              \n==========================================\n+ Hits         4465     4466       +1     \n+ Misses       5064     5063       -1     \n  Partials      301      301              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1580/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

the jira ticket should be https://issues.apache.org/jira/browse/CELEBORN-667

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1578](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9128b29) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/da853473302d4df793f3d5d60a211b948c1b9997?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (da85347) will **decrease** coverage by `0.16%`.\n> The diff coverage is `40.75%`.\n\n> :exclamation: Current head 9128b29 differs from pull request most recent head d75eb2b. Consider uploading reports for the commit d75eb2b to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1578      +/-   ##\n==========================================\n- Coverage   45.66%   45.50%   -0.16%     \n==========================================\n  Files         158      158              \n  Lines        9859     9859              \n  Branches      969      969              \n==========================================\n- Hits         4501     4485      -16     \n- Misses       5059     5072      +13     \n- Partials      299      302       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.51% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `19.05% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <87.50%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.16% <100.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `64.04% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1578/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @FMX @RexXiong @pan3793 \r\n

The change makes sense to me, better to get approval by @waitinfuture before merging

I prefer merge https://github.com/apache/incubator-celeborn/pull/1588 before this PR

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1577?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1577](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1577?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7b8b7ec) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cc716506f9ca882539b7e875b629735ee19327e1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cc71650) will **increase** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1577      +/-   ##\n==========================================\n+ Coverage   45.44%   45.54%   +0.11%     \n==========================================\n  Files         158      158              \n  Lines        9830     9830              \n  Branches      968      968              \n==========================================\n+ Hits         4466     4476      +10     \n+ Misses       5063     5055       -8     \n+ Partials      301      299       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1577/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @RexXiong @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1576?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1576](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1576?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3fba681) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.77%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1576      +/-   ##\n==========================================\n- Coverage   46.21%   45.44%   -0.77%     \n==========================================\n  Files         158      158              \n  Lines        9958     9830     -128     \n  Branches      967      968       +1     \n==========================================\n- Hits         4601     4466     -135     \n- Misses       5055     5063       +8     \n+ Partials      302      301       -1     \n```\n\n\n[see 9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1576/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @AngersZhuuuu @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1575?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1575](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1575?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (24b0346) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b725202a2526b70e7eddbc9f9c0b15ee6ea6489?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b72520) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1575   +/-   ##\n=======================================\n  Coverage   45.41%   45.41%           \n=======================================\n  Files         158      158           \n  Lines        9830     9830           \n  Branches      968      968           \n=======================================\n  Hits         4463     4463           \n  Misses       5066     5066           \n  Partials      301      301           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

cc @RexXiong @AngersZhuuuu @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1574?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1574](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1574?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f7e1a1b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b725202a2526b70e7eddbc9f9c0b15ee6ea6489?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b72520) will **increase** coverage by `0.01%`.\n> The diff coverage is `46.16%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1574      +/-   ##\n==========================================\n+ Coverage   45.41%   45.41%   +0.01%     \n==========================================\n  Files         158      158              \n  Lines        9830     9843      +13     \n  Branches      968      968              \n==========================================\n+ Hits         4463     4469       +6     \n- Misses       5066     5073       +7     \n  Partials      301      301              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1574?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1574?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.50% <0.00%> (-0.01%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1574?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <85.72%> (-<0.01%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

If make it a client-side configuration, maybe the name can be\r\n```\r\nceleborn.client.registerShuffle.reportClientExcludedWorkers.enabled\r\n```\r\n\r\n"report" should be accurate than "avoid", because the decision is actually made by the master.

The gap here is that the master cannot know the unavailability of the worker in time, but the lifecycleManager can. I prefer configuration on the master side or both have. For the highest efficiency of the overall cluster the master needs to know the status of the workers from various channels, and this is can be considered as a strategy assigned by the master (whether to consider excluding workers on the client side, and besides the client blacklist also has a delay), as the current job needs to exclude this worker, can it be extended to another newly launched job? 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1572?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1572](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1572?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d74bc35) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b725202a2526b70e7eddbc9f9c0b15ee6ea6489?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b72520) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1572      +/-   ##\n==========================================\n+ Coverage   45.41%   45.43%   +0.03%     \n==========================================\n  Files         158      158              \n  Lines        9830     9830              \n  Branches      968      968              \n==========================================\n+ Hits         4463     4465       +2     \n+ Misses       5066     5064       -2     \n  Partials      301      301              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1572/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1571?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1571](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1571?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (eb7ef84) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6b725202a2526b70e7eddbc9f9c0b15ee6ea6489?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6b72520) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1571   +/-   ##\n=======================================\n  Coverage   45.41%   45.41%           \n=======================================\n  Files         158      158           \n  Lines        9830     9830           \n  Branches      968      968           \n=======================================\n  Hits         4463     4463           \n  Misses       5066     5066           \n  Partials      301      301           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1570?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1570](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1570?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e12e3d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/76533d73249e6caeac454c0365832e81e5dcbca5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (76533d7) will **increase** coverage by `0.21%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1570      +/-   ##\n==========================================\n+ Coverage   45.40%   45.60%   +0.21%     \n==========================================\n  Files         158      158              \n  Lines        9823     9830       +7     \n  Branches      968      968              \n==========================================\n+ Hits         4459     4482      +23     \n+ Misses       5063     5050      -13     \n+ Partials      301      298       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1570/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Also change for Spark2?

> Also change for Spark2?\r\n\r\nSpark 2 already includes the suite for the sort-based shuffle writer. In order to maintain consistency with Spark 3, the logic of `CelebornShuffleWriterSuiteBase.java` from Spark 2 is simplified and aligned with Spark 3.

```diff\r\ndiff --git client-spark/spark-3/src/test/java/org/apache/spark/shuffle/celeborn/CelebornShuffleWriterSuiteBase.java client-spark/spark-2/src/test/java/org/apache/spark/shuffle/celeborn/CelebornShuffleWriterSuiteBase.java\r\nindex 6995ae66..39a039ef 100644\r\n--- client-spark/spark-3/src/test/java/org/apache/spark/shuffle/celeborn/CelebornShuffleWriterSuiteBase.java\r\n+++ client-spark/spark-2/src/test/java/org/apache/spark/shuffle/celeborn/CelebornShuffleWriterSuiteBase.java\r\n@@ -50,11 +50,11 @@ import org.apache.spark.memory.UnifiedMemoryManager;\r\n import org.apache.spark.scheduler.MapStatus;\r\n import org.apache.spark.serializer.KryoSerializer;\r\n import org.apache.spark.serializer.Serializer;\r\n-import org.apache.spark.shuffle.ShuffleWriteMetricsReporter;\r\n import org.apache.spark.shuffle.ShuffleWriter;\r\n import org.apache.spark.sql.catalyst.InternalRow;\r\n import org.apache.spark.sql.catalyst.expressions.UnsafeProjection;\r\n import org.apache.spark.sql.catalyst.expressions.UnsafeRow;\r\n+import org.apache.spark.sql.execution.PartitionIdPassthrough;\r\n import org.apache.spark.sql.execution.UnsafeRowSerializer;\r\n import org.apache.spark.sql.types.DataType;\r\n import org.apache.spark.sql.types.IntegerType$;\r\n@@ -79,7 +79,6 @@ import org.apache.celeborn.common.CelebornConf;\r\n import org.apache.celeborn.common.identity.UserIdentifier;\r\n import org.apache.celeborn.common.util.JavaUtils;\r\n import org.apache.celeborn.common.util.Utils;\r\n-import org.apache.celeborn.reflect.DynConstructors;\r\n \r\n public abstract class CelebornShuffleWriterSuiteBase {\r\n \r\n@@ -97,12 +96,13 @@ public abstract class CelebornShuffleWriterSuiteBase {\r\n   private final UserIdentifier userIdentifier = new UserIdentifier("mock", "mock");\r\n \r\n   private final int numMaps = 10;\r\n-  private final int numPartitions = 10;\r\n+  protected final int numPartitions = 10;\r\n   private final SparkConf sparkConf = new SparkConf(false);\r\n   private final BlockManagerId bmId = BlockManagerId.apply("execId", "host", 1, None$.empty());\r\n-\r\n   private final TaskMemoryManager taskMemoryManager =\r\n       new TaskMemoryManager(UnifiedMemoryManager.apply(sparkConf, 1), 0);\r\n+  private final MapStatus mapStatus =\r\n+      SparkUtils.createMapStatus(bmId, new long[numPartitions], new long[numPartitions]);\r\n \r\n   @Mock(answer = Answers.RETURNS_SMART_NULLS)\r\n   private TaskContext taskContext = null;\r\n@@ -120,6 +120,8 @@ public abstract class CelebornShuffleWriterSuiteBase {\r\n \r\n   private static File tempDir = null;\r\n \r\n+  public CelebornShuffleWriterSuiteBase() throws IOException {}\r\n+\r\n   @BeforeClass\r\n   public static void beforeAll() {\r\n     tempDir = Utils.createTempDir(System.getProperty("java.io.tmpdir"), "celeborn_test");\r\n@@ -216,17 +218,8 @@ public abstract class CelebornShuffleWriterSuiteBase {\r\n       throws Exception {\r\n     final boolean useUnsafe = serializer instanceof UnsafeRowSerializer;\r\n \r\n-    DynConstructors.Ctor<Partitioner> partitionIdPassthroughCtor =\r\n-        DynConstructors.builder()\r\n-            // for Spark 3.3 and previous\r\n-            .impl("org.apache.spark.sql.execution.PartitionIdPassthrough", int.class)\r\n-            // for Spark 3.4\r\n-            .impl("org.apache.spark.PartitionIdPassthrough", int.class)\r\n-            .build();\r\n     final Partitioner partitioner =\r\n-        useUnsafe\r\n-            ? partitionIdPassthroughCtor.newInstance(numPartitions)\r\n-            : new HashPartitioner(numPartitions);\r\n+        useUnsafe ? new PartitionIdPassthrough(numPartitions) : new HashPartitioner(numPartitions);\r\n     Mockito.doReturn(partitioner).when(dependency).partitioner();\r\n     Mockito.doReturn(serializer).when(dependency).serializer();\r\n \r\n@@ -237,7 +230,7 @@ public abstract class CelebornShuffleWriterSuiteBase {\r\n     ((DummyShuffleClient) client).initReducePartitionMap(shuffleId, numPartitions, 1);\r\n \r\n     final ShuffleWriter<Integer, String> writer =\r\n-        createShuffleWriter(handle, taskContext, conf, client, metrics.shuffleWriteMetrics());\r\n+        createShuffleWriter(handle, taskContext, conf, client);\r\n \r\n     if (writer instanceof SortBasedShuffleWriter) {\r\n       assertEquals(useUnsafe, ((SortBasedShuffleWriter) writer).canUseFastWrite());\r\n@@ -360,10 +353,6 @@ public abstract class CelebornShuffleWriterSuiteBase {\r\n   }\r\n \r\n   protected abstract ShuffleWriter<Integer, String> createShuffleWriter(\r\n-      RssShuffleHandle handle,\r\n-      TaskContext context,\r\n-      CelebornConf conf,\r\n-      ShuffleClient client,\r\n-      ShuffleWriteMetricsReporter metrics)\r\n+      RssShuffleHandle handle, TaskContext context, CelebornConf conf, ShuffleClient client)\r\n       throws IOException;\r\n }\r\n```

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1569?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1569](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1569?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ec2e06e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/588dbdfbe0fdef14e41d0e16f2247e8e6a4b6099?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (588dbdf) will **decrease** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head ec2e06e differs from pull request most recent head e99e1d6. Consider uploading reports for the commit e99e1d6 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1569      +/-   ##\n==========================================\n- Coverage   45.54%   45.40%   -0.14%     \n==========================================\n  Files         158      158              \n  Lines        9823     9830       +7     \n  Branches      968      968              \n==========================================\n- Hits         4473     4462      -11     \n- Misses       5052     5067      +15     \n- Partials      298      301       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1569/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zwangsheng seems work

ping @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1568?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1568](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1568?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7e23448) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.83%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1568      +/-   ##\n==========================================\n- Coverage   46.21%   45.38%   -0.83%     \n==========================================\n  Files         158      158              \n  Lines        9958     9823     -135     \n  Branches      967      968       +1     \n==========================================\n- Hits         4601     4457     -144     \n- Misses       5055     5065      +10     \n+ Partials      302      301       -1     \n```\n\n\n[see 10 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1568/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3\r\n\r\n

@RexXiong the JIRA ticket seems not resolved correctly.

> @RexXiong the JIRA ticket seems not resolved correctly.\r\n\r\nThis maybe due to merge 0.3 error.(My local workspace not clean)...

in such case, you may need to do extra work manually, to make to JIRA ticket stay correct state

> in such case, you may need to do extra work manually, to make to JIRA ticket stay correct state\r\n\r\nI see.

@cchung100m FYI, if you are using Unix-like OS, there is a script `dev/reformat` to fix code style.

Hi  @pan3793 \r\n\r\nThanks for your friendly reminder and I updated the part you mentioned. :)

@cchung100m \r\nYou can run UTs before committing. \r\n\r\n`build/mvn test`\r\n

Hi @pan3793 \r\n\r\nI finish all the change and pass the tests. Do you need me to add the scala part since you delete it?

@cchung100m OK, please force push, and wait for the CI report. We are going to reach 0.3.0 RC1, I hope we get this PR in, and we can make the decision by the CI report.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1567?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1567](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1567?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bd021a7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c2352a2f9f59406add470235a159606382e6db9e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c2352a2) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1567      +/-   ##\n==========================================\n+ Coverage   46.20%   46.21%   +0.02%     \n==========================================\n  Files         161      161              \n  Lines        9949     9949              \n  Branches      957      957              \n==========================================\n+ Hits         4596     4597       +1     \n+ Misses       5051     5050       -1     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1567?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1567?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.30% <100.00%> (+0.15%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1567/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The final solution is only to retain changes in Java code which do not care about the return value of `putIfAbsent`

Thanks for the help! I learned a lot from this PR and hope can do more help. :)

Thanks all, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1566?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1566](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1566?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f2881f) into [branch-0.3](https://app.codecov.io/gh/apache/incubator-celeborn/commit/ba986c433022d84a7e6565b08c40d731408fd2c8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ba986c4) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff               @@\n##           branch-0.3    #1566      +/-   ##\n==============================================\n+ Coverage       45.41%   45.55%   +0.15%     \n==============================================\n  Files             158      158              \n  Lines            9823     9823              \n  Branches          968      968              \n==============================================\n+ Hits             4460     4474      +14     \n+ Misses           5062     5050      -12     \n+ Partials          301      299       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1566/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to 0.3

Another candidate is "appId", like `SortBasedShuffleWriter` does.\r\n(I prefer to use "appUniqueId")

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1565?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1565](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1565?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d8d40e5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c869ac9a0efcb92c6a07d0d0f15bf3274a86d2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0c869ac) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1565   +/-   ##\n=======================================\n  Coverage   45.41%   45.41%           \n=======================================\n  Files         158      158           \n  Lines        9823     9823           \n  Branches      968      968           \n=======================================\n  Hits         4460     4460           \n  Misses       5062     5062           \n  Partials      301      301           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1564?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1564](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1564?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (2838290) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c869ac9a0efcb92c6a07d0d0f15bf3274a86d2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0c869ac) will **increase** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1564      +/-   ##\n==========================================\n+ Coverage   45.41%   45.53%   +0.13%     \n==========================================\n  Files         158      158              \n  Lines        9823     9823              \n  Branches      968      968              \n==========================================\n+ Hits         4460     4472      +12     \n+ Misses       5062     5053       -9     \n+ Partials      301      298       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1564/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1563?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1563](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1563?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5fb89bb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0c869ac9a0efcb92c6a07d0d0f15bf3274a86d2f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0c869ac) will **decrease** coverage by `0.05%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1563      +/-   ##\n==========================================\n- Coverage   45.41%   45.36%   -0.05%     \n==========================================\n  Files         158      158              \n  Lines        9823     9823              \n  Branches      968      968              \n==========================================\n- Hits         4460     4455       -5     \n- Misses       5062     5066       +4     \n- Partials      301      302       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1563?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1563?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.14% <50.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1563/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1562?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1562](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1562?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3f6016c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/586785c88d488c1e43465c75e588d1dcaafc327b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (586785c) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1562      +/-   ##\n==========================================\n+ Coverage   45.40%   45.56%   +0.17%     \n==========================================\n  Files         158      158              \n  Lines        9818     9818              \n  Branches      966      966              \n==========================================\n+ Hits         4457     4473      +16     \n+ Misses       5060     5047      -13     \n+ Partials      301      298       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1562/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to main/0.3

@zwangsheng this one also benefits your K8s integration tests 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1561?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1561](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1561?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e0c06fe) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/586785c88d488c1e43465c75e588d1dcaafc327b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (586785c) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1561      +/-   ##\n==========================================\n+ Coverage   45.40%   45.41%   +0.02%     \n==========================================\n  Files         158      158              \n  Lines        9818     9818              \n  Branches      966      966              \n==========================================\n+ Hits         4457     4458       +1     \n+ Misses       5060     5058       -2     \n- Partials      301      302       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1561/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1560?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1560](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1560?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c930268) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/586785c88d488c1e43465c75e588d1dcaafc327b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (586785c) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1560      +/-   ##\n==========================================\n- Coverage   45.40%   45.40%   -0.00%     \n==========================================\n  Files         158      158              \n  Lines        9818     9823       +5     \n  Branches      966      968       +2     \n==========================================\n+ Hits         4457     4459       +2     \n- Misses       5060     5063       +3     \n  Partials      301      301              \n```\n\n\n[see 6 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1560/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

ping @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1559?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1559](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1559?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3e4c23c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.79%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1559      +/-   ##\n==========================================\n- Coverage   46.21%   45.42%   -0.79%     \n==========================================\n  Files         158      158              \n  Lines        9958     9821     -137     \n  Branches      967      967              \n==========================================\n- Hits         4601     4460     -141     \n- Misses       5055     5060       +5     \n+ Partials      302      301       -1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1559?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1559?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `28.05% <0.00%> (-1.06%)` | :arrow_down: |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1559/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Merged to 0.2

HI, can you provide some dashboard snapshots?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1557](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6a9e0b6) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.03%`.\n> The diff coverage is `19.05%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1557      +/-   ##\n==========================================\n- Coverage   46.21%   46.17%   -0.03%     \n==========================================\n  Files         158      158              \n  Lines        9958     9960       +2     \n  Branches      967      968       +1     \n==========================================\n- Hits         4601     4598       -3     \n- Misses       5055     5060       +5     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/network/util/NettyMemoryMetrics.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5TWVtb3J5TWV0cmljcy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `35.13% <0.00%> (-0.17%)` | :arrow_down: |\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `35.19% <17.65%> (ø)` | |\n| [.../apache/celeborn/common/metrics/MetricLabels.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljTGFiZWxzLnNjYWxh) | `90.00% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1557/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

We may need to provide a docker-based grafana to allow contributors to edit and export the grafana dashboard.

I think the Grafana dashboard looks good to me.

Thanks, merged to main/0.3

What will happen if a raft client failed to submit a request? Will the Master node stop?

> What will happen if a raft client failed to submit a request? Will the Master node stop?\r\n\r\nNo, currently all ratis requests are wrapped by executeWithLeaderChecker which would handle the exception.

There is more to do after this patch.

ping @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1555?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1555](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1555?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1202887) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1555      +/-   ##\n==========================================\n+ Coverage   46.21%   46.38%   +0.18%     \n==========================================\n  Files         158      158              \n  Lines        9958     9958              \n  Branches      967      967              \n==========================================\n+ Hits         4601     4618      +17     \n+ Misses       5055     5042      -13     \n+ Partials      302      298       -4     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1555/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1554?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1554](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1554?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (151c122) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.38%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1554      +/-   ##\n==========================================\n- Coverage   46.21%   45.82%   -0.38%     \n==========================================\n  Files         158      159       +1     \n  Lines        9958     9915      -43     \n  Branches      967      970       +3     \n==========================================\n- Hits         4601     4543      -58     \n- Misses       5055     5076      +21     \n+ Partials      302      296       -6     \n```\n\n\n[see 20 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1554/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Wait, exposing NodePort at Service granularity does not make sense, we need to access the Pod directly.

> Wait, exposing NodePort at Service granularity does not make sense, we need to access the Pod directly.\r\n\r\nLooks like `hostNetwork` better suited to our needs.

The host network is discouraged in K8s workload.\r\n\r\nTechnically, the Pod network should be reachable from the GA runner, better to investigate why it is not first.

As for IT mirror test, \r\n\r\nIn github runner, you can reach `minikube ip`\r\n\r\n```\r\n# minikube ip | xargs ping -c 10\r\n64 bytes from 192.168.49.2: icmp_seq=1 ttl=64 time=0.054 ms\r\n64 bytes from 192.168.49.2: icmp_seq=2 ttl=64 time=0.048 ms\r\n64 bytes from 192.168.49.2: icmp_seq=3 ttl=64 time=0.065 ms\r\n64 bytes from 192.168.49.2: icmp_seq=4 ttl=64 time=0.043 ms\r\n64 bytes from 192.168.49.2: icmp_seq=6 ttl=64 time=0.065 ms\r\n64 bytes from 192.168.49.2: icmp_seq=7 ttl=64 time=0.066 ms\r\n64 bytes from 192.168.49.2: icmp_seq=9 ttl=64 time=0.048 ms\r\n```

Hi @RexXiong @zhongqiangczq , could you please take a look at this PR?

I think docs can be updated for this PR because there might be a scenario that some users want to use Celeborn on Spark but run workloads outside the cluster.

@waitinfuture is adding node port svc per worker pod is something that we can considered as alternative to hostnet? (and LB svc or node port per master), I can open PR if it make sense, in our case we stable DNS name for masters and workers that would be accessed from outside the cluster, hostnet make it harder to configure

> @waitinfuture is adding node port svc per worker pod is something that we can considered as alternative to hostnet? (and LB svc or node port per master), I can open PR if it make sense, in our case we stable DNS name for masters and workers that would be accessed from outside the cluster, hostnet make it harder to configure\r\n\r\nThanks @shlomitubul, Some users have encountered issues accessing the Celeborn worker/master across Kubernetes clusters. I believe this solution should work, am I right?

> > @waitinfuture is adding node port svc per worker pod is something that we can considered as alternative to hostnet? (and LB svc or node port per master), I can open PR if it make sense, in our case we stable DNS name for masters and workers that would be accessed from outside the cluster, hostnet make it harder to configure\r\n> \r\n> Thanks @shlomitubul, Some users have encountered issues accessing the Celeborn worker/master across Kubernetes clusters. I believe this solution should work, am I right?\r\n\r\nyes, its a common pattern in application deploy in k8s to expose nodeport / LoadBalancer service per replica, ill open PR soon

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1553?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1553](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1553?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6872f2d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1553      +/-   ##\n==========================================\n+ Coverage   46.21%   46.22%   +0.02%     \n==========================================\n  Files         158      158              \n  Lines        9958     9958              \n  Branches      967      967              \n==========================================\n+ Hits         4601     4602       +1     \n  Misses       5055     5055              \n+ Partials      302      301       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1553/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @RexXiong @FMX\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1552?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1552](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1552?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (bea7c31) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.79%`.\n> The diff coverage is `81.82%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1552      +/-   ##\n==========================================\n- Coverage   46.21%   45.42%   -0.79%     \n==========================================\n  Files         158      158              \n  Lines        9958     9830     -128     \n  Branches      967      968       +1     \n==========================================\n- Hits         4601     4464     -137     \n- Misses       5055     5064       +9     \n  Partials      302      302              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1552?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1552?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.14% <81.82%> (-0.77%)` | :arrow_down: |\n\n... and [7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1552/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @RexXiong @FMX WDYT?

@RexXiong Any more suggestion?

ping @waitinfuture @FMX @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1551?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1551](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1551?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (817a108) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1551      +/-   ##\n==========================================\n+ Coverage   46.21%   46.23%   +0.03%     \n==========================================\n  Files         158      158              \n  Lines        9958     9958              \n  Branches      967      967              \n==========================================\n+ Hits         4601     4603       +2     \n+ Misses       5055     5054       -1     \n+ Partials      302      301       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1551/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1550](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9625c4f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1bdba1582f16fa489ed20e98dfa4ab76d76e571a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1bdba15) will **increase** coverage by `0.02%`.\n> Report is 2 commits behind head on main.\n> The diff coverage is `34.49%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1550      +/-   ##\n==========================================\n+ Coverage   46.53%   46.54%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10184    10205      +21     \n  Branches      936      936              \n==========================================\n+ Hits         4738     4749      +11     \n- Misses       5134     5144      +10     \n  Partials      312      312              \n```\n\n\n| [Files Changed](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.55% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `61.97% <0.00%> (-0.53%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `43.38% <33.34%> (-1.95%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.46% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1550/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This patch will be tested on the cluster after #1519 is merged.

@zhongqiangczq I have tested it with split disabled. We need to cooperate to support split reading partitions for Flink. 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

LGTM

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1549](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4ad251b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/1ba6dee32480b24703b73a0d5e445257d117e5b7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1ba6dee) will **increase** coverage by `0.14%`.\n> The diff coverage is `83.52%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1549      +/-   ##\n==========================================\n+ Coverage   45.68%   45.81%   +0.14%     \n==========================================\n  Files         159      159              \n  Lines        9915     9950      +35     \n  Branches      970      970              \n==========================================\n+ Hits         4529     4558      +29     \n- Misses       5088     5094       +6     \n  Partials      298      298              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `78.90% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.04% <83.52%> (-0.19%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1549/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture 

@FMX @waitinfuture any thoughts on this change?

Thanks, merging to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1547](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (7172f94) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3c7d179e051dce1dc4cf3a559a6761eadeccd9a6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3c7d179) will **decrease** coverage by `0.61%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1547      +/-   ##\n==========================================\n- Coverage   46.21%   45.60%   -0.61%     \n==========================================\n  Files         158      158              \n  Lines        9958     9813     -145     \n  Branches      967      966       -1     \n==========================================\n- Hits         4601     4474     -127     \n+ Misses       5055     5041      -14     \n+ Partials      302      298       -4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.14% <0.00%> (-0.76%)` | :arrow_down: |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `78.90% <ø> (ø)` | |\n| [...leborn/common/internal/config/ConfigProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdQcm92aWRlci5zY2FsYQ==) | `50.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `19.05% <0.00%> (-0.33%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1547/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture @AngersZhuuuu any concerns?

BTW, the `rss.*` compatibility has never been documented.

Merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1546?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1546](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1546?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1f194cd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5600728149d86941def4f7db0aedd477267d0c15?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5600728) will **increase** coverage by `0.45%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1546      +/-   ##\n==========================================\n+ Coverage   45.94%   46.38%   +0.45%     \n==========================================\n  Files         158      158              \n  Lines        9888     9957      +69     \n  Branches      967      967              \n==========================================\n+ Hits         4542     4618      +76     \n+ Misses       5045     5041       -4     \n+ Partials      301      298       -3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1546/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Compiled with Spark 3.4. The last patch contains an unneeded brace.

Ping @pan3793. This patch updated.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1545?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1545](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1545?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e3657c9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/218bfc78a561f83f95ab6198a34d10104ba51002?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (218bfc7) will **increase** coverage by `0.17%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1545      +/-   ##\n==========================================\n+ Coverage   45.93%   46.10%   +0.17%     \n==========================================\n  Files         158      158              \n  Lines        9888     9889       +1     \n  Branches      967      967              \n==========================================\n+ Hits         4541     4558      +17     \n+ Misses       5046     5033      -13     \n+ Partials      301      298       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1545?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1545?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1545/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1544?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1544](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1544?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0f3a03c) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/218bfc78a561f83f95ab6198a34d10104ba51002?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (218bfc7) will **increase** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1544      +/-   ##\n==========================================\n+ Coverage   45.93%   46.05%   +0.13%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n+ Hits         4541     4553      +12     \n+ Misses       5046     5036      -10     \n+ Partials      301      299       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1544/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zhongqiangczq please use the new script https://github.com/apache/incubator-celeborn/pull/1539 to merge PR, I also send a mail to dev mailing list to mention that.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1543?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1543](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1543?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5f63f36) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3883fe2c80427d130f01cd6c827166eecca44c2d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3883fe2) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1543      +/-   ##\n==========================================\n+ Coverage   45.91%   45.94%   +0.04%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n+ Hits         4539     4542       +3     \n+ Misses       5048     5045       -3     \n  Partials      301      301              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1543/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

The JIRA ticket does not resolve correctly

@pan3793  jira has been closed.

ping @pan3793 

Thanks, merged to main/0.3

The PR title is corrupt, and please fill the PR description

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1541?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1541](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1541?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (729c254) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/007b716b640b2d4e3178e4e0b01bdc5fb42e0ea4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (007b716) will **decrease** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1541      +/-   ##\n==========================================\n- Coverage   45.94%   45.89%   -0.05%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n- Hits         4542     4537       -5     \n- Misses       5045     5049       +4     \n- Partials      301      302       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1541/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zhongqiangczq after PR merged, please\r\n\r\n- resolves the JIRA ticket correctly, specifically, fill the fixed version\r\n- backport PR to release branch if needed\r\n- left comments on which branches include this PR, e.g. `Merged to main/0.3`

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1539?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1539](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1539?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (596fe4e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3d9a28a98d5c81c6e217337c9f0020cdb93091da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3d9a28a) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 596fe4e differs from pull request most recent head d494938. Consider uploading reports for the commit d494938 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1539      +/-   ##\n==========================================\n- Coverage   46.06%   45.91%   -0.15%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n- Hits         4554     4539      -15     \n- Misses       5036     5048      +12     \n- Partials      298      301       +3     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1539/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1538?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1538](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1538?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e3d5da5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/188b0697107fd7f2237eae973e3e54bfcd3dc134?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (188b069) will **decrease** coverage by `0.16%`.\n> The diff coverage is `94.24%`.\n\n> :exclamation: Current head e3d5da5 differs from pull request most recent head 43263a8. Consider uploading reports for the commit 43263a8 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1538      +/-   ##\n==========================================\n- Coverage   46.10%   45.94%   -0.16%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n- Hits         4558     4542      -16     \n- Misses       5032     5045      +13     \n- Partials      298      301       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1538?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1538?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.90% <94.24%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1538/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@AngersZhuuuu try it? #1539

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1537?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1537](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1537?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ec319d7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f1ca8c960eba453d6abd64a1a2beaeb28a8ecf2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f1ca8c) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1537   +/-   ##\n=======================================\n  Coverage   45.91%   45.91%           \n=======================================\n  Files         158      158           \n  Lines        9888     9888           \n  Branches      967      967           \n=======================================\n  Hits         4539     4539           \n  Misses       5048     5048           \n  Partials      301      301           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merge to main/0.3

ping @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1536?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1536](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1536?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (87d6af8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f1ca8c960eba453d6abd64a1a2beaeb28a8ecf2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f1ca8c) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1536   +/-   ##\n=======================================\n  Coverage   45.91%   45.91%           \n=======================================\n  Files         158      158           \n  Lines        9888     9888           \n  Branches      967      967           \n=======================================\n  Hits         4539     4539           \n+ Misses       5048     5047    -1     \n- Partials      301      302    +1     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1536/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to master/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1535?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1535](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1535?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0b50f2e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f1ca8c960eba453d6abd64a1a2beaeb28a8ecf2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f1ca8c) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1535      +/-   ##\n==========================================\n+ Coverage   45.91%   45.94%   +0.04%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n+ Hits         4539     4542       +3     \n+ Misses       5048     5045       -3     \n  Partials      301      301              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1535/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1534?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1534](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1534?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d008bc8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/e18a5ea769263459eccf781402a0c4827895e688?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e18a5ea) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head d008bc8 differs from pull request most recent head 7810e12. Consider uploading reports for the commit 7810e12 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1534      +/-   ##\n==========================================\n+ Coverage   45.91%   46.06%   +0.16%     \n==========================================\n  Files         158      158              \n  Lines        9888     9888              \n  Branches      967      967              \n==========================================\n+ Hits         4539     4554      +15     \n+ Misses       5048     5036      -12     \n+ Partials      301      298       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1534/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main/0.3.\r\n\r\nBTW, this PR was merged with the new script which I borrowed from Spark, which auto-updates the JIRA ticket.

This pr is for branch-0.2.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1532?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1532](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1532?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (ba1558a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cf308aa0575250f18126c4e7efbeb16a67db7a99?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf308aa) will **decrease** coverage by `0.03%`.\n> The diff coverage is `85.72%`.\n\n> :exclamation: Current head ba1558a differs from pull request most recent head 3717fbd. Consider uploading reports for the commit 3717fbd to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1532      +/-   ##\n==========================================\n- Coverage   45.94%   45.90%   -0.03%     \n==========================================\n  Files         158      158              \n  Lines        9891     9898       +7     \n  Branches      967      967              \n==========================================\n  Hits         4543     4543              \n- Misses       5047     5053       +6     \n- Partials      301      302       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1532?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1532?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.95% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1532/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1531?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1531](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1531?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f7f5445) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cf308aa0575250f18126c4e7efbeb16a67db7a99?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf308aa) will **increase** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1531      +/-   ##\n==========================================\n+ Coverage   45.94%   46.04%   +0.11%     \n==========================================\n  Files         158      158              \n  Lines        9891     9881      -10     \n  Branches      967      967              \n==========================================\n+ Hits         4543     4549       +6     \n+ Misses       5047     5034      -13     \n+ Partials      301      298       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1531?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1531?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.90% <ø> (-0.05%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1531/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

LGTM, cc @FMX @AngersZhuuuu 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1530?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1530](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1530?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9c1f4eb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/fa920ab0d54d4c415bc00eb794c43f5f946f7151?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (fa920ab) will **decrease** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 9c1f4eb differs from pull request most recent head bcb4bac. Consider uploading reports for the commit bcb4bac to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1530      +/-   ##\n==========================================\n- Coverage   46.07%   45.94%   -0.12%     \n==========================================\n  Files         158      158              \n  Lines        9880     9888       +8     \n  Branches      967      967              \n==========================================\n- Hits         4551     4542       -9     \n- Misses       5031     5045      +14     \n- Partials      298      301       +3     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1530/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merging to main/0.3

Thanks for the guidance

@onebox-li thanks for your contribution, BTW, you may need to update your GitHub profile to link your commit mail `liyihe <liyihe@bigo.sg>`, otherwise your contributions will not be counted by GitHub.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1529?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1529](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1529?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (654978a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/cf308aa0575250f18126c4e7efbeb16a67db7a99?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (cf308aa) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1529      +/-   ##\n==========================================\n- Coverage   45.94%   45.88%   -0.05%     \n==========================================\n  Files         158      158              \n  Lines        9891     9888       -3     \n  Branches      967      967              \n==========================================\n- Hits         4543     4536       -7     \n- Misses       5047     5051       +4     \n  Partials      301      301              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1529?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1529?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.90% <0.00%> (-0.05%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1529/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1528?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1528](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1528?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a74d214) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6d5dd50915ef9d70bceda4b65616f3a3feb90caf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6d5dd50) will **decrease** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1528      +/-   ##\n==========================================\n- Coverage   46.08%   45.89%   -0.19%     \n==========================================\n  Files         158      158              \n  Lines        9880     9880              \n  Branches      967      967              \n==========================================\n- Hits         4552     4533      -19     \n- Misses       5030     5046      +16     \n- Partials      298      301       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1528/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1526?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1526](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1526?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (18784af) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6d5dd50915ef9d70bceda4b65616f3a3feb90caf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6d5dd50) will **decrease** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1526      +/-   ##\n==========================================\n- Coverage   46.08%   45.92%   -0.16%     \n==========================================\n  Files         158      158              \n  Lines        9880     9880              \n  Branches      967      967              \n==========================================\n- Hits         4552     4536      -16     \n- Misses       5030     5043      +13     \n- Partials      298      301       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1526/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @waitinfuture @FMX @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1525](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (492b2fa) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6d5dd50915ef9d70bceda4b65616f3a3feb90caf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6d5dd50) will **increase** coverage by `0.02%`.\n> The diff coverage is `71.43%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1525      +/-   ##\n==========================================\n+ Coverage   46.08%   46.10%   +0.02%     \n==========================================\n  Files         158      158              \n  Lines        9880     9891      +11     \n  Branches      967      967              \n==========================================\n+ Hits         4552     4559       +7     \n- Misses       5030     5034       +4     \n  Partials      298      298              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `35.19% <0.00%> (-0.66%)` | :arrow_down: |\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.96% <ø> (-0.09%)` | :arrow_down: |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `29.12% <100.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `58.34% <100.00%> (ø)` | |\n| [...org/apache/celeborn/common/write/PushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0cmF0ZWd5LmphdmE=) | `75.00% <100.00%> (ø)` | |\n| [...ache/celeborn/common/write/SimplePushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2ltcGxlUHVzaFN0cmF0ZWd5LmphdmE=) | `62.50% <100.00%> (ø)` | |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `77.42% <100.00%> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1525?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `81.82% <100.00%> (+0.53%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1524?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1524](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1524?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a345383) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5600728149d86941def4f7db0aedd477267d0c15?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5600728) will **increase** coverage by `0.30%`.\n> The diff coverage is `88.41%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1524      +/-   ##\n==========================================\n+ Coverage   45.94%   46.23%   +0.30%     \n==========================================\n  Files         158      158              \n  Lines        9888     9957      +69     \n  Branches      967      967              \n==========================================\n+ Hits         4542     4603      +61     \n- Misses       5045     5053       +8     \n  Partials      301      301              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1524?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1524?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.91% <88.41%> (+0.02%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Shall we categorize the Flink-specific configurations added here for easier reference? Do you have any ideas? @waitinfuture @pan3793 @AngersZhuuuu 

> Shall we categorize the Flink-specific configurations added here for easier reference? Do you have any ideas? @waitinfuture @pan3793 @AngersZhuuuu\r\n\r\n+1 for these, we can have 3 categories for client conf\r\n`client-common` `client-spark` `client-flink`

I am inclined to distinguish them by the configuration name.\r\n```\r\nceleborn.client.\r\nceleborn.client.spark.\r\nceleborn.cleint.flink.\r\n```

the configuration "doc" is too rough\r\n\r\n```\r\nbuildConf("celeborn.client.flink.inputGate.memory")\r\n      .doc("Memory reserved for a input gate. For Flink plugin only.")\r\n      ...\r\n```\r\n\r\nFor example, the above "doc" does not help, users can not gain more information from "doc" statement than the configuration key itself. "input gate" is a new concept, it should be explained briefly at least in one of the keys\

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1523?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1523](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1523?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1997e5e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/62681ba85de35b00d1a360e5ea1bf5363634184c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (62681ba) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1523      +/-   ##\n==========================================\n- Coverage   46.07%   45.92%   -0.15%     \n==========================================\n  Files         158      158              \n  Lines        9880     9880              \n  Branches      967      967              \n==========================================\n- Hits         4551     4536      -15     \n- Misses       5031     5043      +12     \n- Partials      298      301       +3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1523/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @kerwin-zk , could you take a look at this PR?

@onebox-li  could you provide the reproduced SQL and exception stack information？

oh，i just put the stack in jira.\r\nreproduce use main branch, and  enable `spark.celeborn.columnar.shuffle.codegen.enabled`. can get the below exception.\r\n```\r\norg.codehaus.commons.compiler.CompileException: File \

cc @ulysses-you 

@onebox-li  Please use #1543  to test, it should be able to fix this exception.

@kerwin-zk It works. Using `ByteArrayOutputStream` to fix is simpler, i will close this.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1522?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1522](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1522?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (87ce07f) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/62681ba85de35b00d1a360e5ea1bf5363634184c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (62681ba) will **decrease** coverage by `0.18%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 87ce07f differs from pull request most recent head 44dd27a. Consider uploading reports for the commit 44dd27a to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1522      +/-   ##\n==========================================\n- Coverage   46.07%   45.89%   -0.18%     \n==========================================\n  Files         158      158              \n  Lines        9880     9880              \n  Branches      967      967              \n==========================================\n- Hits         4551     4533      -18     \n- Misses       5031     5046      +15     \n- Partials      298      301       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1522?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1522?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `88.06% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1522/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1521?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1521](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1521?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (52b4de5) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d30f45ad63aaccdb164f1d2b9b45338f1c66f67e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d30f45a) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1521      +/-   ##\n==========================================\n+ Coverage   45.30%   45.47%   +0.17%     \n==========================================\n  Files         158      158              \n  Lines        9769     9769              \n  Branches      967      967              \n==========================================\n+ Hits         4425     4441      +16     \n+ Misses       5044     5031      -13     \n+ Partials      300      297       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1521/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

there is an unresolved comment

There is a user reports that this patch did not fix directory permission problem. Maybe this patch needs more tests.

it seems that it works indeed to set the ownership of  pod‘s /xxx/rss_ratis directory to celeborn:celeborn, but ownership of \r\nsub-directory under /xxx/rss_ratis such as /xxx/rss_ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167 is still not changed\r\n\r\n![image](https://github.com/apache/incubator-celeborn/assets/29112453/8828bd7c-5384-46bc-b4fc-2cc9b7e6e0cc)\r\n\r\nand this will result in the following exception on celeborn master\r\n```\r\n23/05/30 20:33:01,748 WARN [0-impl-thread1] RaftStorageDirectory: The storage directory /data/flink/celeborn/rss_ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167 is not writable.\r\nException in thread "main" java.util.concurrent.CompletionException: java.io.IOException: Failed to load Storage Directory /data/flink/celeborn/rss_ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167: NON_EXISTENT\r\n\tat java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:292)\r\n\tat java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:308)\r\n\tat java.util.concurrent.CompletableFuture.biRelay(CompletableFuture.java:1298)\r\n\tat java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1284)\r\n\tat java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)\r\n\tat java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1990)\r\n\tat org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:191)\r\n\tat org.apache.ratis.util.ConcurrentUtils.lambda$null$4(ConcurrentUtils.java:180)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\nCaused by: java.io.IOException: Failed to load Storage Directory /data/flink/celeborn/rss_ratis/c5196f6d-2c34-3ed3-8b8a-47bede733167: NON_EXISTENT\r\n\tat org.apache.ratis.server.storage.RaftStorageImpl.initialize(RaftStorageImpl.java:72)\r\n\tat org.apache.ratis.server.impl.ServerState.initialize(ServerState.java:169)\r\n\tat org.apache.ratis.server.impl.RaftServerImpl.start(RaftServerImpl.java:338)\r\n\tat org.apache.ratis.util.ConcurrentUtils.accept(ConcurrentUtils.java:188)\r\n\t... 4 more\r\n```\r\n

The `chown -R` should be used carefully, the mounted path may be shared by other Applications/Pods

> This a little weird, we need more info for whether we should use `chown -R` in initContainers\r\n\r\n@RexXiong Feel same, we need more info to find why touched new log file with `9999 user`\r\n

> > This a little weird, we need more info for whether we should use `chown -R` in initContainers\r\n> \r\n> @RexXiong Feel same, we need more info to find why touched new log file with `9999 user`\r\n\r\nProbably related to user volume/mount env as `9999 uid/pid` is created by user other pod, So IMO we can commit this first. 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1520?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1520](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1520?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (71cb216) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d30f45ad63aaccdb164f1d2b9b45338f1c66f67e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d30f45a) will **decrease** coverage by `0.01%`.\n> The diff coverage is `85.72%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1520      +/-   ##\n==========================================\n- Coverage   45.30%   45.29%   -0.01%     \n==========================================\n  Files         158      158              \n  Lines        9769     9776       +7     \n  Branches      967      967              \n==========================================\n+ Hits         4425     4427       +2     \n- Misses       5044     5049       +5     \n  Partials      300      300              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1520?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1520?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.40% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1520/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1519](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (625ccde) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/218bfc78a561f83f95ab6198a34d10104ba51002?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (218bfc7) will **increase** coverage by `0.46%`.\n> The diff coverage is `37.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1519      +/-   ##\n==========================================\n+ Coverage   45.93%   46.39%   +0.46%     \n==========================================\n  Files         158      158              \n  Lines        9888     9963      +75     \n  Branches      967      967              \n==========================================\n+ Hits         4541     4621      +80     \n+ Misses       5046     5044       -2     \n+ Partials      301      298       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `64.04% <0.00%> (-0.56%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `50.00% <60.00%> (+0.71%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1519/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture please review again, thanks

@waitinfuture The JIRA ticket seems not close correctly.

ping @waitinfuture @FMX @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1518](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1345a14) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f85d80687743c1a5e515dac7df17f637e07a605?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f85d80) will **increase** coverage by `0.13%`.\n> The diff coverage is `75.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1518      +/-   ##\n==========================================\n+ Coverage   45.34%   45.46%   +0.13%     \n==========================================\n  Files         158      158              \n  Lines        9754     9763       +9     \n  Branches      967      967              \n==========================================\n+ Hits         4422     4438      +16     \n+ Misses       5036     5029       -7     \n  Partials      296      296              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/protocol/ChunkFetchFailure.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9DaHVua0ZldGNoRmFpbHVyZS5qYXZh) | `34.79% <0.00%> (+15.74%)` | :arrow_up: |\n| [...ommon/network/client/TransportResponseHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `69.74% <90.00%> (+0.35%)` | :arrow_up: |\n| [...e/celeborn/common/network/protocol/RpcFailure.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9ScGNGYWlsdXJlLmphdmE=) | `60.87% <100.00%> (+3.73%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1518/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1517?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1517](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1517?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c8602c9) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f85d80687743c1a5e515dac7df17f637e07a605?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f85d80) will **decrease** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1517      +/-   ##\n==========================================\n- Coverage   45.34%   45.20%   -0.14%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4422     4408      -14     \n- Misses       5036     5046      +10     \n- Partials      296      300       +4     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1517/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping. @FMX @waitinfuture @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1516?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1516](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1516?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f8ade4e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/c29f2f0aa8a753148a6752674d0595cabd65ce9e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c29f2f0) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1516      +/-   ##\n==========================================\n- Coverage   45.22%   45.19%   -0.03%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4410     4407       -3     \n- Misses       5045     5048       +3     \n  Partials      299      299              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1516/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1514?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1514](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1514?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (80b629b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/4f85d80687743c1a5e515dac7df17f637e07a605?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4f85d80) will **decrease** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1514      +/-   ##\n==========================================\n- Coverage   45.34%   45.22%   -0.12%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4422     4410      -12     \n- Misses       5036     5045       +9     \n- Partials      296      299       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1514/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1513?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1513](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1513?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e821bd0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1513      +/-   ##\n==========================================\n- Coverage   45.35%   45.22%   -0.13%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4423     4410      -13     \n- Misses       5035     5045      +10     \n- Partials      296      299       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1513/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1512?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1512](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1512?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (95f6dd1) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1512      +/-   ##\n==========================================\n- Coverage   45.35%   45.22%   -0.13%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4423     4410      -13     \n- Misses       5035     5045      +10     \n- Partials      296      299       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1512/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1510?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1510](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1510?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d848770) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1510      +/-   ##\n==========================================\n+ Coverage   45.35%   45.38%   +0.04%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n+ Hits         4423     4426       +3     \n+ Misses       5035     5032       -3     \n  Partials      296      296              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1510/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@waitinfuture @AngersZhuuuu do you know any user using Celeborn w/ Spark 3.0? if no one uses it, I think we can remove the support for 3.0 to reduce the maintenance burden.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1509?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1509](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1509?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (633a807) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1509      +/-   ##\n==========================================\n- Coverage   45.35%   45.22%   -0.13%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4423     4410      -13     \n- Misses       5035     5045      +10     \n- Partials      296      299       +3     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1509/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1508?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1508](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1508?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a2cf912) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1508      +/-   ##\n==========================================\n- Coverage   45.35%   45.30%   -0.04%     \n==========================================\n  Files         158      158              \n  Lines        9754     9769      +15     \n  Branches      967      967              \n==========================================\n+ Hits         4423     4425       +2     \n- Misses       5035     5044       +9     \n- Partials      296      300       +4     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1508/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

please create a `values-it.yaml`, and keep the default `values.yaml` friendly to user.

Make a big changes, ready for review @RexXiong @pan3793, and the following is local test screenshoot for each type:\r\n![popo_2023-05-25  18-35-27](https://github.com/apache/incubator-celeborn/assets/52876270/00d8d321-99e3-4ee7-9717-9eb4cef87b44)\r\n\r\n![popo_2023-05-25  18-35-52](https://github.com/apache/incubator-celeborn/assets/52876270/5257730e-a10f-4305-b99a-b8f585ad4512)\r\n

For Local Install Test\r\n\r\n> celeborn worker pod spec\r\n```yaml\r\nVolumes:\r\n  celeborn-volume:\r\n    Type:      ConfigMap (a volume populated by a ConfigMap)\r\n    Name:      celeborn-conf\r\n    Optional:  false\r\n  celeborn-worker-vol-0:\r\n    Type:          HostPath (bare host directory volume)\r\n    Path:          /mnt/disk1/worker\r\n    HostPathType:  DirectoryOrCreate\r\n  celeborn-worker-vol-1:\r\n    Type:          HostPath (bare host directory volume)\r\n    Path:          /mnt/disk2/worker\r\n    HostPathType:  DirectoryOrCreate\r\n  celeborn-worker-vol-2:\r\n    Type:          HostPath (bare host directory volume)\r\n    Path:          /mnt/disk3/worker\r\n    HostPathType:  DirectoryOrCreate\r\n  celeborn-worker-vol-3:\r\n    Type:          HostPath (bare host directory volume)\r\n    Path:          /mnt/disk4/worker\r\n    HostPathType:  DirectoryOrCreate\r\n```\r\n> celeborn configmap\r\n```properties\r\nceleborn-defaults.conf:\r\n----\r\nceleborn.master.endpoints=celeborn-master-0.celeborn-master-svc.default.svc.cluster.local,celeborn-master-1.celeborn-master-svc.default.svc.cluster.local,celeborn-master-2.celeborn-master-svc.default.svc.cluster.local,\r\nceleborn.ha.master.node.0.host=celeborn-master-0.celeborn-master-svc.default.svc.cluster.local\r\nceleborn.ha.master.node.1.host=celeborn-master-1.celeborn-master-svc.default.svc.cluster.local\r\nceleborn.ha.master.node.2.host=celeborn-master-2.celeborn-master-svc.default.svc.cluster.local\r\nceleborn.ha.master.ratis.raft.server.storage.dir=/mnt/rss_ratis/master\r\nceleborn.worker.storage.dirs=/mnt/disk1,/mnt/disk2,/mnt/disk3,/mnt/disk4\r\nceleborn.application.heartbeat.timeout=120s\r\nceleborn.ha.enabled=true\r\nceleborn.master.metrics.prometheus.port=9098\r\nceleborn.metrics.enabled=true\r\nceleborn.push.stageEnd.timeout=120s\r\nceleborn.rpc.dispatcher.numThreads=4\r\nceleborn.rpc.io.clientThreads=64\r\nceleborn.rpc.io.numConnectionsPerPeer=2\r\nceleborn.rpc.io.serverThreads=64\r\nceleborn.shuffle.chunk.size=8m\r\nceleborn.worker.fetch.io.threads=32\r\nceleborn.worker.flusher.buffer.size=256K\r\nceleborn.worker.heartbeat.timeout=120s\r\nceleborn.worker.metrics.prometheus.port=9096\r\nceleborn.worker.monitor.disk.enabled=false\r\nceleborn.worker.push.io.threads=32\r\n\r\n```

> Fast fail with another type\r\n\r\n```log\r\nError: INSTALLATION FAILED: execution error at (celeborn/templates/master-statefulset.yaml:120:11): For now Celeborn Helm only support emptyDir or hostPath volume types\r\nhelm.go:84: [debug] execution error at (celeborn/templates/master-statefulset.yaml:120:11): For now Celeborn Helm only support emptyDir or hostPath volume types\r\nINSTALLATION FAILED\r\nmain.newInstallCmd.func2\r\n\r\n```

Thanks for review, after both approved, merged to  main.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1507?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1507](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1507?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4671057) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/de97ad26ce15943232f2a326452a5f9b5bb18611?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (de97ad2) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1507      +/-   ##\n==========================================\n- Coverage   45.35%   45.20%   -0.15%     \n==========================================\n  Files         158      158              \n  Lines        9754     9754              \n  Branches      967      967              \n==========================================\n- Hits         4423     4408      -15     \n- Misses       5035     5046      +11     \n- Partials      296      300       +4     \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1507/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1506](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c510cd0) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d244f44518d016ecac1cac83a378408c0b184322?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d244f44) will **increase** coverage by `0.04%`.\n> The diff coverage is `90.91%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1506      +/-   ##\n==========================================\n+ Coverage   45.27%   45.30%   +0.04%     \n==========================================\n  Files         158      158              \n  Lines        9743     9769      +26     \n  Branches      959      967       +8     \n==========================================\n+ Hits         4410     4425      +15     \n- Misses       5040     5044       +4     \n- Partials      293      300       +7     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.40% <87.50%> (+0.09%)` | :arrow_up: |\n| [...eleborn/common/internal/config/ConfigBuilder.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdCdWlsZGVyLnNjYWxh) | `77.56% <100.00%> (+0.16%)` | :arrow_up: |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `78.90% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1506/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

what are they inconsistent before?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1505?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1505](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1505?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (959b22d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/6e166662f1e27f21b50174e4990efd73c2fff28b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6e16666) will **decrease** coverage by `0.06%`.\n> The diff coverage is `65.22%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1505      +/-   ##\n==========================================\n- Coverage   45.27%   45.21%   -0.06%     \n==========================================\n  Files         158      158              \n  Lines        9743     9754      +11     \n  Branches      959      967       +8     \n==========================================\n- Hits         4410     4409       -1     \n- Misses       5040     5046       +6     \n- Partials      293      299       +6     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1505?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1505?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `81.30% <65.22%> (-4.96%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1505/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Thanks, merged to main for 0.3

Thanks for your PR! Currently issues are tracked on JIRA, so we encourage to open an JIRA for each PR, https://issues.apache.org/jira/projects/CELEBORN/issues\r\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1504?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1504](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1504?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (13f7ad2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/d244f44518d016ecac1cac83a378408c0b184322?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (d244f44) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1504      +/-   ##\n==========================================\n+ Coverage   45.27%   45.42%   +0.16%     \n==========================================\n  Files         158      158              \n  Lines        9743     9743              \n  Branches      959      959              \n==========================================\n+ Hits         4410     4425      +15     \n+ Misses       5040     5028      -12     \n+ Partials      293      290       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1504/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1503?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1503](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1503?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f2be80b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa817bdbebdd5346050ee722eefdf9919aa0eab5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa817bd) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1503      +/-   ##\n==========================================\n- Coverage   45.27%   45.24%   -0.03%     \n==========================================\n  Files         158      158              \n  Lines        9721     9743      +22     \n  Branches      959      959              \n==========================================\n+ Hits         4400     4407       +7     \n- Misses       5033     5043      +10     \n- Partials      288      293       +5     \n```\n\n\n[see 5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1503/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Comments resolved.

ping @waitinfuture @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1502?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1502](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1502?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (1c87d55) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/615d9a111f4b7f48aff1b7e7911767459673f315?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (615d9a1) will **increase** coverage by `0.09%`.\n> The diff coverage is `20.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1502      +/-   ##\n==========================================\n+ Coverage   45.17%   45.25%   +0.09%     \n==========================================\n  Files         158      158              \n  Lines        9735     9746      +11     \n  Branches      959      961       +2     \n==========================================\n+ Hits         4397     4410      +13     \n+ Misses       5046     5042       -4     \n- Partials      292      294       +2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1502?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1502?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `57.41% <20.00%> (-1.08%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1502/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@FMX How about current?

ping @waitinfuture @pan3793 @FMX @RexXiong  Could you take a. look a have a discuss?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1501](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (15354b7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/07011f5a4d59dfffc7d098af2edfa543d14127fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (07011f5) will **increase** coverage by `0.66%`.\n> The diff coverage is `97.91%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1501      +/-   ##\n==========================================\n+ Coverage   45.26%   45.92%   +0.66%     \n==========================================\n  Files         158      158              \n  Lines        9769     9880     +111     \n  Branches      967      967              \n==========================================\n+ Hits         4421     4536     +115     \n+ Misses       5048     5043       -5     \n- Partials      300      301       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `88.06% <97.88%> (+0.66%)` | :arrow_up: |\n| [...che/celeborn/common/haclient/RssHARetryClient.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvUnNzSEFSZXRyeUNsaWVudC5qYXZh) | `75.29% <100.00%> (ø)` | |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `87.50% <100.00%> (-0.50%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1501/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping  @FMX @pan3793 @RexXiong @nafiyAix @waitinfuture Could you take a look?\r\n

This PR changes a lot, I think we need to schedule an online discussion.

And we should also re-organize the configs according to categories, better to do it in follow-up PR to make it clear.

@FMX @waitinfuture @pan3793 @RexXiong Could you take a look again?

LGTM, thanks for the PR! Merging to main.

the renamed configurations should update version as well, as we discussed during the last meeting

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1500?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1500](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1500?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (39be2de) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/42219aeb2a130cb472875e706bc5d504131c639d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (42219ae) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1500      +/-   ##\n==========================================\n+ Coverage   45.05%   45.14%   +0.09%     \n==========================================\n  Files         158      158              \n  Lines        9721     9735      +14     \n  Branches      959      959              \n==========================================\n+ Hits         4379     4394      +15     \n+ Misses       5050     5049       -1     \n  Partials      292      292              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1500?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1500?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <ø> (+0.09%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1500/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1499?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1499](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1499?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (97a107b) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/aa817bdbebdd5346050ee722eefdf9919aa0eab5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (aa817bd) will **decrease** coverage by `0.09%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1499      +/-   ##\n==========================================\n- Coverage   45.27%   45.17%   -0.09%     \n==========================================\n  Files         158      158              \n  Lines        9721     9735      +14     \n  Branches      959      959              \n==========================================\n- Hits         4400     4397       -3     \n- Misses       5033     5047      +14     \n- Partials      288      291       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1499?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1499?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.23% <100.00%> (+0.09%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1499/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1498?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1498](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1498?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (252bdac) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/42219aeb2a130cb472875e706bc5d504131c639d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (42219ae) will **increase** coverage by `0.22%`.\n> The diff coverage is `94.12%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1498      +/-   ##\n==========================================\n+ Coverage   45.05%   45.27%   +0.22%     \n==========================================\n  Files         158      158              \n  Lines        9721     9743      +22     \n  Branches      959      959              \n==========================================\n+ Hits         4379     4410      +31     \n+ Misses       5050     5040      -10     \n- Partials      292      293       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1498?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1498?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.32% <94.12%> (+0.18%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1498/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture @FMX @RexXiong This pr refine the RPC timeout related conf, make it simple and correct

Seems we can remove the `rss.*` support in 0.3.0 (of course, in separated PR), it does not always work, just a limited \r\nguidance of configuration mapping for users who migrate from 0.1 to 0.2.\r\n```\r\n.withAlternative("rss.*")\r\n```

> Seems we can remove the `rss.*` support in 0.3.0 (of course, in separated PR), it does not always work, just a limited guidance of configuration mapping for users who migrate from 0.1 to 0.2.\r\n> \r\n> ```\r\n> .withAlternative("rss.*")\r\n> ```\r\n\r\nI think we can do this later.\r\n

Logically, the change overall looks reasonable.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1497?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1497](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1497?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e7ce382) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/811e192bbd2da279d145bec62f51b5d87e7f68b5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (811e192) will **increase** coverage by `0.19%`.\n> The diff coverage is `7.70%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1497      +/-   ##\n==========================================\n+ Coverage   45.08%   45.27%   +0.19%     \n==========================================\n  Files         158      158              \n  Lines        9725     9721       -4     \n  Branches      959      959              \n==========================================\n+ Hits         4384     4400      +16     \n+ Misses       5050     5033      -17     \n+ Partials      291      288       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1497?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1497?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `64.61% <7.70%> (+1.13%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1497/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1496?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1496](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1496?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e25e461) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/811e192bbd2da279d145bec62f51b5d87e7f68b5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (811e192) will **increase** coverage by `0.16%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1496      +/-   ##\n==========================================\n+ Coverage   45.08%   45.24%   +0.16%     \n==========================================\n  Files         158      158              \n  Lines        9725     9725              \n  Branches      959      959              \n==========================================\n+ Hits         4384     4399      +15     \n+ Misses       5050     5038      -12     \n+ Partials      291      288       -3     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1496/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1495?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1495](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1495?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a1fb317) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a22c61e4797309da88de08f6d4e3080d60d0c023?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (a22c61e) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1495      +/-   ##\n==========================================\n- Coverage   45.13%   45.12%   -0.01%     \n==========================================\n  Files         160      160              \n  Lines        9700     9700              \n  Branches      957      957              \n==========================================\n- Hits         4377     4376       -1     \n- Misses       5034     5035       +1     \n  Partials      289      289              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1495?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1495?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.25% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1495/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1494?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1494](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1494?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3f795fd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3cc296ef4fc66249575b0ceeb2ac1ad457114675?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3cc296e) will **decrease** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 3f795fd differs from pull request most recent head 1a35831. Consider uploading reports for the commit 1a35831 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1494      +/-   ##\n==========================================\n- Coverage   45.13%   45.11%   -0.02%     \n==========================================\n  Files         160      160              \n  Lines        9700     9700              \n  Branches      957      957              \n==========================================\n- Hits         4377     4375       -2     \n- Misses       5034     5035       +1     \n- Partials      289      290       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1494?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1494?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.25% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1494/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> LGTM, could you add a doc in our website describing the behavior change? https://celeborn.apache.org/docs/latest/migration/\r\n\r\nDone\r\n\r\n<img width="1332" alt="截屏2023-05-17 下午5 51 22" src="https://github.com/apache/incubator-celeborn/assets/46485123/0f1a969a-4206-4ea7-9b13-e79b293c3727">\r\n

ping @RexXiong please take a look

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1492?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1492](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1492?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4cc97c8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/65cdb3eba47dc02ba9e6d69bc0b7727a8e5e55b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (65cdb3e) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1492      +/-   ##\n==========================================\n- Coverage   45.13%   45.10%   -0.03%     \n==========================================\n  Files         160      160              \n  Lines        9700     9700              \n  Branches      957      957              \n==========================================\n- Hits         4377     4374       -3     \n- Misses       5034     5037       +3     \n  Partials      289      289              \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1492/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1491?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1491](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1491?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (6c9151a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3cc296ef4fc66249575b0ceeb2ac1ad457114675?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (3cc296e) will **not change** coverage.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 6c9151a differs from pull request most recent head e074251. Consider uploading reports for the commit e074251 to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1491   +/-   ##\n=======================================\n  Coverage   45.13%   45.13%           \n=======================================\n  Files         160      160           \n  Lines        9700     9700           \n  Branches      957      957           \n=======================================\n  Hits         4377     4377           \n  Misses       5034     5034           \n  Partials      289      289           \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1491?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1491?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.25% <100.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @pan3793 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1490](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f64bb06) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/64a3534f716cba916973aa1a16b32b45d112ddf9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (64a3534) will **decrease** coverage by `0.35%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1490      +/-   ##\n==========================================\n- Coverage   45.25%   44.90%   -0.35%     \n==========================================\n  Files         160      160              \n  Lines        9700     9740      +40     \n  Branches      957      961       +4     \n==========================================\n- Hits         4389     4373      -16     \n- Misses       5025     5076      +51     \n- Partials      286      291       +5     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/network/util/NettyMemoryMetrics.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5TWVtb3J5TWV0cmljcy5qYXZh) | `0.00% <0.00%> (-26.92%)` | :arrow_down: |\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `35.85% <20.00%> (-15.87%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.11% <81.82%> (-0.14%)` | :arrow_down: |\n| [.../common/network/client/TransportClientFactory.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <100.00%> (-0.28%)` | :arrow_down: |\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `75.00% <100.00%> (-1.66%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1490/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

Hi @FMX , thanks for the PR! Could you provide metrics_NettyMemory_Value before this PR?

I ran the first 10 queries of TPC-DS for comparison.\r\nResults from main branch:\r\n<img width="489" alt="main" src="https://github.com/apache/incubator-celeborn/assets/4150993/61acb22c-2698-4bff-8318-7b9a692a713d">\r\n\r\nResults from branch 583:\r\n<img width="379" alt="583" src="https://github.com/apache/incubator-celeborn/assets/4150993/bd70d5ea-be02-4389-88b8-38c21aef24df">\r\n\r\nThe total time is quiet close so I think there is no performance degradation.

LGTM, thanks! Merging to main.

ping @FMX @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1489](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f75ae95) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f83304c337a4ba1b12f29a8a4f3a4b490e048350?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f83304c) will **increase** coverage by `0.05%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1489      +/-   ##\n==========================================\n+ Coverage   45.09%   45.13%   +0.05%     \n==========================================\n  Files         160      160              \n  Lines        9696     9700       +4     \n  Branches      957      957              \n==========================================\n+ Hits         4371     4377       +6     \n+ Misses       5040     5034       -6     \n- Partials      285      289       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.82% <100.00%> (+0.43%)` | :arrow_up: |\n| [...eleborn/common/network/server/TransportServer.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `76.67% <100.00%> (+1.23%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1489/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

How about updating monitoring docs?

> How about updating monitoring docs?\r\n\r\nYea

> How about updating monitoring docs?\r\n\r\nUpdated

ping @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1488?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1488](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1488?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (55b5c06) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5769c3fdc7eebd7701c40be364c83374ff7ea03b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5769c3f) will **decrease** coverage by `0.07%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1488      +/-   ##\n==========================================\n- Coverage   45.02%   44.94%   -0.07%     \n==========================================\n  Files         158      159       +1     \n  Lines        9678     9693      +15     \n  Branches      957      957              \n==========================================\n- Hits         4357     4356       -1     \n- Misses       5034     5049      +15     \n- Partials      287      288       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1488?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...eborn/common/metrics/source/SystemMiscSource.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1488?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1N5c3RlbU1pc2NTb3VyY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1488/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1487?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1487](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1487?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (4fd6852) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5769c3fdc7eebd7701c40be364c83374ff7ea03b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5769c3f) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1487      +/-   ##\n==========================================\n+ Coverage   45.02%   45.08%   +0.06%     \n==========================================\n  Files         158      160       +2     \n  Lines        9678     9700      +22     \n  Branches      957      957              \n==========================================\n+ Hits         4357     4372      +15     \n- Misses       5034     5038       +4     \n- Partials      287      290       +3     \n```\n\n\n[see 9 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1487/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1486?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1486](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1486?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (b62fc41) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/f83304c337a4ba1b12f29a8a4f3a4b490e048350?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (f83304c) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1486      +/-   ##\n==========================================\n+ Coverage   45.09%   45.10%   +0.02%     \n==========================================\n  Files         160      160              \n  Lines        9696     9700       +4     \n  Branches      957      957              \n==========================================\n+ Hits         4371     4374       +3     \n+ Misses       5040     5037       -3     \n- Partials      285      289       +4     \n```\n\n\n[see 7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1486/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

ping @RexXiong @waitinfuture 

Is it possible to follow the current exception tracking, and just distinguish InterruptedException from IOException?

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1485?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1485](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1485?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (c793420) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5769c3fdc7eebd7701c40be364c83374ff7ea03b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5769c3f) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1485      +/-   ##\n==========================================\n- Coverage   45.02%   44.99%   -0.03%     \n==========================================\n  Files         158      159       +1     \n  Lines        9678     9681       +3     \n  Branches      957      957              \n==========================================\n- Hits         4357     4355       -2     \n- Misses       5034     5038       +4     \n- Partials      287      288       +1     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1485?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/exception/DriverChangedException.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1485?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9Ecml2ZXJDaGFuZ2VkRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1485/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1484?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1484](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1484?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (9e4464e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/5600728149d86941def4f7db0aedd477267d0c15?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (5600728) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1484   +/-   ##\n=======================================\n  Coverage   45.94%   45.94%           \n=======================================\n  Files         158      158           \n  Lines        9888     9888           \n  Branches      967      967           \n=======================================\n  Hits         4542     4542           \n  Misses       5045     5045           \n  Partials      301      301           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

@zwangsheng thanks for your efforts, this PR overall LGTM, left some minor comments.

Thanks, merged to main for 0.4

ping @RexXiong 

> \r\n\r\nManually tested.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1482?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1482](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1482?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4a21793) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/3e0d779962de08a6c89d131a73af9b25d60124ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3e0d779) will **increase** coverage by `0.17%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1482      +/-   ##\n==========================================\n+ Coverage   44.86%   45.03%   +0.17%     \n==========================================\n  Files         156      156              \n  Lines        9615     9615              \n  Branches      956      956              \n==========================================\n+ Hits         4313     4329      +16     \n+ Misses       5018     5005      -13     \n+ Partials      284      281       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1482?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1482?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.52% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1482/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1480](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (39cebb8) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78a32fe90f4729f62387d353ea21045185b5ca9d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (78a32fe) will **increase** coverage by `0.06%`.\n> The diff coverage is `60.00%`.\n\n> :exclamation: Current head 39cebb8 differs from pull request most recent head 524d8a5. Consider uploading reports for the commit 524d8a5 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1480      +/-   ##\n==========================================\n+ Coverage   44.83%   44.88%   +0.06%     \n==========================================\n  Files         155      157       +2     \n  Lines        9590     9617      +27     \n  Branches      955      955              \n==========================================\n+ Hits         4299     4316      +17     \n- Misses       5008     5018      +10     \n  Partials      283      283              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/identity/DefaultIdentityProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L0RlZmF1bHRJZGVudGl0eVByb3ZpZGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../common/identity/HadoopBasedIdentityProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L0hhZG9vcEJhc2VkSWRlbnRpdHlQcm92aWRlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ommon/identity/UserSpecifiedIdentityProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L1VzZXJTcGVjaWZpZWRJZGVudGl0eVByb3ZpZGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.08% <89.48%> (+0.01%)` | :arrow_up: |\n| [...he/celeborn/common/identity/IdentityProvider.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1480?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L0lkZW50aXR5UHJvdmlkZXIuc2NhbGE=) | `14.29% <100.00%> (+14.29%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @waitinfuture \r\nSeems @waitinfuture  remove this in #1278 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1479?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1479](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1479?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (186a4cd) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78a32fe90f4729f62387d353ea21045185b5ca9d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (78a32fe) will **increase** coverage by `0.16%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1479      +/-   ##\n==========================================\n+ Coverage   44.83%   44.99%   +0.16%     \n==========================================\n  Files         155      155              \n  Lines        9590     9593       +3     \n  Branches      955      956       +1     \n==========================================\n+ Hits         4299     4315      +16     \n+ Misses       5008     4998      -10     \n+ Partials      283      280       -3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1479?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1479?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1479/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> ping @RexXiong @waitinfuture Seems @waitinfuture remove this in #1278\r\n\r\nRight, ```partitionLocationInfo.removeShuffle(shuffleKey)``` was moved to ```Worker.cleanup()``` after discussing with @RexXiong . @RexXiong  will this PR affects MapPartition?

> \r\n\r\nLGTM, thanks!

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1478?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1478](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1478?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (59629cb) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a95936906bd593a418f21757ad0649865ca23753?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a959369) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 59629cb differs from pull request most recent head 6521d47. Consider uploading reports for the commit 6521d47 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1478      +/-   ##\n==========================================\n+ Coverage   44.81%   44.98%   +0.17%     \n==========================================\n  Files         155      155              \n  Lines        9590     9590              \n  Branches      955      955              \n==========================================\n+ Hits         4297     4313      +16     \n+ Misses       5010     4996      -14     \n+ Partials      283      281       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1478/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1477?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1477](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1477?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (83ed26a) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/78a32fe90f4729f62387d353ea21045185b5ca9d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (78a32fe) will **increase** coverage by `0.12%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1477      +/-   ##\n==========================================\n+ Coverage   44.83%   44.95%   +0.12%     \n==========================================\n  Files         155      157       +2     \n  Lines        9590     9626      +36     \n  Branches      955      956       +1     \n==========================================\n+ Hits         4299     4326      +27     \n- Misses       5008     5017       +9     \n  Partials      283      283              \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1477?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/exception/CelebornRuntimeException.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1477?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9DZWxlYm9yblJ1bnRpbWVFeGNlcHRpb24uc2NhbGE=) | `100.00% <100.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1477/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @AngersZhuuuu HDYT about this PR?

> ping @AngersZhuuuu HDYT about this PR?\r\n\r\nI am checking

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1476?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1476](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1476?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e461df3) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/a95936906bd593a418f21757ad0649865ca23753?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a959369) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1476   +/-   ##\n=======================================\n  Coverage   44.81%   44.81%           \n=======================================\n  Files         155      155           \n  Lines        9590     9590           \n  Branches      955      955           \n=======================================\n  Hits         4297     4297           \n  Misses       5010     5010           \n  Partials      283      283           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Regression is successful.

Is it back-compatible with 4.1.77.Final? Client side might use the older version.

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1474?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1474](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1474?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (18f3162) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8d933691ae0c8a9a032592fa668116a1dddd1a43?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8d93369) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1474      +/-   ##\n==========================================\n- Coverage   44.81%   44.80%   -0.00%     \n==========================================\n  Files         155      155              \n  Lines        9589     9590       +1     \n  Branches      955      955              \n==========================================\n  Hits         4296     4296              \n- Misses       5010     5011       +1     \n  Partials      283      283              \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1474/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @AngersZhuuuu 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1473?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1473](https://codecov.io/gh/apache/incubator-celeborn/pull/1473?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c1ebf22) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ef4c12e0feb34774e5abbac064e5e899d5973b05?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ef4c12e) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1473      +/-   ##\n==========================================\n+ Coverage   44.76%   44.81%   +0.06%     \n==========================================\n  Files         155      155              \n  Lines        9590     9590              \n  Branches      955      955              \n==========================================\n+ Hits         4292     4297       +5     \n+ Misses       5014     5010       -4     \n+ Partials      284      283       -1     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1473/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1472?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1472](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1472?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2410b5d) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/93d2f106e08db5993409e88da1d30a75b12e1db7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (93d2f10) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1472      +/-   ##\n==========================================\n+ Coverage   44.76%   44.79%   +0.04%     \n==========================================\n  Files         155      155              \n  Lines        9590     9590              \n  Branches      955      955              \n==========================================\n+ Hits         4292     4295       +3     \n+ Misses       5014     5011       -3     \n  Partials      284      284              \n```\n\n\n[see 3 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1472/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Comments addressed. Ping @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1471?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1471](https://codecov.io/gh/apache/incubator-celeborn/pull/1471?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b13ac79) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8d933691ae0c8a9a032592fa668116a1dddd1a43?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8d93369) will **increase** coverage by `0.01%`.\n> The diff coverage is `80.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1471      +/-   ##\n==========================================\n+ Coverage   44.81%   44.81%   +0.01%     \n==========================================\n  Files         155      155              \n  Lines        9589     9590       +1     \n  Branches      955      955              \n==========================================\n+ Hits         4296     4297       +1     \n  Misses       5010     5010              \n  Partials      283      283              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1471?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1471?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.97% <80.00%> (+0.01%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @waitinfuture @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1469?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1469](https://codecov.io/gh/apache/incubator-celeborn/pull/1469?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e52dec9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7a4f2ebd8add60b7bc3f1a04ac2165ce72d5e254?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7a4f2eb) will **decrease** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1469      +/-   ##\n==========================================\n- Coverage   44.96%   44.78%   -0.17%     \n==========================================\n  Files         155      155              \n  Lines        9587     9587              \n  Branches      955      955              \n==========================================\n- Hits         4310     4293      -17     \n- Misses       4996     5011      +15     \n- Partials      281      283       +2     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1469/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1468?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1468](https://codecov.io/gh/apache/incubator-celeborn/pull/1468?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (87472e1) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7a4f2ebd8add60b7bc3f1a04ac2165ce72d5e254?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7a4f2eb) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1468      +/-   ##\n==========================================\n- Coverage   44.96%   44.92%   -0.04%     \n==========================================\n  Files         155      155              \n  Lines        9587     9589       +2     \n  Branches      955      955              \n==========================================\n- Hits         4310     4307       -3     \n- Misses       4996     5001       +5     \n  Partials      281      281              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1468?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1468?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1468/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1467?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1467](https://codecov.io/gh/apache/incubator-celeborn/pull/1467?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b1d23fc) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/64a4f7274cd7f2f56208cbb34debf377a7951da8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (64a4f72) will **increase** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1467      +/-   ##\n==========================================\n+ Coverage   44.76%   44.82%   +0.06%     \n==========================================\n  Files         155      155              \n  Lines        9587     9587              \n  Branches      955      955              \n==========================================\n+ Hits         4291     4296       +5     \n+ Misses       5012     5008       -4     \n+ Partials      284      283       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1467?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1467?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.52% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1467/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @pan3793 @RexXiong @waitinfuture 

ping @waitinfuture @RexXiong 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1465?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1465](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1465?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3198486) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/58aa0ba48fe215fc22f7649f7a77c59a0136562f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (58aa0ba) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1465      +/-   ##\n==========================================\n+ Coverage   44.77%   44.81%   +0.05%     \n==========================================\n  Files         155      155              \n  Lines        9590     9590              \n  Branches      955      955              \n==========================================\n+ Hits         4293     4297       +4     \n+ Misses       5012     5010       -2     \n+ Partials      285      283       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1465/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1464?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1464](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1464?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1cdb0c2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/114b1b4d62337ff59fa58ec8148bf1415af14c49?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (114b1b4) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1464      +/-   ##\n==========================================\n- Coverage   44.82%   44.81%   -0.01%     \n==========================================\n  Files         155      155              \n  Lines        9590     9590              \n  Branches      955      955              \n==========================================\n- Hits         4298     4297       -1     \n  Misses       5010     5010              \n- Partials      282      283       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1464/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> \r\n\r\nThanks @FMX 

Thanks @FMX and @AngersZhuuuu for reviewing. Ratis 2.5.1 is currently under voting. We can wait for its release and upgrade to 2.5.1 directly.

> \r\n\r\nThis config is not configured in Celeborn. Is it needed to be set explicitly?

@FMX as we are here, I remember there were troubles when using Ratis w/ gRPC on K8s, do you have a chance to test it again w/ this brand-new version?

 Sounds reasonable, I’ll run some tests.\n\n在 2023年5月9日 17:59:36 上，Cheng Pan ***@***.***> 写道：\n\n> @FMX <https://github.com/FMX> as we are here, I remember there were\n> troubles when using Ratis w/ gRPC on K8s, do you have a chance to test it\n> again w/ this brand-new version?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-celeborn/pull/1464#issuecomment-1539826697>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AA7VNULJ7W2XLEAVS4D4FFLXFIIQRANCNFSM6AAAAAAXMBOYQQ>\n> .\n> You are receiving this because you were mentioned.Message ID:\n> ***@***.***>\n>\n

> LGTM, WDYT @FMX\r\nI see your comments. I think this PR is fine but the logs will continue to write after a node is restarted.\r\n\r\nIf adding a config can solve this, the config should be added.  @kaijchen 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1463?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1463](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1463?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (14fa0f2) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/8584f1049f0bf506774fae7447fa351c61896623?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8584f10) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1463      +/-   ##\n==========================================\n+ Coverage   44.79%   44.96%   +0.17%     \n==========================================\n  Files         155      155              \n  Lines        9586     9590       +4     \n  Branches      955      955              \n==========================================\n+ Hits         4293     4311      +18     \n+ Misses       5010     4998      -12     \n+ Partials      283      281       -2     \n```\n\n\n[see 4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1463/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I tested this patch on flink 1.14 cluster and flink 1.15 cluster. Tests are successful.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1462?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1462](https://codecov.io/gh/apache/incubator-celeborn/pull/1462?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3eba3ee) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/537fc94df298b22479159e50579228491a4b7353?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (537fc94) will **increase** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1462      +/-   ##\n==========================================\n+ Coverage   44.82%   44.83%   +0.02%     \n==========================================\n  Files         155      155              \n  Lines        9586     9586              \n  Branches      955      955              \n==========================================\n+ Hits         4296     4297       +1     \n  Misses       5007     5007              \n+ Partials      283      282       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1462?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1462?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.02% <100.00%> (+0.05%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1461?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1461](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1461?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (91e278e) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/537fc94df298b22479159e50579228491a4b7353?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (537fc94) will **increase** coverage by `0.23%`.\n> The diff coverage is `60.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1461      +/-   ##\n==========================================\n+ Coverage   44.82%   45.04%   +0.23%     \n==========================================\n  Files         155      156       +1     \n  Lines        9586     9623      +37     \n  Branches      955      956       +1     \n==========================================\n+ Hits         4296     4334      +38     \n- Misses       5007     5008       +1     \n+ Partials      283      281       -2     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1461?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1461?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.12% <60.00%> (+0.16%)` | :arrow_up: |\n\n... and [7 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1461/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @waitinfuture , Could you take a look, this issue cause register shuffle failed.

ping @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1460?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1460](https://codecov.io/gh/apache/incubator-celeborn/pull/1460?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3570a60) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/537fc94df298b22479159e50579228491a4b7353?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (537fc94) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1460      +/-   ##\n==========================================\n- Coverage   44.82%   44.80%   -0.02%     \n==========================================\n  Files         155      155              \n  Lines        9586     9586              \n  Branches      955      955              \n==========================================\n- Hits         4296     4294       -2     \n- Misses       5007     5008       +1     \n- Partials      283      284       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1460/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1459?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1459](https://codecov.io/gh/apache/incubator-celeborn/pull/1459?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (234fafd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/01d8d1079cd2e8ac4de514a675a10093af2e26dd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01d8d10) will **increase** coverage by `0.14%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1459      +/-   ##\n==========================================\n+ Coverage   44.82%   44.95%   +0.14%     \n==========================================\n  Files         155      155              \n  Lines        9586     9587       +1     \n  Branches      955      955              \n==========================================\n+ Hits         4296     4309      +13     \n+ Misses       5007     4997      -10     \n+ Partials      283      281       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1459?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1459?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1459/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@AngersZhuuuu @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1458?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1458](https://codecov.io/gh/apache/incubator-celeborn/pull/1458?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (acc34e3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/01d8d1079cd2e8ac4de514a675a10093af2e26dd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01d8d10) will **decrease** coverage by `0.04%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1458      +/-   ##\n==========================================\n- Coverage   44.82%   44.78%   -0.04%     \n==========================================\n  Files         155      155              \n  Lines        9586     9586              \n  Branches      955      955              \n==========================================\n- Hits         4296     4292       -4     \n- Misses       5007     5009       +2     \n- Partials      283      285       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1458?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1458?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.97% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1458/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1457](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (657ecf7) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/114b1b4d62337ff59fa58ec8148bf1415af14c49?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (114b1b4) will **increase** coverage by `0.33%`.\n> The diff coverage is `65.58%`.\n\n> :exclamation: Current head 657ecf7 differs from pull request most recent head 6e48e6f. Consider uploading reports for the commit 6e48e6f to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1457      +/-   ##\n==========================================\n+ Coverage   44.82%   45.15%   +0.33%     \n==========================================\n  Files         155      157       +2     \n  Lines        9590     9672      +82     \n  Branches      955      957       +2     \n==========================================\n+ Hits         4298     4366      +68     \n- Misses       5010     5021      +11     \n- Partials      282      285       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/network/protocol/Heartbeat.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9IZWFydGJlYXQuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/util/TransportFrameDecoder.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydEZyYW1lRGVjb2Rlci5qYXZh) | `88.64% <0.00%> (+17.05%)` | :arrow_up: |\n| [...common/network/server/TransportChannelHandler.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0Q2hhbm5lbEhhbmRsZXIuamF2YQ==) | `65.76% <36.85%> (-9.68%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `60.00% <50.00%> (-0.82%)` | :arrow_down: |\n| [...ache/celeborn/common/network/TransportContext.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `80.49% <100.00%> (-1.09%)` | :arrow_down: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `88.00% <100.00%> (+0.50%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.15% <100.00%> (+0.14%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1457/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@RexXiong The JIRA ticket closed without fixed versions, is it targeted to 0.3?

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1456?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1456](https://codecov.io/gh/apache/incubator-celeborn/pull/1456?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6174c1f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/537fc94df298b22479159e50579228491a4b7353?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (537fc94) will **increase** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1456      +/-   ##\n==========================================\n+ Coverage   44.82%   44.97%   +0.15%     \n==========================================\n  Files         155      155              \n  Lines        9586     9586              \n  Branches      955      955              \n==========================================\n+ Hits         4296     4310      +14     \n+ Misses       5007     4995      -12     \n+ Partials      283      281       -2     \n```\n\n\n[see 1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1456/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @pan3793 , please take a look if this will affect k8s environment.

Any more suggestion?

This should be fine since both of them share the `lifecycleHost` under the hood.\r\n\r\n```\r\n        return new RssShuffleHandle<>(\r\n          newAppId,\r\n          lifecycleManager.getRssMetaServiceHost(),\r\n          lifecycleManager.getRssMetaServicePort(),\r\n          lifecycleManager.getUserIdentifier(),\r\n          shuffleId,\r\n          dependency.rdd().getNumPartitions(),\r\n          dependency);\r\n```\r\n\r\n```\r\n  def getRssMetaServiceHost: String = {\r\n    lifecycleHost\r\n  }\r\n```\r\n\r\n```\r\n  override val rpcEnv: RpcEnv = RpcEnv.create(\r\n    RpcNameConstants.RSS_METASERVICE_SYS,\r\n    lifecycleHost,\r\n    conf.shuffleManagerPort,\r\n    conf)\r\n```

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1455?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1455](https://codecov.io/gh/apache/incubator-celeborn/pull/1455?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f6c2108) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/537fc94df298b22479159e50579228491a4b7353?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (537fc94) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1455   +/-   ##\n=======================================\n  Coverage   44.82%   44.82%           \n=======================================\n  Files         155      155           \n  Lines        9586     9586           \n  Branches      955      955           \n=======================================\n  Hits         4296     4296           \n  Misses       5007     5007           \n  Partials      283      283           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1454?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1454](https://codecov.io/gh/apache/incubator-celeborn/pull/1454?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3f94a5f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **decrease** coverage by `0.74%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 3f94a5f differs from pull request most recent head b27bc80. Consider uploading reports for the commit b27bc80 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1454      +/-   ##\n==========================================\n- Coverage   45.54%   44.79%   -0.74%     \n==========================================\n  Files         167      155      -12     \n  Lines       10531     9586     -945     \n  Branches     1044      955      -89     \n==========================================\n- Hits         4795     4293     -502     \n+ Misses       5399     5010     -389     \n+ Partials      337      283      -54     \n```\n\n\n[see 18 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1454/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1453?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1453](https://codecov.io/gh/apache/incubator-celeborn/pull/1453?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d5feea2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **decrease** coverage by `0.74%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1453      +/-   ##\n==========================================\n- Coverage   45.54%   44.79%   -0.74%     \n==========================================\n  Files         167      155      -12     \n  Lines       10531     9586     -945     \n  Branches     1044      955      -89     \n==========================================\n- Hits         4795     4293     -502     \n+ Misses       5399     5010     -389     \n+ Partials      337      283      -54     \n```\n\n\n[see 18 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1453/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1452?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1452](https://codecov.io/gh/apache/incubator-celeborn/pull/1452?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (40afe0d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ce21a738a92e0fdadddf7194cea4d9020d7c1250?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ce21a73) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1452      +/-   ##\n==========================================\n- Coverage   44.82%   44.78%   -0.03%     \n==========================================\n  Files         155      155              \n  Lines        9587     9587              \n  Branches      955      955              \n==========================================\n- Hits         4296     4293       -3     \n- Misses       5008     5011       +3     \n  Partials      283      283              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1452?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1452?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.52% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1452/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX @waitinfuture @RexXiong @pan3793 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1451?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1451](https://codecov.io/gh/apache/incubator-celeborn/pull/1451?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d136ecc) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3ae2f0e17939ed7f765edea248b55d641603600?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3ae2f0) will **increase** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1451      +/-   ##\n==========================================\n+ Coverage   44.87%   44.98%   +0.11%     \n==========================================\n  Files         156      155       -1     \n  Lines        9596     9577      -19     \n  Branches      956      952       -4     \n==========================================\n+ Hits         4305     4307       +2     \n+ Misses       5008     4989      -19     \n+ Partials      283      281       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1451?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1451?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.54% <ø> (+0.02%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1451/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @waitinfuture @pan3793 

Seems it breaks the protocol contract.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1450?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1450](https://codecov.io/gh/apache/incubator-celeborn/pull/1450?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d474d5f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3ae2f0e17939ed7f765edea248b55d641603600?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3ae2f0) will **increase** coverage by `0.12%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1450      +/-   ##\n==========================================\n+ Coverage   44.87%   44.98%   +0.12%     \n==========================================\n  Files         156      155       -1     \n  Lines        9596     9587       -9     \n  Branches      956      953       -3     \n==========================================\n+ Hits         4305     4312       +7     \n+ Misses       5008     4995      -13     \n+ Partials      283      280       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1450?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/haclient/RssHARetryClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1450?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvUnNzSEFSZXRyeUNsaWVudC5qYXZh) | `69.08% <0.00%> (-6.20%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1450?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <ø> (+0.02%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1450/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Assuming a 0.2 client communicates to 0.3 master, the client can not receive the response but got the next message returned by the server, then the channel is broken. 

> Assuming a 0.2 client communicates to 0.3 master, the client can not receive the response but got the next message returned by the server, then the channel is broken.\r\n\r\nSo how about only removing client-side code in this version?\r\n

How much improvement can gain after dropping the response?

Overall, I oppose this change. The benefit looks not much comparing the impacts, unless it is proven to perform much well under certain conditions.

Ok

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1449?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1449](https://codecov.io/gh/apache/incubator-celeborn/pull/1449?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (049754c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3ae2f0e17939ed7f765edea248b55d641603600?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3ae2f0) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1449      +/-   ##\n==========================================\n- Coverage   44.87%   44.82%   -0.04%     \n==========================================\n  Files         156      155       -1     \n  Lines        9596     9586      -10     \n  Branches      956      955       -1     \n==========================================\n- Hits         4305     4296       -9     \n+ Misses       5008     5007       -1     \n  Partials      283      283              \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1449/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1448?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1448](https://codecov.io/gh/apache/incubator-celeborn/pull/1448?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cc89529) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3ae2f0e17939ed7f765edea248b55d641603600?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3ae2f0) will **increase** coverage by `0.12%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1448      +/-   ##\n==========================================\n+ Coverage   44.87%   44.98%   +0.12%     \n==========================================\n  Files         156      156              \n  Lines        9596     9596              \n  Branches      956      956              \n==========================================\n+ Hits         4305     4316      +11     \n+ Misses       5008     4999       -9     \n+ Partials      283      281       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1448/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1447?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1447](https://codecov.io/gh/apache/incubator-celeborn/pull/1447?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (af08ba4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/181c1bfcd6a64236f634d5cf508610b3b5d1274c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (181c1bf) will **decrease** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1447      +/-   ##\n==========================================\n- Coverage   45.01%   44.82%   -0.19%     \n==========================================\n  Files         156      155       -1     \n  Lines        9596     9586      -10     \n  Branches      956      955       -1     \n==========================================\n- Hits         4319     4296      -23     \n- Misses       4996     5007      +11     \n- Partials      281      283       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1447?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1447?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `69.57% <ø> (-1.26%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1447/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1446?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1446](https://codecov.io/gh/apache/incubator-celeborn/pull/1446?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (823940d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8584f1049f0bf506774fae7447fa351c61896623?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8584f10) will **increase** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1446      +/-   ##\n==========================================\n+ Coverage   44.79%   44.97%   +0.18%     \n==========================================\n  Files         155      155              \n  Lines        9586     9586              \n  Branches      955      955              \n==========================================\n+ Hits         4293     4310      +17     \n+ Misses       5010     4995      -15     \n+ Partials      283      281       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1446/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @pan3793 @waitinfuture @RexXiong 

ping @pan3793 @waitinfuture @FMX @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1444?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1444](https://codecov.io/gh/apache/incubator-celeborn/pull/1444?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ec25c4b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6830cb61efb09a1bbeb1ee8a6f54e92528339e8d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6830cb6) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1444   +/-   ##\n=======================================\n  Coverage   44.76%   44.76%           \n=======================================\n  Files         156      156           \n  Lines        9580     9580           \n  Branches      956      956           \n=======================================\n  Hits         4288     4288           \n  Misses       5009     5009           \n  Partials      283      283           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong

ping @FMX @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1442?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1442](https://codecov.io/gh/apache/incubator-celeborn/pull/1442?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4a5897c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6378a386d04e57325af082b324bfd7069416080f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6378a38) will **increase** coverage by `0.26%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1442      +/-   ##\n==========================================\n+ Coverage   44.76%   45.01%   +0.26%     \n==========================================\n  Files         156      156              \n  Lines        9572     9596      +24     \n  Branches      956      956              \n==========================================\n+ Hits         4284     4319      +35     \n+ Misses       5005     4996       -9     \n+ Partials      283      281       -2     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1442/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @pan3793 

Should update Grafana dashboard as well?

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1441?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1441](https://codecov.io/gh/apache/incubator-celeborn/pull/1441?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (26e8b9e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2d04850dd16f2d4a0e675fd937c0a5ba104bdb12?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2d04850) will **decrease** coverage by `0.96%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1441      +/-   ##\n==========================================\n- Coverage   45.70%   44.73%   -0.96%     \n==========================================\n  Files         167      156      -11     \n  Lines       10531     9573     -958     \n  Branches     1044      956      -88     \n==========================================\n- Hits         4812     4282     -530     \n+ Misses       5384     5007     -377     \n+ Partials      335      284      -51     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1441?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [16 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1441/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @waitinfuture @FMX 

ISSUE already fixed in the master branch. Close it

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1439?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1439](https://codecov.io/gh/apache/incubator-celeborn/pull/1439?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (26859a8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7937d96226810f25e37f7e91ab4bf9aa70888339?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7937d96) will **decrease** coverage by `0.82%`.\n> The diff coverage is `60.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1439      +/-   ##\n==========================================\n- Coverage   45.70%   44.88%   -0.82%     \n==========================================\n  Files         167      156      -11     \n  Lines       10531     9572     -959     \n  Branches     1044      956      -88     \n==========================================\n- Hits         4812     4295     -517     \n+ Misses       5385     4996     -389     \n+ Partials      334      281      -53     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1439?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ava/org/apache/celeborn/common/util/JavaUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1439?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9KYXZhVXRpbHMuamF2YQ==) | `45.82% <55.56%> (+0.52%)` | :arrow_up: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1439?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.58% <100.00%> (ø)` | |\n\n... and [13 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1439/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1438?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1438](https://codecov.io/gh/apache/incubator-celeborn/pull/1438?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b2ec13f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1438      +/-   ##\n==========================================\n+ Coverage   45.54%   45.59%   +0.06%     \n==========================================\n  Files         167      167              \n  Lines       10531    10531              \n  Branches     1044     1044              \n==========================================\n+ Hits         4795     4801       +6     \n+ Misses       5399     5394       -5     \n+ Partials      337      336       -1     \n```\n\n\n[see 4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1438/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

BTW, does the master have similar issue?

> yes. master has the same issue.\r\n\r\nbetter to change as well

> > yes. master has the same issue.\r\n> \r\n> better to change as well\r\n\r\nok, it has been changed

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1437?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1437](https://codecov.io/gh/apache/incubator-celeborn/pull/1437?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (db2c743) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1437   +/-   ##\n=======================================\n  Coverage   45.54%   45.54%           \n=======================================\n  Files         167      167           \n  Lines       10531    10531           \n  Branches     1044     1044           \n=======================================\n  Hits         4795     4795           \n+ Misses       5399     5397    -2     \n- Partials      337      339    +2     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1437/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

missing change in `sbin/start-master.sh`?

> missing change in `sbin/start-master.sh`?\r\n\r\nyes, it should be included\r\n

ping @pan3793 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1436?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1436](https://codecov.io/gh/apache/incubator-celeborn/pull/1436?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9a5d39) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1436      +/-   ##\n==========================================\n+ Coverage   45.54%   45.55%   +0.01%     \n==========================================\n  Files         167      167              \n  Lines       10531    10531              \n  Branches     1044     1044              \n==========================================\n+ Hits         4795     4796       +1     \n+ Misses       5399     5398       -1     \n  Partials      337      337              \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1436/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

What cachedLeaderPeerRpcEndpoint will return when client connect to the follower? (Perhaps We would better keep them same style) @cfmcgrady 

> What cachedLeaderPeerRpcEndpoint will return when client connect to the follower? (Perhaps We would better keep them same style) @cfmcgrady\r\n\r\nAgreed. btw, do we have any quick way to check this value?

> > What cachedLeaderPeerRpcEndpoint will return when client connect to the follower? (Perhaps We would better keep them same style) @cfmcgrady\r\n> \r\n> Agreed. btw, do we have any quick way to check this value?\r\n\r\nconnect to the follower directly, then you would find the suggest leader address return for client \r\n\r\n>  private boolean shouldRetry(@Nullable RpcEndpointRef oldRef, Throwable e) {\r\n    // It will always throw rss exception , so we need to get the cause\r\n    // \

have verified @RexXiong \r\n\r\n```\r\n23/04/19 11:51:57,095 INFO [main] RssHARetryClient: connect to master 192.168.1.2:9097.\r\n23/04/19 11:51:57,095 INFO [app-heartbeat] RssHARetryClient: connect to master 192.168.1.2:9097.\r\n23/04/19 11:51:57,202 INFO [app-heartbeat] RssHARetryClient: Fail over to master 192.168.1.4:9097.\r\n23/04/19 11:51:57,205 INFO [main] RssHARetryClient: Fail over to master 192.168.1.4:9097.\r\n```

> have verified @RexXiong\r\n> \r\n> ```\r\n> 23/04/19 11:51:57,095 INFO [main] RssHARetryClient: connect to master 192.168.1.2:9097.\r\n> 23/04/19 11:51:57,095 INFO [app-heartbeat] RssHARetryClient: connect to master 192.168.1.2:9097.\r\n> 23/04/19 11:51:57,202 INFO [app-heartbeat] RssHARetryClient: Fail over to master 192.168.1.4:9097.\r\n> 23/04/19 11:51:57,205 INFO [main] RssHARetryClient: Fail over to master 192.168.1.4:9097.\r\n> ```\r\n\r\nThanks. LGTM! 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1435](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9a25931) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8be82548e1eb502423d305a63021400a8b21c547?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be8254) will **increase** coverage by `0.26%`.\n> The diff coverage is `71.02%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1435      +/-   ##\n==========================================\n+ Coverage   45.54%   45.79%   +0.26%     \n==========================================\n  Files         167      168       +1     \n  Lines       10531    10582      +51     \n  Branches     1044     1047       +3     \n==========================================\n+ Hits         4795     4845      +50     \n  Misses       5399     5399              \n- Partials      337      338       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/server/MapDataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.46% <60.00%> (+0.46%)` | :arrow_up: |\n| [...born/common/network/server/MapPartitionWorker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwUGFydGl0aW9uV29ya2VyLmphdmE=) | `62.23% <62.23%> (ø)` | |\n| [...leborn/common/network/server/MapDataPartition.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvbi5qYXZh) | `71.32% <85.72%> (+0.68%)` | :arrow_up: |\n| [...orn/common/network/server/CreditStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ3JlZGl0U3RyZWFtTWFuYWdlci5qYXZh) | `77.52% <100.00%> (-1.55%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.96% <100.00%> (-0.01%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1435/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

ping @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1434?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1434](https://codecov.io/gh/apache/incubator-celeborn/pull/1434?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1530753) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/412d10b7dcb48c72a38916b074a94fe224f01460?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (412d10b) will **decrease** coverage by `0.15%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1434      +/-   ##\n==========================================\n- Coverage   45.73%   45.58%   -0.15%     \n==========================================\n  Files         167      167              \n  Lines       10523    10523              \n  Branches     1047     1047              \n==========================================\n- Hits         4812     4796      -16     \n- Misses       5378     5391      +13     \n- Partials      333      336       +3     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1434/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1433?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1433](https://codecov.io/gh/apache/incubator-celeborn/pull/1433?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (04155ea) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ecafbf41fc215b0f351aed0f7587e31e5fd749e6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ecafbf4) will **decrease** coverage by `0.15%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1433      +/-   ##\n==========================================\n- Coverage   45.75%   45.59%   -0.15%     \n==========================================\n  Files         167      167              \n  Lines       10507    10508       +1     \n  Branches     1047     1047              \n==========================================\n- Hits         4806     4790      -16     \n- Misses       5368     5382      +14     \n- Partials      333      336       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1433?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1433?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `29.12% <0.00%> (-0.37%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1433/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1432?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1432](https://codecov.io/gh/apache/incubator-celeborn/pull/1432?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2eaad72) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ecafbf41fc215b0f351aed0f7587e31e5fd749e6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ecafbf4) will **decrease** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1432      +/-   ##\n==========================================\n- Coverage   45.75%   45.55%   -0.19%     \n==========================================\n  Files         167      167              \n  Lines       10507    10507              \n  Branches     1047     1047              \n==========================================\n- Hits         4806     4785      -21     \n- Misses       5368     5385      +17     \n- Partials      333      337       +4     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1432/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1430?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1430](https://codecov.io/gh/apache/incubator-celeborn/pull/1430?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b82a8aa) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fb7b311c898a46874b7168b73c3178e2d6210164?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fb7b311) will **increase** coverage by `0.28%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1430      +/-   ##\n==========================================\n+ Coverage   45.39%   45.67%   +0.28%     \n==========================================\n  Files         165      165              \n  Lines       10519    10519              \n  Branches     1049     1049              \n==========================================\n+ Hits         4774     4803      +29     \n+ Misses       5409     5383      -26     \n+ Partials      336      333       -3     \n```\n\n\n[see 4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1430/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @boneanxs  cc @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1428?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1428](https://codecov.io/gh/apache/incubator-celeborn/pull/1428?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (71f6e7c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6378a386d04e57325af082b324bfd7069416080f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6378a38) will **increase** coverage by `0.06%`.\n> The diff coverage is `87.50%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1428      +/-   ##\n==========================================\n+ Coverage   44.76%   44.81%   +0.06%     \n==========================================\n  Files         156      156              \n  Lines        9572     9588      +16     \n  Branches      956      956              \n==========================================\n+ Hits         4284     4296      +12     \n- Misses       5005     5008       +3     \n- Partials      283      284       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1428?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1428?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.92% <87.50%> (+0.01%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1428/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

In this PR, StorageManager.onTrim will also not be called, is this what we want?

> In this PR, StorageManager.onTrim will also not be called, is this what we want?\r\n\r\nHow about the current code? We may need a suitable interval conf.

> onControl trigger too much `onTrim` action cause cpu re\r\n\r\nHow is the flame graph after this PR?

```\r\n@Test\r\npublic void testListener() {\r\n  final List<MemoryManager.MemoryPressureListener> memoryPressureListeners = new ArrayList<>();\r\n  memoryPressureListeners.add(new MemoryManager.MemoryPressureListener() {\r\n    @Override\r\n    public void onPause(String moduleName) {}\r\n\r\n    @Override\r\n    public void onResume(String moduleName) {}\r\n\r\n    @Override\r\n    public void onTrim() {\r\n      System.out.println("Trim 1");\r\n    }\r\n  });\r\n  memoryPressureListeners.add(new MemoryManager.MemoryPressureListener() {\r\n    @Override\r\n    public void onPause(String moduleName) {}\r\n\r\n    @Override\r\n    public void onResume(String moduleName) {}\r\n\r\n    @Override\r\n    public void onTrim() {\r\n      System.out.println("Trim push");\r\n    }\r\n  });\r\n  memoryPressureListeners.add(new MemoryManager.MemoryPressureListener() {\r\n    @Override\r\n    public void onPause(String moduleName) {}\r\n\r\n    @Override\r\n    public void onResume(String moduleName) {}\r\n\r\n    @Override\r\n    public void onTrim() {\r\n      System.out.println("Trim replicate");\r\n    }\r\n  });\r\n\r\n  memoryPressureListeners.forEach(MemoryManager.MemoryPressureListener::onTrim);\r\n}\r\n```\r\n\r\nResult\r\n```\r\nTrim 1\r\nTrim push\r\nTrim replicate\r\n```\r\n\r\nStorageManager will execute onTrim before ChannelsLimiter.

ping @FMX @RexXiong please take a review

Regression has been completed successfully.

ping @waitinfuture @FMX

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1427?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1427](https://codecov.io/gh/apache/incubator-celeborn/pull/1427?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (35919a7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3a2136226558f24093fbee8ee785b4f48d1741cc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3a21362) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1427      +/-   ##\n==========================================\n+ Coverage   45.52%   45.56%   +0.04%     \n==========================================\n  Files         165      165              \n  Lines       10519    10493      -26     \n  Branches     1049     1045       -4     \n==========================================\n- Hits         4788     4780       -8     \n+ Misses       5397     5379      -18     \n  Partials      334      334              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1427?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1427?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <ø> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1427/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1426?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1426](https://codecov.io/gh/apache/incubator-celeborn/pull/1426?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (611f917) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3a2136226558f24093fbee8ee785b4f48d1741cc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3a21362) will **decrease** coverage by `0.08%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1426      +/-   ##\n==========================================\n- Coverage   45.52%   45.44%   -0.08%     \n==========================================\n  Files         165      165              \n  Lines       10519    10519              \n  Branches     1049     1049              \n==========================================\n- Hits         4788     4779       -9     \n- Misses       5397     5405       +8     \n- Partials      334      335       +1     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1426/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1425](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (33e39ba) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9cccfc98721096d99a4e043c2eb0a1a6a53bae4f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9cccfc9) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1425      +/-   ##\n==========================================\n- Coverage   45.38%   45.34%   -0.03%     \n==========================================\n  Files         165      167       +2     \n  Lines       10531    10533       +2     \n  Branches     1050     1051       +1     \n==========================================\n- Hits         4778     4775       -3     \n- Misses       5417     5421       +4     \n- Partials      336      337       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/server/MapDataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.11% <0.00%> (-0.32%)` | :arrow_down: |\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/exception/FileCorruptedException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9GaWxlQ29ycnVwdGVkRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...mmon/exception/PartitionUnRetryAbleException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9QYXJ0aXRpb25VblJldHJ5QWJsZUV4Y2VwdGlvbi5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1425/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Seems this PR only wraps IOException to PartitionUnRetryAbleException, then why not just use IOException instead of PartitionUnRetryAbleException?

> Seems this PR only wraps IOException to PartitionUnRetryAbleException, then why not just use IOException instead of PartitionUnRetryAbleException?\r\n\r\nClient may encounter other IOException like Network error, PartitionUnRetryAbleException means the data can not used anymore by server side knowledge.

How about current? @waitinfuture @FMX 

I wonder if check for Exception type is a good style.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1424](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (02da60a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9cccfc98721096d99a4e043c2eb0a1a6a53bae4f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9cccfc9) will **increase** coverage by `0.32%`.\n> The diff coverage is `75.76%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1424      +/-   ##\n==========================================\n+ Coverage   45.38%   45.69%   +0.32%     \n==========================================\n  Files         165      167       +2     \n  Lines       10531    10531              \n  Branches     1050     1044       -6     \n==========================================\n+ Hits         4778     4811      +33     \n+ Misses       5417     5384      -33     \n  Partials      336      336              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/server/MapDataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.00% <0.00%> (-0.43%)` | :arrow_down: |\n| [...born/common/network/server/memory/BufferQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclF1ZXVlLmphdmE=) | `65.72% <ø> (-2.28%)` | :arrow_down: |\n| [...orn/common/network/server/CreditStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ3JlZGl0U3RyZWFtTWFuYWdlci5qYXZh) | `77.52% <72.00%> (-4.98%)` | :arrow_down: |\n| [...leborn/common/network/server/MapDataPartition.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvbi5qYXZh) | `70.64% <100.00%> (+0.72%)` | :arrow_up: |\n\n... and [13 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1424/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

better to raise another pr to Refine the fetch thread model. And Now sendData/readBuffers can use only one same thread to send/read.

> only\r\n\r\n+1, and sendDatas from the same partition reader should be in the same thread

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1422?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1422](https://codecov.io/gh/apache/incubator-celeborn/pull/1422?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01df7fb) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e5722126e9412b70175e7b9377704b1581105c33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e572212) will **increase** coverage by `0.58%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1422      +/-   ##\n==========================================\n+ Coverage   44.91%   45.49%   +0.58%     \n==========================================\n  Files         164      165       +1     \n  Lines       10408    10531     +123     \n  Branches     1056     1050       -6     \n==========================================\n+ Hits         4674     4790     +116     \n- Misses       5395     5408      +13     \n+ Partials      339      333       -6     \n```\n\n\n[see 22 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1422/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture @RexXiong I am not sure if doing like this will cost some risk. Could you take a view?

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1421?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1421](https://codecov.io/gh/apache/incubator-celeborn/pull/1421?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0a3ca22) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e5722126e9412b70175e7b9377704b1581105c33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e572212) will **increase** coverage by `0.48%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1421      +/-   ##\n==========================================\n+ Coverage   44.91%   45.39%   +0.48%     \n==========================================\n  Files         164      165       +1     \n  Lines       10408    10523     +115     \n  Branches     1056     1050       -6     \n==========================================\n+ Hits         4674     4776     +102     \n- Misses       5395     5410      +15     \n+ Partials      339      337       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1421?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1421?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n... and [22 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1421/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

IMO we need to do perf benchmark, say 10,000, 100,000 PartitionLocations

> @waitinfuture @RexXiong I am not sure if doing like this will cost some risk. Could you take a view?\r\n\r\nI thinking Nothing but need compare performance between key type `int(encode)` to `string`.

@waitinfuture @RexXiong Update the test case, pls take a review\r\n

> @waitinfuture @RexXiong Update the test case, pls take a review\r\n\r\nI will test locally

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1420?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1420](https://codecov.io/gh/apache/incubator-celeborn/pull/1420?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e8ee7bd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e5722126e9412b70175e7b9377704b1581105c33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e572212) will **decrease** coverage by `0.32%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1420      +/-   ##\n==========================================\n- Coverage   44.91%   44.59%   -0.32%     \n==========================================\n  Files         164      163       -1     \n  Lines       10408    10315      -93     \n  Branches     1056     1041      -15     \n==========================================\n- Hits         4674     4599      -75     \n+ Misses       5395     5383      -12     \n+ Partials      339      333       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1420?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/rpc/RpcEnv.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1420?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9ScGNFbnYuc2NhbGE=) | `61.91% <ø> (+2.82%)` | :arrow_up: |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1420?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | `16.49% <ø> (-0.06%)` | :arrow_down: |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1420/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX @waitinfuture @nafiyAix 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1419?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1419](https://codecov.io/gh/apache/incubator-celeborn/pull/1419?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f6c4211) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e5722126e9412b70175e7b9377704b1581105c33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e572212) will **increase** coverage by `0.03%`.\n> The diff coverage is `80.65%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1419      +/-   ##\n==========================================\n+ Coverage   44.91%   44.93%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10408    10412       +4     \n  Branches     1056     1058       +2     \n==========================================\n+ Hits         4674     4678       +4     \n- Misses       5395     5396       +1     \n+ Partials      339      338       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1419?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1419?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `38.24% <80.00%> (+1.74%)` | :arrow_up: |\n| [.../apache/celeborn/common/metrics/MetricLabels.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1419?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljTGFiZWxzLnNjYWxh) | `90.00% <100.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1419/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @nafiyAix 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1416?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1416](https://codecov.io/gh/apache/incubator-celeborn/pull/1416?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (31823c8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bbd5d0ef5c07755f22ddeacf462ca563e7e883b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bbd5d0e) will **increase** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1416      +/-   ##\n==========================================\n+ Coverage   45.01%   45.06%   +0.06%     \n==========================================\n  Files         164      164              \n  Lines       10404    10399       -5     \n  Branches     1057     1054       -3     \n==========================================\n+ Hits         4682     4685       +3     \n+ Misses       5382     5376       -6     \n+ Partials      340      338       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1416?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1416?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1416/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@FMX @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1415?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1415](https://codecov.io/gh/apache/incubator-celeborn/pull/1415?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (deef39a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bbd5d0ef5c07755f22ddeacf462ca563e7e883b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bbd5d0e) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1415      +/-   ##\n==========================================\n+ Coverage   45.01%   45.02%   +0.02%     \n==========================================\n  Files         164      164              \n  Lines       10404    10417      +13     \n  Branches     1057     1057              \n==========================================\n+ Hits         4682     4689       +7     \n- Misses       5382     5393      +11     \n+ Partials      340      335       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1415?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1415?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `51.20% <0.00%> (+0.61%)` | :arrow_up: |\n\n... and [7 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1415/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@FMX Update, how about current?

ping @FMX 

Any more suggestion?

<img width="1780" alt="截屏2023-04-14 下午12 03 17" src="https://user-images.githubusercontent.com/46485123/231938756-4c8558e3-6d87-48a0-bd1b-a7ca9f513fb6.png">\r\n\r\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1414](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a231479) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9b2b8a01ec3e6c348a82b4121e4ae58076fbd8ce?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9b2b8a0) will **decrease** coverage by `0.06%`.\n> The diff coverage is `27.28%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1414      +/-   ##\n==========================================\n- Coverage   45.01%   44.95%   -0.06%     \n==========================================\n  Files         164      165       +1     \n  Lines       10405    10410       +5     \n  Branches     1057     1052       -5     \n==========================================\n- Hits         4683     4679       -4     \n- Misses       5385     5390       +5     \n- Partials      337      341       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `19.59% <ø> (+0.21%)` | :arrow_up: |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `25.23% <8.34%> (+1.13%)` | :arrow_up: |\n| [...common/network/server/FileChannelWithPosition.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRmlsZUNoYW5uZWxXaXRoUG9zaXRpb24uamF2YQ==) | `43.75% <43.75%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1414?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `78.88% <75.00%> (+1.41%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1414/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1413?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1413](https://codecov.io/gh/apache/incubator-celeborn/pull/1413?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (be58da5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9b2b8a01ec3e6c348a82b4121e4ae58076fbd8ce?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9b2b8a0) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1413      +/-   ##\n==========================================\n+ Coverage   45.01%   45.05%   +0.04%     \n==========================================\n  Files         164      164              \n  Lines       10405    10398       -7     \n  Branches     1057     1054       -3     \n==========================================\n+ Hits         4683     4684       +1     \n+ Misses       5385     5375      -10     \n- Partials      337      339       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1413?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1413?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `77.84% <0.00%> (+0.37%)` | :arrow_up: |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1413?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.78% <0.00%> (+0.67%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1413/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1412?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1412](https://codecov.io/gh/apache/incubator-celeborn/pull/1412?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ec3c57a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bbd5d0ef5c07755f22ddeacf462ca563e7e883b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bbd5d0e) will **increase** coverage by `0.04%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1412      +/-   ##\n==========================================\n+ Coverage   45.01%   45.04%   +0.04%     \n==========================================\n  Files         164      164              \n  Lines       10404    10405       +1     \n  Branches     1057     1057              \n==========================================\n+ Hits         4682     4686       +4     \n+ Misses       5382     5381       -1     \n+ Partials      340      338       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1412?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1412?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `61.75% <100.00%> (+1.61%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1412/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1411?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1411](https://codecov.io/gh/apache/incubator-celeborn/pull/1411?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (09141af) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c3e8189e629ec6b125f663210dc3a0c41c5b3641?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c3e8189) will **decrease** coverage by `0.00%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1411      +/-   ##\n==========================================\n- Coverage   45.01%   45.00%   -0.00%     \n==========================================\n  Files         164      164              \n  Lines       10404    10404              \n  Branches     1057     1057              \n==========================================\n- Hits         4682     4681       -1     \n- Misses       5381     5383       +2     \n+ Partials      341      340       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1411?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.29% <100.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1411/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1410?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1410](https://codecov.io/gh/apache/incubator-celeborn/pull/1410?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bd6f751) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/a8926403533f819c02014c7f1711b555468f5a72?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a892640) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1410      +/-   ##\n==========================================\n- Coverage   45.04%   44.99%   -0.04%     \n==========================================\n  Files         164      164              \n  Lines       10404    10404              \n  Branches     1057     1057              \n==========================================\n- Hits         4685     4680       -5     \n- Misses       5379     5383       +4     \n- Partials      340      341       +1     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1410/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Looks like there is a misspelling "celeborn.shuffle.chuck.size" ,I think you can correct it.\r\n`\r\n  val SHUFFLE_CHUCK_SIZE: ConfigEntry[Long] =\r\n    buildConf("celeborn.shuffle.chuck.size")\r\n`

Looks like angers fix the typo, so there is no need to change the config name.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1409?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1409](https://codecov.io/gh/apache/incubator-celeborn/pull/1409?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d391915) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c3e8189e629ec6b125f663210dc3a0c41c5b3641?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c3e8189) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1409      +/-   ##\n==========================================\n+ Coverage   45.01%   45.05%   +0.05%     \n==========================================\n  Files         164      164              \n  Lines       10404    10404              \n  Branches     1057     1057              \n==========================================\n+ Hits         4682     4687       +5     \n+ Misses       5381     5378       -3     \n+ Partials      341      339       -2     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1409/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@RexXiong @waitinfuture 

Agree with the merge Idea, and shell we consider introducing a workerListener interface to monitor worker status changes, and then we can do something. In [CELEBORN-479](https://github.com/apache/incubator-celeborn/pull/1405) I need register a worker listener to monitor unavailable workers as i cannot pass resourceTracker(belong to Flink plugin) to lifecycleManagers. If that we can have shutdownWorkerListener for CommitManager, UnknownWorkerListener for Flink, workerFailureListener for blackList etc.  What do you think?\r\n\r\n

> Agree with the merge Idea, and shell we consider introducing a workerListener interface to monitor worker status changes, and then we can do something. In [CELEBORN-479](https://github.com/apache/incubator-celeborn/pull/1405) I need register a worker listener to monitor unavailable workers as i cannot pass resourceTracker(belong to Flink plugin) to lifecycleManagers. If that we can have shutdownWorkerListener for CommitManager, UnknownWorkerListener for Flink, workerFailureListener for blackList etc. What do you think?\r\n\r\nSGTM， we can add this listener later, it will make the code more clear\r\n

ping @RexXiong @waitinfuture 

> ping @RexXiong @waitinfuture\r\n\r\nI will review this PR late today

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1408](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2011886) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c3e8189e629ec6b125f663210dc3a0c41c5b3641?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c3e8189) will **decrease** coverage by `0.09%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1408      +/-   ##\n==========================================\n- Coverage   45.01%   44.91%   -0.09%     \n==========================================\n  Files         164      164              \n  Lines       10404    10408       +4     \n  Branches     1057     1056       -1     \n==========================================\n- Hits         4682     4674       -8     \n- Misses       5381     5395      +14     \n+ Partials      341      339       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.28% <ø> (-0.01%)` | :arrow_down: |\n| [...che/celeborn/common/metrics/source/RPCSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1JQQ1NvdXJjZS5zY2FsYQ==) | `59.78% <ø> (+0.43%)` | :arrow_up: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1408?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.53% <0.00%> (-0.04%)` | :arrow_down: |\n\n... and [6 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1408/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture @RexXiong How about current? I am wondering if I should remove `shuttingWorkers` in GetBlacklistResponse...

> @waitinfuture @RexXiong How about current? I am wondering if I should remove `shuttingWorkers` in GetBlacklistResponse...\r\n\r\nI agree to remove it directly, as we do not need to maintain compatibility during major version development.

> > @waitinfuture @RexXiong How about current? I am wondering if I should remove `shuttingWorkers` in GetBlacklistResponse...\r\n> \r\n> I agree to remove it directly, as we do not need to maintain compatibility during major version development.\r\n\r\nDone\r\n

Any more suggestion? ping @waitinfuture @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1407](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5ca1cdf) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/32b497973e4fff75aeaa54eacdbbba4633a165ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (32b4979) will **increase** coverage by `0.57%`.\n> The diff coverage is `69.85%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1407      +/-   ##\n==========================================\n+ Coverage   44.77%   45.33%   +0.57%     \n==========================================\n  Files         163      165       +2     \n  Lines       10319    10531     +212     \n  Branches     1043     1050       +7     \n==========================================\n+ Hits         4619     4773     +154     \n- Misses       5368     5421      +53     \n- Partials      332      337       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `49.30% <0.00%> (-6.25%)` | :arrow_down: |\n| [...common/network/server/memory/RecyclableBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlY3ljbGFibGVCdWZmZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `63.21% <0.00%> (ø)` | |\n| [.../common/network/server/MapDataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.44% <19.52%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `71.70% <64.71%> (+10.48%)` | :arrow_up: |\n| [...born/common/network/server/memory/BufferQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclF1ZXVlLmphdmE=) | `68.00% <68.00%> (ø)` | |\n| [...leborn/common/network/server/MapDataPartition.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvTWFwRGF0YVBhcnRpdGlvbi5qYXZh) | `69.92% <69.92%> (ø)` | |\n| [...ommon/network/server/memory/ReadBufferRequest.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJSZXF1ZXN0LmphdmE=) | `88.89% <75.00%> (-2.77%)` | :arrow_down: |\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `58.37% <80.31%> (+7.79%)` | :arrow_up: |\n| [...orn/common/network/server/CreditStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ3JlZGl0U3RyZWFtTWFuYWdlci5qYXZh) | `80.84% <80.84%> (ø)` | |\n| ... and [2 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1407?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1407/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

The memory management of MapPartition reader is quite complex, could you open a CPIP describing the detailed design of it?

ping @waitinfuture @RexXiong @FMX 

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1406](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (e1a8602) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/0bf841006aa7d97dd14cdc1ffba04f371a6b31fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (0bf8410) will **decrease** coverage by `0.05%`.\n> The diff coverage is `82.36%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1406      +/-   ##\n==========================================\n- Coverage   45.56%   45.50%   -0.05%     \n==========================================\n  Files         158      158              \n  Lines        9830     9847      +17     \n  Branches      968      968              \n==========================================\n+ Hits         4478     4480       +2     \n- Misses       5054     5066      +12     \n- Partials      298      301       +3     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `69.48% <66.67%> (-0.09%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.13% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1406/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

> \r\n\r\nShall we add a timeout for blacklisted worker?

@waitinfuture How about current?

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

It seems like we are mixing up the terms "excludedWorker" and "blacklist". \r\n\r\nFirst of all, I don\

> \r\n\r\n+1, shall we do code refactor before further related PRs?

After this pr I will make a new pr to unify the blacklist and execluded related configuration name.\r\nAny more suggestion? @pan3793 @waitinfuture 

Any more suggestion? @pan3793 @RexXiong @waitinfuture 

Before\r\n<img width="1791" alt="截屏2023-06-13 下午7 05 53" src="https://github.com/apache/incubator-celeborn/assets/46485123/307d17a4-5706-4326-834f-358297c04741">\r\n\r\nAfter\r\n<img width="1054" alt="截屏2023-06-13 下午7 04 50" src="https://github.com/apache/incubator-celeborn/assets/46485123/0460bfa5-12d2-42cb-933f-e5abda0d8ac7">\r\n\r\nThe executor\

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1405](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c7af17e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/938aec0e9f5af4e146634903b427c0c17555e384?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (938aec0) will **decrease** coverage by `0.13%`.\n> The diff coverage is `66.67%`.\n\n> :exclamation: Current head c7af17e differs from pull request most recent head eb4cf40. Consider uploading reports for the commit eb4cf40 to get more accurate results\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1405      +/-   ##\n==========================================\n- Coverage   45.56%   45.43%   -0.13%     \n==========================================\n  Files         167      165       -2     \n  Lines       10508    10528      +20     \n  Branches     1047     1049       +2     \n==========================================\n- Hits         4787     4782       -5     \n- Misses       5385     5411      +26     \n+ Partials      336      335       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `63.21% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.92% <85.72%> (-<0.01%)` | :arrow_down: |\n\n... and [11 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1405/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture I merge ShuffleWorkerStatusListener with ShuffleResourceTracker, and change untrack partitions by shuffle to  job for we can notify all untracking partitions to flink framework at one time.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1404?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1404](https://codecov.io/gh/apache/incubator-celeborn/pull/1404?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0ca447c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b4f8ab19bd2b7c46363dcd9293790bc6f40501b4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b4f8ab1) will **decrease** coverage by `0.19%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1404      +/-   ##\n==========================================\n- Coverage   45.01%   44.82%   -0.19%     \n==========================================\n  Files         164      155       -9     \n  Lines       10393     9587     -806     \n  Branches     1057      955     -102     \n==========================================\n- Hits         4677     4296     -381     \n+ Misses       5376     5008     -368     \n+ Partials      340      283      -57     \n```\n\n\n[see 37 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1404/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1403?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1403](https://codecov.io/gh/apache/incubator-celeborn/pull/1403?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d0f49b3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b4f8ab19bd2b7c46363dcd9293790bc6f40501b4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b4f8ab1) will **decrease** coverage by `0.34%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1403      +/-   ##\n==========================================\n- Coverage   45.01%   44.66%   -0.34%     \n==========================================\n  Files         164      164              \n  Lines       10393    10393              \n  Branches     1057     1057              \n==========================================\n- Hits         4677     4641      -36     \n- Misses       5376     5413      +37     \n+ Partials      340      339       -1     \n```\n\n\n[see 6 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1403/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

ping @AngersZhuuuu could you take a look at this PR?

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1402?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1402](https://codecov.io/gh/apache/incubator-celeborn/pull/1402?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b489114) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/61416a828d59dee01e88b4901a3850896050144b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (61416a8) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1402      +/-   ##\n==========================================\n- Coverage   45.03%   45.01%   -0.02%     \n==========================================\n  Files         164      164              \n  Lines       10386    10393       +7     \n  Branches     1056     1057       +1     \n==========================================\n+ Hits         4676     4677       +1     \n- Misses       5370     5376       +6     \n  Partials      340      340              \n```\n\n\n[see 6 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1402/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Title should be `[CELEBORN-495] Add a notifyLogFailed method implementation in StateMachine` ?\r\ncc @waitinfuture 

@xunxunmimi5577 Pls add more content to PR desc about this fix.

@xunxunmimi5577 you can use \r\n\\`\\`\\`\r\n\\`\\`\\`\r\nfor code block

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1401?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1401](https://codecov.io/gh/apache/incubator-celeborn/pull/1401?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (12eeb56) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/d58feef3a7cb85921038feec61518b14ef735685?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d58feef) will **increase** coverage by `0.13%`.\n> The diff coverage is `63.64%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1401      +/-   ##\n==========================================\n+ Coverage   44.91%   45.03%   +0.13%     \n==========================================\n  Files         164      164              \n  Lines       10386    10387       +1     \n  Branches     1056     1056              \n==========================================\n+ Hits         4664     4677      +13     \n+ Misses       5380     5370      -10     \n+ Partials      342      340       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1401?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1401?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `50.87% <63.64%> (-0.87%)` | :arrow_down: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1401/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX please take a look

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1400?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1400](https://codecov.io/gh/apache/incubator-celeborn/pull/1400?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1390ec9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6cee85748d770afb9e0de5f36c42b5b446077e8e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6cee857) will **increase** coverage by `15.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff              @@\n##               main    #1400       +/-   ##\n=============================================\n+ Coverage     29.89%   45.01%   +15.13%     \n=============================================\n  Files           223      164       -59     \n  Lines         18664    10386     -8278     \n  Branches       1987     1056      -931     \n=============================================\n- Hits           5577     4674      -903     \n+ Misses        12697     5371     -7326     \n+ Partials        390      341       -49     \n```\n\n\n[see 127 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1400/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This is duplicated with https://github.com/apache/incubator-celeborn/pull/1401

ping @waitinfuture @RexXiong @FMX @pan3793 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1399](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (84ebc0a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/d58feef3a7cb85921038feec61518b14ef735685?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d58feef) will **increase** coverage by `0.03%`.\n> The diff coverage is `83.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1399      +/-   ##\n==========================================\n+ Coverage   44.91%   44.94%   +0.03%     \n==========================================\n  Files         164      164              \n  Lines       10386    10404      +18     \n  Branches     1056     1057       +1     \n==========================================\n+ Hits         4664     4675      +11     \n- Misses       5380     5389       +9     \n+ Partials      342      340       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `19.39% <0.00%> (-0.08%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `96.16% <100.00%> (+0.16%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1399?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `86.34% <100.00%> (+0.05%)` | :arrow_up: |\n\n... and [7 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1399/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture any more suggestion

Given that we already possess a `WorkerStatusTracker` to monitor the status of workers, we can leverage the existing functionality of the `WorkerStatusTracker` to streamline the implementation of the blacklist logic? @AngersZhuuuu @waitinfuture 

Yea, we have thought about such things but plat to do this later. If you want to do it, just do it.

It worth to write a blog to explain how the blacklist mechanism works :)

> It worth to write a blog to explain how the blacklist mechanism works :)\r\n\r\nYeah, and lots of other modules : )

thanks for the detailed explanation.

@waitinfuture PR regarding logging the exceptions that I had brought up to you a while back :) 

@akpatnam25 please run `dev/reformat` to fix the code style

> @waitinfuture PR regarding logging the exceptions that I had brought up to you a while back :)\r\n\r\nHi @akpatnam25 ,thanks for the PR! LGTM except the style check, you can run ./dev/reformat and the script will auto-format the code :)

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1398?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1398](https://codecov.io/gh/apache/incubator-celeborn/pull/1398?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (74777f9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3dd649f5b4cf4afaf2126dad7609fbcfbd07ab94?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3dd649f) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1398      +/-   ##\n============================================\n- Coverage     29.94%   29.90%   -0.04%     \n+ Complexity      920      916       -4     \n============================================\n  Files           223      223              \n  Lines         18678    18679       +1     \n  Branches       1989     1989              \n============================================\n- Hits           5592     5584       -8     \n- Misses        12700    12703       +3     \n- Partials        386      392       +6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1398?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/read/RssInputStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1398?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Sc3NJbnB1dFN0cmVhbS5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1398/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> > @waitinfuture PR regarding logging the exceptions that I had brought up to you a while back :)\r\n> \r\n> Hi @akpatnam25 ,thanks for the PR! LGTM except the style check, you can run ./dev/reformat and the script will auto-format the code :)\r\n\r\nCool, thanks for the pointer. Just ran it. 

ping @FMX 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1397?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1397](https://codecov.io/gh/apache/incubator-celeborn/pull/1397?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c6d1fea) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cbe65a7e2e25b81601c996fa12ac897c3b4ae9fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cbe65a7) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1397      +/-   ##\n============================================\n+ Coverage     29.85%   29.90%   +0.05%     \n- Complexity      913      915       +2     \n============================================\n  Files           223      223              \n  Lines         18664    18674      +10     \n  Branches       1987     1989       +2     \n============================================\n+ Hits           5571     5583      +12     \n+ Misses        12699    12698       -1     \n+ Partials        394      393       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1397?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1397?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.44% <ø> (+3.20%)` | :arrow_up: |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1397/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1396?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1396](https://codecov.io/gh/apache/incubator-celeborn/pull/1396?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (699ec8f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cbe65a7e2e25b81601c996fa12ac897c3b4ae9fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cbe65a7) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1396      +/-   ##\n============================================\n+ Coverage     29.85%   29.91%   +0.06%     \n- Complexity      913      919       +6     \n============================================\n  Files           223      223              \n  Lines         18664    18678      +14     \n  Branches       1987     1989       +2     \n============================================\n+ Hits           5571     5586      +15     \n- Misses        12699    12702       +3     \n+ Partials        394      390       -4     \n```\n\n\n[see 7 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1396/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @zhongqiangczq 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1395](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8fb21e8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb19ed1c66a8ece834fc6aea10b8b57627d2eec6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb19ed1) will **increase** coverage by `15.10%`.\n> The diff coverage is `6.67%`.\n\n> :exclamation: Current head 8fb21e8 differs from pull request most recent head 20f1d35. Consider uploading reports for the commit 20f1d35 to get more accurate results\n\n```diff\n@@              Coverage Diff              @@\n##               main    #1395       +/-   ##\n=============================================\n+ Coverage     29.92%   45.02%   +15.10%     \n=============================================\n  Files           223      164       -59     \n  Lines         18660    10393     -8267     \n  Branches       1987     1057      -930     \n=============================================\n- Hits           5583     4678      -905     \n+ Misses        12689     5376     -7313     \n+ Partials        388      339       -49     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.57% <0.00%> (+1.44%)` | :arrow_up: |\n| [...rg/apache/celeborn/server/common/HttpService.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vSHR0cFNlcnZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/server/common/http/HttpRequestHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c2VydmljZS9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2NlbGVib3JuL3NlcnZlci9jb21tb24vaHR0cC9IdHRwUmVxdWVzdEhhbmRsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1395?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `63.21% <100.00%> (+63.21%)` | :arrow_up: |\n\n... and [122 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1395/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX @waitinfuture @pan3793 Could you take a look?\r\n

cd @RexXiong 

Any more suggestion?

For such changes, maybe we should introduce a migration guide part.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1394?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1394](https://codecov.io/gh/apache/incubator-celeborn/pull/1394?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9a847c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cbe65a7e2e25b81601c996fa12ac897c3b4ae9fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cbe65a7) will **increase** coverage by `0.05%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1394      +/-   ##\n============================================\n+ Coverage     29.85%   29.90%   +0.05%     \n- Complexity      913      917       +4     \n============================================\n  Files           223      223              \n  Lines         18664    18664              \n  Branches       1987     1987              \n============================================\n+ Hits           5571     5580       +9     \n+ Misses        12699    12696       -3     \n+ Partials        394      388       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1394?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1394?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.64% <100.00%> (+0.05%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1394/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> For such changes, maybe we should introduce a migration guide part.\r\n\r\nWill add in the website

> > For such changes, maybe we should introduce a migration guide part.\r\n> \r\n> Will add in the website\r\n\r\nAdded "migration guide" in website https://celeborn.apache.org/docs/latest/migration/ , merging this PR to main.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1393?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1393](https://codecov.io/gh/apache/incubator-celeborn/pull/1393?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f482e15) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6cee85748d770afb9e0de5f36c42b5b446077e8e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6cee857) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1393      +/-   ##\n============================================\n+ Coverage     29.89%   29.90%   +0.02%     \n- Complexity      917      919       +2     \n============================================\n  Files           223      223              \n  Lines         18664    18664              \n  Branches       1987     1987              \n============================================\n+ Hits           5577     5580       +3     \n+ Misses        12697    12695       -2     \n+ Partials        390      389       -1     \n```\n\n\n[see 1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1393/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1392?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1392](https://codecov.io/gh/apache/incubator-celeborn/pull/1392?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c31b5f6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb19ed1c66a8ece834fc6aea10b8b57627d2eec6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb19ed1) will **increase** coverage by `0.17%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1392      +/-   ##\n============================================\n+ Coverage     29.92%   30.09%   +0.17%     \n- Complexity      919      925       +6     \n============================================\n  Files           223      223              \n  Lines         18660    18702      +42     \n  Branches       1987     2000      +13     \n============================================\n+ Hits           5583     5626      +43     \n- Misses        12689    12692       +3     \n+ Partials        388      384       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1392?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1392?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1392/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1391?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1391](https://codecov.io/gh/apache/incubator-celeborn/pull/1391?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8f2923f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb19ed1c66a8ece834fc6aea10b8b57627d2eec6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb19ed1) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1391      +/-   ##\n============================================\n- Coverage     29.92%   29.90%   -0.02%     \n+ Complexity      919      918       -1     \n============================================\n  Files           223      223              \n  Lines         18660    18664       +4     \n  Branches       1987     1987              \n============================================\n- Hits           5583     5580       -3     \n- Misses        12689    12696       +7     \n  Partials        388      388              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1391?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1391?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1391?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `82.25% <0.00%> (-3.19%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1391/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1390?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1390](https://codecov.io/gh/apache/incubator-celeborn/pull/1390?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4b87218) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/acf6fd3bd2bf9d423fd08c915de351ac569ee31b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (acf6fd3) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1390      +/-   ##\n============================================\n+ Coverage     29.84%   29.92%   +0.09%     \n- Complexity      914      919       +5     \n============================================\n  Files           223      223              \n  Lines         18618    18660      +42     \n  Branches       1985     1987       +2     \n============================================\n+ Hits           5554     5582      +28     \n- Misses        12672    12690      +18     \n+ Partials        392      388       -4     \n```\n\n\n[see 33 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1390/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1388?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1388](https://codecov.io/gh/apache/incubator-celeborn/pull/1388?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a933ca7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb19ed1c66a8ece834fc6aea10b8b57627d2eec6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb19ed1) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1388      +/-   ##\n============================================\n- Coverage     29.92%   29.87%   -0.05%     \n+ Complexity      919      913       -6     \n============================================\n  Files           223      223              \n  Lines         18660    18660              \n  Branches       1987     1987              \n============================================\n- Hits           5583     5573      -10     \n- Misses        12689    12694       +5     \n- Partials        388      393       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1388?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1388?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1388/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1387](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (752ebe6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/0d1695abd876881816cefdc1f036faf994adb389?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0d1695a) will **decrease** coverage by `1.36%`.\n> The diff coverage is `78.14%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1387      +/-   ##\n============================================\n- Coverage     29.92%   28.56%   -1.36%     \n+ Complexity      919      867      -52     \n============================================\n  Files           223      225       +2     \n  Lines         18631    18668      +37     \n  Branches       1986     1984       -2     \n============================================\n- Hits           5573     5330     -243     \n- Misses        12671    12971     +300     \n+ Partials        387      367      -20     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ala/org/apache/celeborn/common/util/TestUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGVzdFV0aWxzLmphdmE=) | `10.00% <ø> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.16% <ø> (ø)` | |\n| [...ervice/deploy/worker/fetch/ChunkStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL2ZldGNoL0NodW5rU3RyZWFtTWFuYWdlci5qYXZh) | `71.43% <ø> (ø)` | |\n| [...oy/worker/fetch/credit/MapDataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL2ZldGNoL2NyZWRpdC9NYXBEYXRhUGFydGl0aW9uUmVhZGVyLmphdmE=) | `24.78% <50.00%> (ø)` | |\n| [...e/deploy/worker/fetch/credit/MapDataPartition.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL2ZldGNoL2NyZWRpdC9NYXBEYXRhUGFydGl0aW9uLmphdmE=) | `71.43% <71.43%> (ø)` | |\n| [...eploy/worker/fetch/credit/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1387?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL2ZldGNoL2NyZWRpdC9CdWZmZXJTdHJlYW1NYW5hZ2VyLmphdmE=) | `83.61% <83.61%> (ø)` | |\n\n... and [44 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1387/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

IMO It would be better that we move streamMangers to worker module.

ping @AngersZhuuuu 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1386](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d37f18) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/0d1695abd876881816cefdc1f036faf994adb389?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0d1695a) will **decrease** coverage by `0.02%`.\n> The diff coverage is `21.22%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1386      +/-   ##\n============================================\n- Coverage     29.92%   29.90%   -0.02%     \n+ Complexity      919      917       -2     \n============================================\n  Files           223      223              \n  Lines         18631    18645      +14     \n  Branches       1986     1987       +1     \n============================================\n  Hits           5573     5573              \n- Misses        12671    12682      +11     \n- Partials        387      390       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <ø> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1386?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.59% <87.50%> (+0.03%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1386/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1385](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (75e55c8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb19ed1c66a8ece834fc6aea10b8b57627d2eec6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb19ed1) will **decrease** coverage by `0.00%`.\n> The diff coverage is `22.59%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1385      +/-   ##\n============================================\n- Coverage     29.92%   29.92%   -0.00%     \n+ Complexity      919      918       -1     \n============================================\n  Files           223      223              \n  Lines         18660    18678      +18     \n  Branches       1987     1989       +2     \n============================================\n+ Hits           5583     5588       +5     \n- Misses        12689    12702      +13     \n  Partials        388      388              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `12.01% <0.00%> (-0.30%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1385?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.61% <87.50%> (+0.03%)` | :arrow_up: |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1385/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@pan3793 , your suggessions are good and i have refined the code. Do you have any questions?

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1384?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1384](https://codecov.io/gh/apache/incubator-celeborn/pull/1384?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4b211ab) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/0d1695abd876881816cefdc1f036faf994adb389?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0d1695a) will **decrease** coverage by `0.02%`.\n> The diff coverage is `66.67%`.\n\n> :exclamation: Current head 4b211ab differs from pull request most recent head 2731b16. Consider uploading reports for the commit 2731b16 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1384      +/-   ##\n============================================\n- Coverage     29.92%   29.89%   -0.02%     \n+ Complexity      919      918       -1     \n============================================\n  Files           223      223              \n  Lines         18631    18633       +2     \n  Branches       1986     1986              \n============================================\n- Hits           5573     5569       -4     \n- Misses        12671    12675       +4     \n- Partials        387      389       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1384?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ava/org/apache/celeborn/common/util/JavaUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1384?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9KYXZhVXRpbHMuamF2YQ==) | `42.95% <66.67%> (-0.53%)` | :arrow_down: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1384/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1383](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (083397c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c609c0ebaad0826acbe6612a1a81a2c6583688d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c609c0e) will **decrease** coverage by `0.00%`.\n> The diff coverage is `75.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1383      +/-   ##\n============================================\n- Coverage     29.88%   29.88%   -0.00%     \n+ Complexity      919      917       -2     \n============================================\n  Files           223      223              \n  Lines         18618    18630      +12     \n  Branches       1985     1986       +1     \n============================================\n+ Hits           5563     5566       +3     \n- Misses        12669    12674       +5     \n- Partials        386      390       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `20.10% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.54% <100.00%> (+0.36%)` | :arrow_up: |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.44% <100.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `66.67% <100.00%> (ø)` | |\n| ... and [7 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1383?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1383/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1382?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1382](https://codecov.io/gh/apache/incubator-celeborn/pull/1382?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f177fae) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/acf6fd3bd2bf9d423fd08c915de351ac569ee31b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (acf6fd3) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1382      +/-   ##\n============================================\n+ Coverage     29.84%   29.87%   +0.04%     \n- Complexity      914      917       +3     \n============================================\n  Files           223      223              \n  Lines         18618    18619       +1     \n  Branches       1985     1985              \n============================================\n+ Hits           5554     5561       +7     \n  Misses        12672    12672              \n+ Partials        392      386       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1382?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1382?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.39% <0.00%> (-0.13%)` | :arrow_down: |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1382/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

thanks @pan3793  updated

cc @pan3793 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1381](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (732f40f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/acf6fd3bd2bf9d423fd08c915de351ac569ee31b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (acf6fd3) will **increase** coverage by `0.02%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1381      +/-   ##\n============================================\n+ Coverage     29.84%   29.85%   +0.02%     \n- Complexity      914      917       +3     \n============================================\n  Files           223      223              \n  Lines         18618    18618              \n  Branches       1985     1985              \n============================================\n+ Hits           5554     5556       +2     \n- Misses        12672    12673       +1     \n+ Partials        392      389       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/compress/Compressor.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvQ29tcHJlc3Nvci5qYXZh) | `83.34% <ø> (ø)` | |\n| [.../apache/celeborn/client/compress/Decompressor.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvRGVjb21wcmVzc29yLmphdmE=) | `9.10% <ø> (ø)` | |\n| [...g/apache/celeborn/client/compress/RssLz4Trait.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvUnNzTHo0VHJhaXQuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.27% <ø> (ø)` | |\n| [...ploy/worker/storage/ReducePartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9SZWR1Y2VQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `48.28% <ø> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...leborn/service/deploy/worker/WorkerArguments.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlckFyZ3VtZW50cy5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...born/service/deploy/worker/storage/FlushTask.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hUYXNrLnNjYWxh) | `62.50% <ø> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `20.10% <ø> (ø)` | |\n| [...che/celeborn/common/haclient/RssHARetryClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1381?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvUnNzSEFSZXRyeUNsaWVudC5qYXZh) | `73.04% <33.34%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1381/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks, merged to master

I think we can have a UT for this?

The stacktrace only has one line? Any more background why it occurs?

> Support using Celeborn in the scenario of switching multiple SparkSessions in the same process.\r\n\r\nI don\

@pan3793 Yes. When using different SparkSessions(Essentially SparkContext) in one process, you need to close one and use another one. After closing a SparkSession, RssShuffleManager will call the stop method to close the singleton shuffleclient. When the next SparkSession uses shuffleclient again in same process. The shuffleclient was closed, causing the problem.

> I think we can have a UT for this?\r\n\r\nok.

> The stacktrace only has one line? Any more background why it occurs?\r\n\r\ndone.

Multiple Spark contexts are discouraged and totally disallowed since Spark 3.0 [SPARK-26362](https://issues.apache.org/jira/browse/SPARK-26362).\r\n

> Multiple Spark contexts are discouraged and totally disallowed since Spark 3.0 [SPARK-26362](https://issues.apache.org/jira/browse/SPARK-26362).\r\n\r\nBut. this fix still looks like reasonable

> Multiple Spark contexts are discouraged and totally disallowed since Spark 3.0 [SPARK-26362](https://issues.apache.org/jira/browse/SPARK-26362).\r\n\r\n@pan3793  \r\nHere instead of using multiple SparkContexts at the same time, but to use only one at a time, close it after use, and then create a new one.

> Here instead of using multiple SparkContexts at the same time, but to use only one at a time, close it after use, and then create a new one.\r\n\r\nthat makes sense, please clarify it in PR description

> > Here instead of using multiple SparkContexts at the same time, but to use only one at a time, close it after use, and then create a new one.\r\n> \r\n> that makes sense, please clarify it in PR description\r\n\r\n@pan3793 done.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1379?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1379](https://codecov.io/gh/apache/incubator-celeborn/pull/1379?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6fc8f07) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bfa7e896591eed0bc1021002728a01e842ed013?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bfa7e8) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1379      +/-   ##\n============================================\n+ Coverage     29.80%   29.88%   +0.09%     \n- Complexity      909      917       +8     \n============================================\n  Files           222      223       +1     \n  Lines         18489    18631     +142     \n  Branches       1970     1986      +16     \n============================================\n+ Hits           5508     5566      +58     \n- Misses        12587    12675      +88     \n+ Partials        394      390       -4     \n```\n\n\n[see 29 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1379/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@kerwin-zk looks like you did not setup apache account properly.

> @kerwin-zk looks like you did not setup apache account properly.\r\n\r\n@pan3793  done.

This is kinda resource leak, back ported to branch-0.2

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1378?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1378](https://codecov.io/gh/apache/incubator-celeborn/pull/1378?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6e31cf7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bfa7e896591eed0bc1021002728a01e842ed013?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bfa7e8) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1378      +/-   ##\n============================================\n+ Coverage     29.80%   29.83%   +0.04%     \n- Complexity      909      910       +1     \n============================================\n  Files           222      222              \n  Lines         18489    18487       -2     \n  Branches       1970     1970              \n============================================\n+ Hits           5508     5513       +5     \n+ Misses        12587    12583       -4     \n+ Partials        394      391       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1378?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1378?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.18% <0.00%> (+0.04%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1378/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1375?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1375](https://codecov.io/gh/apache/incubator-celeborn/pull/1375?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (557c0b2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/885e0cef32601eb51e14a7f2c3f044f76f171173?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (885e0ce) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1375      +/-   ##\n============================================\n+ Coverage     29.82%   29.85%   +0.04%     \n- Complexity      909      912       +3     \n============================================\n  Files           222      222              \n  Lines         18487    18482       -5     \n  Branches       1969     1966       -3     \n============================================\n+ Hits           5511     5516       +5     \n+ Misses        12585    12578       -7     \n+ Partials        391      388       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1375?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1375?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `78.68% <0.00%> (+0.38%)` | :arrow_up: |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1375?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.55% <0.00%> (+0.44%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1375/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1374?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1374](https://codecov.io/gh/apache/incubator-celeborn/pull/1374?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7bfbab2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/885e0cef32601eb51e14a7f2c3f044f76f171173?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (885e0ce) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1374   +/-   ##\n=========================================\n  Coverage     29.82%   29.82%           \n  Complexity      909      909           \n=========================================\n  Files           222      222           \n  Lines         18487    18487           \n  Branches       1969     1969           \n=========================================\n  Hits           5511     5511           \n  Misses        12585    12585           \n  Partials        391      391           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1373](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (82bb94c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f16c7b414e23fbc4efa6ec6c67a5e9844c4fbdb4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f16c7b4) will **increase** coverage by `0.12%`.\n> The diff coverage is `95.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1373      +/-   ##\n============================================\n+ Coverage     29.81%   29.92%   +0.12%     \n+ Complexity      917      912       -5     \n============================================\n  Files           222      222              \n  Lines         18533    18503      -30     \n  Branches       1978     1971       -7     \n============================================\n+ Hits           5523     5535      +12     \n+ Misses        12620    12577      -43     \n- Partials        390      391       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `66.67% <91.67%> (+1.92%)` | :arrow_up: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `79.17% <100.00%> (+0.91%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1373?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.56% <100.00%> (+0.12%)` | :arrow_up: |\n\n... and [13 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1373/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1372?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1372](https://codecov.io/gh/apache/incubator-celeborn/pull/1372?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (186770f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/13c610838b8a83fc5288de577b28b6532700dc47?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (13c6108) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1372      +/-   ##\n============================================\n+ Coverage     29.83%   29.86%   +0.03%     \n  Complexity      918      918              \n============================================\n  Files           222      222              \n  Lines         18533    18509      -24     \n  Branches       1978     1973       -5     \n============================================\n- Hits           5527     5525       -2     \n+ Misses        12617    12594      -23     \n- Partials        389      390       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1372?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/common/meta/FileManagedBuffers.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1372?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlTWFuYWdlZEJ1ZmZlcnMuamF2YQ==) | `0.00% <ø> (ø)` | |\n| [...born/common/network/server/ChunkStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1372?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ2h1bmtTdHJlYW1NYW5hZ2VyLmphdmE=) | `44.45% <ø> (+5.56%)` | :arrow_up: |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1372/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1371](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (08a6d61) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/56d796638f864a4a96913074115def80f7eb3fc9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56d7966) will **decrease** coverage by `0.09%`.\n> The diff coverage is `47.83%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1371      +/-   ##\n============================================\n- Coverage     29.86%   29.77%   -0.09%     \n+ Complexity      917      910       -7     \n============================================\n  Files           220      222       +2     \n  Lines         18498    18511      +13     \n  Branches       1974     1974              \n============================================\n- Hits           5523     5510      -13     \n- Misses        12585    12610      +25     \n- Partials        390      391       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `39.27% <ø> (+0.81%)` | :arrow_up: |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <ø> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.11% <50.00%> (ø)` | |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `55.87% <73.08%> (+0.52%)` | :arrow_up: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1371?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `33.34% <100.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1371/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\n> Merging [#1370](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (408d714) into [main](https://app.codecov.io/gh/apache/incubator-celeborn/commit/778b5440bc788278c68e40c6d4a6db6e4119ee52?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) (778b544) will **increase** coverage by `0.15%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@            Coverage Diff             @@\n##             main    #1370      +/-   ##\n==========================================\n+ Coverage   44.91%   45.05%   +0.15%     \n==========================================\n  Files         156      158       +2     \n  Lines        9623     9681      +58     \n  Branches      956      955       -1     \n==========================================\n+ Hits         4321     4361      +40     \n- Misses       5018     5032      +14     \n- Partials      284      288       +4     \n```\n\n\n| [Impacted Files](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...born/common/protocol/message/ControlMessages.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `1.51% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `63.48% <0.00%> (+0.28%)` | :arrow_up: |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `56.61% <10.00%> (-5.14%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `87.20% <100.00%> (+0.09%)` | :arrow_up: |\n\n... and [12 files with indirect coverage changes](https://app.codecov.io/gh/apache/incubator-celeborn/pull/1370/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

ping @waitinfuture @RexXiong 

Any suggestion?

I will review this PR in the following two days.

BTW, it may hurt performance if two replicas are on different racks.

> BTW, it may hurt performance if two replicas are on different racks.\r\n\r\nYea, so disable it by default

ping @FMX , could you take a look at this PR?

 I’ll review this PR today.\n\n在 2023年5月15日 16:02:42 上，Keyong Zhou ***@***.***> 写道：\n\n> ping @FMX <https://github.com/FMX> , could you take a look at this PR?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-celeborn/pull/1370#issuecomment-1547377328>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AA7VNUOUPLTXU2SE6ILN2ILXGHPKFANCNFSM6AAAAAAWCJINV4>\n> .\n> You are receiving this because you were mentioned.Message ID:\n> ***@***.***>\n>\n

Any more suggestion?\r\n

Due to the discussion, this PR will need some changes for non-hadoop environments.

ping @waitinfuture @FMX Could you take a look again

Test in reg ENV. \r\n<img width="877" alt="截屏2023-05-18 下午12 03 50" src="https://github.com/apache/incubator-celeborn/assets/46485123/50fb7479-0450-4a47-98f5-901972ca3d67">\r\nBefore \r\n<img width="1792" alt="截屏2023-05-18 上午11 13 19" src="https://github.com/apache/incubator-celeborn/assets/46485123/8dc7992a-88a9-473f-92cf-bb694a6e7ceb">\r\n\r\nAfter.\r\n<img width="1792" alt="截屏2023-05-18 下午12 03 38" src="https://github.com/apache/incubator-celeborn/assets/46485123/71030a32-decd-4329-ad44-df126673e6bb">\r\n\r\ncc @waitinfuture @FMX @RexXiong \r\n\r\n

> Test in reg ENV. <img alt="截屏2023-05-18 下午12 03 50" width="877" src="https://user-images.githubusercontent.com/46485123/239136274-50fb7479-0450-4a47-98f5-901972ca3d67.png"> Before <img alt="截屏2023-05-18 上午11 13 19" width="1792" src="https://user-images.githubusercontent.com/46485123/239136304-8dc7992a-88a9-473f-92cf-bb694a6e7ceb.png">\r\n> \r\n> After. <img alt="截屏2023-05-18 下午12 03 38" width="1792" src="https://user-images.githubusercontent.com/46485123/239136422-71030a32-decd-4329-ad44-df126673e6bb.png">\r\n> \r\n> cc @waitinfuture @FMX @RexXiong\r\n\r\nThis PR looks good to me as long as default to false :)

> This PR looks good to me as long as default to false :)\r\n\r\nYea, it should be false by default. But it can really help for unstable network env....\r\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1369?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1369](https://codecov.io/gh/apache/incubator-celeborn/pull/1369?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (499d647) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f16c7b414e23fbc4efa6ec6c67a5e9844c4fbdb4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f16c7b4) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1369      +/-   ##\n============================================\n- Coverage     29.81%   29.78%   -0.02%     \n+ Complexity      917      912       -5     \n============================================\n  Files           222      222              \n  Lines         18533    18533              \n  Branches       1978     1978              \n============================================\n- Hits           5523     5518       -5     \n- Misses        12620    12621       +1     \n- Partials        390      394       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1369?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1369?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `38.47% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1369/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong , please take a review

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1368?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1368](https://codecov.io/gh/apache/incubator-celeborn/pull/1368?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fc7e927) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/56d796638f864a4a96913074115def80f7eb3fc9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56d7966) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1368      +/-   ##\n============================================\n+ Coverage     29.86%   29.88%   +0.03%     \n- Complexity      917      918       +1     \n============================================\n  Files           220      220              \n  Lines         18498    18498              \n  Branches       1974     1974              \n============================================\n+ Hits           5523     5527       +4     \n+ Misses        12585    12582       -3     \n+ Partials        390      389       -1     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1368/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX please take a look

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1367?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1367](https://codecov.io/gh/apache/incubator-celeborn/pull/1367?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (648f7c8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/56d796638f864a4a96913074115def80f7eb3fc9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56d7966) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1367      +/-   ##\n============================================\n- Coverage     29.86%   29.85%   -0.01%     \n+ Complexity      917      913       -4     \n============================================\n  Files           220      222       +2     \n  Lines         18498    18487      -11     \n  Branches       1974     1969       -5     \n============================================\n- Hits           5523     5517       -6     \n+ Misses        12585    12583       -2     \n+ Partials        390      387       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1367?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1367?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `12.32% <100.00%> (ø)` | |\n\n... and [11 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1367/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> xxx://abc/shuffle/hadoop/rss-worker/shuffle_data/spark-0de72e2ce2e24f6db69c2228dd12a514/0/0-0-0\r\n\r\nThanks, this pull request is necessary.

Simply allow other Hadoop FS compatible file systems is not sufficient, more tests is need @FMX, maybe we should log warning when detect non-HDFS protocol

@lianneli Hi I added UT and created a PR(https://github.com/lianneli/incubator-celeborn/pull/1) at your repo.

@FMX you should have permission to push the PR branch directly

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1366?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1366](https://codecov.io/gh/apache/incubator-celeborn/pull/1366?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4f41383) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/56d796638f864a4a96913074115def80f7eb3fc9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56d7966) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1366      +/-   ##\n============================================\n- Coverage     29.86%   29.82%   -0.04%     \n- Complexity      917      918       +1     \n============================================\n  Files           220      222       +2     \n  Lines         18498    18533      +35     \n  Branches       1974     1978       +4     \n============================================\n+ Hits           5523     5525       +2     \n- Misses        12585    12618      +33     \n  Partials        390      390              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/common/network/CelebornRackResolver.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL25ldHdvcmsvQ2VsZWJvcm5SYWNrUmVzb2x2ZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/util/CelebornHadoopUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1366?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ2VsZWJvcm5IYWRvb3BVdGlscy5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1366/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @liugs0213 please take a look

LGTM

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1364](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (57ba73d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/107868d4f1b2fea2bab35a4492c53a1bee438d98?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (107868d) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1364      +/-   ##\n============================================\n- Coverage     29.88%   29.85%   -0.03%     \n  Complexity      917      917              \n============================================\n  Files           220      220              \n  Lines         18499    18498       -1     \n  Branches       1974     1974              \n============================================\n- Hits           5527     5521       -6     \n- Misses        12584    12586       +2     \n- Partials        388      391       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/common/metrics/MetricsSystem.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc1N5c3RlbS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/master/MasterSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3RlclNvdXJjZS5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1364?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <ø> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1364/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1363?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1363](https://codecov.io/gh/apache/incubator-celeborn/pull/1363?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1b37754) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ae390d9615c3475ab7b24bfff17d50a3dfad4440?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ae390d9) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1363      +/-   ##\n============================================\n+ Coverage     29.76%   29.85%   +0.09%     \n+ Complexity      916      914       -2     \n============================================\n  Files           221      220       -1     \n  Lines         18549    18499      -50     \n  Branches       1979     1974       -5     \n============================================\n+ Hits           5520     5521       +1     \n+ Misses        12637    12586      -51     \n  Partials        392      392              \n```\n\n\n[see 10 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1363/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @AngersZhuuuu please review this PR

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1362](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6e9244b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/0b78c6d3258e860b46b670753e0ed7b243066c68?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0b78c6d) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1362      +/-   ##\n============================================\n+ Coverage     29.76%   29.76%   +0.01%     \n+ Complexity      916      913       -3     \n============================================\n  Files           221      221              \n  Lines         18553    18551       -2     \n  Branches       1979     1977       -2     \n============================================\n  Hits           5520     5520              \n+ Misses        12640    12638       -2     \n  Partials        393      393              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1362?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1362/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @FMX please take a review

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1361?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1361](https://codecov.io/gh/apache/incubator-celeborn/pull/1361?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (62d338e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ae390d9615c3475ab7b24bfff17d50a3dfad4440?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ae390d9) will **increase** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1361      +/-   ##\n============================================\n+ Coverage     29.76%   29.87%   +0.11%     \n  Complexity      916      916              \n============================================\n  Files           221      220       -1     \n  Lines         18549    18499      -50     \n  Branches       1979     1974       -5     \n============================================\n+ Hits           5520     5525       +5     \n+ Misses        12637    12584      -53     \n+ Partials        392      390       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1361?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1361?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <ø> (ø)` | |\n\n... and [6 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1361/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Hi thanks for your contribution. Is the hdfs client capable of accessing the hdfs-compatible filesystems without adding new dependencies?

Hi @tcodehuber , thanks for your PR! Could you please add more details about the PR in description?

> \r\n\r\nThanks for your explanation @tcodehuber , I have created a [jira](https://issues.apache.org/jira/browse/CELEBORN-442) for this PR and merging this to main.

ping @FMX @zhongqiangczq 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1358?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1358](https://codecov.io/gh/apache/incubator-celeborn/pull/1358?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b69e035) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/66cc720861a9d6f8210a6c7a39b87b68502ab9c5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (66cc720) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1358      +/-   ##\n============================================\n+ Coverage     29.77%   29.79%   +0.03%     \n- Complexity      916      918       +2     \n============================================\n  Files           221      221              \n  Lines         18550    18549       -1     \n  Branches       1981     1979       -2     \n============================================\n+ Hits           5521     5525       +4     \n+ Misses        12636    12634       -2     \n+ Partials        393      390       -3     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1358/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1356?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1356](https://codecov.io/gh/apache/incubator-celeborn/pull/1356?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fbc2e8c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/66cc720861a9d6f8210a6c7a39b87b68502ab9c5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (66cc720) will **increase** coverage by `0.03%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1356      +/-   ##\n============================================\n+ Coverage     29.77%   29.79%   +0.03%     \n- Complexity      916      917       +1     \n============================================\n  Files           221      221              \n  Lines         18550    18549       -1     \n  Branches       1981     1979       -2     \n============================================\n+ Hits           5521     5525       +4     \n+ Misses        12636    12635       -1     \n+ Partials        393      389       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1356?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1356?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `45.94% <40.00%> (-0.49%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1356?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.45% <100.00%> (+0.21%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1356/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @zhongqiangczq @RexXiong @FMX 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1355?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1355](https://codecov.io/gh/apache/incubator-celeborn/pull/1355?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (036534f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/637081f604547771a9f49129526affcdf405ebe5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (637081f) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1355      +/-   ##\n============================================\n+ Coverage     29.74%   29.80%   +0.06%     \n- Complexity      912      919       +7     \n============================================\n  Files           221      221              \n  Lines         18550    18550              \n  Branches       1981     1981              \n============================================\n+ Hits           5516     5527      +11     \n+ Misses        12638    12633       -5     \n+ Partials        396      390       -6     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1355/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1354?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1354](https://codecov.io/gh/apache/incubator-celeborn/pull/1354?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a82bdce) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1fa00c0317d5b680f42b3505a238c16c588457d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1fa00c0) will **decrease** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head a82bdce differs from pull request most recent head 13af003. Consider uploading reports for the commit 13af003 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1354      +/-   ##\n============================================\n- Coverage     29.83%   29.77%   -0.05%     \n+ Complexity      918      914       -4     \n============================================\n  Files           221      221              \n  Lines         18517    18550      +33     \n  Branches       1982     1981       -1     \n============================================\n- Hits           5522     5521       -1     \n- Misses        12602    12635      +33     \n- Partials        393      394       +1     \n```\n\n\n[see 6 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1354/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Better to apply this patch to branch-0.2

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1353?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1353](https://codecov.io/gh/apache/incubator-celeborn/pull/1353?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6f47a43) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/889e8ca644b01812f1b60135af7e69e5c3f50b5a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (889e8ca) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1353      +/-   ##\n============================================\n+ Coverage     29.72%   29.76%   +0.04%     \n- Complexity      912      917       +5     \n============================================\n  Files           221      221              \n  Lines         18550    18550              \n  Branches       1981     1981              \n============================================\n+ Hits           5513     5520       +7     \n+ Misses        12639    12637       -2     \n+ Partials        398      393       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1353?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1353?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1353?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1353/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @zhongqiangczq @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1352?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1352](https://codecov.io/gh/apache/incubator-celeborn/pull/1352?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f50e139) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/889e8ca644b01812f1b60135af7e69e5c3f50b5a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (889e8ca) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1352      +/-   ##\n============================================\n+ Coverage     29.72%   29.77%   +0.05%     \n- Complexity      912      917       +5     \n============================================\n  Files           221      221              \n  Lines         18550    18550              \n  Branches       1981     1981              \n============================================\n+ Hits           5513     5522       +9     \n+ Misses        12639    12636       -3     \n+ Partials        398      392       -6     \n```\n\n\n[see 3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1352/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1350?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1350](https://codecov.io/gh/apache/incubator-celeborn/pull/1350?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0df9efc) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6f317c77ee1944de0698a835d4185619e2d44ab8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6f317c7) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1350      +/-   ##\n============================================\n- Coverage     29.83%   29.83%   -0.00%     \n+ Complexity      917      916       -1     \n============================================\n  Files           221      221              \n  Lines         18520    18520              \n  Branches       1982     1982              \n============================================\n- Hits           5524     5523       -1     \n  Misses        12605    12605              \n- Partials        391      392       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1350/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1349?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1349](https://codecov.io/gh/apache/incubator-celeborn/pull/1349?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c0fb754) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3907d702125d408feaa3f2f74f8233a380fb3c9f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3907d70) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1349      +/-   ##\n============================================\n- Coverage     29.82%   29.77%   -0.04%     \n+ Complexity      918      917       -1     \n============================================\n  Files           221      221              \n  Lines         18526    18556      +30     \n  Branches       1982     1981       -1     \n============================================\n  Hits           5524     5524              \n- Misses        12610    12641      +31     \n+ Partials        392      391       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1349?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1349?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1349?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1349/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1348?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1348](https://codecov.io/gh/apache/incubator-celeborn/pull/1348?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8497f64) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cd5241d3994994454463017c15c84ad02ddb37c3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cd5241d) will **increase** coverage by `2.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1348      +/-   ##\n============================================\n+ Coverage     27.80%   29.81%   +2.02%     \n- Complexity      846      916      +70     \n============================================\n  Files           221      221              \n  Lines         18506    18523      +17     \n  Branches       1981     1982       +1     \n============================================\n+ Hits           5143     5521     +378     \n+ Misses        13011    12609     -402     \n- Partials        352      393      +41     \n```\n\n\n[see 13 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1348/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

The failed ut seems not related to this patch. \r\nping @waitinfuture @FMX 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1347?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1347](https://codecov.io/gh/apache/incubator-celeborn/pull/1347?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a16cb7f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1fa00c0317d5b680f42b3505a238c16c588457d1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1fa00c0) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1347      +/-   ##\n============================================\n- Coverage     29.83%   29.80%   -0.02%     \n+ Complexity      918      913       -5     \n============================================\n  Files           221      221              \n  Lines         18517    18520       +3     \n  Branches       1982     1982              \n============================================\n- Hits           5522     5518       -4     \n- Misses        12602    12607       +5     \n- Partials        393      395       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1347?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1347?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1347?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.11% <0.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1347/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1346?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1346](https://codecov.io/gh/apache/incubator-celeborn/pull/1346?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8be536b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7d7279a9bc8dd03f56f7da0f7756fc825b2fbbd1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d7279a) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1346      +/-   ##\n============================================\n- Coverage     29.81%   29.80%   -0.01%     \n- Complexity      914      916       +2     \n============================================\n  Files           221      221              \n  Lines         18523    18526       +3     \n  Branches       1982     1982              \n============================================\n- Hits           5521     5519       -2     \n- Misses        12608    12613       +5     \n  Partials        394      394              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1346?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1346/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1345?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1345](https://codecov.io/gh/apache/incubator-celeborn/pull/1345?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a074715) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cd5241d3994994454463017c15c84ad02ddb37c3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cd5241d) will **increase** coverage by `2.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1345      +/-   ##\n============================================\n+ Coverage     27.80%   29.81%   +2.02%     \n- Complexity      846      916      +70     \n============================================\n  Files           221      221              \n  Lines         18506    18523      +17     \n  Branches       1981     1982       +1     \n============================================\n+ Hits           5143     5521     +378     \n+ Misses        13011    12609     -402     \n- Partials        352      393      +41     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1345?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1345?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1345?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [11 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1345/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1344?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1344](https://codecov.io/gh/apache/incubator-celeborn/pull/1344?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5342738) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3600ccc4e3f20aa5c12636852c93925d2f3459c0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3600ccc) will **increase** coverage by `2.02%`.\n> The diff coverage is `71.43%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1344      +/-   ##\n============================================\n+ Coverage     27.81%   29.83%   +2.02%     \n- Complexity      846      917      +71     \n============================================\n  Files           221      221              \n  Lines         18498    18517      +19     \n  Branches       1981     1982       +1     \n============================================\n+ Hits           5144     5522     +378     \n+ Misses        13003    12603     -400     \n- Partials        351      392      +41     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1344?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1344?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `24.11% <16.67%> (+24.11%)` | :arrow_up: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1344?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `77.36% <93.34%> (+77.36%)` | :arrow_up: |\n\n... and [14 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1344/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1343?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1343](https://codecov.io/gh/apache/incubator-celeborn/pull/1343?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a3c7540) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3600ccc4e3f20aa5c12636852c93925d2f3459c0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3600ccc) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1343      +/-   ##\n============================================\n+ Coverage     27.81%   27.82%   +0.01%     \n- Complexity      846      847       +1     \n============================================\n  Files           221      221              \n  Lines         18498    18496       -2     \n  Branches       1981     1981              \n============================================\n  Hits           5144     5144              \n+ Misses        13003    13001       -2     \n  Partials        351      351              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1343?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1343?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.46% <ø> (+0.98%)` | :arrow_up: |\n\n... and [2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1343/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1341?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1341](https://codecov.io/gh/apache/incubator-celeborn/pull/1341?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e16dda0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3600ccc4e3f20aa5c12636852c93925d2f3459c0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3600ccc) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1341      +/-   ##\n============================================\n- Coverage     27.81%   27.78%   -0.03%     \n+ Complexity      846      845       -1     \n============================================\n  Files           221      221              \n  Lines         18498    18508      +10     \n  Branches       1981     1981              \n============================================\n- Hits           5144     5141       -3     \n- Misses        13003    13015      +12     \n- Partials        351      352       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1341?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/protocol/TransportableError.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1341?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRhYmxlRXJyb3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1341?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1341/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1340?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1340](https://codecov.io/gh/apache/incubator-celeborn/pull/1340?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (70d00f5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3600ccc4e3f20aa5c12636852c93925d2f3459c0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3600ccc) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1340      +/-   ##\n============================================\n- Coverage     27.81%   27.81%   -0.00%     \n  Complexity      846      846              \n============================================\n  Files           221      221              \n  Lines         18498    18498              \n  Branches       1981     1981              \n============================================\n- Hits           5144     5143       -1     \n  Misses        13003    13003              \n- Partials        351      352       +1     \n```\n\n\n[see 1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1340/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1339?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1339](https://codecov.io/gh/apache/incubator-celeborn/pull/1339?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a9f4346) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3600ccc4e3f20aa5c12636852c93925d2f3459c0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3600ccc) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1339      +/-   ##\n============================================\n- Coverage     27.81%   27.81%   -0.00%     \n+ Complexity      846      845       -1     \n============================================\n  Files           221      221              \n  Lines         18498    18491       -7     \n  Branches       1981     1980       -1     \n============================================\n- Hits           5144     5141       -3     \n+ Misses        13003    12998       -5     \n- Partials        351      352       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1339?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1339?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/ShuffleTaskInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1339?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L1NodWZmbGVUYXNrSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1339/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Pls fix the failed UT too \r\n```\r\norg.apache.celeborn.service.deploy.master.clustermeta.ha.MasterStateMachineSuiteJ.testSnapshotCleanup  Time elapsed: 0.074 s  <<< FAILURE!\r\njava.lang.AssertionError\r\n\tat org.junit.Assert.fail(Assert.java:86)\r\n\tat org.junit.Assert.assertTrue(Assert.java:41)\r\n\tat org.junit.Assert.assertTrue(Assert.java:52)\r\n\tat org.apache.celeborn.service.deploy.master.clustermeta.ha.MasterStateMachineSuiteJ.testSnapshotCleanup(MasterStateMachineSuiteJ.java:166)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:377)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:284)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:248)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:167)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:456)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:169)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:595)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:581)\r\n```

Sorry, I reviewed the code and UT, and found that the previous logic was correct. I will close this pr.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1337?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1337](https://codecov.io/gh/apache/incubator-celeborn/pull/1337?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (075fb19) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6f1ab70403fbadd18e92b01b89f0fbe3cad61405?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6f1ab70) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1337      +/-   ##\n============================================\n+ Coverage     27.77%   27.79%   +0.02%     \n- Complexity      840      845       +5     \n============================================\n  Files           221      221              \n  Lines         18496    18506      +10     \n  Branches       1981     1981              \n============================================\n+ Hits           5135     5141       +6     \n- Misses        13005    13013       +8     \n+ Partials        356      352       -4     \n```\n\n\n[see 8 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1337/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1335?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1335](https://codecov.io/gh/apache/incubator-celeborn/pull/1335?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f6a8448) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b56624d3c1eb402468321dc03efb2ee627751627?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b56624d) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1335      +/-   ##\n============================================\n+ Coverage     27.79%   27.82%   +0.04%     \n- Complexity      841      847       +6     \n============================================\n  Files           221      221              \n  Lines         18480    18492      +12     \n  Branches       1981     1981              \n============================================\n+ Hits           5135     5144       +9     \n- Misses        12989    12997       +8     \n+ Partials        356      351       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1335?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1335?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1335?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1335/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1334?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1334](https://codecov.io/gh/apache/incubator-celeborn/pull/1334?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7e85b76) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/144a8cdb3f026c3d9762e96973031c96e1fe2e5f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (144a8cd) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1334      +/-   ##\n============================================\n- Coverage     27.81%   27.79%   -0.01%     \n+ Complexity      845      843       -2     \n============================================\n  Files           221      221              \n  Lines         18490    18496       +6     \n  Branches       1981     1981              \n============================================\n- Hits           5141     5139       -2     \n- Misses        12997    13003       +6     \n- Partials        352      354       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1334?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [4 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1334/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1333?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1333](https://codecov.io/gh/apache/incubator-celeborn/pull/1333?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (92bf81d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b56624d3c1eb402468321dc03efb2ee627751627?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b56624d) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1333      +/-   ##\n============================================\n+ Coverage     27.79%   27.80%   +0.01%     \n- Complexity      841      843       +2     \n============================================\n  Files           221      221              \n  Lines         18480    18487       +7     \n  Branches       1981     1981              \n============================================\n+ Hits           5135     5138       +3     \n- Misses        12989    12994       +5     \n+ Partials        356      355       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1333?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1333/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1332?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1332](https://codecov.io/gh/apache/incubator-celeborn/pull/1332?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (219227c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c78023824afd6675c3fb8bdee9cfaf753051f5bc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c780238) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 219227c differs from pull request most recent head dfd2352. Consider uploading reports for the commit dfd2352 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1332      +/-   ##\n============================================\n- Coverage     27.82%   27.80%   -0.01%     \n+ Complexity      846      842       -4     \n============================================\n  Files           221      221              \n  Lines         18467    18483      +16     \n  Branches       1979     1981       +2     \n============================================\n+ Hits           5136     5137       +1     \n- Misses        12979    12990      +11     \n- Partials        352      356       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1332?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1332?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1332?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.24% <0.00%> (ø)` | |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1332/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1331](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bbccad8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b56624d3c1eb402468321dc03efb2ee627751627?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b56624d) will **increase** coverage by `0.02%`.\n> The diff coverage is `34.49%`.\n\n> :exclamation: Current head bbccad8 differs from pull request most recent head e71bd7e. Consider uploading reports for the commit e71bd7e to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1331      +/-   ##\n============================================\n+ Coverage     27.79%   27.81%   +0.02%     \n- Complexity      841      844       +3     \n============================================\n  Files           221      221              \n  Lines         18480    18488       +8     \n  Branches       1981     1981              \n============================================\n+ Hits           5135     5140       +5     \n- Misses        12989    12995       +6     \n+ Partials        356      353       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/metrics/source/RPCSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1JQQ1NvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/master/MasterSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3RlclNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `38.47% <0.00%> (ø)` | |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `55.35% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.16% <83.34%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <100.00%> (-0.95%)` | :arrow_down: |\n| ... and [4 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1331?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1331/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I\

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1330](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9c1bd01) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c78023824afd6675c3fb8bdee9cfaf753051f5bc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c780238) will **increase** coverage by `0.03%`.\n> The diff coverage is `57.15%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1330      +/-   ##\n============================================\n+ Coverage     27.82%   27.84%   +0.03%     \n- Complexity      846      847       +1     \n============================================\n  Files           221      221              \n  Lines         18467    18480      +13     \n  Branches       1979     1981       +2     \n============================================\n+ Hits           5136     5144       +8     \n- Misses        12979    12985       +6     \n+ Partials        352      351       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/master/MasterSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3RlclNvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1330?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.27% <80.00%> (-0.37%)` | :arrow_down: |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1330/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1329](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a240cb0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c6eced69fceb4f0ec56b35a0b5fc0e91c2938d3a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c6eced6) will **decrease** coverage by `0.00%`.\n> The diff coverage is `6.67%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1329      +/-   ##\n============================================\n- Coverage     27.79%   27.78%   -0.00%     \n  Complexity      842      842              \n============================================\n  Files           221      221              \n  Lines         18459    18465       +6     \n  Branches       1979     1979              \n============================================\n+ Hits           5128     5129       +1     \n- Misses        12976    12981       +5     \n  Partials        355      355              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1329?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1328?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1328](https://codecov.io/gh/apache/incubator-celeborn/pull/1328?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (86ccf02) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5476f9ca9589267a125a28460763e26cdb5dd6b5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5476f9c) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1328      +/-   ##\n============================================\n+ Coverage     27.76%   27.81%   +0.05%     \n- Complexity      839      845       +6     \n============================================\n  Files           221      221              \n  Lines         18459    18459              \n  Branches       1979     1979              \n============================================\n+ Hits           5124     5133       +9     \n+ Misses        12978    12974       -4     \n+ Partials        357      352       -5     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1328/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@kaijchen many thanks

cc @zwangsheng please review this pr

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1327?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1327](https://codecov.io/gh/apache/incubator-celeborn/pull/1327?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a174ed2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/a336f12cc86cb1b1f8daa2efa273a515918a2888?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a336f12) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1327      +/-   ##\n============================================\n+ Coverage     27.78%   27.82%   +0.04%     \n- Complexity      841      846       +5     \n============================================\n  Files           221      221              \n  Lines         18459    18459              \n  Branches       1979     1979              \n============================================\n+ Hits           5127     5134       +7     \n+ Misses        12976    12974       -2     \n+ Partials        356      351       -5     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1327/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I created a [jira](https://issues.apache.org/jira/browse/CELEBORN-401) and modified the title. We prefer that each commit links to a jira :)

> I created a [jira](https://issues.apache.org/jira/browse/CELEBORN-401) and modified the title. We prefer that each commit links to a jira :)\r\n\r\ngot it, thank you

Sorry for be late, LGTM.\r\n\r\nThanks for you contribution @every-breaking-wave !

ping @waitinfuture @FMX 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1326?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1326](https://codecov.io/gh/apache/incubator-celeborn/pull/1326?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eeba9c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2d4a4f25bdf497e19a79ed98e95a781b36af5a49?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2d4a4f2) will **increase** coverage by `0.05%`.\n> The diff coverage is `37.50%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1326      +/-   ##\n============================================\n+ Coverage     27.76%   27.80%   +0.05%     \n- Complexity      840      846       +6     \n============================================\n  Files           221      221              \n  Lines         18450    18455       +5     \n  Branches       1978     1979       +1     \n============================================\n+ Hits           5120     5130      +10     \n  Misses        12974    12974              \n+ Partials        356      351       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1326?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/metrics/source/RPCSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1326?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1JQQ1NvdXJjZS5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1326?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.16% <75.00%> (+0.41%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1326/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1325?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1325](https://codecov.io/gh/apache/incubator-celeborn/pull/1325?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2065ec9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2d4a4f25bdf497e19a79ed98e95a781b36af5a49?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2d4a4f2) will **increase** coverage by `0.05%`.\n> The diff coverage is `88.89%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1325      +/-   ##\n============================================\n+ Coverage     27.76%   27.80%   +0.05%     \n- Complexity      840      843       +3     \n============================================\n  Files           221      221              \n  Lines         18450    18456       +6     \n  Branches       1978     1978              \n============================================\n+ Hits           5120     5130      +10     \n+ Misses        12974    12973       -1     \n+ Partials        356      353       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1325?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1325?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.24% <83.34%> (+0.01%)` | :arrow_up: |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1325?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.05% <100.00%> (ø)` | |\n\n... and [1 file with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1325/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1323?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1323](https://codecov.io/gh/apache/incubator-celeborn/pull/1323?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4e0b5f8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ec745e36d108fa90504d87f6b04c9226f8bb5ca2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ec745e3) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1323      +/-   ##\n============================================\n+ Coverage     27.75%   27.80%   +0.05%     \n- Complexity      839      845       +6     \n============================================\n  Files           221      221              \n  Lines         18450    18450              \n  Branches       1978     1978              \n============================================\n+ Hits           5119     5128       +9     \n+ Misses        12974    12970       -4     \n+ Partials        357      352       -5     \n```\n\n\n[see 2 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1323/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1322?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1322](https://codecov.io/gh/apache/incubator-celeborn/pull/1322?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (24494d2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7d43e4dd3ee03e48590a88d3d227b79e71c0a33d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d43e4d) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1322      +/-   ##\n============================================\n- Coverage     27.78%   27.78%   -0.00%     \n- Complexity      841      843       +2     \n============================================\n  Files           221      221              \n  Lines         18438    18448      +10     \n  Branches       1976     1978       +2     \n============================================\n+ Hits           5122     5124       +2     \n- Misses        12960    12971      +11     \n+ Partials        356      353       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1322?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...vice/deploy/master/clustermeta/ha/MetaHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1322?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvTWV0YUhhbmRsZXIuamF2YQ==) | `72.73% <ø> (+0.32%)` | :arrow_up: |\n\n... and [5 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1322/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture @FMX 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1321](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (174f081) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8e167c64880105ffc344e510148bad1516c9295d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e167c6) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1321      +/-   ##\n============================================\n- Coverage     27.80%   27.80%   -0.00%     \n- Complexity      844      845       +1     \n============================================\n  Files           221      221              \n  Lines         18443    18450       +7     \n  Branches       1977     1978       +1     \n============================================\n+ Hits           5127     5128       +1     \n- Misses        12965    12970       +5     \n- Partials        351      352       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.20% <0.00%> (-0.39%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.15% <0.00%> (-0.07%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.24% <0.00%> (-0.05%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1321?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @zhongqiangczq @FMX Please take a look

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1320](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d8644a2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8e167c64880105ffc344e510148bad1516c9295d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e167c6) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1320      +/-   ##\n============================================\n- Coverage     27.80%   27.78%   -0.02%     \n+ Complexity      844      842       -2     \n============================================\n  Files           221      221              \n  Lines         18443    18447       +4     \n  Branches       1977     1977              \n============================================\n- Hits           5127     5124       -3     \n- Misses        12965    12969       +4     \n- Partials        351      354       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.15% <0.00%> (-0.07%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `68.80% <0.00%> (-2.79%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.15% <0.00%> (+0.96%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1320?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1319?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1319](https://codecov.io/gh/apache/incubator-celeborn/pull/1319?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6ec3fab) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7d43e4dd3ee03e48590a88d3d227b79e71c0a33d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d43e4d) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1319      +/-   ##\n============================================\n+ Coverage     27.78%   27.82%   +0.04%     \n- Complexity      841      846       +5     \n============================================\n  Files           221      221              \n  Lines         18438    18438              \n  Branches       1976     1976              \n============================================\n+ Hits           5122     5129       +7     \n+ Misses        12960    12958       -2     \n+ Partials        356      351       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1319?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1319?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.60% <0.00%> (+2.80%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1318](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8f71d4e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fd7d8361f6bab622a82cc33de061c99c0e073d84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fd7d836) will **increase** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1318      +/-   ##\n============================================\n+ Coverage     27.75%   27.80%   +0.05%     \n- Complexity      839      844       +5     \n============================================\n  Files           221      221              \n  Lines         18448    18443       -5     \n  Branches       1980     1977       -3     \n============================================\n+ Hits           5119     5126       +7     \n+ Misses        12972    12965       -7     \n+ Partials        357      352       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.15% <0.00%> (+0.96%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1318?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.20% <0.00%> (+2.41%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1317?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1317](https://codecov.io/gh/apache/incubator-celeborn/pull/1317?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3bd219f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fd7d8361f6bab622a82cc33de061c99c0e073d84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fd7d836) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1317      +/-   ##\n============================================\n+ Coverage     27.75%   27.77%   +0.02%     \n  Complexity      839      839              \n============================================\n  Files           221      221              \n  Lines         18448    18438      -10     \n  Branches       1980     1976       -4     \n============================================\n  Hits           5119     5119              \n+ Misses        12972    12962      -10     \n  Partials        357      357              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1317?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1317?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1316?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1316](https://codecov.io/gh/apache/incubator-celeborn/pull/1316?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3860369) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fd7d8361f6bab622a82cc33de061c99c0e073d84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fd7d836) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1316      +/-   ##\n============================================\n+ Coverage     27.75%   27.78%   +0.04%     \n- Complexity      839      841       +2     \n============================================\n  Files           221      221              \n  Lines         18448    18438      -10     \n  Branches       1980     1976       -4     \n============================================\n+ Hits           5119     5122       +3     \n+ Misses        12972    12960      -12     \n+ Partials        357      356       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1316?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

## [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1314](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f9f1921) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bfa7e896591eed0bc1021002728a01e842ed013?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bfa7e8) will **decrease** coverage by `0.01%`.\n> The diff coverage is `11.25%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1314      +/-   ##\n============================================\n- Coverage     29.80%   29.78%   -0.01%     \n- Complexity      909      915       +6     \n============================================\n  Files           222      223       +1     \n  Lines         18489    18604     +115     \n  Branches       1970     1984      +14     \n============================================\n+ Hits           5508     5540      +32     \n- Misses        12587    12677      +90     \n+ Partials        394      387       -7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/client/ReleasePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L1JlbGVhc2VQYXJ0aXRpb25NYW5hZ2VyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `38.55% <0.00%> (-0.40%)` | :arrow_down: |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `20.10% <0.00%> (-0.29%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1314?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.50% <86.37%> (+0.06%)` | :arrow_up: |\n\n... and [3 files with indirect coverage changes](https://codecov.io/gh/apache/incubator-celeborn/pull/1314/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This patch is mainly for map partition[Flink], but it must be pointed out that due to concurrent problem, I have to change partition location structure to concurrentHashSet(or use synchronized on that object instead), Would you have time to take a look @FMX @waitinfuture @AngersZhuuuu

> This patch is mainly for map partition[Flink], but it must be pointed out that due to concurrent problem, I have to change partition location structure to concurrentHashSet(or use synchronized on that object instead), Would you have time to take a look @FMX @waitinfuture @AngersZhuuuu\r\n\r\nI will review late today, thanks!

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1313](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (55a453d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fd7d8361f6bab622a82cc33de061c99c0e073d84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fd7d836) will **increase** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1313      +/-   ##\n============================================\n+ Coverage     27.75%   27.81%   +0.06%     \n- Complexity      839      844       +5     \n============================================\n  Files           221      221              \n  Lines         18448    18438      -10     \n  Branches       1980     1976       -4     \n============================================\n+ Hits           5119     5126       +7     \n+ Misses        12972    12960      -12     \n+ Partials        357      352       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.15% <0.00%> (+0.96%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1313?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.20% <0.00%> (+2.41%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1312](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (51ea158) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/fd7d8361f6bab622a82cc33de061c99c0e073d84?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fd7d836) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1312      +/-   ##\n============================================\n+ Coverage     27.75%   27.81%   +0.06%     \n- Complexity      839      846       +7     \n============================================\n  Files           221      221              \n  Lines         18448    18448              \n  Branches       1980     1980              \n============================================\n+ Hits           5119     5129      +10     \n+ Misses        12972    12968       -4     \n+ Partials        357      351       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.15% <0.00%> (+0.96%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1312?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.20% <0.00%> (+2.41%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1310?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1310](https://codecov.io/gh/apache/incubator-celeborn/pull/1310?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e06b671) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e805c74aadb11c31962397183f45e58cba53d665?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e805c74) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1310      +/-   ##\n============================================\n- Coverage     27.79%   27.79%   -0.00%     \n  Complexity      843      843              \n============================================\n  Files           221      221              \n  Lines         18448    18448              \n  Branches       1980     1980              \n============================================\n- Hits           5126     5125       -1     \n  Misses        12970    12970              \n- Partials        352      353       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1310?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1310?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.24% <0.00%> (-0.05%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> \r\n\r\nTests look good, merging to main, thanks!

GA Flink failure is irrelevant, merged to master/0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1306?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1306](https://codecov.io/gh/apache/incubator-celeborn/pull/1306?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (39831b8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9641f942558496876df3fb4ab5fc4d9907868667?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9641f94) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1306      +/-   ##\n============================================\n+ Coverage     27.77%   27.79%   +0.02%     \n- Complexity      840      842       +2     \n============================================\n  Files           221      221              \n  Lines         18448    18448              \n  Branches       1979     1979              \n============================================\n+ Hits           5123     5126       +3     \n  Misses        12970    12970              \n+ Partials        355      352       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1306?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1306?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1306?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.60% <0.00%> (+2.40%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1305](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9e93b26) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9aabb43699225d47c1470027b98a42210df914e8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9aabb43) will **decrease** coverage by `0.10%`.\n> The diff coverage is `75.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1305      +/-   ##\n============================================\n- Coverage     27.86%   27.75%   -0.10%     \n+ Complexity      843      839       -4     \n============================================\n  Files           219      221       +2     \n  Lines         18402    18448      +46     \n  Branches       1977     1980       +3     \n============================================\n- Hits           5125     5119       -6     \n- Misses        12927    12972      +45     \n- Partials        350      357       +7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `68.80% <75.00%> (-2.79%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.75% <0.00%> (-1.02%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `47.48% <0.00%> (-0.91%)` | :arrow_down: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eborn/common/network/protocol/BufferStreamEnd.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CdWZmZXJTdHJlYW1FbmQuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...rn/common/network/protocol/TransportableError.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1305?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRhYmxlRXJyb3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1304](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dd83b65) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/734f14991a51ca3987b64154329d79d6e3ed79d6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (734f149) will **increase** coverage by `0.80%`.\n> The diff coverage is `6.25%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1304      +/-   ##\n============================================\n+ Coverage     26.98%   27.77%   +0.80%     \n- Complexity      822      840      +18     \n============================================\n  Files           218      221       +3     \n  Lines         18540    18448      -92     \n  Branches       1998     1979      -19     \n============================================\n+ Hits           5001     5123     +122     \n+ Misses        13212    12970     -242     \n- Partials        327      355      +28     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eborn/common/network/protocol/BufferStreamEnd.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CdWZmZXJTdHJlYW1FbmQuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...rn/common/network/protocol/TransportableError.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9UcmFuc3BvcnRhYmxlRXJyb3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.75% <0.00%> (+1.32%)` | :arrow_up: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `47.48% <42.86%> (-0.91%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.20% <0.00%> (-2.52%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.22% <0.00%> (-2.43%)` | :arrow_down: |\n| [...born/common/network/server/ChunkStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ2h1bmtTdHJlYW1NYW5hZ2VyLmphdmE=) | `38.89% <0.00%> (-2.28%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| ... and [15 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1304?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1303?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1303](https://codecov.io/gh/apache/incubator-celeborn/pull/1303?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fdc04a3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9aabb43699225d47c1470027b98a42210df914e8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9aabb43) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1303      +/-   ##\n============================================\n+ Coverage     27.86%   27.87%   +0.02%     \n- Complexity      843      845       +2     \n============================================\n  Files           219      219              \n  Lines         18402    18402              \n  Branches       1977     1977              \n============================================\n+ Hits           5125     5128       +3     \n+ Misses        12927    12925       -2     \n+ Partials        350      349       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1303?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I noticed the change of putting `LimitedInputStream.java` into `.rat-excludes` during the verification of 0.2.1-rc1, and am wondering why we need such a change. I removed this line from rat exclude and run `mvn apache-rat:check`, there seems to be no problem. @pan3793 could you give some clarification? Thanks.\r\n\r\nDisclaimer: this is not a blocker for the release, but just something worth a double-check.

@carp84 Thanks for the detailed check, I can reproduce the result locally, opened https://github.com/apache/incubator-celeborn/pull/1392 to remove this exclusion.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1301?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1301](https://codecov.io/gh/apache/incubator-celeborn/pull/1301?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (615a5e2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/dcedf7b0a9c23566b5dfb53fafa131e01b5d3624?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dcedf7b) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1301      +/-   ##\n============================================\n- Coverage     27.80%   27.78%   -0.01%     \n+ Complexity      842      840       -2     \n============================================\n  Files           219      219              \n  Lines         18607    18607              \n  Branches       2002     2002              \n============================================\n- Hits           5171     5168       -3     \n- Misses        13077    13079       +2     \n- Partials        359      360       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1301?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/common/network/util/LimitedInputStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1301?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL0xpbWl0ZWRJbnB1dFN0cmVhbS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1301?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks, merged to main/0.2(https://github.com/apache/incubator-celeborn/pull/1302)

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1300](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7058500) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/734f14991a51ca3987b64154329d79d6e3ed79d6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (734f149) will **decrease** coverage by `0.07%`.\n> The diff coverage is `10.35%`.\n\n> :exclamation: Current head 7058500 differs from pull request most recent head ef50abd. Consider uploading reports for the commit ef50abd to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1300      +/-   ##\n============================================\n- Coverage     26.98%   26.91%   -0.07%     \n+ Complexity      822      817       -5     \n============================================\n  Files           218      219       +1     \n  Lines         18540    18563      +23     \n  Branches       1998     2000       +2     \n============================================\n- Hits           5001     4994       -7     \n- Misses        13212    13236      +24     \n- Partials        327      333       +6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ain/java/org/apache/ratis/shell/cli/RaftUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yYXRpcy9zaGVsbC9jbGkvUmFmdFV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.24% <42.86%> (-0.34%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1300?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @pan3793 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1298?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1298](https://codecov.io/gh/apache/incubator-celeborn/pull/1298?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c316e0d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/786fcd6744cc755eeb884b82b2186fb1b29e03f7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (786fcd6) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head c316e0d differs from pull request most recent head 047bfbd. Consider uploading reports for the commit 047bfbd to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1298      +/-   ##\n============================================\n- Coverage     26.97%   26.96%   -0.01%     \n+ Complexity      821      819       -2     \n============================================\n  Files           218      218              \n  Lines         18540    18540              \n  Branches       1998     1998              \n============================================\n- Hits           5000     4997       -3     \n  Misses        13212    13212              \n- Partials        328      331       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1298?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Please add more details about the UT in description.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1297?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1297](https://codecov.io/gh/apache/incubator-celeborn/pull/1297?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (359ebbd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/786fcd6744cc755eeb884b82b2186fb1b29e03f7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (786fcd6) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1297      +/-   ##\n============================================\n- Coverage     26.97%   26.94%   -0.03%     \n+ Complexity      821      817       -4     \n============================================\n  Files           218      218              \n  Lines         18540    18540              \n  Branches       1998     1998              \n============================================\n- Hits           5000     4994       -6     \n- Misses        13212    13214       +2     \n- Partials        328      332       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1297?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1297?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

https://github.com/apache/incubator-celeborn/actions/runs/4321340760/jobs/7542460961\r\n@zhongqiangczq @RexXiong seems to have UT error, please have a check

please take a look again @FMX \r\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1295](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (35d1d37) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/4c90e0b02a213c792dc898f4c7d74e673d143648?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4c90e0b) will **increase** coverage by `0.06%`.\n> The diff coverage is `80.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1295      +/-   ##\n============================================\n+ Coverage     26.97%   27.02%   +0.06%     \n  Complexity      821      821              \n============================================\n  Files           218      218              \n  Lines         18540    18335     -205     \n  Branches       1998     1973      -25     \n============================================\n- Hits           5000     4954      -46     \n+ Misses        13212    13060     -152     \n+ Partials        328      321       -7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `13.22% <80.00%> (-2.43%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.22% <0.00%> (+0.06%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1295?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1294?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1294](https://codecov.io/gh/apache/incubator-celeborn/pull/1294?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dbc34e0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ca79a9ce31dfd598bf7ea960f49363c5d9bb8464?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ca79a9c) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head dbc34e0 differs from pull request most recent head 9569551. Consider uploading reports for the commit 9569551 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1294      +/-   ##\n============================================\n- Coverage     27.00%   26.99%   -0.00%     \n+ Complexity      824      823       -1     \n============================================\n  Files           218      218              \n  Lines         18540    18540              \n  Branches       1998     1998              \n============================================\n- Hits           5004     5003       -1     \n  Misses        13210    13210              \n- Partials        326      327       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1294?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1294?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I think we can add a doc in our web-site describing the usage

> I think we can add a doc in our web-site describing the usage\r\n\r\nWill do these in the final PR of these things

ping @pan3793 @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1292](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (352f26d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/eda21ead2486c587dba7dc63c26b4df24e8fc866?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eda21ea) will **decrease** coverage by `0.18%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1292      +/-   ##\n============================================\n- Coverage     27.13%   26.95%   -0.18%     \n+ Complexity      822      818       -4     \n============================================\n  Files           215      218       +3     \n  Lines         18459    18540      +81     \n  Branches       1990     1998       +8     \n============================================\n- Hits           5007     4995      -12     \n- Misses        13125    13214      +89     \n- Partials        327      331       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <0.00%> (-0.01%)` | :arrow_down: |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...n/common/network/server/memory/BufferRecycler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclJlY3ljbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/server/memory/WrappedDataBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1292?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1dyYXBwZWREYXRhQnVmZmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Do we need to update license/notice files? cc @pan3793 @FMX 

cc @pan3793

Could you please elaborate more about "how do the Gluten use Celeborn"? Currently, Celeborn does not deploy the artifacts to Maven Central in the release process, should we do it in the future?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1291](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2621f6b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/725028a10a6850c97a33fc9912e53aad29fde3f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (725028a) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1291      +/-   ##\n============================================\n+ Coverage     26.98%   26.99%   +0.01%     \n- Complexity      822      823       +1     \n============================================\n  Files           218      218              \n  Lines         18537    18540       +3     \n  Branches       1998     1998              \n============================================\n+ Hits           5001     5003       +2     \n- Misses        13209    13210       +1     \n  Partials        327      327              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> Could you please elaborate more about "how do the Gluten use Celeborn"? Currently, Celeborn does not deploy the artifacts to Maven Central in the release process, should we do it in the future?\r\n\r\n@pan3793  At present, Gluten needs to rely on celeborn-common-shaded_2.12 and celeborn-client-spark-3-shaded_2.12. Before the pr of this part is submitted to Gluten, it is necessary to send Celeborn to Maven Central.

But `celeborn-client-spark-3-shaded_2.12` should contain everything of `celeborn-common-shaded_2.12`, right?

> But `celeborn-client-spark-3-shaded_2.12` should contain everything of `celeborn-common-shaded_2.12`, right?\r\n\r\n@pan3793  Yes, just relying on celeborn-client-spark-3-shaded_2.12 is enough. \r\nAt present, Spark and Flink clients have made their own shades. We can consider shading common. and then when new components are introduced, new components do not need shades when relying on common.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1290?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1290](https://codecov.io/gh/apache/incubator-celeborn/pull/1290?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a9af158) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7dc1ab13dbc5e4f07c198dfb68cebde646d1ee25?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7dc1ab1) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1290      +/-   ##\n============================================\n- Coverage     27.00%   26.99%   -0.00%     \n- Complexity      821      823       +2     \n============================================\n  Files           218      218              \n  Lines         18544    18537       -7     \n  Branches       1998     1998              \n============================================\n- Hits           5006     5003       -3     \n+ Misses        13210    13207       -3     \n+ Partials        328      327       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1290?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1290?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <0.00%> (-0.01%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1290?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

The PR description does not explain "Why are the changes needed?", so why do we need it?

> The PR description does not explain "Why are the changes needed?", so why do we need it?\r\n\r\nThe Celeborn is integrating with Gluten. I believe that the details should be told by @kerwin-zk .

@kerwin-zk please add more details in description

This PR is revoked due to further discussion.

We should be more careful not to merge to-revert PRs

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1289](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5195a44) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7dc1ab13dbc5e4f07c198dfb68cebde646d1ee25?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7dc1ab1) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1289      +/-   ##\n============================================\n- Coverage     27.00%   26.99%   -0.01%     \n- Complexity      821      823       +2     \n============================================\n  Files           218      218              \n  Lines         18544    18540       -4     \n  Branches       1998     1998              \n============================================\n- Hits           5006     5003       -3     \n  Misses        13210    13210              \n+ Partials        328      327       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <0.00%> (-0.01%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1288](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cbaf724) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb76c4de4c8ac27d90034ed07d9733aa080ab1fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb76c4d) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head cbaf724 differs from pull request most recent head 3117dfd. Consider uploading reports for the commit 3117dfd to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1288      +/-   ##\n============================================\n- Coverage     26.99%   26.95%   -0.04%     \n+ Complexity      823      818       -5     \n============================================\n  Files           218      218              \n  Lines         18537    18537              \n  Branches       1998     1998              \n============================================\n- Hits           5003     4995       -8     \n- Misses        13207    13211       +4     \n- Partials        327      331       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.15% <0.00%> (+0.96%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1287](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e508f34) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/eda21ead2486c587dba7dc63c26b4df24e8fc866?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eda21ea) will **increase** coverage by `0.71%`.\n> The diff coverage is `42.86%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1287      +/-   ##\n============================================\n+ Coverage     27.13%   27.84%   +0.71%     \n- Complexity      822      847      +25     \n============================================\n  Files           215      219       +4     \n  Lines         18459    18607     +148     \n  Branches       1990     2002      +12     \n============================================\n+ Hits           5007     5179     +172     \n+ Misses        13125    13075      -50     \n- Partials        327      353      +26     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/TimeWindow.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvVGltZVdpbmRvdy5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/network/server/ChunkStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ2h1bmtTdHJlYW1NYW5hZ2VyLmphdmE=) | `38.89% <42.86%> (-2.28%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `59.31% <44.45%> (+5.18%)` | :arrow_up: |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `20.54% <50.00%> (+20.54%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.60% <75.00%> (-0.12%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.78% <80.00%> (+2.35%)` | :arrow_up: |\n| ... and [15 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1287?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I have run regression and results is as expected. My Celeborn cluster is heterogeneous, 6 of them have better disks and 4 of them have poorer disks. The following snapshot is slots allocated per worker, and we can see the workers with better disks are allocated more slots than poor ones as time goes.\r\n![image](https://user-images.githubusercontent.com/948245/222317304-3fff03e1-92b8-44d8-9d95-c837af9b8e66.png)\r\n\r\n

ping @FMX , cc @pan3793 @AngersZhuuuu @RexXiong 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1286](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b94e031) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5654c62f35b45bac1b564a31e790a5c43122b0b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5654c62) will **increase** coverage by `0.01%`.\n> The diff coverage is `9.53%`.\n\n> :exclamation: Current head b94e031 differs from pull request most recent head 8d91cf1. Consider uploading reports for the commit 8d91cf1 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1286      +/-   ##\n============================================\n+ Coverage     26.99%   26.99%   +0.01%     \n- Complexity      820      821       +1     \n============================================\n  Files           218      219       +1     \n  Lines         18544    18553       +9     \n  Branches       1998     1998              \n============================================\n+ Hits           5004     5007       +3     \n- Misses        13210    13218       +8     \n+ Partials        330      328       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/network/protocol/EndOfStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9FbmRPZlN0cmVhbS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `47.92% <50.00%> (-0.47%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1285](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b676d71) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5654c62f35b45bac1b564a31e790a5c43122b0b8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5654c62) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1285      +/-   ##\n============================================\n+ Coverage     26.99%   27.00%   +0.02%     \n- Complexity      820      821       +1     \n============================================\n  Files           218      218              \n  Lines         18544    18544              \n  Branches       1998     1998              \n============================================\n+ Hits           5004     5006       +2     \n  Misses        13210    13210              \n+ Partials        330      328       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/DeviceInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvRGV2aWNlSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1285?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1284](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (422d737) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/eda21ead2486c587dba7dc63c26b4df24e8fc866?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eda21ea) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1284      +/-   ##\n============================================\n- Coverage     27.13%   27.00%   -0.13%     \n- Complexity      822      824       +2     \n============================================\n  Files           215      218       +3     \n  Lines         18459    18537      +78     \n  Branches       1990     1998       +8     \n============================================\n- Hits           5007     5004       -3     \n- Misses        13125    13207      +82     \n+ Partials        327      326       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <ø> (-0.01%)` | :arrow_down: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...n/common/network/server/memory/BufferRecycler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclJlY3ljbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/server/memory/WrappedDataBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1dyYXBwZWREYXRhQnVmZmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1284?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @nafiyAix @FMX @pan3793 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1283](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8560c20) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/eda21ead2486c587dba7dc63c26b4df24e8fc866?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eda21ea) will **decrease** coverage by `0.18%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 8560c20 differs from pull request most recent head e348f1e. Consider uploading reports for the commit e348f1e to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1283      +/-   ##\n============================================\n- Coverage     27.13%   26.94%   -0.18%     \n+ Complexity      822      817       -5     \n============================================\n  Files           215      218       +3     \n  Lines         18459    18540      +81     \n  Branches       1990     1998       +8     \n============================================\n- Hits           5007     4994      -13     \n- Misses        13125    13214      +89     \n- Partials        327      332       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `15.66% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.95%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <0.00%> (-0.01%)` | :arrow_down: |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...n/common/network/server/memory/BufferRecycler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclJlY3ljbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/server/memory/WrappedDataBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1dyYXBwZWREYXRhQnVmZmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1282](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56125a0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/935806f03618cdfe79314c83733809e9b7b5e834?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (935806f) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1282      +/-   ##\n============================================\n+ Coverage     27.01%   27.02%   +0.01%     \n- Complexity      813      823      +10     \n============================================\n  Files           215      218       +3     \n  Lines         18426    18544     +118     \n  Branches       1982     1998      +16     \n============================================\n+ Hits           4976     5009      +33     \n- Misses        13125    13208      +83     \n- Partials        325      327       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/DataPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvRGF0YVBhcnRpdGlvblJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...n/common/network/server/memory/BufferRecycler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L0J1ZmZlclJlY3ljbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/server/memory/WrappedDataBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1dyYXBwZWREYXRhQnVmZmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <0.00%> (-0.66%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `15.66% <0.00%> (-0.43%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.37% <0.00%> (-0.03%)` | :arrow_down: |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [11 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1282?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @nafiyAix @pan3793 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1281](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a5ea95a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7adf1fca41cd34eb3e9ddf5cc8cd24674ab585b4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7adf1fc) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1281      +/-   ##\n============================================\n+ Coverage     27.14%   27.15%   +0.01%     \n  Complexity      823      823              \n============================================\n  Files           215      215              \n  Lines         18457    18459       +2     \n  Branches       1989     1990       +1     \n============================================\n+ Hits           5009     5010       +1     \n- Misses        13121    13123       +2     \n+ Partials        327      326       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `15.66% <0.00%> (-0.03%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.37% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1281?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.24% <0.00%> (+0.06%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1279](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5bed74d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/935806f03618cdfe79314c83733809e9b7b5e834?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (935806f) will **decrease** coverage by `0.02%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1279      +/-   ##\n============================================\n- Coverage     27.01%   26.99%   -0.02%     \n+ Complexity      813      812       -1     \n============================================\n  Files           215      215              \n  Lines         18426    18428       +2     \n  Branches       1982     1983       +1     \n============================================\n- Hits           4976     4972       -4     \n- Misses        13125    13127       +2     \n- Partials        325      329       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../deploy/worker/congestcontrol/BufferStatusHub.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQnVmZmVyU3RhdHVzSHViLmphdmE=) | `82.61% <100.00%> (+3.67%)` | :arrow_up: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.20% <100.00%> (-0.66%)` | :arrow_down: |\n| [...e/deploy/worker/congestcontrol/TimeSlidingHub.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvVGltZVNsaWRpbmdIdWIuamF2YQ==) | `72.23% <100.00%> (+0.53%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1278](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (59bfdbf) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f0b9236ff21b52610148444b833e97300ab422db?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f0b9236) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1278      +/-   ##\n============================================\n+ Coverage     27.02%   27.04%   +0.02%     \n+ Complexity      814      813       -1     \n============================================\n  Files           215      215              \n  Lines         18424    18405      -19     \n  Branches       1983     1981       -2     \n============================================\n- Hits           4978     4976       -2     \n+ Misses        13123    13104      -19     \n- Partials        323      325       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1278?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.14% <0.00%> (-0.05%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Tested regression and results are good.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1277](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5444ed9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f0b9236ff21b52610148444b833e97300ab422db?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f0b9236) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1277      +/-   ##\n============================================\n- Coverage     27.02%   26.98%   -0.04%     \n+ Complexity      814      813       -1     \n============================================\n  Files           215      215              \n  Lines         18424    18445      +21     \n  Branches       1983     1984       +1     \n============================================\n- Hits           4978     4976       -2     \n- Misses        13123    13144      +21     \n- Partials        323      325       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `16.10% <0.00%> (-0.13%)` | :arrow_down: |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.14% <0.00%> (-0.05%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1276](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (56f7c0c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/da292fa3694076df1203ef0459e997e4833b30cc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (da292fa) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1276      +/-   ##\n============================================\n- Coverage     27.01%   26.98%   -0.02%     \n+ Complexity      811      809       -2     \n============================================\n  Files           215      215              \n  Lines         18418    18424       +6     \n  Branches       1982     1983       +1     \n============================================\n- Hits           4973     4970       -3     \n- Misses        13119    13125       +6     \n- Partials        326      329       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1276?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1275](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f5c850b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/af9e8366c917c9093b47b2fd8230e366f777af1f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (af9e836) will **decrease** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1275      +/-   ##\n============================================\n- Coverage     27.08%   27.03%   -0.05%     \n- Complexity      810      814       +4     \n============================================\n  Files           215      215              \n  Lines         18368    18418      +50     \n  Branches       1999     1982      -17     \n============================================\n+ Hits           4973     4977       +4     \n- Misses        13067    13117      +50     \n+ Partials        328      324       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `16.24% <0.00%> (-1.92%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/exception/CelebornIOException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9DZWxlYm9ybklPRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `64.75% <0.00%> (+0.92%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1275?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1274](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ef9ef6d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/a7587c3fe7dc1f9cbb1182e5f6f684ef25c94b04?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a7587c3) will **increase** coverage by `0.04%`.\n> The diff coverage is `3.13%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1274      +/-   ##\n============================================\n+ Coverage     26.99%   27.03%   +0.04%     \n- Complexity      809      817       +8     \n============================================\n  Files           215      215              \n  Lines         18418    18417       -1     \n  Branches       1982     1985       +3     \n============================================\n+ Hits           4970     4977       +7     \n+ Misses        13119    13116       -3     \n+ Partials        329      324       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `32.31% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `15.69% <2.44%> (-0.54%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `64.75% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [7 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1274?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX @waitinfuture @pan3793 

ping @waitinfuture @pan3793 @FMX 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1272](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9185e15) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3067efcfd31475fc44c38fad0813fd3350a55f57?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3067efc) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1272      +/-   ##\n============================================\n+ Coverage     27.12%   27.16%   +0.04%     \n+ Complexity      813      812       -1     \n============================================\n  Files           215      215              \n  Lines         18364    18324      -40     \n  Branches       1999     1982      -17     \n============================================\n- Hits           4979     4975       -4     \n+ Misses        13061    13024      -37     \n- Partials        324      325       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.20% <0.00%> (+0.04%)` | :arrow_up: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `64.75% <0.00%> (+0.92%)` | :arrow_up: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <ø> (ø)` | |\n| [...eleborn/common/exception/CelebornIOException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9DZWxlYm9ybklPRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.43% <0.00%> (-0.79%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.14% <0.00%> (-0.05%)` | :arrow_down: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @FMX @pan3793 @nafiyAix 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1271](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2df0288) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3067efcfd31475fc44c38fad0813fd3350a55f57?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3067efc) will **decrease** coverage by `0.19%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1271      +/-   ##\n============================================\n- Coverage     27.12%   26.92%   -0.19%     \n+ Complexity      813      808       -5     \n============================================\n  Files           215      215              \n  Lines         18364    18466     +102     \n  Branches       1999     2000       +1     \n============================================\n- Hits           4979     4970       -9     \n- Misses        13061    13168     +107     \n- Partials        324      328       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `16.19% <0.00%> (-1.97%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.43% <0.00%> (-0.79%)` | :arrow_down: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1271?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1270](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b16ce60) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/af9e8366c917c9093b47b2fd8230e366f777af1f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (af9e836) will **decrease** coverage by `0.09%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1270      +/-   ##\n============================================\n- Coverage     27.08%   26.98%   -0.09%     \n+ Complexity      810      809       -1     \n============================================\n  Files           215      215              \n  Lines         18368    18422      +54     \n  Branches       1999     1983      -16     \n============================================\n- Hits           4973     4970       -3     \n- Misses        13067    13123      +56     \n- Partials        328      329       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `16.24% <0.00%> (-1.92%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/exception/CelebornIOException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9DZWxlYm9ybklPRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1270?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `64.75% <0.00%> (+0.92%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @zwangsheng 

@liugs0213 thanks for your contribution, please \r\n- open a [JIRA](https://issues.apache.org/jira/projects/CELEBORN/issues) ticket first and put it into PR title\r\n- open PR for "main" branch, the committers will do backport if necessary\r\n- fill the PR description as much as possible

@liugs0213  Thanks!  Created [JIRA](https://issues.apache.org/jira/browse/CELEBORN-343) and will cherrypick to main.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1268](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (456f3e1) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1132cc25ab1717b67c3fd53b8f0632b3b7d96f71?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1132cc2) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1268      +/-   ##\n============================================\n- Coverage     27.10%   27.06%   -0.03%     \n+ Complexity      811      808       -3     \n============================================\n  Files           215      215              \n  Lines         18360    18368       +8     \n  Branches       1999     1999              \n============================================\n- Hits           4975     4970       -5     \n- Misses        13059    13069      +10     \n- Partials        326      329       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.43% <0.00%> (-0.79%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.17% <0.00%> (-0.04%)` | :arrow_down: |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1268?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1267](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f449150) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3067efcfd31475fc44c38fad0813fd3350a55f57?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3067efc) will **decrease** coverage by `0.16%`.\n> The diff coverage is `5.56%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1267      +/-   ##\n============================================\n- Coverage     27.12%   26.95%   -0.16%     \n+ Complexity      813      811       -2     \n============================================\n  Files           215      215              \n  Lines         18364    18462      +98     \n  Branches       1999     1999              \n============================================\n- Hits           4979     4975       -4     \n- Misses        13061    13162     +101     \n- Partials        324      325       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `16.22% <5.56%> (-1.94%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.43% <0.00%> (-0.79%)` | :arrow_down: |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1266](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (19dd4c7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f7948190cf8eb9e6126603b99c6f494c7748cb8c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f794819) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1266      +/-   ##\n============================================\n- Coverage     27.12%   27.06%   -0.05%     \n+ Complexity      813      807       -6     \n============================================\n  Files           215      215              \n  Lines         18362    18364       +2     \n  Branches       1999     1999              \n============================================\n- Hits           4978     4969       -9     \n- Misses        13059    13065       +6     \n- Partials        325      330       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.17% <0.00%> (-0.04%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1266?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1265](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dad0bd5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1132cc25ab1717b67c3fd53b8f0632b3b7d96f71?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1132cc2) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1265      +/-   ##\n============================================\n- Coverage     27.10%   27.10%   -0.00%     \n  Complexity      811      811              \n============================================\n  Files           215      215              \n  Lines         18360    18366       +6     \n  Branches       1999     1999              \n============================================\n+ Hits           4975     4976       +1     \n- Misses        13059    13065       +6     \n+ Partials        326      325       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.43% <0.00%> (-0.79%)` | :arrow_down: |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.19% <0.00%> (+0.06%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1264](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7c6f161) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1132cc25ab1717b67c3fd53b8f0632b3b7d96f71?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1132cc2) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1264      +/-   ##\n============================================\n- Coverage     27.10%   27.07%   -0.03%     \n+ Complexity      811      808       -3     \n============================================\n  Files           215      215              \n  Lines         18360    18362       +2     \n  Branches       1999     1999              \n============================================\n- Hits           4975     4970       -5     \n- Misses        13059    13063       +4     \n- Partials        326      329       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1264?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1263?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1263](https://codecov.io/gh/apache/incubator-celeborn/pull/1263?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (55ba3e8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1132cc25ab1717b67c3fd53b8f0632b3b7d96f71?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1132cc2) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1263      +/-   ##\n============================================\n+ Coverage     27.10%   27.12%   +0.02%     \n- Complexity      811      813       +2     \n============================================\n  Files           215      215              \n  Lines         18360    18360              \n  Branches       1999     1999              \n============================================\n+ Hits           4975     4978       +3     \n+ Misses        13059    13057       -2     \n+ Partials        326      325       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1263?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1263?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `32.31% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1263?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1262?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1262](https://codecov.io/gh/apache/incubator-celeborn/pull/1262?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5992bae) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/decc7a2c3a72c4fa130f67c8c939fdd3ddaa4ed8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (decc7a2) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 5992bae differs from pull request most recent head fd6766a. Consider uploading reports for the commit fd6766a to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1262      +/-   ##\n============================================\n+ Coverage     27.07%   27.10%   +0.04%     \n- Complexity      807      811       +4     \n============================================\n  Files           215      215              \n  Lines         18360    18360              \n  Branches       1999     1999              \n============================================\n+ Hits           4969     4975       +6     \n+ Misses        13061    13059       -2     \n+ Partials        330      326       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1262?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1262?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1262?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1260?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1260](https://codecov.io/gh/apache/incubator-celeborn/pull/1260?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1735471) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb8df62ec580297f88d78fa57355a68f818684d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb8df62) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 1735471 differs from pull request most recent head 2e0d276. Consider uploading reports for the commit 2e0d276 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1260      +/-   ##\n============================================\n+ Coverage     27.11%   27.13%   +0.02%     \n- Complexity      811      813       +2     \n============================================\n  Files           214      214              \n  Lines         18353    18353              \n  Branches       1997     1997              \n============================================\n+ Hits           4975     4978       +3     \n+ Misses        13052    13050       -2     \n+ Partials        326      325       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <ø> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@FMX @zhongqiangczq 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1259?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1259](https://codecov.io/gh/apache/incubator-celeborn/pull/1259?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6d1bcc5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cb8df62ec580297f88d78fa57355a68f818684d7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb8df62) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1259      +/-   ##\n============================================\n+ Coverage     27.11%   27.11%   +0.01%     \n- Complexity      811      812       +1     \n============================================\n  Files           214      214              \n  Lines         18353    18356       +3     \n  Branches       1997     1998       +1     \n============================================\n+ Hits           4975     4976       +1     \n- Misses        13052    13055       +3     \n+ Partials        326      325       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1259?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1259?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1259?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1258](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8b05263) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b09b85521a3492eba7eac5b2a4c14bbecd3b8b46?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b09b855) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1258      +/-   ##\n============================================\n- Coverage     27.17%   27.13%   -0.03%     \n- Complexity      811      813       +2     \n============================================\n  Files           214      214              \n  Lines         18315    18353      +38     \n  Branches       1988     1997       +9     \n============================================\n+ Hits           4975     4978       +3     \n- Misses        13014    13050      +36     \n+ Partials        326      325       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.64% <0.00%> (-2.43%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.21% <0.00%> (-0.06%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `54.13% <0.00%> (+0.50%)` | :arrow_up: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.23% <0.00%> (+1.06%)` | :arrow_up: |\n| ... and [1 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1258?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

LGTM

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1257](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (644aa6f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/251b923b5beb0bd13cdf8059a39edc7d6e435364?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (251b923) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1257      +/-   ##\n============================================\n- Coverage     27.11%   27.10%   -0.01%     \n+ Complexity      811      810       -1     \n============================================\n  Files           214      214              \n  Lines         18353    18353              \n  Branches       1997     1997              \n============================================\n- Hits           4975     4973       -2     \n  Misses        13052    13052              \n- Partials        326      328       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <ø> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1257?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1255](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d61e13c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c6496559331d0b27b0d3969217ed4af7285db3b0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c649655) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1255      +/-   ##\n============================================\n- Coverage     27.14%   27.11%   -0.02%     \n+ Complexity      814      811       -3     \n============================================\n  Files           214      214              \n  Lines         18352    18352              \n  Branches       1996     1996              \n============================================\n- Hits           4980     4975       -5     \n- Misses        13049    13051       +2     \n- Partials        323      326       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.39% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1255?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.14% <0.00%> (-0.05%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1254](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (165b9ad) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/d7798127c977f6f6eeb03fffc2cb72952ef0576a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d779812) will **decrease** coverage by `0.00%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1254      +/-   ##\n============================================\n- Coverage     27.11%   27.10%   -0.00%     \n+ Complexity      811      810       -1     \n============================================\n  Files           214      214              \n  Lines         18356    18352       -4     \n  Branches       1997     1996       -1     \n============================================\n- Hits           4975     4973       -2     \n+ Misses        13054    13051       -3     \n- Partials        327      328       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.23% <100.00%> (+1.06%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1254?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1253](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (590401b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b09b85521a3492eba7eac5b2a4c14bbecd3b8b46?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b09b855) will **decrease** coverage by `0.06%`.\n> The diff coverage is `6.46%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1253      +/-   ##\n============================================\n- Coverage     27.17%   27.11%   -0.06%     \n  Complexity      811      811              \n============================================\n  Files           214      215       +1     \n  Lines         18315    18356      +41     \n  Branches       1988     1997       +9     \n============================================\n  Hits           4975     4975              \n- Misses        13014    13055      +41     \n  Partials        326      326              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/celeborn/client/read/RssInputStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Sc3NJbnB1dFN0cmVhbS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/client/read/WorkerPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Xb3JrZXJQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `77.42% <0.00%> (ø)` | |\n| [...eleborn/common/exception/CelebornIOException.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2V4Y2VwdGlvbi9DZWxlYm9ybklPRXhjZXB0aW9uLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.21% <50.00%> (-0.06%)` | :arrow_down: |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.64% <0.00%> (-2.43%)` | :arrow_down: |\n| ... and [7 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1253?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Can we also change the related methods signature from IOException -> CelebornIOException

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1252?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1252](https://codecov.io/gh/apache/incubator-celeborn/pull/1252?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (898abf0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/61065230bd3e1bfa42b81b54282db83e4a30a7d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6106523) will **not change** coverage.\n> The diff coverage is `0.00%`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1252   +/-   ##\n=========================================\n  Coverage     27.16%   27.16%           \n  Complexity      814      814           \n=========================================\n  Files           214      214           \n  Lines         18334    18334           \n  Branches       1994     1994           \n=========================================\n  Hits           4979     4979           \n  Misses        13030    13030           \n  Partials        325      325           \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1252?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1252?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <ø> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1252?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.39% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1251?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1251](https://codecov.io/gh/apache/incubator-celeborn/pull/1251?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ab23c54) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/61065230bd3e1bfa42b81b54282db83e4a30a7d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6106523) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1251      +/-   ##\n============================================\n- Coverage     27.16%   27.12%   -0.03%     \n+ Complexity      814      813       -1     \n============================================\n  Files           214      214              \n  Lines         18334    18356      +22     \n  Branches       1994     1997       +3     \n============================================\n- Hits           4979     4978       -1     \n- Misses        13030    13052      +22     \n- Partials        325      326       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1251?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1251?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1251?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1249](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1052586) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/4bac21982f864ed358f9c6c86dfd8be2cf848e20?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4bac219) will **decrease** coverage by `0.39%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1249      +/-   ##\n============================================\n- Coverage     27.57%   27.17%   -0.39%     \n+ Complexity      812      811       -1     \n============================================\n  Files           214      214              \n  Lines         17965    18314     +349     \n  Branches       1950     1988      +38     \n============================================\n+ Hits           4952     4975      +23     \n- Misses        12689    13013     +324     \n- Partials        324      326       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `54.13% <ø> (+0.50%)` | :arrow_up: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `78.27% <0.00%> (-3.55%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `32.31% <0.00%> (-2.11%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.18% <0.00%> (-1.03%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.41% <0.00%> (-0.16%)` | :arrow_down: |\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [5 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1249?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1248?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1248](https://codecov.io/gh/apache/incubator-celeborn/pull/1248?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (258373b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bfb39632d95ad0c6d160f70b0a3ee302d34af8f7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bfb3963) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1248      +/-   ##\n============================================\n- Coverage     27.18%   27.16%   -0.02%     \n+ Complexity      813      810       -3     \n============================================\n  Files           214      214              \n  Lines         18315    18315              \n  Branches       1988     1988              \n============================================\n- Hits           4978     4973       -5     \n- Misses        13012    13014       +2     \n- Partials        325      328       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1248?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1247?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1247](https://codecov.io/gh/apache/incubator-celeborn/pull/1247?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1da7abf) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bfb39632d95ad0c6d160f70b0a3ee302d34af8f7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bfb3963) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1247   +/-   ##\n=========================================\n  Coverage     27.18%   27.18%           \n  Complexity      813      813           \n=========================================\n  Files           214      214           \n  Lines         18315    18315           \n  Branches       1988     1988           \n=========================================\n  Hits           4978     4978           \n  Misses        13012    13012           \n  Partials        325      325           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1246](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (257dbc8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bfb39632d95ad0c6d160f70b0a3ee302d34af8f7?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bfb3963) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 257dbc8 differs from pull request most recent head fab5620. Consider uploading reports for the commit fab5620 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1246      +/-   ##\n============================================\n- Coverage     27.18%   27.16%   -0.02%     \n  Complexity      813      813              \n============================================\n  Files           214      214              \n  Lines         18315    18330      +15     \n  Branches       1988     1992       +4     \n============================================\n  Hits           4978     4978              \n- Misses        13012    13026      +14     \n- Partials        325      326       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.21% <0.00%> (-0.06%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.64% <0.00%> (-2.43%)` | :arrow_down: |\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1246?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `54.13% <0.00%> (+0.50%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1245](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5637221) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3aacede5f8f2cab9bcd9ecc3fe7902ca7d204c5d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3aacede) will **increase** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1245      +/-   ##\n============================================\n+ Coverage     27.54%   27.58%   +0.05%     \n- Complexity      808      813       +5     \n============================================\n  Files           214      214              \n  Lines         17965    17965              \n  Branches       1950     1950              \n============================================\n+ Hits           4946     4954       +8     \n+ Misses        12691    12687       -4     \n+ Partials        328      324       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1245?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1244](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (30ccdf1) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3aacede5f8f2cab9bcd9ecc3fe7902ca7d204c5d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3aacede) will **decrease** coverage by `0.35%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1244      +/-   ##\n============================================\n- Coverage     27.54%   27.18%   -0.35%     \n- Complexity      808      813       +5     \n============================================\n  Files           214      214              \n  Lines         17965    18315     +350     \n  Branches       1950     1988      +38     \n============================================\n+ Hits           4946     4978      +32     \n- Misses        12691    13012     +321     \n+ Partials        328      325       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.27% <0.00%> (+0.24%)` | :arrow_up: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `78.27% <0.00%> (-3.55%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `32.31% <0.00%> (-2.11%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.18% <0.00%> (-1.03%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.41% <0.00%> (-0.16%)` | :arrow_down: |\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [7 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1244?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1242](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7e4d099) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/318157e3e9e2a4b9ffdada4a59779772f9ebd205?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (318157e) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1242      +/-   ##\n============================================\n- Coverage     27.22%   27.18%   -0.04%     \n  Complexity      806      806              \n============================================\n  Files           212      213       +1     \n  Lines         18000    18043      +43     \n  Branches       1966     1967       +1     \n============================================\n+ Hits           4899     4903       +4     \n- Misses        12777    12815      +38     \n- Partials        324      325       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `50.58% <0.00%> (-0.61%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.21% <0.00%> (-0.29%)` | :arrow_down: |\n| [.../common/network/protocol/OpenStreamWithCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1242?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtV2l0aENyZWRpdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1241?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1241](https://codecov.io/gh/apache/incubator-celeborn/pull/1241?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a4248c3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/318157e3e9e2a4b9ffdada4a59779772f9ebd205?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (318157e) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1241      +/-   ##\n============================================\n+ Coverage     27.22%   27.24%   +0.03%     \n- Complexity      806      809       +3     \n============================================\n  Files           212      212              \n  Lines         18000    18000              \n  Branches       1966     1966              \n============================================\n+ Hits           4899     4903       +4     \n+ Misses        12777    12775       -2     \n+ Partials        324      322       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+0.93%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1241?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

The failed UT seems to not related to this pr

That UT is not stable yet.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1239](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4fa600a) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/4fb5b3d5479292eea866ca0123b3360e8568fa23?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4fb5b3d) will **decrease** coverage by `0.11%`.\n> The diff coverage is `3.71%`.\n\n> :exclamation: Current head 4fa600a differs from pull request most recent head 507d2a4. Consider uploading reports for the commit 507d2a4 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1239      +/-   ##\n============================================\n- Coverage     27.24%   27.13%   -0.11%     \n  Complexity      808      808              \n============================================\n  Files           212      214       +2     \n  Lines         17997    18325     +328     \n  Branches       1964     1990      +26     \n============================================\n+ Hits           4902     4970      +68     \n- Misses        12772    13025     +253     \n- Partials        323      330       +7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/common/meta/WorkerInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VySW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `85.64% <12.50%> (-2.43%)` | :arrow_down: |\n| [...born/common/network/buffer/NettyManagedBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmV0dHlNYW5hZ2VkQnVmZmVyLmphdmE=) | `52.95% <0.00%> (-11.34%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `63.83% <0.00%> (-9.21%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `32.31% <0.00%> (-4.53%)` | :arrow_down: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `78.27% <0.00%> (-3.55%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.39% <0.00%> (-2.80%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.58% <0.00%> (-1.75%)` | :arrow_down: |\n| ... and [30 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1239?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1238](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8316ec2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2068e6ae377ca7d7936b9f2aff1b7363ec1bf064?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2068e6a) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1238      +/-   ##\n============================================\n- Coverage     27.24%   27.22%   -0.02%     \n+ Complexity      808      806       -2     \n============================================\n  Files           212      212              \n  Lines         17997    18000       +3     \n  Branches       1964     1966       +2     \n============================================\n- Hits           4902     4899       -3     \n- Misses        12772    12777       +5     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.92% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1238?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks, merged to main/0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1237](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c12c77c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.04%`.\n> The diff coverage is `3.04%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1237      +/-   ##\n============================================\n+ Coverage     27.18%   27.22%   +0.04%     \n  Complexity      806      806              \n============================================\n  Files           212      212              \n  Lines         17974    18003      +29     \n  Branches       1964     1967       +3     \n============================================\n+ Hits           4885     4899      +14     \n- Misses        12766    12780      +14     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [2 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1237?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @FMX @RexXiong @AngersZhuuuu please take a review

I have run regression and results are good

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1235?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1235](https://codecov.io/gh/apache/incubator-celeborn/pull/1235?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e26c450) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/4fb5b3d5479292eea866ca0123b3360e8568fa23?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4fb5b3d) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1235      +/-   ##\n============================================\n- Coverage     27.24%   27.21%   -0.03%     \n+ Complexity      808      804       -4     \n============================================\n  Files           212      212              \n  Lines         17997    17999       +2     \n  Branches       1964     1964              \n============================================\n- Hits           4902     4896       -6     \n- Misses        12772    12776       +4     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1235?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1235?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1235?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1234](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (03b0d63) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.05%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1234      +/-   ##\n============================================\n+ Coverage     27.18%   27.23%   +0.05%     \n  Complexity      806      806              \n============================================\n  Files           212      212              \n  Lines         17974    17997      +23     \n  Branches       1964     1964              \n============================================\n+ Hits           4885     4899      +14     \n- Misses        12766    12774       +8     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1234?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (+9.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1233](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (af4fc83) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.01%`.\n> The diff coverage is `16.67%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1233      +/-   ##\n============================================\n+ Coverage     27.18%   27.19%   +0.01%     \n+ Complexity      806      802       -4     \n============================================\n  Files           212      212              \n  Lines         17974    17998      +24     \n  Branches       1964     1966       +2     \n============================================\n+ Hits           4885     4893       +8     \n- Misses        12766    12777      +11     \n- Partials        323      328       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1233?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (+9.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1232](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (315fa2e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1132cc25ab1717b67c3fd53b8f0632b3b7d96f71?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1132cc2) will **increase** coverage by `0.03%`.\n> The diff coverage is `67.40%`.\n\n> :exclamation: Current head 315fa2e differs from pull request most recent head 488f55f. Consider uploading reports for the commit 488f55f to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1232      +/-   ##\n============================================\n+ Coverage     27.10%   27.13%   +0.03%     \n- Complexity      811      821      +10     \n============================================\n  Files           215      215              \n  Lines         18360    18468     +108     \n  Branches       1999     1987      -12     \n============================================\n+ Hits           4975     5009      +34     \n- Misses        13059    13132      +73     \n- Partials        326      327       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ommon/network/buffer/FileSegmentManagedBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvRmlsZVNlZ21lbnRNYW5hZ2VkQnVmZmVyLmphdmE=) | `29.32% <ø> (ø)` | |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <ø> (ø)` | |\n| [...eleborn/common/network/server/TransportServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0U2VydmVyLmphdmE=) | `73.69% <ø> (ø)` | |\n| [...eleborn/common/internal/config/ConfigBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdCdWlsZGVyLnNjYWxh) | `76.72% <ø> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.37% <0.00%> (-0.03%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.19% <85.72%> (+0.05%)` | :arrow_up: |\n| [...ava/org/apache/celeborn/common/util/JavaUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9KYXZhVXRpbHMuamF2YQ==) | `42.04% <86.67%> (ø)` | |\n| ... and [15 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1232?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @FMX @RexXiong @AngersZhuuuu please review this pr

ping @FMX @pan3793 I have refactored the code, please take a look

regression passed

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1230](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2252acc) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2068e6ae377ca7d7936b9f2aff1b7363ec1bf064?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2068e6a) will **increase** coverage by `0.13%`.\n> The diff coverage is `26.81%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1230      +/-   ##\n============================================\n+ Coverage     27.24%   27.37%   +0.13%     \n- Complexity      808      810       +2     \n============================================\n  Files           212      213       +1     \n  Lines         17997    17958      -39     \n  Branches       1964     1964              \n============================================\n+ Hits           4902     4914      +12     \n+ Misses        12772    12717      -55     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `34.43% <0.00%> (-2.41%)` | :arrow_down: |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.04% <7.70%> (-1.31%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `63.83% <43.25%> (-9.21%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.23% <50.00%> (+0.22%)` | :arrow_up: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `83.34% <100.00%> (ø)` | |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `82.61% <100.00%> (+0.80%)` | :arrow_up: |\n| [.../apache/celeborn/common/write/PushRequestInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFJlcXVlc3RJbmZvLmphdmE=) | `100.00% <100.00%> (ø)` | |\n| ... and [6 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1230?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1229](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e37951) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.06%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1229      +/-   ##\n============================================\n+ Coverage     27.18%   27.24%   +0.06%     \n- Complexity      806      808       +2     \n============================================\n  Files           212      212              \n  Lines         17974    17997      +23     \n  Branches       1964     1964              \n============================================\n+ Hits           4885     4902      +17     \n- Misses        12766    12772       +6     \n  Partials        323      323              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1229?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (+9.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1228?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1228](https://codecov.io/gh/apache/incubator-celeborn/pull/1228?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fa14153) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/0c8bb831149b27b18e82048a49ed92a904be4889?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0c8bb83) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1228   +/-   ##\n=========================================\n  Coverage     27.17%   27.17%           \n  Complexity      811      811           \n=========================================\n  Files           214      214           \n  Lines         18301    18301           \n  Branches       1985     1985           \n=========================================\n  Hits           4972     4972           \n  Misses        13003    13003           \n  Partials        326      326           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

It is covered by another PR. So it will be closed.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1226](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3e9593) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.07%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1226      +/-   ##\n============================================\n+ Coverage     27.18%   27.25%   +0.07%     \n  Complexity      806      806              \n============================================\n  Files           212      212              \n  Lines         17974    18003      +29     \n  Branches       1964     1964              \n============================================\n+ Hits           4885     4905      +20     \n- Misses        12766    12774       +8     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (+9.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1225](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f26b61d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `0.19%`.\n> The diff coverage is `70.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1225      +/-   ##\n============================================\n+ Coverage     27.18%   27.36%   +0.19%     \n- Complexity      806      808       +2     \n============================================\n  Files           212      212              \n  Lines         17974    18027      +53     \n  Branches       1964     1963       -1     \n============================================\n+ Hits           4885     4932      +47     \n- Misses        12766    12772       +6     \n  Partials        323      323              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.86% <0.00%> (-0.05%)` | :arrow_down: |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `55.35% <77.42%> (+14.17%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1225?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `77.78% <0.00%> (+10.11%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1224](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8724ce5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/80c922c2d160011e2433e695724a26919f5181fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (80c922c) will **increase** coverage by `0.03%`.\n> The diff coverage is `24.00%`.\n\n> :exclamation: Current head 8724ce5 differs from pull request most recent head e455dbb. Consider uploading reports for the commit e455dbb to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1224      +/-   ##\n============================================\n+ Coverage     27.53%   27.56%   +0.03%     \n- Complexity      807      811       +4     \n============================================\n  Files           214      214              \n  Lines         17965    17980      +15     \n  Branches       1950     1952       +2     \n============================================\n+ Hits           4945     4954       +9     \n- Misses        12691    12701      +10     \n+ Partials        329      325       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `31.58% <0.00%> (-2.84%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.32% <46.16%> (+0.28%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1224?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1223](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1d6f695) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.03%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1223      +/-   ##\n============================================\n- Coverage     27.18%   27.15%   -0.03%     \n+ Complexity      806      805       -1     \n============================================\n  Files           212      214       +2     \n  Lines         17974    18060      +86     \n  Branches       1964     1967       +3     \n============================================\n+ Hits           4885     4902      +17     \n- Misses        12766    12831      +65     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `50.00% <0.00%> (-1.19%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.21% <0.00%> (-0.29%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/common/network/protocol/BacklogAnnouncement.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CYWNrbG9nQW5ub3VuY2VtZW50LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [2 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1223?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1222](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (192e1fd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/57f775a7e9db42d530fbe72e7ae4b0ac601725af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (57f775a) will **increase** coverage by `0.14%`.\n> The diff coverage is `35.72%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1222      +/-   ##\n============================================\n+ Coverage     27.28%   27.41%   +0.14%     \n- Complexity      807      810       +3     \n============================================\n  Files           215      214       -1     \n  Lines         18022    17923      -99     \n  Branches       1967     1951      -16     \n============================================\n- Hits           4915     4912       -3     \n+ Misses        12777    12686      -91     \n+ Partials        330      325       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/common/network/buffer/NettyManagedBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmV0dHlNYW5hZ2VkQnVmZmVyLmphdmE=) | `52.95% <0.00%> (-11.34%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `47.88% <0.00%> (-2.12%)` | :arrow_down: |\n| [...pache/celeborn/common/network/util/NettyUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL05ldHR5VXRpbHMuamF2YQ==) | `48.28% <ø> (+4.16%)` | :arrow_up: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `81.82% <ø> (-0.79%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.09% <ø> (-0.08%)` | :arrow_down: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `81.58% <66.67%> (-1.75%)` | :arrow_down: |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.15% <75.00%> (-0.71%)` | :arrow_down: |\n| [...twork/TransportFrameDecoderWithBufferSupplier.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LWZsaW5rL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvY2VsZWJvcm4vcGx1Z2luL2ZsaW5rL25ldHdvcmsvVHJhbnNwb3J0RnJhbWVEZWNvZGVyV2l0aEJ1ZmZlclN1cHBsaWVyLmphdmE=) | | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1222?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1221](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4278b34) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3aacede5f8f2cab9bcd9ecc3fe7902ca7d204c5d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3aacede) will **decrease** coverage by `0.39%`.\n> The diff coverage is `9.93%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1221      +/-   ##\n============================================\n- Coverage     27.54%   27.15%   -0.39%     \n  Complexity      808      808              \n============================================\n  Files           214      214              \n  Lines         17965    18301     +336     \n  Branches       1950     1985      +35     \n============================================\n+ Hits           4946     4967      +21     \n- Misses        12691    13005     +314     \n- Partials        328      329       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `48.39% <ø> (+0.52%)` | :arrow_up: |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...on/network/server/memory/ReadBufferDispatcher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L1JlYWRCdWZmZXJEaXNwYXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.41% <0.00%> (-0.16%)` | :arrow_down: |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `36.18% <27.78%> (-1.03%)` | :arrow_down: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `78.27% <75.00%> (-3.55%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.14% <85.72%> (+0.06%)` | :arrow_up: |\n| ... and [3 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1221?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

pls add more ut for Flink plugin.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1220](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (34eb668) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1220      +/-   ##\n============================================\n- Coverage     27.18%   27.12%   -0.06%     \n+ Complexity      806      802       -4     \n============================================\n  Files           212      212              \n  Lines         17974    17992      +18     \n  Branches       1964     1964              \n============================================\n- Hits           4885     4879       -6     \n- Misses        12766    12786      +20     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/common/util/ThreadUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVGhyZWFkVXRpbHMuc2NhbGE=) | `10.31% <0.00%> (-0.32%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1220?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1219?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1219](https://codecov.io/gh/apache/incubator-celeborn/pull/1219?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cf2d732) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1219      +/-   ##\n============================================\n- Coverage     27.18%   27.15%   -0.03%     \n+ Complexity      806      802       -4     \n============================================\n  Files           212      212              \n  Lines         17974    17974              \n  Branches       1964     1964              \n============================================\n- Hits           4885     4879       -6     \n- Misses        12766    12768       +2     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1219?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1219?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1218?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1218](https://codecov.io/gh/apache/incubator-celeborn/pull/1218?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (923bf17) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.01%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1218      +/-   ##\n============================================\n- Coverage     27.18%   27.17%   -0.01%     \n+ Complexity      806      804       -2     \n============================================\n  Files           212      212              \n  Lines         17974    17974              \n  Branches       1964     1964              \n============================================\n- Hits           4885     4882       -3     \n- Misses        12766    12768       +2     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1218?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1218?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.01% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1218?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1217](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7a4fd3b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/534853bf8a001f736a70127a1759bdbda7033a01?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (534853b) will **increase** coverage by `0.01%`.\n> The diff coverage is `11.12%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1217      +/-   ##\n============================================\n+ Coverage     27.17%   27.18%   +0.01%     \n- Complexity      805      808       +3     \n============================================\n  Files           213      214       +1     \n  Lines         18043    18060      +17     \n  Branches       1967     1967              \n============================================\n+ Hits           4901     4907       +6     \n- Misses        12815    12829      +14     \n+ Partials        327      324       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...n/common/network/protocol/BacklogAnnouncement.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CYWNrbG9nQW5ub3VuY2VtZW50LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `50.00% <50.00%> (-0.57%)` | :arrow_down: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <0.00%> (-0.92%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1217?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1216](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f552857) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.01%`.\n> The diff coverage is `20.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1216      +/-   ##\n============================================\n- Coverage     27.18%   27.16%   -0.01%     \n+ Complexity      806      804       -2     \n============================================\n  Files           212      212              \n  Lines         17974    17979       +5     \n  Branches       1964     1964              \n============================================\n- Hits           4885     4883       -2     \n- Misses        12766    12772       +6     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1216?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1215](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (10acd89) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **increase** coverage by `15.52%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff              @@\n##               main    #1215       +/-   ##\n=============================================\n+ Coverage     27.18%   42.69%   +15.52%     \n=============================================\n  Files           212      153       -59     \n  Lines         17974     9726     -8248     \n  Branches       1964     1014      -950     \n=============================================\n- Hits           4885     4152      -733     \n+ Misses        12766     5270     -7496     \n+ Partials        323      304       -19     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | | |\n| [...ava/org/apache/celeborn/client/write/PushTask.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFRhc2suamF2YQ==) | | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | | |\n| [...oy/master/clustermeta/SingleMasterMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvU2luZ2xlTWFzdGVyTWV0YU1hbmFnZXIuamF2YQ==) | | |\n| [.../apache/celeborn/client/compress/RssZstdTrait.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvUnNzWnN0ZFRyYWl0LmphdmE=) | | |\n| [...e/celeborn/client/compress/RssLz4Decompressor.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvUnNzTHo0RGVjb21wcmVzc29yLmphdmE=) | | |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | | |\n| [...g/apache/celeborn/client/compress/RssLz4Trait.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvUnNzTHo0VHJhaXQuamF2YQ==) | | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | | |\n| [...ploy/master/clustermeta/ha/MasterClusterInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL2NsdXN0ZXJtZXRhL2hhL01hc3RlckNsdXN0ZXJJbmZvLnNjYWxh) | | |\n| ... and [116 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1215?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1214](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c2b6834) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/adb6592d316b28fdf26cc0364779b64de96c9e6a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (adb6592) will **decrease** coverage by `0.03%`.\n> The diff coverage is `20.41%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1214      +/-   ##\n============================================\n- Coverage     27.18%   27.15%   -0.03%     \n+ Complexity      806      802       -4     \n============================================\n  Files           212      213       +1     \n  Lines         17974    18043      +69     \n  Branches       1964     1967       +3     \n============================================\n+ Hits           4885     4897      +12     \n- Misses        12766    12817      +51     \n- Partials        323      329       +6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../common/network/protocol/OpenStreamWithCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtV2l0aENyZWRpdC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `50.58% <50.00%> (-0.61%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.21% <57.15%> (-0.29%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [1 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1214?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1213](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dbae340) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cfe81969c943a072ad440b3d79d078866fd40552?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cfe8196) will **decrease** coverage by `0.00%`.\n> The diff coverage is `20.29%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1213      +/-   ##\n============================================\n- Coverage     27.21%   27.21%   -0.00%     \n+ Complexity      806      804       -2     \n============================================\n  Files           212      212              \n  Lines         17953    17997      +44     \n  Branches       1957     1964       +7     \n============================================\n+ Hits           4885     4896      +11     \n- Misses        12745    12774      +29     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.92% <0.00%> (-0.02%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `76.86% <61.91%> (+9.18%)` | :arrow_up: |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1213?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture @nafiyAix @AngersZhuuuu Please take a look

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1212?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1212](https://codecov.io/gh/apache/incubator-celeborn/pull/1212?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ee26596) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cfe81969c943a072ad440b3d79d078866fd40552?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cfe8196) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1212      +/-   ##\n============================================\n- Coverage     27.21%   27.18%   -0.03%     \n  Complexity      806      806              \n============================================\n  Files           212      212              \n  Lines         17953    17974      +21     \n  Branches       1957     1964       +7     \n============================================\n  Hits           4885     4885              \n- Misses        12745    12766      +21     \n  Partials        323      323              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1212?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1212?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.92% <0.00%> (-0.02%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1212?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1211](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (46bb2ce) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ae32c702b6e9922f75bc7ce14ac1d79293b0ab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ae32c70) will **increase** coverage by `0.77%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1211      +/-   ##\n============================================\n+ Coverage     26.42%   27.19%   +0.77%     \n- Complexity      758      806      +48     \n============================================\n  Files           206      212       +6     \n  Lines         17595    17972     +377     \n  Branches       1930     1963      +33     \n============================================\n+ Hits           4648     4885     +237     \n- Misses        12629    12764     +135     \n- Partials        318      323       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.92% <0.00%> (-0.02%)` | :arrow_down: |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [.../deploy/worker/congestcontrol/BufferStatusHub.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQnVmZmVyU3RhdHVzSHViLmphdmE=) | `78.95% <0.00%> (ø)` | |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `77.42% <0.00%> (ø)` | |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `67.68% <0.00%> (ø)` | |\n| ... and [8 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1211?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1210](https://codecov.io/gh/apache/incubator-celeborn/pull/1210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b9bed34) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cfe81969c943a072ad440b3d79d078866fd40552?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cfe8196) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1210      +/-   ##\n============================================\n- Coverage     27.21%   27.17%   -0.04%     \n+ Complexity      806      804       -2     \n============================================\n  Files           212      212              \n  Lines         17953    17970      +17     \n  Branches       1957     1963       +6     \n============================================\n- Hits           4885     4882       -3     \n- Misses        12745    12764      +19     \n- Partials        323      324       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1209?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1209](https://codecov.io/gh/apache/incubator-celeborn/pull/1209?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bab8630) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bff6e91e0b2c29bc412705a64b1afd1f369d7c44?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bff6e91) will **decrease** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1209      +/-   ##\n============================================\n- Coverage     27.25%   27.18%   -0.06%     \n+ Complexity      806      802       -4     \n============================================\n  Files           212      212              \n  Lines         17932    17953      +21     \n  Branches       1962     1957       -5     \n============================================\n- Hits           4885     4879       -6     \n- Misses        12724    12747      +23     \n- Partials        323      327       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1209?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1209?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1209?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Pls run `./dev/reformat` to format the code

ping @waitinfuture @zy-jordan Could you take a review?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1208](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a4e8378) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/cfe81969c943a072ad440b3d79d078866fd40552?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cfe8196) will **increase** coverage by `0.11%`.\n> The diff coverage is `21.85%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1208      +/-   ##\n============================================\n+ Coverage     27.21%   27.32%   +0.11%     \n- Complexity      806      810       +4     \n============================================\n  Files           212      214       +2     \n  Lines         17953    18005      +52     \n  Branches       1957     1967      +10     \n============================================\n+ Hits           4885     4918      +33     \n- Misses        12745    12759      +14     \n- Partials        323      328       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `34.43% <0.00%> (-2.41%)` | :arrow_down: |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `8.64% <0.00%> (+1.70%)` | :arrow_up: |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.04% <7.70%> (-1.31%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `63.83% <43.25%> (-9.21%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `81.17% <50.00%> (+0.17%)` | :arrow_up: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `83.34% <100.00%> (ø)` | |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `82.61% <100.00%> (+0.80%)` | :arrow_up: |\n| ... and [17 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1208?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1207](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (424ab75) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c4020100dbc8d665318b399d98511dc3d8b2885a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c402010) will **decrease** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1207      +/-   ##\n============================================\n- Coverage     26.45%   26.40%   -0.04%     \n+ Complexity      761      756       -5     \n============================================\n  Files           206      206              \n  Lines         17594    17595       +1     \n  Branches       1930     1930              \n============================================\n- Hits           4652     4645       -7     \n- Misses        12628    12631       +3     \n- Partials        314      319       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-1.63%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1207?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1206?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1206](https://codecov.io/gh/apache/incubator-celeborn/pull/1206?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0a70e19) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8e903840af3c6a780268be463d3a7ad615913366?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e90384) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1206      +/-   ##\n============================================\n- Coverage     26.44%   26.44%   -0.00%     \n  Complexity      760      760              \n============================================\n  Files           206      206              \n  Lines         17594    17595       +1     \n  Branches       1930     1930              \n============================================\n  Hits           4651     4651              \n- Misses        12628    12629       +1     \n  Partials        315      315              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1206?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1206?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1205?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1205](https://codecov.io/gh/apache/incubator-celeborn/pull/1205?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (da5f11d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8e903840af3c6a780268be463d3a7ad615913366?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e90384) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1205      +/-   ##\n============================================\n+ Coverage     26.44%   26.46%   +0.02%     \n- Complexity      760      762       +2     \n============================================\n  Files           206      206              \n  Lines         17594    17594              \n  Branches       1930     1930              \n============================================\n+ Hits           4651     4654       +3     \n+ Misses        12628    12626       -2     \n+ Partials        315      314       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1205?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1205?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1205?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1204?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1204](https://codecov.io/gh/apache/incubator-celeborn/pull/1204?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bc02b23) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8e903840af3c6a780268be463d3a7ad615913366?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e90384) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1204      +/-   ##\n============================================\n+ Coverage     26.44%   26.46%   +0.02%     \n- Complexity      760      762       +2     \n============================================\n  Files           206      206              \n  Lines         17594    17594              \n  Branches       1930     1930              \n============================================\n+ Hits           4651     4654       +3     \n+ Misses        12628    12626       -2     \n+ Partials        315      314       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1204?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1204?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1204?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1203](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (826e91b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ff683ffc919aff2c13ca97806c8f78dbf9afb6d0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ff683ff) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1203      +/-   ##\n============================================\n- Coverage     26.44%   26.41%   -0.02%     \n+ Complexity      760      758       -2     \n============================================\n  Files           206      206              \n  Lines         17596    17600       +4     \n  Branches       1921     1925       +4     \n============================================\n- Hits           4651     4648       -3     \n- Misses        12630    12634       +4     \n- Partials        315      318       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1203?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1202](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fdb69ef) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ced08a1d89740a1eaace03fde91ee9cb6319a22f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ced08a1) will **decrease** coverage by `0.44%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head fdb69ef differs from pull request most recent head 3e055aa. Consider uploading reports for the commit 3e055aa to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1202      +/-   ##\n============================================\n- Coverage     26.88%   26.44%   -0.44%     \n+ Complexity      777      760      -17     \n============================================\n  Files           205      206       +1     \n  Lines         17433    17597     +164     \n  Branches       1899     1930      +31     \n============================================\n- Hits           4685     4651      -34     \n- Misses        12425    12631     +206     \n+ Partials        323      315       -8     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `38.03% <ø> (+1.53%)` | :arrow_up: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <ø> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.50% <0.00%> (-0.83%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.57% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [14 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1202?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR actually fixes [CELEBORN-249](https://issues.apache.org/jira/projects/CELEBORN/issues/CELEBORN-249?filter=allopenissues)

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1201](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9b8950e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ced08a1d89740a1eaace03fde91ee9cb6319a22f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ced08a1) will **increase** coverage by `15.25%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff              @@\n##               main    #1201       +/-   ##\n=============================================\n+ Coverage     26.88%   42.12%   +15.25%     \n=============================================\n  Files           205      147       -58     \n  Lines         17433     9362     -8071     \n  Branches       1899      984      -915     \n=============================================\n- Hits           4685     3943      -742     \n+ Misses        12425     5125     -7300     \n+ Partials        323      294       -29     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ploy/worker/storage/ReducePartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9SZWR1Y2VQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | | |\n| [...che/celeborn/client/compress/RssLz4Compressor.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvY29tcHJlc3MvUnNzTHo0Q29tcHJlc3Nvci5qYXZh) | | |\n| [...leborn/service/deploy/master/MasterArguments.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3RlckFyZ3VtZW50cy5zY2FsYQ==) | | |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | | |\n| [...pache/celeborn/client/ApplicationHeartbeater.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0FwcGxpY2F0aW9uSGVhcnRiZWF0ZXIuc2NhbGE=) | | |\n| [...rg/apache/celeborn/client/read/RssInputStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Sc3NJbnB1dFN0cmVhbS5qYXZh) | | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | | |\n| [...leborn/service/deploy/worker/WorkerArguments.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlckFyZ3VtZW50cy5zY2FsYQ==) | | |\n| [...rn/service/deploy/master/clustermeta/MetaUtil.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvTWV0YVV0aWwuamF2YQ==) | | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | | |\n| ... and [112 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1201?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1200](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (21329e0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/54cf2e18d84519534ff549ee6aa24013a47109e0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (54cf2e1) will **decrease** coverage by `0.35%`.\n> The diff coverage is `77.28%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1200      +/-   ##\n============================================\n- Coverage     26.82%   26.47%   -0.35%     \n+ Complexity      770      762       -8     \n============================================\n  Files           203      206       +3     \n  Lines         17412    17587     +175     \n  Branches       1899     1916      +17     \n============================================\n- Hits           4669     4654      -15     \n- Misses        12418    12619     +201     \n+ Partials        325      314      -11     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.50% <50.00%> (-0.83%)` | :arrow_down: |\n| [...born/common/network/server/ChunkStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQ2h1bmtTdHJlYW1NYW5hZ2VyLmphdmE=) | `41.18% <84.22%> (+6.70%)` | :arrow_up: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `73.05% <0.00%> (-5.08%)` | :arrow_down: |\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `36.85% <0.00%> (-2.78%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.57% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [21 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1200?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1198?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1198](https://codecov.io/gh/apache/incubator-celeborn/pull/1198?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1ebac74) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c410392284f556360c0cb1492cb23d2101e0a396?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c410392) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1198      +/-   ##\n============================================\n+ Coverage     26.84%   26.90%   +0.06%     \n- Complexity      773      779       +6     \n============================================\n  Files           205      205              \n  Lines         17433    17433              \n  Branches       1899     1899              \n============================================\n+ Hits           4679     4688       +9     \n+ Misses        12427    12423       -4     \n+ Partials        327      322       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1198?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1198?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1198?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Does it mean that the current CI can not detect the test failures?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1197?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1197](https://codecov.io/gh/apache/incubator-celeborn/pull/1197?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7a5d148) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/021004714bf5c1db4527c686a7d71c4a3a6ca72b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0210047) will **decrease** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1197      +/-   ##\n============================================\n- Coverage     26.89%   26.88%   -0.00%     \n  Complexity      777      777              \n============================================\n  Files           205      205              \n  Lines         17427    17433       +6     \n  Branches       1899     1899              \n============================================\n  Hits           4685     4685              \n- Misses        12419    12425       +6     \n  Partials        323      323              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1197?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1197?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> Does it mean that the current CI can not detect the test failures?\r\n\r\nSeems so, In my other pr, it cause a fallback, then meet this issue.

> > Does it mean that the current CI can not detect the test failures?\r\n> \r\n> Seems so, In my other pr, it cause a fallback, then meet this issue.\r\n\r\nWe need UTs for fallback casdes.

> > > Does it mean that the current CI can not detect the test failures?\r\n> > \r\n> > \r\n> > Seems so, In my other pr, it cause a fallback, then meet this issue.\r\n> \r\n> We need UTs for fallback casdes.\r\n\r\nAdded one UT

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1196?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1196](https://codecov.io/gh/apache/incubator-celeborn/pull/1196?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (494d0b9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2577f09938f09ea0a07049a98e5ee6484fdd9a3a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2577f09) will **decrease** coverage by `0.02%`.\n> The diff coverage is `87.50%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1196      +/-   ##\n============================================\n- Coverage     26.93%   26.91%   -0.02%     \n  Complexity      779      779              \n============================================\n  Files           205      205              \n  Lines         17432    17427       -5     \n  Branches       1899     1899              \n============================================\n- Hits           4693     4688       -5     \n  Misses        12417    12417              \n  Partials        322      322              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1196?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/client/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1196?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `26.86% <50.00%> (+0.69%)` | :arrow_up: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1196?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `73.05% <100.00%> (-1.33%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks, merged to main/branch-0.2

ping @waitinfuture @FMX @pan3793 

Thanks, merged to main/branch-0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1191?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1191](https://codecov.io/gh/apache/incubator-celeborn/pull/1191?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0ba2527) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7162be2fae752a90edb21bbb4c04d9bfb8d391b3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7162be2) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1191      +/-   ##\n============================================\n+ Coverage     26.86%   26.89%   +0.04%     \n- Complexity      772      776       +4     \n============================================\n  Files           205      205              \n  Lines         17399    17399              \n  Branches       1895     1895              \n============================================\n+ Hits           4672     4678       +6     \n+ Misses        12403    12401       -2     \n+ Partials        324      320       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1191?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1191?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Merged to main/branch-0.2

ping @waitinfuture Could you take a look?

After detail thought, in current to add PushResponse PushFailure will cause unhandled Compatibility Issues, so we may only do like this now.

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1190](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c5cea8b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1311fb53d1c959949007ee3751bf866457a1b74f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1311fb5) will **increase** coverage by `0.02%`.\n> The diff coverage is `56.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1190      +/-   ##\n============================================\n+ Coverage     26.87%   26.89%   +0.02%     \n+ Complexity      776      775       -1     \n============================================\n  Files           203      205       +2     \n  Lines         17411    17432      +21     \n  Branches       1899     1899              \n============================================\n+ Hits           4678     4687       +9     \n- Misses        12413    12419       +6     \n- Partials        320      326       +6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/network/client/TransportClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50LmphdmE=) | `36.85% <0.00%> (-2.78%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `74.39% <73.69%> (-3.74%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.58% <0.00%> (-0.04%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/meta/PartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | | |\n| [...g/apache/celeborn/common/util/CollectionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ29sbGVjdGlvblV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1190?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1189](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0be52ca) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e47f1e33b05515817d577e8975f7b9798ccdd9ce?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e47f1e3) will **decrease** coverage by `0.13%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1189      +/-   ##\n============================================\n- Coverage     27.01%   26.87%   -0.13%     \n- Complexity      774      776       +2     \n============================================\n  Files           202      203       +1     \n  Lines         17313    17411      +98     \n  Branches       1877     1899      +22     \n============================================\n+ Hits           4675     4678       +3     \n- Misses        12317    12413      +96     \n+ Partials        321      320       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.99% <0.00%> (-0.48%)` | :arrow_down: |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.95% <0.00%> (-0.06%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/common/metrics/MetricLabels.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljTGFiZWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1189?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @carp84 please review this pr, thanks!

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1188?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1188](https://codecov.io/gh/apache/incubator-celeborn/pull/1188?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5d15676) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1311fb53d1c959949007ee3751bf866457a1b74f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1311fb5) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1188      +/-   ##\n============================================\n- Coverage     26.87%   26.87%   -0.00%     \n  Complexity      776      776              \n============================================\n  Files           203      203              \n  Lines         17411    17412       +1     \n  Branches       1899     1899              \n============================================\n  Hits           4678     4678              \n- Misses        12413    12414       +1     \n  Partials        320      320              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1188?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1188?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.58% <0.00%> (-0.04%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Should it be ported to branch-0.2?

> \r\n\r\nported

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1187?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1187](https://codecov.io/gh/apache/incubator-celeborn/pull/1187?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f281dba) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1311fb53d1c959949007ee3751bf866457a1b74f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1311fb5) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1187   +/-   ##\n=========================================\n  Coverage     26.87%   26.87%           \n  Complexity      776      776           \n=========================================\n  Files           203      203           \n  Lines         17411    17411           \n  Branches       1899     1899           \n=========================================\n  Hits           4678     4678           \n  Misses        12413    12413           \n  Partials        320      320           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Please fill a JIRA ticket

Thanks, merged to main for 0.3.0

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1186?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1186](https://codecov.io/gh/apache/incubator-celeborn/pull/1186?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (50cccc3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1311fb53d1c959949007ee3751bf866457a1b74f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1311fb5) will **decrease** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1186      +/-   ##\n============================================\n- Coverage     26.87%   26.82%   -0.05%     \n+ Complexity      776      770       -6     \n============================================\n  Files           203      203              \n  Lines         17411    17411              \n  Branches       1899     1899              \n============================================\n- Hits           4678     4669       -9     \n- Misses        12413    12417       +4     \n- Partials        320      325       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1186?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1186?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1186?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

how about moving it to the website repo?

> how about moving it to the website repo?\r\n\r\nIn fact the contents in the slides are out-of-date. We can upgrade the contends and put it in website.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1185](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c48caa7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/04427f2b16669afddb7ff80fa051e21c911db8fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (04427f2) will **decrease** coverage by `0.43%`.\n> The diff coverage is `15.72%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1185      +/-   ##\n============================================\n- Coverage     26.83%   26.39%   -0.43%     \n+ Complexity      775      751      -24     \n============================================\n  Files           206      206              \n  Lines         17481    17576      +95     \n  Branches       1902     1915      +13     \n============================================\n- Hits           4689     4638      -51     \n- Misses        12466    12618     +152     \n+ Partials        326      320       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/common/write/DataBatches.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvRGF0YUJhdGNoZXMuamF2YQ==) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [7 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1185?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

One question is that if we need to pass client side PUSH_DATA_TIMEOUT to worker side to keep same timeout

> One question is that if we need to pass client side PUSH_DATA_TIMEOUT to worker side to keep same timeout\r\n\r\nI think so, different jobs may pass different configs

ping @waitinfuture Could you take a review?\r\n

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1184?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1184](https://codecov.io/gh/apache/incubator-celeborn/pull/1184?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d5dc5b7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/da061b6c82ed05e3d01559921f58c6831a102bf3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (da061b6) will **decrease** coverage by `0.00%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1184      +/-   ##\n============================================\n- Coverage     26.89%   26.88%   -0.00%     \n  Complexity      776      776              \n============================================\n  Files           205      205              \n  Lines         17399    17405       +6     \n  Branches       1895     1895              \n============================================\n  Hits           4678     4678              \n- Misses        12401    12407       +6     \n  Partials        320      320              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1184?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1184?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1183?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1183](https://codecov.io/gh/apache/incubator-celeborn/pull/1183?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ef7dcd2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8611a6440050553d6d4b0bb410daacc90c7297e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8611a64) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1183      +/-   ##\n============================================\n+ Coverage     26.93%   26.97%   +0.04%     \n- Complexity      770      774       +4     \n============================================\n  Files           203      203              \n  Lines         17339    17339              \n  Branches       1878     1878              \n============================================\n+ Hits           4669     4675       +6     \n+ Misses        12345    12343       -2     \n+ Partials        325      321       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/celeborn/common/haclient/RssHARetryClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vaGFjbGllbnQvUnNzSEFSZXRyeUNsaWVudC5qYXZh) | `73.04% <ø> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1183?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1182](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bb4d4f0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9ce48a648f6c28fe6e1ea41485e91d251178e4e1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9ce48a6) will **decrease** coverage by `0.04%`.\n> The diff coverage is `11.30%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1182      +/-   ##\n============================================\n- Coverage     26.89%   26.85%   -0.04%     \n- Complexity      775      777       +2     \n============================================\n  Files           205      206       +1     \n  Lines         17432    17481      +49     \n  Branches       1899     1902       +3     \n============================================\n+ Hits           4687     4692       +5     \n- Misses        12419    12466      +47     \n+ Partials        326      323       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/identity/UserIdentifier.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2lkZW50aXR5L1VzZXJJZGVudGlmaWVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...mon/metrics/source/ResourceConsumptionSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL1Jlc291cmNlQ29uc3VtcHRpb25Tb3VyY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.61% <87.50%> (+0.03%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...ommon/network/client/TransportResponseHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0UmVzcG9uc2VIYW5kbGVyLmphdmE=) | `73.05% <0.00%> (-1.33%)` | :arrow_down: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/client/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `26.86% <0.00%> (+0.69%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1182?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

How about current @waitinfuture @nafiyAix 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1181](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2494b62) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/122da47815c00f3de585d35cc8e5d47b8bb57421?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (122da47) will **decrease** coverage by `0.14%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1181      +/-   ##\n============================================\n- Coverage     26.98%   26.84%   -0.14%     \n+ Complexity      776      772       -4     \n============================================\n  Files           203      203              \n  Lines         17339    17411      +72     \n  Branches       1878     1899      +21     \n============================================\n- Hits           4678     4672       -6     \n- Misses        12341    12415      +74     \n- Partials        320      324       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `18.99% <0.00%> (-0.48%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `6.95% <0.00%> (-0.06%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1181?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

ping @waitinfuture Have change the code as discussed this morning, pls take a look

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1180?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1180](https://codecov.io/gh/apache/incubator-celeborn/pull/1180?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a1d714f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/4b6f7e459344d506c15d097d98192ad250dbc53c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4b6f7e4) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1180      +/-   ##\n============================================\n- Coverage     26.39%   26.38%   -0.01%     \n  Complexity      751      751              \n============================================\n  Files           206      206              \n  Lines         17576    17585       +9     \n  Branches       1915     1920       +5     \n============================================\n  Hits           4638     4638              \n- Misses        12618    12627       +9     \n  Partials        320      320              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1180?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1180?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> BTW, I think adding outstandingRpcs, outstandingPushes and outstandingFetches to metrics will be helpful.\r\n\r\nHard to do this, this information from each channel, channel will create and close, hard to collect these information\r\n

ping @waitinfuture 

IMO the description is not quite accurate. Client will treat timeout as PUSH_DATA_TIMEOUT_MASTER

ping @waitinfuture Could you take a look?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1179?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1179](https://codecov.io/gh/apache/incubator-celeborn/pull/1179?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (176ad95) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8611a6440050553d6d4b0bb410daacc90c7297e3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8611a64) will **increase** coverage by `0.02%`.\n> The diff coverage is `89.48%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1179      +/-   ##\n============================================\n+ Coverage     26.93%   26.95%   +0.02%     \n- Complexity      770      772       +2     \n============================================\n  Files           203      203              \n  Lines         17339    17339              \n  Branches       1878     1878              \n============================================\n+ Hits           4669     4672       +3     \n+ Misses        12345    12343       -2     \n+ Partials        325      324       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1179?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1179?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <89.48%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1179?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @nafiyAix @waitinfuture @FMX 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1178](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fdaefd6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e47f1e33b05515817d577e8975f7b9798ccdd9ce?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e47f1e3) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1178      +/-   ##\n============================================\n+ Coverage     27.01%   27.02%   +0.01%     \n- Complexity      774      776       +2     \n============================================\n  Files           202      202              \n  Lines         17313    17319       +6     \n  Branches       1877     1877              \n============================================\n+ Hits           4675     4678       +3     \n- Misses        12317    12321       +4     \n+ Partials        321      320       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.47% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1178?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1177](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (96d9e51) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/122da47815c00f3de585d35cc8e5d47b8bb57421?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (122da47) will **decrease** coverage by `0.75%`.\n> The diff coverage is `13.18%`.\n\n> :exclamation: Current head 96d9e51 differs from pull request most recent head 5004310. Consider uploading reports for the commit 5004310 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1177      +/-   ##\n============================================\n- Coverage     26.98%   26.23%   -0.75%     \n+ Complexity      776      759      -17     \n============================================\n  Files           203      208       +5     \n  Lines         17339    17844     +505     \n  Branches       1878     1949      +71     \n============================================\n+ Hits           4678     4679       +1     \n- Misses        12341    12853     +512     \n+ Partials        320      312       -8     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/client/read/WorkerPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Xb3JrZXJQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/network/buffer/NettyManagedBuffer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9idWZmZXIvTmV0dHlNYW5hZ2VkQnVmZmVyLmphdmE=) | `52.95% <0.00%> (-11.34%)` | :arrow_down: |\n| [...n/common/network/protocol/BacklogAnnouncement.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CYWNrbG9nQW5ub3VuY2VtZW50LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/network/protocol/OpenBufferStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuQnVmZmVyU3RyZWFtLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eborn/common/network/protocol/OpenChunkStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuQ2h1bmtTdHJlYW0uamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/network/protocol/OpenStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [56 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1177?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Close this pr and split it. Thanks to @RexXiong @zhongqiangczq .

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1176](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d216c47) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e09b629da21e31e755a32fdaee646e3e4dc51948?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e09b629) will **decrease** coverage by `0.67%`.\n> The diff coverage is `3.34%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1176      +/-   ##\n============================================\n- Coverage     27.06%   26.39%   -0.67%     \n- Complexity      764      770       +6     \n============================================\n  Files           200      205       +5     \n  Lines         17195    17687     +492     \n  Branches       1863     1931      +68     \n============================================\n+ Hits           4652     4666      +14     \n- Misses        12225    12698     +473     \n- Partials        318      323       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/client/read/WorkerPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Xb3JrZXJQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `85.86% <ø> (ø)` | |\n| [...n/common/network/protocol/BacklogAnnouncement.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9CYWNrbG9nQW5ub3VuY2VtZW50LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/network/protocol/OpenBufferStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuQnVmZmVyU3RyZWFtLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...eborn/common/network/protocol/OpenChunkStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuQ2h1bmtTdHJlYW0uamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/network/protocol/OpenStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9PcGVuU3RyZWFtLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `80.96% <ø> (-0.86%)` | :arrow_down: |\n| ... and [24 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1176?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Check Celeborn-235. Close this pr first.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1175](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (62f0379) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c5be79ee3d763603fca518eaed55da86c90f1828?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c5be79e) will **decrease** coverage by `0.03%`.\n> The diff coverage is `42.86%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1175      +/-   ##\n============================================\n- Coverage     27.02%   26.99%   -0.03%     \n+ Complexity      776      772       -4     \n============================================\n  Files           202      202              \n  Lines         17311    17313       +2     \n  Branches       1877     1877              \n============================================\n- Hits           4677     4672       -5     \n- Misses        12314    12317       +3     \n- Partials        320      324       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/client/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `26.17% <ø> (ø)` | |\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `38.95% <33.34%> (+0.24%)` | :arrow_up: |\n| [...va/org/apache/celeborn/client/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `78.58% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1175?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Tested TPCDS, Terasort and SkewJoin w/ killing worker, merging to main.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1174](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (18e81af) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e09b629da21e31e755a32fdaee646e3e4dc51948?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e09b629) will **decrease** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1174      +/-   ##\n============================================\n- Coverage     27.06%   26.99%   -0.06%     \n- Complexity      764      776      +12     \n============================================\n  Files           200      203       +3     \n  Lines         17195    17333     +138     \n  Branches       1863     1878      +15     \n============================================\n+ Hits           4652     4678      +26     \n- Misses        12225    12335     +110     \n- Partials        318      320       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/common/metrics/MetricLabels.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljTGFiZWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.47% <0.00%> (-0.24%)` | :arrow_down: |\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/client/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `26.17% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/common/protocol/PartitionLocation.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvUGFydGl0aW9uTG9jYXRpb24uamF2YQ==) | `38.95% <0.00%> (+0.24%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...va/org/apache/celeborn/client/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1174?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `78.58% <0.00%> (+32.58%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture ,  could you take a look if this change will have other impacts?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1173](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (938949d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e219e8b44ea14495d7a7d1f71dc99f6c74d40dd1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e219e8b) will **increase** coverage by `0.02%`.\n> The diff coverage is `28.89%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1173      +/-   ##\n============================================\n+ Coverage     27.01%   27.02%   +0.02%     \n  Complexity      760      760              \n============================================\n  Files           200      200              \n  Lines         17172    17195      +23     \n  Branches       1858     1863       +5     \n============================================\n+ Hits           4638     4646       +8     \n- Misses        12216    12227      +11     \n- Partials        318      322       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...eleborn/common/metrics/source/AbstractSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3Mvc291cmNlL0Fic3RyYWN0U291cmNlLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.05% <60.00%> (+0.91%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <100.00%> (ø)` | |\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1173?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

pls run `./dev/reformat` to format the code

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1172](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c262c33) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e219e8b44ea14495d7a7d1f71dc99f6c74d40dd1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e219e8b) will **increase** coverage by `0.07%`.\n> The diff coverage is `59.10%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1172      +/-   ##\n============================================\n+ Coverage     27.01%   27.08%   +0.07%     \n- Complexity      760      764       +4     \n============================================\n  Files           200      200              \n  Lines         17172    17180       +8     \n  Branches       1858     1862       +4     \n============================================\n+ Hits           4638     4652      +14     \n+ Misses        12216    12210       -6     \n  Partials        318      318              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.05% <60.00%> (+0.91%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1172?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks @AngersZhuuuu and @waitinfuture for the review.

Ping @WillemJiang. How about this pull request to restore the license files?

We need to put the third-party licenses files links into the LICENSE-binary files.

> We need to put the third-party licenses files links into the LICENSE-binary files.\r\n\r\nThanks for your review. Links are added please check again.

LGTM.

> \r\n\r\nThanks @WillemJiang for reviewing!

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1170](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (16a5f9e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e219e8b44ea14495d7a7d1f71dc99f6c74d40dd1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e219e8b) will **increase** coverage by `0.06%`.\n> The diff coverage is `61.91%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1170      +/-   ##\n============================================\n+ Coverage     27.01%   27.07%   +0.06%     \n- Complexity      760      762       +2     \n============================================\n  Files           200      200              \n  Lines         17172    17180       +8     \n  Branches       1858     1862       +4     \n============================================\n+ Hits           4638     4649      +11     \n+ Misses        12216    12210       -6     \n- Partials        318      321       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.05% <60.00%> (+0.91%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <100.00%> (ø)` | |\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1170?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1169](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (77cbfc8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/810a8d01e083d8df663bcd9482f0d1178fbe1ccc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (810a8d0) will **increase** coverage by `0.14%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1169      +/-   ##\n============================================\n+ Coverage     26.88%   27.01%   +0.14%     \n- Complexity      747      760      +13     \n============================================\n  Files           200      200              \n  Lines         17022    17172     +150     \n  Branches       1838     1858      +20     \n============================================\n+ Hits           4574     4638      +64     \n- Misses        12151    12216      +65     \n- Partials        297      318      +21     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <0.00%> (-0.07%)` | :arrow_down: |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.72% <0.00%> (+0.32%)` | :arrow_up: |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1169?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `41.18% <0.00%> (+41.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1168](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e5d9dcf) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/810a8d01e083d8df663bcd9482f0d1178fbe1ccc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (810a8d0) will **increase** coverage by `0.21%`.\n> The diff coverage is `61.91%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1168      +/-   ##\n============================================\n+ Coverage     26.88%   27.08%   +0.21%     \n- Complexity      747      764      +17     \n============================================\n  Files           200      200              \n  Lines         17022    17179     +157     \n  Branches       1838     1862      +24     \n============================================\n+ Hits           4574     4652      +78     \n- Misses        12151    12209      +58     \n- Partials        297      318      +21     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.05% <60.00%> (+0.91%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <100.00%> (-0.07%)` | :arrow_down: |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.72% <0.00%> (+0.32%)` | :arrow_up: |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1168?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `41.18% <0.00%> (+41.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1167](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1f3abde) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2634476758598beb45b2bc04e1c90ea34d86af6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2634476) will **increase** coverage by `0.32%`.\n> The diff coverage is `61.95%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1167      +/-   ##\n============================================\n+ Coverage     26.42%   26.73%   +0.32%     \n- Complexity      756      778      +22     \n============================================\n  Files           206      209       +3     \n  Lines         17587    17682      +95     \n  Branches       1916     1933      +17     \n============================================\n+ Hits           4645     4726      +81     \n- Misses        12623    12642      +19     \n+ Partials        319      314       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/common/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/write/SimplePushStrategy.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2ltcGxlUHVzaFN0cmF0ZWd5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <21.43%> (+0.17%)` | :arrow_up: |\n| [...org/apache/celeborn/common/write/PushStrategy.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvUHVzaFN0cmF0ZWd5LmphdmE=) | `62.50% <62.50%> (ø)` | |\n| [...e/celeborn/common/write/SlowStartPushStrategy.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vd3JpdGUvU2xvd1N0YXJ0UHVzaFN0cmF0ZWd5LmphdmE=) | `77.42% <77.42%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.88% <100.00%> (+0.32%)` | :arrow_up: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [6 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1167?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture @AngersZhuuuu Please help to review this.

Thanks for the pr! @boneanxs I have left some comments, feel free to ping me anytime

In this pr you also support slow start and congestion control for different target host port, pls add this information in title and pr desc. 

Closed and will resubmit in another pull request.

> The changes LGTM, while I think we should remove the `LICENSE-leveldbjni.txt`, `LICENSE-protobuf.txt` and `LICENSE-slf4j.txt` files in the `licenses-binary` directory because the first two are BSD-3-clause license and the last is MIT license, so the files are actually duplicates.\r\n\r\nAll required changes have been done. Please check again.

Are all files requires license header covered by RAT check?

Hi @WillemJiang , could you please check if there are any further issues? Thanks!

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1163](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0cf5829) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bb8e7a2a28be9af4706349f9c968b804f3612ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bb8e7a) will **decrease** coverage by `0.03%`.\n> The diff coverage is `21.43%`.\n\n> :exclamation: Current head 0cf5829 differs from pull request most recent head b1f71f4. Consider uploading reports for the commit b1f71f4 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1163      +/-   ##\n============================================\n- Coverage     26.88%   26.85%   -0.02%     \n  Complexity      747      747              \n============================================\n  Files           200      200              \n  Lines         17022    17026       +4     \n  Branches       1838     1838              \n============================================\n- Hits           4574     4571       -3     \n- Misses        12151    12158       +7     \n  Partials        297      297              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1163?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.66% <66.67%> (-0.03%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1162?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1162](https://codecov.io/gh/apache/incubator-celeborn/pull/1162?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (72f48ff) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bb8e7a2a28be9af4706349f9c968b804f3612ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bb8e7a) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1162      +/-   ##\n============================================\n+ Coverage     26.88%   26.89%   +0.02%     \n- Complexity      747      749       +2     \n============================================\n  Files           200      200              \n  Lines         17022    17022              \n  Branches       1838     1838              \n============================================\n+ Hits           4574     4577       +3     \n+ Misses        12151    12149       -2     \n+ Partials        297      296       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1162?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1161](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f2fc5fa) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5cba3071895afe5596518e146aa8a1c89d5fab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5cba307) will **decrease** coverage by `0.08%`.\n> The diff coverage is `27.78%`.\n\n> :exclamation: Current head f2fc5fa differs from pull request most recent head fd3a8b4. Consider uploading reports for the commit fd3a8b4 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1161      +/-   ##\n============================================\n- Coverage     26.96%   26.88%   -0.07%     \n+ Complexity      748      747       -1     \n============================================\n  Files           196      200       +4     \n  Lines         16832    17037     +205     \n  Branches       1820     1841      +21     \n============================================\n+ Hits           4537     4579      +42     \n- Misses        12001    12160     +159     \n- Partials        294      298       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `7.84% <20.00%> (+0.84%)` | :arrow_up: |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `67.14% <66.67%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.34% <0.00%> (-2.40%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <0.00%> (-1.37%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (-0.70%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.41% <0.00%> (-0.02%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/ShuffleTaskInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L1NodWZmbGVUYXNrSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| ... and [8 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1161?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1160?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1160](https://codecov.io/gh/apache/incubator-celeborn/pull/1160?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a908249) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/810a8d01e083d8df663bcd9482f0d1178fbe1ccc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (810a8d0) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1160   +/-   ##\n=========================================\n  Coverage     26.88%   26.88%           \n  Complexity      747      747           \n=========================================\n  Files           200      200           \n  Lines         17022    17022           \n  Branches       1838     1838           \n=========================================\n  Hits           4574     4574           \n  Misses        12151    12151           \n  Partials        297      297           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1159](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2a9fe7f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9635725480bd06bd08a03fcce14e92d18272625b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9635725) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1159      +/-   ##\n============================================\n- Coverage     26.84%   26.83%   -0.00%     \n+ Complexity      749      745       -4     \n============================================\n  Files           199      200       +1     \n  Lines         16961    17014      +53     \n  Branches       1832     1838       +6     \n============================================\n+ Hits           4551     4564      +13     \n- Misses        12115    12150      +35     \n- Partials        295      300       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/client/read/WorkerPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9Xb3JrZXJQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/common/util/ExceptionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9FeGNlcHRpb25VdGlscy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.31% <0.00%> (-0.05%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1159?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.67% <0.00%> (+0.08%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

LGTM, cc @AngersZhuuuu 

merging to main, thanks @RexXiong 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1158](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1e2db90) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e155ec122adc08b283c30fa6352a028b27029296?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e155ec1) will **increase** coverage by `0.05%`.\n> The diff coverage is `60.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1158      +/-   ##\n============================================\n+ Coverage     26.84%   26.89%   +0.05%     \n- Complexity      745      749       +4     \n============================================\n  Files           199      199              \n  Lines         16998    17001       +3     \n  Branches       1838     1838              \n============================================\n+ Hits           4561     4570       +9     \n+ Misses        12137    12135       -2     \n+ Partials        300      296       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.67% <75.00%> (+0.04%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1158?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Thanks a lot 

Thanks a lot @waitinfuture @AngersZhuuuu 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1157?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1157](https://codecov.io/gh/apache/incubator-celeborn/pull/1157?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (494f0c7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9635725480bd06bd08a03fcce14e92d18272625b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9635725) will **increase** coverage by `0.07%`.\n> The diff coverage is `90.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1157      +/-   ##\n============================================\n+ Coverage     26.84%   26.90%   +0.07%     \n  Complexity      749      749              \n============================================\n  Files           199      199              \n  Lines         16961    17006      +45     \n  Branches       1832     1838       +6     \n============================================\n+ Hits           4551     4574      +23     \n- Misses        12115    12136      +21     \n- Partials        295      296       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1157?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1157?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.66% <87.50%> (+0.06%)` | :arrow_up: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1157?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.41% <100.00%> (+0.05%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

plz add more details about the motivation of this pr

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1156](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (267170f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/9635725480bd06bd08a03fcce14e92d18272625b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9635725) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1156      +/-   ##\n============================================\n- Coverage     26.84%   26.82%   -0.01%     \n+ Complexity      749      743       -6     \n============================================\n  Files           199      199              \n  Lines         16961    16998      +37     \n  Branches       1832     1838       +6     \n============================================\n+ Hits           4551     4558       +7     \n- Misses        12115    12139      +24     \n- Partials        295      301       +6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.31% <0.00%> (-0.05%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1156?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.64% <0.00%> (+0.04%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @pan3793 could you please review this pr?

Thanks, merged to main for 0.3.0

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1154](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e225b01) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3b2be25a50da0c42b29c681eb542e42b5fa81d6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b2be25) will **decrease** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1154      +/-   ##\n============================================\n- Coverage     26.94%   26.84%   -0.10%     \n- Complexity      746      749       +3     \n============================================\n  Files           196      199       +3     \n  Lines         16869    16961      +92     \n  Branches       1825     1832       +7     \n============================================\n+ Hits           4544     4551       +7     \n- Misses        12030    12115      +85     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.34% <0.00%> (-2.40%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <0.00%> (-1.37%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/ShuffleTaskInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L1NodWZmbGVUYXNrSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1154?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1153](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c70d920) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2ec06472fe3da244bd81d6d950d201fd3ad515e0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2ec0647) will **increase** coverage by `0.04%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1153      +/-   ##\n============================================\n+ Coverage     26.80%   26.84%   +0.04%     \n- Complexity      745      749       +4     \n============================================\n  Files           199      199              \n  Lines         16961    16961              \n  Branches       1832     1832              \n============================================\n+ Hits           4545     4551       +6     \n+ Misses        12117    12115       -2     \n+ Partials        299      295       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1153?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1152?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1152](https://codecov.io/gh/apache/incubator-celeborn/pull/1152?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0252068) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2ec06472fe3da244bd81d6d950d201fd3ad515e0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2ec0647) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1152      +/-   ##\n============================================\n+ Coverage     26.80%   26.82%   +0.02%     \n- Complexity      745      747       +2     \n============================================\n  Files           199      199              \n  Lines         16961    16961              \n  Branches       1832     1832              \n============================================\n+ Hits           4545     4548       +3     \n  Misses        12117    12117              \n+ Partials        299      296       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1152?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1152?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1152?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1151](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2ae07d6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3b2be25a50da0c42b29c681eb542e42b5fa81d6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b2be25) will **decrease** coverage by `0.11%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1151      +/-   ##\n============================================\n- Coverage     26.94%   26.84%   -0.10%     \n- Complexity      746      749       +3     \n============================================\n  Files           196      199       +3     \n  Lines         16869    16961      +92     \n  Branches       1825     1832       +7     \n============================================\n+ Hits           4544     4551       +7     \n- Misses        12030    12115      +85     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/ShuffleTaskInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L1NodWZmbGVUYXNrSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.34% <0.00%> (-2.40%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <0.00%> (-1.37%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1151?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1150](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d6b6c4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3b2be25a50da0c42b29c681eb542e42b5fa81d6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b2be25) will **decrease** coverage by `0.11%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 7d6b6c4 differs from pull request most recent head f004bd5. Consider uploading reports for the commit f004bd5 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1150      +/-   ##\n============================================\n- Coverage     26.94%   26.84%   -0.10%     \n- Complexity      746      749       +3     \n============================================\n  Files           196      199       +3     \n  Lines         16869    16960      +91     \n  Branches       1825     1832       +7     \n============================================\n+ Hits           4544     4551       +7     \n- Misses        12030    12114      +84     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.34% <0.00%> (-2.40%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <0.00%> (-1.37%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1150?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1149](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cb30a7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3b2be25a50da0c42b29c681eb542e42b5fa81d6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b2be25) will **decrease** coverage by `0.12%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1149      +/-   ##\n============================================\n- Coverage     26.94%   26.82%   -0.11%     \n+ Complexity      746      745       -1     \n============================================\n  Files           196      201       +5     \n  Lines         16869    16948      +79     \n  Branches       1825     1828       +3     \n============================================\n+ Hits           4544     4545       +1     \n- Misses        12030    12104      +74     \n- Partials        295      299       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <ø> (ø)` | |\n| [...orn/common/meta/ShufflePartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvU2h1ZmZsZVBhcnRpdGlvbkxvY2F0aW9uSW5mby5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/common/meta/WorkerPartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvV29ya2VyUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...g/apache/celeborn/common/util/CollectionUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvQ29sbGVjdGlvblV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [10 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1149?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I think we should conduct experiments, for normal and abnormal cases(i.e kill worker randomly), since this is critical path.

> I think we should conduct experiments, for normal and abnormal cases(i.e kill worker randomly), since this is critical path.\r\n\r\nRun TPCDS with random worker kill, the results are all correct.  @waitinfuture 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

plz test q23a with multiple worker kills and restarts

I have tested by killing worker while running q23a, LGMT, merging to main.

Thanks @RexXiong, cc @zwangsheng as you reported the same issue before.

@zwangsheng @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1147?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1147](https://codecov.io/gh/apache/incubator-celeborn/pull/1147?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a58784f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1f95ccb55a1f99bb7caeda00c31c400185df8752?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1f95ccb) will **decrease** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1147      +/-   ##\n============================================\n- Coverage     26.94%   26.89%   -0.05%     \n+ Complexity      748      742       -6     \n============================================\n  Files           196      196              \n  Lines         16856    16856              \n  Branches       1822     1822              \n============================================\n- Hits           4541     4532       -9     \n- Misses        12021    12025       +4     \n- Partials        294      299       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1147?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1147?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1147?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Does it has conflicts on branch-0.2, I think 0.2 has the same issues.

> Does it has conflicts on branch-0.2, I think 0.2 has the same issues.\r\n\r\nSeems it do have some conflicts but not hard to solve. Could @RexXiong plz also patch this to branch-0.2?

> > Does it has conflicts on branch-0.2, I think 0.2 has the same issues.\r\n> \r\n> Seems it do have some conflicts but not hard to solve. Could @RexXiong plz also patch this to branch-0.2?\r\n\r\nSure.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1146?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1146](https://codecov.io/gh/apache/incubator-celeborn/pull/1146?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b6ae7ed) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5edb21d210021348b4981a8f0baa584c43da5f09?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5edb21d) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1146      +/-   ##\n============================================\n+ Coverage     26.91%   26.94%   +0.04%     \n- Complexity      744      748       +4     \n============================================\n  Files           196      196              \n  Lines         16856    16856              \n  Branches       1822     1822              \n============================================\n+ Hits           4535     4541       +6     \n+ Misses        12023    12021       -2     \n+ Partials        298      294       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1146?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1146?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1145](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fb03f73) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3b2be25a50da0c42b29c681eb542e42b5fa81d6f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b2be25) will **decrease** coverage by `0.10%`.\n> The diff coverage is `33.34%`.\n\n> :exclamation: Current head fb03f73 differs from pull request most recent head 15e1ad4. Consider uploading reports for the commit 15e1ad4 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1145      +/-   ##\n============================================\n- Coverage     26.94%   26.85%   -0.09%     \n- Complexity      746      750       +4     \n============================================\n  Files           196      199       +3     \n  Lines         16869    16967      +98     \n  Branches       1825     1834       +9     \n============================================\n+ Hits           4544     4555      +11     \n- Misses        12030    12115      +85     \n- Partials        295      297       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.69% <33.34%> (+0.33%)` | :arrow_up: |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `38.34% <0.00%> (-2.40%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <0.00%> (-1.37%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1145?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Plz fill in the issue description to be more understandable.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1144?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1144](https://codecov.io/gh/apache/incubator-celeborn/pull/1144?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (52348e8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3e80cf2b87465d99c0fd0ef4dd1adf81e9e32f07?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3e80cf2) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1144      +/-   ##\n============================================\n+ Coverage     26.91%   26.94%   +0.04%     \n- Complexity      744      748       +4     \n============================================\n  Files           196      196              \n  Lines         16856    16856              \n  Branches       1822     1822              \n============================================\n+ Hits           4535     4541       +6     \n+ Misses        12023    12021       -2     \n+ Partials        298      294       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1144?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1144?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1144?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1143](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cbdfc62) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3e80cf2b87465d99c0fd0ef4dd1adf81e9e32f07?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3e80cf2) will **increase** coverage by `0.02%`.\n> The diff coverage is `66.67%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1143      +/-   ##\n============================================\n+ Coverage     26.91%   26.93%   +0.02%     \n- Complexity      744      746       +2     \n============================================\n  Files           196      196              \n  Lines         16856    16856              \n  Branches       1822     1822              \n============================================\n+ Hits           4535     4538       +3     \n  Misses        12023    12023              \n+ Partials        298      295       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1143?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1142?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1142](https://codecov.io/gh/apache/incubator-celeborn/pull/1142?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ed6a319) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/01b7ea97c98e7732b7af934ea2d24e59e6d3c3da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01b7ea9) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1142      +/-   ##\n============================================\n- Coverage     26.95%   26.94%   -0.00%     \n  Complexity      748      748              \n============================================\n  Files           196      196              \n  Lines         16835    16856      +21     \n  Branches       1821     1822       +1     \n============================================\n+ Hits           4537     4541       +4     \n- Misses        12004    12021      +17     \n  Partials        294      294              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1142?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1142?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (-0.70%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1142?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1141?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1141](https://codecov.io/gh/apache/incubator-celeborn/pull/1141?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (21b9b6e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/01b7ea97c98e7732b7af934ea2d24e59e6d3c3da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01b7ea9) will **increase** coverage by `0.14%`.\n> The diff coverage is `37.10%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1141      +/-   ##\n============================================\n+ Coverage     26.95%   27.09%   +0.14%     \n- Complexity      748      764      +16     \n============================================\n  Files           196      196              \n  Lines         16835    16957     +122     \n  Branches       1821     1839      +18     \n============================================\n+ Hits           4537     4593      +56     \n- Misses        12004    12055      +51     \n- Partials        294      309      +15     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1141?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1141/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `41.18% <37.10%> (+41.18%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Plz fill in the issue description to be more understandable.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1140?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1140](https://codecov.io/gh/apache/incubator-celeborn/pull/1140?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3a2f7ad) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c9dcf312f86bd0869667223dc33e340ccefb549a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9dcf31) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1140      +/-   ##\n============================================\n+ Coverage     26.94%   26.95%   +0.02%     \n- Complexity      746      748       +2     \n============================================\n  Files           196      196              \n  Lines         16832    16835       +3     \n  Branches       1820     1821       +1     \n============================================\n+ Hits           4534     4537       +3     \n- Misses        12003    12004       +1     \n+ Partials        295      294       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1140?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1140/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <0.00%> (-0.07%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1140/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1139?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1139](https://codecov.io/gh/apache/incubator-celeborn/pull/1139?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (374dd32) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c9dcf312f86bd0869667223dc33e340ccefb549a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9dcf31) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1139      +/-   ##\n============================================\n+ Coverage     26.94%   26.95%   +0.02%     \n- Complexity      746      748       +2     \n============================================\n  Files           196      196              \n  Lines         16832    16835       +3     \n  Branches       1820     1821       +1     \n============================================\n+ Hits           4534     4537       +3     \n- Misses        12003    12004       +1     \n+ Partials        295      294       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1139?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <ø> (-0.07%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `7.01% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1139/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I have same concern w/ @waitinfuture

I will do a manual test.

@nafiyAix @pan3793 @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1138?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1138](https://codecov.io/gh/apache/incubator-celeborn/pull/1138?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b1a61b7) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c9dcf312f86bd0869667223dc33e340ccefb549a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9dcf31) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1138      +/-   ##\n============================================\n- Coverage     26.94%   26.94%   -0.00%     \n  Complexity      746      746              \n============================================\n  Files           196      196              \n  Lines         16832    16835       +3     \n  Branches       1820     1821       +1     \n============================================\n  Hits           4534     4534              \n- Misses        12003    12006       +3     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1138?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1138/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <0.00%> (-0.07%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @nafiyAix @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1136?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1136](https://codecov.io/gh/apache/incubator-celeborn/pull/1136?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9f4536f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c860fdf7485c93d3c99879d720a741d871773ce0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c860fdf) will **increase** coverage by `0.04%`.\n> The diff coverage is `31.25%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1136      +/-   ##\n============================================\n+ Coverage     26.80%   26.84%   +0.04%     \n  Complexity      745      745              \n============================================\n  Files           199      199              \n  Lines         16961    16998      +37     \n  Branches       1832     1838       +6     \n============================================\n+ Hits           4545     4561      +16     \n- Misses        12117    12137      +20     \n- Partials        299      300       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1136?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1136?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.31% <17.03%> (-0.05%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1136?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.64% <70.59%> (+0.04%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

When I test this pr I found that currently in main branch, both pushData and pushMergedData can at most revive once. For pushData, the first time of onFailure, it passes the original callback instead the wrappedCallback,\r\n```\r\n              if (!mapperEnded(shuffleId, mapId, attemptId)) {\r\n                pushDataRetryPool.submit(\r\n                    () ->\r\n                        submitRetryPushData(\r\n                            applicationId,\r\n                            shuffleId,\r\n                            mapId,\r\n                            attemptId,\r\n                            body,\r\n                            nextBatchId,\r\n                            loc,\r\n                            callback,\r\n                            pushState,\r\n                            getPushDataFailCause(e.getMessage())));\r\n```\r\nso if the revived pushdata fails, the pushData will fail\r\n```\r\n            public void onFailure(Throwable e) {\r\n              pushState.exception.compareAndSet(\r\n                  null, new IOException("Revived PushData failed!", e));\r\n```\r\n\r\nAfter discussing with @AngersZhuuuu , we can rework this pr by adding reviveTimes for each pushdata and pushmergeddata

LGTM, could you plz add a test case?

needs to update style

> needs to update style\r\n\r\nFixed

@nafiyAix @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1135](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4ca5c82) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c9dcf312f86bd0869667223dc33e340ccefb549a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9dcf31) will **increase** coverage by `0.02%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1135      +/-   ##\n============================================\n+ Coverage     26.94%   26.96%   +0.02%     \n- Complexity      746      748       +2     \n============================================\n  Files           196      196              \n  Lines         16832    16869      +37     \n  Branches       1820     1825       +5     \n============================================\n+ Hits           4534     4547      +13     \n- Misses        12003    12028      +25     \n+ Partials        295      294       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.60% <85.72%> (+0.02%)` | :arrow_up: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (-0.70%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <0.00%> (-0.07%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1135?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1134?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1134](https://codecov.io/gh/apache/incubator-celeborn/pull/1134?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cb5bc47) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c9dcf312f86bd0869667223dc33e340ccefb549a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c9dcf31) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1134      +/-   ##\n============================================\n+ Coverage     26.94%   26.96%   +0.02%     \n- Complexity      746      748       +2     \n============================================\n  Files           196      196              \n  Lines         16832    16832              \n  Branches       1820     1820              \n============================================\n+ Hits           4534     4537       +3     \n+ Misses        12003    12001       -2     \n+ Partials        295      294       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1134?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1134/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

What\

> What\

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1133?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1133](https://codecov.io/gh/apache/incubator-celeborn/pull/1133?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (115a0d0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/a16ba0e8070d0304c2a0811d66b981f880e1c7d5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a16ba0e) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1133      +/-   ##\n============================================\n+ Coverage     26.91%   26.94%   +0.04%     \n- Complexity      742      746       +4     \n============================================\n  Files           196      196              \n  Lines         16832    16832              \n  Branches       1820     1820              \n============================================\n+ Hits           4528     4534       +6     \n+ Misses        12005    12003       -2     \n+ Partials        299      295       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1133?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1133/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> > What\

> What\

> > What\

> \r\n\r\n

> > > What\

@waitinfuture Should we backport this to branch-0.2? and release in branch-0.2.1?

FYI: the version should be `0.2.0-incubating`, and must change immediately to `0.2.1-SNAPSHOT` in the next commit

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1131?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1131](https://codecov.io/gh/apache/incubator-celeborn/pull/1131?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f029419) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5cba3071895afe5596518e146aa8a1c89d5fab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5cba307) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1131   +/-   ##\n=========================================\n  Coverage     26.96%   26.96%           \n  Complexity      748      748           \n=========================================\n  Files           196      196           \n  Lines         16832    16832           \n  Branches       1820     1820           \n=========================================\n  Hits           4537     4537           \n  Misses        12001    12001           \n  Partials        294      294           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1130?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1130](https://codecov.io/gh/apache/incubator-celeborn/pull/1130?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (feb9f1d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5cba3071895afe5596518e146aa8a1c89d5fab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5cba307) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1130   +/-   ##\n=========================================\n  Coverage     26.96%   26.96%           \n  Complexity      748      748           \n=========================================\n  Files           196      196           \n  Lines         16832    16832           \n  Branches       1820     1820           \n=========================================\n  Hits           4537     4537           \n  Misses        12001    12001           \n  Partials        294      294           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1129?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1129](https://codecov.io/gh/apache/incubator-celeborn/pull/1129?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (39564c2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5cba3071895afe5596518e146aa8a1c89d5fab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5cba307) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1129      +/-   ##\n============================================\n- Coverage     26.96%   26.94%   -0.01%     \n+ Complexity      748      746       -2     \n============================================\n  Files           196      196              \n  Lines         16832    16832              \n  Branches       1820     1820              \n============================================\n- Hits           4537     4534       -3     \n- Misses        12001    12003       +2     \n- Partials        294      295       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1129?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1129/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @FMX as you are the 0.2.0 release manager.\r\ncc @RexXiong, I believe this is flexible to support Flink clients in the future.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1128?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1128](https://codecov.io/gh/apache/incubator-celeborn/pull/1128?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (09c4d40) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/01b7ea97c98e7732b7af934ea2d24e59e6d3c3da?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (01b7ea9) will **increase** coverage by `1.80%`.\n> The diff coverage is `30.56%`.\n\n> :exclamation: Current head 09c4d40 differs from pull request most recent head e20a21a. Consider uploading reports for the commit e20a21a to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1128      +/-   ##\n============================================\n+ Coverage     26.95%   28.75%   +1.80%     \n- Complexity      748      832      +84     \n============================================\n  Files           196      196              \n  Lines         16835    16941     +106     \n  Branches       1821     1833      +12     \n============================================\n+ Hits           4537     4869     +332     \n+ Misses        12004    11729     -275     \n- Partials        294      343      +49     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1128?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.33% <0.00%> (+0.33%)` | :arrow_up: |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `46.07% <86.85%> (+46.07%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `68.54% <0.00%> (+1.41%)` | :arrow_up: |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `1.50% <0.00%> (+1.50%)` | :arrow_up: |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `62.04% <0.00%> (+9.26%)` | :arrow_up: |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `20.46% <0.00%> (+20.46%)` | :arrow_up: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `28.78% <0.00%> (+22.31%)` | :arrow_up: |\n| ... and [3 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1128/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1127?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1127](https://codecov.io/gh/apache/incubator-celeborn/pull/1127?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2e94ff9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b8758a7cb6be2c333ea81f1273f3135f5aad948b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b8758a7) will **decrease** coverage by `0.01%`.\n> The diff coverage is `18.19%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1127      +/-   ##\n============================================\n- Coverage     26.93%   26.93%   -0.00%     \n- Complexity      744      746       +2     \n============================================\n  Files           196      196              \n  Lines         16827    16856      +29     \n  Branches       1820     1822       +2     \n============================================\n+ Hits           4531     4538       +7     \n- Misses        11998    12023      +25     \n+ Partials        298      295       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1127?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `5.77% <0.00%> (-0.70%)` | :arrow_down: |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <0.00%> (-0.07%)` | :arrow_down: |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1127/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Since we allow users to specify capacity that can be used by Celeborn, we might also consider that accordingly.\r\n```\r\nceleborn.worker.storage.dirs\r\n\r\n"`dir1[:capacity=][:disktype=][:flushthread=],dir2[:capacity=][:disktype=][:flushthread=]`")\r\n```

> Since we allow users to specify capacity that can be used by Celeborn, we might also consider that accordingly.\r\n> \r\n> ```\r\n> celeborn.worker.storage.dirs\r\n> \r\n> "`dir1[:capacity=][:disktype=][:flushthread=],dir2[:capacity=][:disktype=][:flushthread=]`")\r\n> ```\r\n\r\nWe can add a new metric such as DeviceUsableCapacity which equals to min{freeSpace, configuredSpace - usedSpace}, see DiskInfo.configuredUsableSpace

> > Since we allow users to specify capacity that can be used by Celeborn, we might also consider that accordingly.\r\n> > ```\r\n> > celeborn.worker.storage.dirs\r\n> > \r\n> > "`dir1[:capacity=][:disktype=][:flushthread=],dir2[:capacity=][:disktype=][:flushthread=]`")\r\n> > ```\r\n> \r\n> We can add a new metric such as DeviceUsableCapacity which equals to min{freeSpace, configuredSpace - usedSpace}, see DiskInfo.configuredUsableSpace\r\n\r\n+1, currently the new added metrics could only display the spaces status of OS capacity but not Celeborn capacity, will add it in this PR.

> > Since we allow users to specify capacity that can be used by Celeborn, we might also consider that accordingly.\r\n> > ```\r\n> > celeborn.worker.storage.dirs\r\n> > \r\n> > "`dir1[:capacity=][:disktype=][:flushthread=],dir2[:capacity=][:disktype=][:flushthread=]`")\r\n> > ```\r\n> \r\n> We can add a new metric such as DeviceUsableCapacity which equals to min{freeSpace, configuredSpace - usedSpace}, see DiskInfo.configuredUsableSpace\r\n\r\n\r\ncapacity seems should be \r\n```\r\nif (freeSpace < reservedSpace) {\r\n    return 0\r\n} else { \r\n  min{freeSpace - reservedSpace, configuredSpace - usedSpace}\r\n}\r\n```\r\n\r\ncc @waitinfuture 

ping @nafiyAix @waitinfuture , also need to backport to branch-0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1126?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1126](https://codecov.io/gh/apache/incubator-celeborn/pull/1126?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ba19de2) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/b8758a7cb6be2c333ea81f1273f3135f5aad948b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b8758a7) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1126      +/-   ##\n============================================\n+ Coverage     26.93%   26.95%   +0.02%     \n- Complexity      744      746       +2     \n============================================\n  Files           196      196              \n  Lines         16827    16828       +1     \n  Branches       1820     1821       +1     \n============================================\n+ Hits           4531     4534       +3     \n- Misses        11998    11999       +1     \n+ Partials        298      295       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1126?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1126/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1126/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1126/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1125?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1125](https://codecov.io/gh/apache/incubator-celeborn/pull/1125?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0ed4987) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/7d7192af14d51fe607c51891abe64355e25a04f2?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7d7192a) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1125      +/-   ##\n============================================\n- Coverage     26.95%   26.91%   -0.03%     \n+ Complexity      746      742       -4     \n============================================\n  Files           196      196              \n  Lines         16827    16827              \n  Branches       1820     1820              \n============================================\n- Hits           4534     4528       -6     \n- Misses        11998    12000       +2     \n- Partials        295      299       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1125?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1125/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@FMX @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1124?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1124](https://codecov.io/gh/apache/incubator-celeborn/pull/1124?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (038005b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6432a129bee67f9378a73b2d80f15edebe3e9483?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6432a12) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1124      +/-   ##\n============================================\n- Coverage     26.95%   26.94%   -0.00%     \n  Complexity      746      746              \n============================================\n  Files           196      196              \n  Lines         16826    16827       +1     \n  Branches       1819     1820       +1     \n============================================\n  Hits           4533     4533              \n- Misses        11998    11999       +1     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1124?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1124/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

need backport to branch-0.2

ping @waitinfuture @FMX 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1123?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1123](https://codecov.io/gh/apache/incubator-celeborn/pull/1123?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a52b47f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/6432a129bee67f9378a73b2d80f15edebe3e9483?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6432a12) will **increase** coverage by `0.01%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1123      +/-   ##\n============================================\n+ Coverage     26.95%   26.95%   +0.01%     \n  Complexity      746      746              \n============================================\n  Files           196      196              \n  Lines         16826    16826              \n  Branches       1819     1819              \n============================================\n+ Hits           4533     4534       +1     \n+ Misses        11998    11997       -1     \n  Partials        295      295              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1123?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1123/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1123/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `40.75% <100.00%> (+0.93%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture need backport to branch 0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1122?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1122](https://codecov.io/gh/apache/incubator-celeborn/pull/1122?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ed866f4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/829f35c7535aef293b0196e1405a066482989302?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (829f35c) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1122      +/-   ##\n============================================\n- Coverage     26.94%   26.93%   -0.01%     \n+ Complexity      747      746       -1     \n============================================\n  Files           196      196              \n  Lines         16787    16815      +28     \n  Branches       1811     1818       +7     \n============================================\n+ Hits           4522     4527       +5     \n- Misses        11968    11994      +26     \n+ Partials        297      294       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1122?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1122/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1122/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/StateMachine.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1122/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvU3RhdGVNYWNoaW5lLmphdmE=) | `64.00% <0.00%> (+3.43%)` | :arrow_up: |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1122/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `88.07% <0.00%> (+7.66%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1121?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1121](https://codecov.io/gh/apache/incubator-celeborn/pull/1121?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b27d086) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/77cb7a047792bc1a8ec62d1e16ec32e7dd2cd676?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (77cb7a0) will **increase** coverage by `0.06%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1121      +/-   ##\n============================================\n+ Coverage     26.91%   26.96%   +0.06%     \n- Complexity      743      749       +6     \n============================================\n  Files           196      196              \n  Lines         16787    16787              \n  Branches       1811     1811              \n============================================\n+ Hits           4516     4525       +9     \n+ Misses        11970    11966       -4     \n+ Partials        301      296       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1121?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1121/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.56% <100.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1121/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1121/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1120?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1120](https://codecov.io/gh/apache/incubator-celeborn/pull/1120?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ded9bf8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/d8b6c7e24d2938ab087c06e65da1344ca5803c78?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d8b6c7e) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1120      +/-   ##\n============================================\n+ Coverage     26.94%   26.95%   +0.02%     \n- Complexity      746      748       +2     \n============================================\n  Files           196      196              \n  Lines         16832    16835       +3     \n  Branches       1820     1821       +1     \n============================================\n+ Hits           4534     4537       +3     \n- Misses        12003    12004       +1     \n+ Partials        295      294       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.36% <0.00%> (-0.07%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1120?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@RexXiong FYI https://github.com/apache/incubator-celeborn/pull/1129 has been merged into main branch

BTW, usually, we should build/test against the latest patched version of third-party software, why use Flink 1.14.0 instead of 1.14.6 in Celeborn?

> BTW, usually, we should build/test against the latest patched version of third-party software, why use Flink 1.14.0 instead of 1.14.6 in Celeborn?\r\n\r\nAlready bumping Flink to 1.14.6, thanks.\r\n

Thanks, merged to main for 0.3

plz update config by\r\n```\r\nUPDATE=1 build/mvn clean test -pl common -am -Pspark-3.3 -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite\r\n```

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1119?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1119](https://codecov.io/gh/apache/incubator-celeborn/pull/1119?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e9d90c6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5603e62e9596d769a3038a17c57e84c4d1dc2974?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5603e62) will **decrease** coverage by `0.01%`.\n> The diff coverage is `32.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1119      +/-   ##\n============================================\n- Coverage     26.95%   26.94%   -0.00%     \n+ Complexity      747      745       -2     \n============================================\n  Files           195      196       +1     \n  Lines         16785    16798      +13     \n  Branches       1814     1812       -2     \n============================================\n+ Hits           4522     4525       +3     \n- Misses        11966    11972       +6     \n- Partials        297      301       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1119?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.44% <11.12%> (-0.09%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.58% <85.72%> (+0.03%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1119/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `6.48% <0.00%> (+2.48%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1118?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1118](https://codecov.io/gh/apache/incubator-celeborn/pull/1118?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cfcc88b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5603e62e9596d769a3038a17c57e84c4d1dc2974?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5603e62) will **decrease** coverage by `0.04%`.\n> The diff coverage is `41.18%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1118      +/-   ##\n============================================\n- Coverage     26.95%   26.91%   -0.03%     \n+ Complexity      747      744       -3     \n============================================\n  Files           195      196       +1     \n  Lines         16785    16815      +30     \n  Branches       1814     1818       +4     \n============================================\n+ Hits           4522     4524       +2     \n- Misses        11966    11994      +28     \n  Partials        297      297              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1118?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `88.07% <97.23%> (+7.66%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `6.48% <0.00%> (+2.48%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/StateMachine.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1118/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvU3RhdGVNYWNoaW5lLmphdmE=) | `64.00% <0.00%> (+3.43%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @FMX plz review this pr

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1117?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1117](https://codecov.io/gh/apache/incubator-celeborn/pull/1117?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2178f13) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3cdc25286d422cffeb593488ca9439f872625912?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cdc252) will **decrease** coverage by `0.21%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1117      +/-   ##\n============================================\n- Coverage     27.17%   26.96%   -0.20%     \n+ Complexity      766      749      -17     \n============================================\n  Files           195      195              \n  Lines         16783    16785       +2     \n  Branches       1814     1814              \n============================================\n- Hits           4559     4525      -34     \n- Misses        11922    11964      +42     \n+ Partials        302      296       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1117?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1117/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...deploy/master/clustermeta/AbstractMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1117/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvQWJzdHJhY3RNZXRhTWFuYWdlci5qYXZh) | `80.42% <ø> (ø)` | |\n| [...oy/master/clustermeta/SingleMasterMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1117/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvU2luZ2xlTWFzdGVyTWV0YU1hbmFnZXIuamF2YQ==) | `93.34% <ø> (ø)` | |\n| [...loy/master/clustermeta/ha/HAMasterMetaManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1117/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFNYXN0ZXJNZXRhTWFuYWdlci5qYXZh) | `79.79% <ø> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1116?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1116](https://codecov.io/gh/apache/incubator-celeborn/pull/1116?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (36375a3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3cdc25286d422cffeb593488ca9439f872625912?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cdc252) will **decrease** coverage by `0.23%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1116      +/-   ##\n============================================\n- Coverage     27.17%   26.94%   -0.22%     \n+ Complexity      766      746      -20     \n============================================\n  Files           195      196       +1     \n  Lines         16783    16831      +48     \n  Branches       1814     1819       +5     \n============================================\n- Hits           4559     4534      -25     \n- Misses        11922    12002      +80     \n+ Partials        302      295       -7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1116?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.44% <0.00%> (-0.09%)` | :arrow_down: |\n| [...org/apache/celeborn/common/util/PbSerDeUtils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvUGJTZXJEZVV0aWxzLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| ... and [8 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1116/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1115?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1115](https://codecov.io/gh/apache/incubator-celeborn/pull/1115?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (21255f4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bf97a2227be2657d778d488f8a918b15b452e793?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bf97a22) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1115      +/-   ##\n============================================\n+ Coverage     27.15%   27.17%   +0.03%     \n- Complexity      764      766       +2     \n============================================\n  Files           195      195              \n  Lines         16782    16783       +1     \n  Branches       1814     1814              \n============================================\n+ Hits           4555     4559       +4     \n+ Misses        11924    11922       -2     \n+ Partials        303      302       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1115?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1115?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.56% <0.00%> (+0.02%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1115?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Hi i think this title may link to the wrong issue, the issue may be the [CELEBORN-171](https://issues.apache.org/jira/browse/CELEBORN-171)

@nafiyAix thanks for pointing that, you should have the permission to edit the title, you can fix it directly when you find such issues.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1114?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1114](https://codecov.io/gh/apache/incubator-celeborn/pull/1114?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0a1515e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/bf97a2227be2657d778d488f8a918b15b452e793?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bf97a22) will **decrease** coverage by `0.21%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1114      +/-   ##\n============================================\n- Coverage     27.15%   26.94%   -0.20%     \n+ Complexity      764      747      -17     \n============================================\n  Files           195      196       +1     \n  Lines         16782    16787       +5     \n  Branches       1814     1811       -3     \n============================================\n- Hits           4555     4522      -33     \n- Misses        11924    11968      +44     \n+ Partials        303      297       -6     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1114?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/metrics/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1114/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL21ldHJpY3MvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | | |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1114/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1114/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1114/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.56% <0.00%> (+0.02%)` | :arrow_up: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1114/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `6.48% <0.00%> (+2.48%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

All issues solved. How about now? @pan3793 

I narrowed this PR scope to "Add LICENSE and NOTICE for binary release artifacts", let\

Merged to main/0.2

Also need change init ObserveDevice

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1113?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1113](https://codecov.io/gh/apache/incubator-celeborn/pull/1113?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (02701db) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3cdc25286d422cffeb593488ca9439f872625912?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cdc252) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1113      +/-   ##\n============================================\n- Coverage     27.17%   27.17%   -0.00%     \n  Complexity      766      766              \n============================================\n  Files           195      196       +1     \n  Lines         16783    16785       +2     \n  Branches       1814     1811       -3     \n============================================\n  Hits           4559     4559              \n- Misses        11922    11924       +2     \n  Partials        302      302              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1113?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1113/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `6.48% <0.00%> (+2.48%)` | :arrow_up: |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1113/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1112?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1112](https://codecov.io/gh/apache/incubator-celeborn/pull/1112?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (00afd83) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3cdc25286d422cffeb593488ca9439f872625912?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cdc252) will **decrease** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1112      +/-   ##\n============================================\n- Coverage     27.17%   27.17%   -0.00%     \n  Complexity      766      766              \n============================================\n  Files           195      196       +1     \n  Lines         16783    16785       +2     \n  Branches       1814     1811       -3     \n============================================\n  Hits           4559     4559              \n- Misses        11922    11924       +2     \n  Partials        302      302              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1112?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1112/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `6.48% <0.00%> (+2.48%)` | :arrow_up: |\n| [...service/deploy/worker/storage/ObservedDevice.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1112/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvT2JzZXJ2ZWREZXZpY2Uuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1111?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1111](https://codecov.io/gh/apache/incubator-celeborn/pull/1111?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dd7b152) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5aa959a335f93a4065a2667cc440d56853d5b608?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5aa959a) will **increase** coverage by `1.94%`.\n> The diff coverage is `100.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1111      +/-   ##\n============================================\n+ Coverage     25.18%   27.12%   +1.94%     \n+ Complexity      779      760      -19     \n============================================\n  Files           215      195      -20     \n  Lines         18278    16783    -1495     \n  Branches       2032     1814     -218     \n============================================\n- Hits           4602     4550      -52     \n+ Misses        13362    11926    -1436     \n+ Partials        314      307       -7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1111?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.56% <100.00%> (+0.02%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...ution/columnar/RssCompressibleColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbXByZXNzaWJsZUNvbHVtbkFjY2Vzc29yLnNjYWxh) | | |\n| [...ark/sql/execution/columnar/RssColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkFjY2Vzc29yLnNjYWxh) | | |\n| [...he/spark/shuffle/celeborn/PackedRecordPointer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvc3Bhcmsvc2h1ZmZsZS9jZWxlYm9ybi9QYWNrZWRSZWNvcmRQb2ludGVyLmphdmE=) | | |\n| [.../apache/spark/shuffle/celeborn/SendBufferPool.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvc3Bhcmsvc2h1ZmZsZS9jZWxlYm9ybi9TZW5kQnVmZmVyUG9vbC5qYXZh) | | |\n| [...park/sql/execution/columnar/RssColumnBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkJ1aWxkZXIuc2NhbGE=) | | |\n| [...l/execution/columnar/RssColumnarBatchBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbmFyQmF0Y2hCdWlsZGVyLnNjYWxh) | | |\n| [...apache/spark/shuffle/celeborn/SortBasedPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvc3Bhcmsvc2h1ZmZsZS9jZWxlYm9ybi9Tb3J0QmFzZWRQdXNoZXIuamF2YQ==) | | |\n| [...rk/sql/execution/columnar/RssColumnDictionary.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3NwYXJrL3NxbC9leGVjdXRpb24vY29sdW1uYXIvUnNzQ29sdW1uRGljdGlvbmFyeS5qYXZh) | | |\n| ... and [12 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1111/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1110?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1110](https://codecov.io/gh/apache/incubator-celeborn/pull/1110?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dd4775c) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e71e77447fdcc9f309e89bdf0ed1cfe643878272?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e71e774) will **increase** coverage by `1.97%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1110      +/-   ##\n============================================\n+ Coverage     25.20%   27.17%   +1.97%     \n+ Complexity      781      766      -15     \n============================================\n  Files           215      195      -20     \n  Lines         18278    16782    -1496     \n  Branches       2032     1814     -218     \n============================================\n- Hits           4605     4558      -47     \n+ Misses        13362    11922    -1440     \n+ Partials        311      302       -9     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1110?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cution/columnar/RssColumnarBatchCodeGenBuild.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbmFyQmF0Y2hDb2RlR2VuQnVpbGQuc2NhbGE=) | | |\n| [...park/sql/execution/columnar/RssColumnBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkJ1aWxkZXIuc2NhbGE=) | | |\n| [.../sql/execution/columnar/RssCompressionScheme.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbXByZXNzaW9uU2NoZW1lLnNjYWxh) | | |\n| [...rk/sql/execution/columnar/RssColumnDictionary.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3NwYXJrL3NxbC9leGVjdXRpb24vY29sdW1uYXIvUnNzQ29sdW1uRGljdGlvbmFyeS5qYXZh) | | |\n| [...ution/columnar/RssCompressibleColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbXByZXNzaWJsZUNvbHVtbkFjY2Vzc29yLnNjYWxh) | | |\n| [...ark/sql/execution/columnar/RssColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkFjY2Vzc29yLnNjYWxh) | | |\n| [...execution/columnar/RssNullableColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc051bGxhYmxlQ29sdW1uQWNjZXNzb3Iuc2NhbGE=) | | |\n| [...cution/columnar/RssCompressibleColumnBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbXByZXNzaWJsZUNvbHVtbkJ1aWxkZXIuc2NhbGE=) | | |\n| [...spark/sql/execution/columnar/RssBatchBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0JhdGNoQnVpbGRlci5zY2FsYQ==) | | |\n| [...e/spark/sql/execution/columnar/RssColumnType.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtblR5cGUuc2NhbGE=) | | |\n| ... and [11 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1110/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Merged to main for 0.3

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1109?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1109](https://codecov.io/gh/apache/incubator-celeborn/pull/1109?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (68c30bd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8a7204fda35c369c70618925492ce564eaa622ab?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8a7204f) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1109   +/-   ##\n=========================================\n  Coverage     25.20%   25.20%           \n  Complexity      781      781           \n=========================================\n  Files           215      215           \n  Lines         18278    18278           \n  Branches       2032     2032           \n=========================================\n  Hits           4605     4605           \n  Misses        13362    13362           \n  Partials        311      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1108?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1108](https://codecov.io/gh/apache/incubator-celeborn/pull/1108?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (36a46de) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5aa959a335f93a4065a2667cc440d56853d5b608?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5aa959a) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1108      +/-   ##\n============================================\n+ Coverage     25.18%   25.22%   +0.04%     \n- Complexity      779      783       +4     \n============================================\n  Files           215      215              \n  Lines         18278    18278              \n  Branches       2032     2032              \n============================================\n+ Hits           4602     4608       +6     \n+ Misses        13362    13360       -2     \n+ Partials        314      310       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1108?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1108/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1107?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1107](https://codecov.io/gh/apache/incubator-celeborn/pull/1107?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (baac6bd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/8a7204fda35c369c70618925492ce564eaa622ab?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8a7204f) will **increase** coverage by `1.97%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head baac6bd differs from pull request most recent head 5d5158d. Consider uploading reports for the commit 5d5158d to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1107      +/-   ##\n============================================\n+ Coverage     25.20%   27.17%   +1.97%     \n+ Complexity      781      766      -15     \n============================================\n  Files           215      195      -20     \n  Lines         18278    16782    -1496     \n  Branches       2032     1814     -218     \n============================================\n- Hits           4605     4558      -47     \n+ Misses        13362    11922    -1440     \n+ Partials        311      302       -9     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1107?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...execution/columnar/RssNullableColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc051bGxhYmxlQ29sdW1uQWNjZXNzb3Iuc2NhbGE=) | | |\n| [.../spark/shuffle/celeborn/ShuffleInMemorySorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvc3Bhcmsvc2h1ZmZsZS9jZWxlYm9ybi9TaHVmZmxlSW5NZW1vcnlTb3J0ZXIuamF2YQ==) | | |\n| [...park/sql/execution/columnar/RssColumnBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkJ1aWxkZXIuc2NhbGE=) | | |\n| [...spark/sql/execution/columnar/RssBatchBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0JhdGNoQnVpbGRlci5zY2FsYQ==) | | |\n| [...xecution/columnar/RssColumnarBatchSerializer.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbmFyQmF0Y2hTZXJpYWxpemVyLnNjYWxh) | | |\n| [...ark/sql/execution/columnar/RssColumnAccessor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbkFjY2Vzc29yLnNjYWxh) | | |\n| [...rk/shuffle/celeborn/OpenByteArrayOutputStream.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL2NvbW1vbi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvc3Bhcmsvc2h1ZmZsZS9jZWxlYm9ybi9PcGVuQnl0ZUFycmF5T3V0cHV0U3RyZWFtLmphdmE=) | | |\n| [...rk/sql/execution/columnar/RssColumnDictionary.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3NwYXJrL3NxbC9leGVjdXRpb24vY29sdW1uYXIvUnNzQ29sdW1uRGljdGlvbmFyeS5qYXZh) | | |\n| [...cution/columnar/RssCompressibleColumnBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbXByZXNzaWJsZUNvbHVtbkJ1aWxkZXIuc2NhbGE=) | | |\n| [...l/execution/columnar/RssColumnarBatchBuilder.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50LXNwYXJrL3NwYXJrLTMvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvZXhlY3V0aW9uL2NvbHVtbmFyL1Jzc0NvbHVtbmFyQmF0Y2hCdWlsZGVyLnNjYWxh) | | |\n| ... and [11 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1107/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR should be merged after https://github.com/apache/incubator-celeborn/pull/1108

Merged to main/0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1106?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1106](https://codecov.io/gh/apache/incubator-celeborn/pull/1106?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ea849ce) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/5aa959a335f93a4065a2667cc440d56853d5b608?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5aa959a) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1106   +/-   ##\n=========================================\n  Coverage     25.18%   25.18%           \n  Complexity      779      779           \n=========================================\n  Files           215      215           \n  Lines         18278    18278           \n  Branches       2032     2032           \n=========================================\n  Hits           4602     4602           \n  Misses        13362    13362           \n  Partials        314      314           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1105?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1105](https://codecov.io/gh/apache/incubator-celeborn/pull/1105?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (edfd9fb) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/2bb8e7a2a28be9af4706349f9c968b804f3612ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bb8e7a) will **increase** coverage by `0.03%`.\n> The diff coverage is `85.72%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1105      +/-   ##\n============================================\n+ Coverage     26.88%   26.90%   +0.03%     \n  Complexity      747      747              \n============================================\n  Files           200      200              \n  Lines         17022    17029       +7     \n  Branches       1838     1838              \n============================================\n+ Hits           4574     4580       +6     \n- Misses        12151    12152       +1     \n  Partials        297      297              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1105?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.71% <85.72%> (+0.02%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1104?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1104](https://codecov.io/gh/apache/incubator-celeborn/pull/1104?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b89751d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f13dfb7421c6fe1ba4a8edd7ab08c70c73f5c441?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f13dfb7) will **increase** coverage by `0.03%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1104      +/-   ##\n============================================\n+ Coverage     25.17%   25.20%   +0.03%     \n  Complexity      781      781              \n============================================\n  Files           215      215              \n  Lines         18270    18278       +8     \n  Branches       2032     2032              \n============================================\n+ Hits           4598     4605       +7     \n- Misses        13361    13362       +1     \n  Partials        311      311              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1104?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/celeborn/common/util/ShutdownHookManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vdXRpbC9TaHV0ZG93bkhvb2tNYW5hZ2VyLmphdmE=) | `0.00% <ø> (ø)` | |\n| [.../celeborn/common/internal/config/ConfigEntry.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL2ludGVybmFsL2NvbmZpZy9Db25maWdFbnRyeS5zY2FsYQ==) | `77.99% <ø> (ø)` | |\n| [...apache/celeborn/common/metrics/MetricsConfig.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldHJpY3MvTWV0cmljc0NvbmZpZy5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/common/rpc/netty/Dispatcher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9EaXNwYXRjaGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/common/rpc/netty/NettyRpcEnv.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3JwYy9uZXR0eS9OZXR0eVJwY0Vudi5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `39.82% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1104/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.55% <87.50%> (+0.08%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Seems this patch causes RetryCommitFilesTest to fail\r\n```\r\n\r\nJob aborted due to stage failure: Task 1 in stage 0.0 failed 1 times, most recent failure: Lost task 1.0 in stage 0.0 (TID 1) (192.168.2.105 executor driver): java.io.IOException: Register shuffle failed for shuffle local-1671674878465-0\r\n\tat org.apache.celeborn.client.ShuffleClientImpl.pushOrMergeData(ShuffleClientImpl.java:522)\r\n\tat org.apache.celeborn.client.ShuffleClientImpl.pushData(ShuffleClientImpl.java:816)\r\n\tat org.apache.celeborn.client.write.DataPusher.pushData(DataPusher.java:173)\r\n\tat org.apache.celeborn.client.write.DataPusher.access$700(DataPusher.java:32)\r\n\tat org.apache.celeborn.client.write.DataPusher$1.run(DataPusher.java:117)\r\n\r\n```\r\nPlz take a look

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1103?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1103](https://codecov.io/gh/apache/incubator-celeborn/pull/1103?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (abffb56) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/a2dd72f20ceb8dfe2ed0c71ef1217de5d10ca04f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a2dd72f) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1103      +/-   ##\n============================================\n+ Coverage     25.10%   25.11%   +0.02%     \n- Complexity      772      777       +5     \n============================================\n  Files           215      215              \n  Lines         18208    18256      +48     \n  Branches       2024     2029       +5     \n============================================\n+ Hits           4569     4583      +14     \n- Misses        13329    13365      +36     \n+ Partials        310      308       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1103?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...va/org/apache/celeborn/client/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `46.00% <0.00%> (-11.69%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.53% <0.00%> (-0.42%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.48% <0.00%> (+0.03%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1103/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

reopen from\r\nhttps://github.com/apache/incubator-celeborn/pull/993\r\n#993 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1102](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (60332e3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e219e8b44ea14495d7a7d1f71dc99f6c74d40dd1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e219e8b) will **decrease** coverage by `0.00%`.\n> The diff coverage is `24.04%`.\n\n> :exclamation: Current head 60332e3 differs from pull request most recent head f6f57fe. Consider uploading reports for the commit f6f57fe to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1102      +/-   ##\n============================================\n- Coverage     27.01%   27.01%   -0.00%     \n- Complexity      760      774      +14     \n============================================\n  Files           200      202       +2     \n  Lines         17172    17311     +139     \n  Branches       1858     1877      +19     \n============================================\n+ Hits           4638     4674      +36     \n- Misses        12216    12316     +100     \n- Partials        318      321       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `6.53% <ø> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/client/write/InFlightRequestTracker.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvSW5GbGlnaHRSZXF1ZXN0VHJhY2tlci5qYXZh) | `26.17% <26.17%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.47% <41.87%> (-0.24%)` | :arrow_down: |\n| [...va/org/apache/celeborn/client/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `78.58% <75.00%> (+32.58%)` | :arrow_up: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.62% <100.00%> (ø)` | |\n| [...ache/celeborn/common/meta/AppDiskUsageMetric.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvQXBwRGlza1VzYWdlTWV0cmljLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [3 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1102?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Hi @zy-jordan , thanks for your pr! I have some comments, feel free to ping me if further discussion is needed. cc @AngersZhuuuu @RexXiong 

please run ./dev/reformat

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1100?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1100](https://codecov.io/gh/apache/incubator-celeborn/pull/1100?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7377517) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/c931663e5fed3713c1d193670d1e518e4f13559e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c931663) will **increase** coverage by `0.08%`.\n> The diff coverage is `36.85%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1100      +/-   ##\n============================================\n+ Coverage     25.07%   25.14%   +0.08%     \n- Complexity      772      774       +2     \n============================================\n  Files           215      215              \n  Lines         18227    18222       -5     \n  Branches       2037     2027      -10     \n============================================\n+ Hits           4569     4581      +12     \n+ Misses        13348    13327      -21     \n- Partials        310      314       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1100?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `4.00% <0.00%> (-0.10%)` | :arrow_down: |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/celeborn/common/meta/DiskStatus.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9EaXNrU3RhdHVzLmphdmE=) | `78.95% <87.50%> (+78.95%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.58% <0.00%> (-1.35%)` | :arrow_down: |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| ... and [2 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1100/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1099?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1099](https://codecov.io/gh/apache/incubator-celeborn/pull/1099?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4f5c820) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/13769f0f0a2401aacc66162a2f6006816a175ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (13769f0) will **increase** coverage by `0.05%`.\n> The diff coverage is `33.34%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1099      +/-   ##\n============================================\n+ Coverage     25.08%   25.13%   +0.05%     \n- Complexity      770      776       +6     \n============================================\n  Files           215      215              \n  Lines         18208    18208              \n  Branches       2024     2024              \n============================================\n+ Hits           4566     4575       +9     \n+ Misses        13331    13327       -4     \n+ Partials        311      306       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1099?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1099/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.45% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1099/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.96% <50.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1099/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.93% <0.00%> (+1.36%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1099/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1098?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1098](https://codecov.io/gh/apache/incubator-celeborn/pull/1098?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8bc0003) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3a4fd04f3376384677c5a38b3d30e8c699d731af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3a4fd04) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1098   +/-   ##\n=========================================\n  Coverage     25.09%   25.09%           \n  Complexity      774      774           \n=========================================\n  Files           215      215           \n  Lines         18224    18224           \n  Branches       2036     2036           \n=========================================\n  Hits           4572     4572           \n  Misses        13345    13345           \n  Partials        307      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @RexXiong @FMX cc @zy-jordan @zeropc 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1097?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> :exclamation: No coverage uploaded for pull request base (`main@c924a4f`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1097   +/-   ##\n=======================================\n  Coverage        ?   25.11%           \n  Complexity      ?      777           \n=======================================\n  Files           ?      215           \n  Lines           ?    18256           \n  Branches        ?     2029           \n=======================================\n  Hits            ?     4583           \n  Misses          ?    13365           \n  Partials        ?      308           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Would you please fill the PR description? And if this PR is not for main branch, please mention it in the title like `[CELEBORN-152][1.1] Your PR title`

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1095?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1095](https://codecov.io/gh/apache/incubator-celeborn/pull/1095?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (09e8d56) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ddab27a1d777f7758fb59f95f5e4797c4617eb35?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ddab27a) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1095      +/-   ##\n============================================\n- Coverage     25.06%   25.03%   -0.03%     \n+ Complexity      774      770       -4     \n============================================\n  Files           215      215              \n  Lines         18195    18195              \n  Branches       2035     2035              \n============================================\n- Hits           4559     4553       -6     \n- Misses        13329    13331       +2     \n- Partials        307      311       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1095?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1095/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @SzyWilliam @waitinfuture @zwangsheng 

@SzyWilliam have a quick look on the jar size, ratis jars are quite large, by sharing jars in this way, adding the ratis shell will not increase the binary tarball size much.

Thanks, merged to main/0.2

cc @AngersZhuuuu @pan3793 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1094?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1094](https://codecov.io/gh/apache/incubator-celeborn/pull/1094?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (75b3fdf) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/df5ed8ec09d1f8a3c75cbfe1ce685e4c09fd1330?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (df5ed8e) will **decrease** coverage by `0.08%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1094      +/-   ##\n============================================\n- Coverage     25.12%   25.04%   -0.07%     \n- Complexity      770      772       +2     \n============================================\n  Files           215      215              \n  Lines         18122    18195      +73     \n  Branches       2033     2035       +2     \n============================================\n+ Hits           4552     4556       +4     \n- Misses        13259    13329      +70     \n+ Partials        311      310       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1094?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...born/service/deploy/worker/storage/FlushTask.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hUYXNrLnNjYWxh) | `62.50% <0.00%> (-8.92%)` | :arrow_down: |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `36.50% <0.00%> (-0.36%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...scala/org/apache/celeborn/common/quota/Quota.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1F1b3RhLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `52.78% <0.00%> (ø)` | |\n| ... and [4 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1094/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1093?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1093](https://codecov.io/gh/apache/incubator-celeborn/pull/1093?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d6a246d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3576e4e7af10485c92f55ea8e585e986f23260b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3576e4) will **decrease** coverage by `0.10%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1093      +/-   ##\n============================================\n- Coverage     25.16%   25.06%   -0.09%     \n  Complexity      774      774              \n============================================\n  Files           215      215              \n  Lines         18122    18195      +73     \n  Branches       2033     2035       +2     \n============================================\n+ Hits           4558     4559       +1     \n- Misses        13257    13329      +72     \n  Partials        307      307              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1093?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| [...scala/org/apache/celeborn/common/quota/Quota.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1F1b3RhLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/master/Master.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvbWFzdGVyL01hc3Rlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FlushTask.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hUYXNrLnNjYWxh) | `62.50% <0.00%> (-8.92%)` | :arrow_down: |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `36.50% <0.00%> (-0.36%)` | :arrow_down: |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `52.78% <0.00%> (ø)` | |\n| ... and [3 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1093/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1092?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1092](https://codecov.io/gh/apache/incubator-celeborn/pull/1092?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (edf0568) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/3cdc25286d422cffeb593488ca9439f872625912?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3cdc252) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1092      +/-   ##\n============================================\n- Coverage     27.17%   27.13%   -0.03%     \n+ Complexity      766      762       -4     \n============================================\n  Files           195      195              \n  Lines         16783    16783              \n  Branches       1814     1814              \n============================================\n- Hits           4559     4553       -6     \n- Misses        11922    11924       +2     \n- Partials        302      306       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1092?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1092/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Cc @AngersZhuuuu @pan3793, and as there is a flaky test in `ShuffleClientSuite`, an issue has been turned on to record, and will be fixed afterwards. https://issues.apache.org/jira/projects/CELEBORN/issues/CELEBORN-173?filter=allissues

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1091?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1091](https://codecov.io/gh/apache/incubator-celeborn/pull/1091?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4895d5b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/65cb36c0023d3100d15533aa51c1aa142b8ede2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (65cb36c) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1091      +/-   ##\n============================================\n+ Coverage     25.08%   25.09%   +0.01%     \n  Complexity      774      774              \n============================================\n  Files           215      215              \n  Lines         18179    18176       -3     \n  Branches       2037     2036       -1     \n============================================\n  Hits           4559     4559              \n+ Misses        13313    13310       -3     \n  Partials        307      307              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1091?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1091/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1091/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1090?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1090](https://codecov.io/gh/apache/incubator-celeborn/pull/1090?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (410353e) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3576e4e7af10485c92f55ea8e585e986f23260b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3576e4) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1090   +/-   ##\n=========================================\n  Coverage     25.16%   25.16%           \n  Complexity      774      774           \n=========================================\n  Files           215      215           \n  Lines         18122    18122           \n  Branches       2033     2033           \n=========================================\n  Hits           4558     4558           \n  Misses        13257    13257           \n  Partials        307      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture @AngersZhuuuu 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1089?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1089](https://codecov.io/gh/apache/incubator-celeborn/pull/1089?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (32c6ab5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/e3576e4e7af10485c92f55ea8e585e986f23260b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3576e4) will **decrease** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1089      +/-   ##\n============================================\n- Coverage     25.16%   25.10%   -0.05%     \n+ Complexity      774      772       -2     \n============================================\n  Files           215      215              \n  Lines         18122    18208      +86     \n  Branches       2033     2024       -9     \n============================================\n+ Hits           4558     4569      +11     \n- Misses        13257    13329      +72     \n- Partials        307      310       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1089?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <ø> (ø)` | |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FlushTask.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hUYXNrLnNjYWxh) | `62.50% <0.00%> (-8.92%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `36.50% <0.00%> (-0.36%)` | :arrow_down: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `4.11% <0.00%> (-0.34%)` | :arrow_down: |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (-<0.01%)` | :arrow_down: |\n| ... and [14 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1089/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture please don\

> \r\n\r\nyeah, actually days ago I fixed up several JIRAs whose "fixed version" were forgotten

ping @FMX , seems the issue is introduced by https://github.com/apache/incubator-celeborn/pull/466 , plz verify if I misunderstood. cc @RexXiong @AngersZhuuuu 

This is used for deleted partitions in which storage info will be null on HDFS.

If this patch should be applied, worker should change its logic first.

@waitinfuture @nafiyAix  Also need to backport to branch-0.2\r\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1086?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1086](https://codecov.io/gh/apache/incubator-celeborn/pull/1086?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8a717d6) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f8970a120adf27602fcc4a7ea137c07a42935f5d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f8970a1) will **increase** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1086      +/-   ##\n============================================\n+ Coverage     25.23%   25.27%   +0.03%     \n- Complexity      770      774       +4     \n============================================\n  Files           212      212              \n  Lines         18037    18037              \n  Branches       2037     2037              \n============================================\n+ Hits           4552     4558       +6     \n+ Misses        13174    13172       -2     \n+ Partials        311      307       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1086?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...scala/org/apache/celeborn/common/quota/Quota.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1086/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL1F1b3RhLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1086/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @waitinfuture @nafiyAix Also should backport to branch-0.2

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1085?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1085](https://codecov.io/gh/apache/incubator-celeborn/pull/1085?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b77b33f) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/f8970a120adf27602fcc4a7ea137c07a42935f5d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f8970a1) will **increase** coverage by `0.04%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1085      +/-   ##\n============================================\n+ Coverage     25.23%   25.28%   +0.04%     \n- Complexity      770      776       +6     \n============================================\n  Files           212      212              \n  Lines         18037    18040       +3     \n  Branches       2037     2038       +1     \n============================================\n+ Hits           4552     4561       +9     \n+ Misses        13174    13173       -1     \n+ Partials        311      306       -5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1085?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/common/quota/DefaultQuotaManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1085/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL0RlZmF1bHRRdW90YU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1085/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.92% <0.00%> (+1.35%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1085/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1084?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1084](https://codecov.io/gh/apache/incubator-celeborn/pull/1084?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7dd54f8) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/17f45453e3e00ecf4062b9b6b6db76a4aeae5c2c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (17f4545) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1084      +/-   ##\n============================================\n- Coverage     25.29%   25.27%   -0.03%     \n+ Complexity      776      774       -2     \n============================================\n  Files           212      212              \n  Lines         18032    18037       +5     \n  Branches       2036     2037       +1     \n============================================\n- Hits           4561     4558       -3     \n- Misses        13165    13172       +7     \n- Partials        306      307       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1084?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/StateMachine.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1084/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvU3RhdGVNYWNoaW5lLmphdmE=) | `60.57% <0.00%> (-1.79%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1084/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.57% <0.00%> (-1.36%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Have you opened JIRA for this PR?

> Have you opened JIRA for this PR?\r\n\r\nI will add a ticket in jira.

Thanks, merging to main/0.2

Do we need to cherry pick it into 0.2.0? cc: @AngersZhuuuu @waitinfuture 

Pls change change doc of `QUOTA_CONFIGURATION_PATH`

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1083?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1083](https://codecov.io/gh/apache/incubator-celeborn/pull/1083?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (077291d) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ce86e11d50fc766da34d690d97b8f09509e91e36?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ce86e11) will **not change** coverage.\n> The diff coverage is `50.00%`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1083   +/-   ##\n=========================================\n  Coverage     25.27%   25.27%           \n  Complexity      774      774           \n=========================================\n  Files           212      212           \n  Lines         18037    18037           \n  Branches       2037     2037           \n=========================================\n  Hits           4558     4558           \n  Misses        13172    13172           \n  Partials        307      307           \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1083?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../scala/org/apache/celeborn/common/util/Utils.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3V0aWwvVXRpbHMuc2NhbGE=) | `7.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.39% <100.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

> Do we need to cherry pick it into 0.2.0? cc: @AngersZhuuuu @waitinfuture\r\n\r\nI think so

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1082?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1082](https://codecov.io/gh/apache/incubator-celeborn/pull/1082?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (990949b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/1311fb53d1c959949007ee3751bf866457a1b74f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1311fb5) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1082      +/-   ##\n============================================\n- Coverage     26.87%   26.84%   -0.03%     \n+ Complexity      776      772       -4     \n============================================\n  Files           203      203              \n  Lines         17411    17412       +1     \n  Branches       1899     1899              \n============================================\n- Hits           4678     4672       -6     \n- Misses        12413    12416       +3     \n- Partials        320      324       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.27% <0.00%> (-2.45%)` | :arrow_down: |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1082?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.58% <0.00%> (-0.04%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

Shall we cp this pr to branch-0.2?

> Shall we cp this pr to branch-0.2?\r\n\r\nLGTM

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1080?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1080](https://codecov.io/gh/apache/incubator-celeborn/pull/1080?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3313ce4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/dcc242e65035eabea50137b28c4292d77d6bd310?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dcc242e) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1080   +/-   ##\n=========================================\n  Coverage     25.27%   25.27%           \n  Complexity      774      774           \n=========================================\n  Files           212      212           \n  Lines         18032    18032           \n  Branches       2036     2036           \n=========================================\n  Hits           4558     4558           \n  Misses        13167    13167           \n  Partials        307      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@pan3793 @waitinfuture  Thanks for the reviews! Made corresponding changes on code, PTAL~

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1078?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1078](https://codecov.io/gh/apache/incubator-celeborn/pull/1078?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (acab265) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/dcc242e65035eabea50137b28c4292d77d6bd310?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dcc242e) will **decrease** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1078      +/-   ##\n============================================\n- Coverage     25.27%   25.25%   -0.03%     \n+ Complexity      774      772       -2     \n============================================\n  Files           212      212              \n  Lines         18032    18037       +5     \n  Branches       2036     2037       +1     \n============================================\n- Hits           4558     4555       -3     \n- Misses        13167    13172       +5     \n- Partials        307      310       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/StateMachine.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvU3RhdGVNYWNoaW5lLmphdmE=) | `60.57% <0.00%> (-1.79%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.26% <0.00%> (-2.46%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `77.92% <0.00%> (+1.35%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1077?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1077](https://codecov.io/gh/apache/incubator-celeborn/pull/1077?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (862ff99) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/dcc242e65035eabea50137b28c4292d77d6bd310?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dcc242e) will **not change** coverage.\n> The diff coverage is `23.52%`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1077   +/-   ##\n=========================================\n  Coverage     25.27%   25.27%           \n  Complexity      774      774           \n=========================================\n  Files           212      212           \n  Lines         18032    18032           \n  Branches       2036     2036           \n=========================================\n  Hits           4558     4558           \n  Misses        13167    13167           \n  Partials        307      307           \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1077?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/client/ShuffleClient.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudC5qYXZh) | `4.65% <8.33%> (ø)` | |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.95% <60.00%> (ø)` | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1074?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1074](https://codecov.io/gh/apache/incubator-celeborn/pull/1074?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (94e5923) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/97991a34043cff6e5c64218d27c5c0820479b0ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (97991a3) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1074      +/-   ##\n============================================\n- Coverage     25.29%   25.24%   -0.05%     \n+ Complexity      776      770       -6     \n============================================\n  Files           212      212              \n  Lines         18031    18031              \n  Branches       2036     2036              \n============================================\n- Hits           4561     4552       -9     \n- Misses        13164    13168       +4     \n- Partials        306      311       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1074/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.26% <0.00%> (-2.46%)` | :arrow_down: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1074/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.57% <0.00%> (-1.36%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1073?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1073](https://codecov.io/gh/apache/incubator-celeborn/pull/1073?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d9923f4) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/edf85de8f609aa587dc6d30460374233b13aeaa6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (edf85de) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1073      +/-   ##\n============================================\n+ Coverage     25.25%   25.27%   +0.02%     \n- Complexity      770      774       +4     \n============================================\n  Files           212      212              \n  Lines         18027    18032       +5     \n  Branches       2036     2036              \n============================================\n+ Hits           4552     4558       +6     \n- Misses        13164    13167       +3     \n+ Partials        311      307       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1073?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is supposed to be cherry-picked to branch-0.2

> This PR is supposed to be cherry-picked to branch-0.2\r\n\r\nWill do 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1071?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1071](https://codecov.io/gh/apache/incubator-celeborn/pull/1071?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (90d06c5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/97991a34043cff6e5c64218d27c5c0820479b0ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (97991a3) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1071      +/-   ##\n============================================\n- Coverage     25.29%   25.27%   -0.02%     \n+ Complexity      776      774       -2     \n============================================\n  Files           212      212              \n  Lines         18031    18031              \n  Branches       2036     2036              \n============================================\n- Hits           4561     4558       -3     \n- Misses        13164    13166       +2     \n- Partials        306      307       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.57% <0.00%> (-1.36%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @SzyWilliam, I suppose there is no known regression on 2.4.1 comparing to 2.4.0, could you please help confirming that?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1070?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1070](https://codecov.io/gh/apache/incubator-celeborn/pull/1070?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1489cc0) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/97991a34043cff6e5c64218d27c5c0820479b0ea?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (97991a3) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1070      +/-   ##\n============================================\n- Coverage     25.29%   25.26%   -0.04%     \n+ Complexity      776      772       -4     \n============================================\n  Files           212      212              \n  Lines         18031    18031              \n  Branches       2036     2036              \n============================================\n- Hits           4561     4555       -6     \n- Misses        13164    13166       +2     \n- Partials        306      310       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1070?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1070/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `69.26% <0.00%> (-2.46%)` | :arrow_down: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@pan3793 Thanks for working on this! Strong +1 for upgrading. There are no performance degradations or any known bugs introduced. Besides RATIS-1743, there are some other important fixes included in 2.4.1, as:\r\n1. Fix CVE-2022-3171 in [RATIS-1729](https://issues.apache.org/jira/projects/RATIS/issues/RATIS-1729)\r\n2. Reduce AppendEntries latency by 30% in [RATIS-1730](https://issues.apache.org/jira/projects/RATIS/issues/RATIS-1730)\r\n3. Reduce YoungGC by 15% in [RATIS-1717](https://issues.apache.org/jira/projects/RATIS/issues/RATIS-1717)\r\n\r\n \r\n

Thanks for confirming @SzyWilliam 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1069](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (93b22c9) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/13769f0f0a2401aacc66162a2f6006816a175ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (13769f0) will **decrease** coverage by `0.03%`.\n> The diff coverage is `4.96%`.\n\n> :exclamation: Current head 93b22c9 differs from pull request most recent head 6844216. Consider uploading reports for the commit 6844216 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1069      +/-   ##\n============================================\n- Coverage     25.08%   25.06%   -0.02%     \n- Complexity      770      782      +12     \n============================================\n  Files           215      218       +3     \n  Lines         18208    18370     +162     \n  Branches       2024     2042      +18     \n============================================\n+ Hits           4566     4602      +36     \n- Misses        13331    13456     +125     \n- Partials        311      312       +1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...eleborn/common/network/protocol/ReadAddCredit.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkQWRkQ3JlZGl0LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...che/celeborn/common/network/protocol/ReadData.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9SZWFkRGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...orn/common/network/server/BufferStreamManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvQnVmZmVyU3RyZWFtTWFuYWdlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../celeborn/service/deploy/worker/FetchHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0ZldGNoSGFuZGxlci5zY2FsYQ==) | `37.50% <16.67%> (-2.31%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.20% <42.86%> (-1.37%)` | :arrow_down: |\n| [...va/org/apache/celeborn/client/write/PushState.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvUHVzaFN0YXRlLmphdmE=) | `46.00% <0.00%> (-11.69%)` | :arrow_down: |\n| [.../org/apache/celeborn/client/ShuffleClientImpl.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvU2h1ZmZsZUNsaWVudEltcGwuamF2YQ==) | `19.53% <0.00%> (-0.42%)` | :arrow_down: |\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `4.00% <0.00%> (-0.10%)` | :arrow_down: |\n| [...e/celeborn/common/protocol/message/StatusCode.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vcHJvdG9jb2wvbWVzc2FnZS9TdGF0dXNDb2RlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [4 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1069?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1068?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1068](https://codecov.io/gh/apache/incubator-celeborn/pull/1068?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a34ec37) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/edf85de8f609aa587dc6d30460374233b13aeaa6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (edf85de) will **increase** coverage by `0.02%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1068      +/-   ##\n============================================\n+ Coverage     25.25%   25.27%   +0.02%     \n- Complexity      770      774       +4     \n============================================\n  Files           212      212              \n  Lines         18027    18031       +4     \n  Branches       2036     2036              \n============================================\n+ Hits           4552     4558       +6     \n- Misses        13164    13166       +2     \n+ Partials        311      307       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1068?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1068/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1068/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1068/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1068/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1067?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1067](https://codecov.io/gh/apache/incubator-celeborn/pull/1067?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c2d1e40) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/edf85de8f609aa587dc6d30460374233b13aeaa6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (edf85de) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n```diff\n@@            Coverage Diff            @@\n##               main    #1067   +/-   ##\n=========================================\n  Coverage     25.25%   25.25%           \n  Complexity      770      770           \n=========================================\n  Files           212      212           \n  Lines         18027    18027           \n  Branches       2036     2036           \n=========================================\n  Hits           4552     4552           \n  Misses        13164    13164           \n  Partials        311      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1066](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4e535e5) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/ae32c702b6e9922f75bc7ce14ac1d79293b0ab70?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ae32c70) will **increase** coverage by `0.53%`.\n> The diff coverage is `62.85%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1066      +/-   ##\n============================================\n+ Coverage     26.42%   26.94%   +0.53%     \n- Complexity      758      786      +28     \n============================================\n  Files           206      209       +3     \n  Lines         17595    17845     +250     \n  Branches       1930     1959      +29     \n============================================\n+ Hits           4648     4807     +159     \n- Misses        12629    12711      +82     \n- Partials        318      327       +9     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rn/common/network/server/memory/MemoryManager.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvbWVtb3J5L01lbW9yeU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/celeborn/service/deploy/worker/Worker.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `38.47% <66.67%> (+0.45%)` | :arrow_up: |\n| [...oy/worker/congestcontrol/CongestionController.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQ29uZ2VzdGlvbkNvbnRyb2xsZXIuamF2YQ==) | `67.68% <67.68%> (ø)` | |\n| [...e/deploy/worker/congestcontrol/TimeSlidingHub.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvVGltZVNsaWRpbmdIdWIuamF2YQ==) | `71.70% <71.70%> (ø)` | |\n| [.../deploy/worker/congestcontrol/BufferStatusHub.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvY29uZ2VzdGNvbnRyb2wvQnVmZmVyU3RhdHVzSHViLmphdmE=) | `78.95% <78.95%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.71% <87.18%> (+0.14%)` | :arrow_up: |\n| [.../celeborn/service/deploy/worker/WorkerSource.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1dvcmtlclNvdXJjZS5zY2FsYQ==) | `100.00% <100.00%> (ø)` | |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `53.64% <100.00%> (+0.86%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

@waitinfuture @AngersZhuuuu Please take a look, the codes are safe to review now.

A test with 2T jobs * 2 and set spark.rss.push.data.maxReqsInFlight=30\r\n\r\nsome worker side configures\r\n\r\n```bash\r\n# max direct memory : 27305 MB\r\nrss.worker.flush.queue.capacity                 61000\r\nrss.flusher.thread.count                        1\r\nrss.worker.fetch.chunk.size                     8m\r\nrss.worker.memory.check.interval                5\r\nrss.worker.memory.report.interval               5s\r\nrss.pause.pushdata.memory.ratio                 0.8\r\nrss.pause.replicate.memory.ratio                0.9\r\n\r\n# Rate limit\r\nrss.worker.ratelimit.enabled                    true\r\nrss.worker.ratelimit.sample.time.window         5s\r\nrss.worker.ratelimit.low.watermark              15G\r\nrss.worker.ratelimit.high.watermark             18G\r\nrss.worker.ratelimit.user.inactive.interval     5min\r\nrss.worker.ratelimit.check.userstatus.interval  1s\r\n```\r\n\r\n### Before the network control\r\n![Screenshot 2023-01-11 at 16 18 50](https://user-images.githubusercontent.com/10115332/212631550-99dd9841-9be6-4e17-bffd-e5bb80df0cf1.png)\r\n\r\n`PushData` number is fast increased causing the `PausePushData`\r\n\r\n![Screenshot 2023-01-11 at 16 18 33](https://user-images.githubusercontent.com/10115332/212631577-6e21ce50-f27a-400f-b851-7c02595517e3.png)\r\n\r\nthe disk IO is,\r\n\r\n![Screenshot 2023-01-11 at 18 21 46](https://user-images.githubusercontent.com/10115332/212797494-04327390-85c6-44d0-b2a6-f0bcd12c0731.png)\r\n\r\ncombined with the pr: https://github.com/apache/incubator-celeborn/pull/1167 and enabled the rate limit control,\r\n![Screenshot 2023-01-11 at 18 54 32](https://user-images.githubusercontent.com/10115332/212631758-652842d5-77f5-4869-8069-f750212163d3.png)\r\n`PushData` number will not be fast increased, and the `PausePushData` never happens\r\n\r\n![Screenshot 2023-01-11 at 18 54 07](https://user-images.githubusercontent.com/10115332/212631948-2131642d-023c-44ac-8586-923f50ae57a6.png)\r\n\r\nthe disk IO is,\r\n![Screenshot 2023-01-11 at 18 55 01](https://user-images.githubusercontent.com/10115332/212797573-17ed55d1-47ce-4bac-8d7b-f77b388ecd56.png)\r\n

> A test with 2T jobs * 2 and set spark.rss.push.data.maxReqsInFlight=30\r\n> \r\n> ### Before the network control\r\n> ![Screenshot 2023-01-11 at 16 18 50](https://user-images.githubusercontent.com/10115332/212631550-99dd9841-9be6-4e17-bffd-e5bb80df0cf1.png)\r\n> \r\n> `PushData` number is fast increased causing the `PausePushData`\r\n> \r\n> ![Screenshot 2023-01-11 at 16 18 33](https://user-images.githubusercontent.com/10115332/212631577-6e21ce50-f27a-400f-b851-7c02595517e3.png)\r\n> \r\n> combined with the pr: #1167 and enabled the rate limit control, ![Screenshot 2023-01-11 at 18 54 32](https://user-images.githubusercontent.com/10115332/212631758-652842d5-77f5-4869-8069-f750212163d3.png) `PushData` number will not be fast increased, and the `PausePushData` never happens\r\n> \r\n> ![Screenshot 2023-01-11 at 18 54 07](https://user-images.githubusercontent.com/10115332/212631948-2131642d-023c-44ac-8586-923f50ae57a6.png)\r\n\r\nAccording to the "Worker Netty Memory" metric, we can see that the effect of congestion control is quite significant, but on the other hand it seems that the punishment is a little bit too rigorous that tne memory is much lower than it\

> I will add a small job test to see how it will affect the small jobs.\r\n\r\n## 10G data\r\n1. enable congestion control\r\n<img width="1735" alt="Screenshot 2023-02-03 at 11 31 37" src="https://user-images.githubusercontent.com/10115332/216508627-c842446f-1d70-46e0-896a-2d74ee51f395.png">\r\n\r\n2. disable congestion control\r\n<img width="1740" alt="Screenshot 2023-02-03 at 11 51 10" src="https://user-images.githubusercontent.com/10115332/216508664-1e48f0cf-4091-4425-ad9e-8c61c0e5b592.png">\r\n\r\nThe min shuffle write time increases nearly 1 sec, but the avg and the max values are better, I think with the slow start, the  maxInFlight requests can exceed the configure `celeborn.push.maxReqsInFlight`, so it can get the better result.

> \r\n\r\nThanks! the number is positive, I will review this and https://github.com/apache/incubator-celeborn/pull/1167 later on today

LGTM, thanks! Merging to main.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1065?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1065](https://codecov.io/gh/apache/incubator-celeborn/pull/1065?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2297e61) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/df5ed8ec09d1f8a3c75cbfe1ce685e4c09fd1330?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (df5ed8e) will **decrease** coverage by `0.05%`.\n> The diff coverage is `0.86%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1065      +/-   ##\n============================================\n- Coverage     25.12%   25.08%   -0.04%     \n- Complexity      770      774       +4     \n============================================\n  Files           215      215              \n  Lines         18122    18179      +57     \n  Branches       2033     2037       +4     \n============================================\n+ Hits           4552     4559       +7     \n- Misses        13259    13313      +54     \n+ Partials        311      307       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9GaWxlV3JpdGVyLmphdmE=) | `36.50% <0.00%> (-0.36%)` | :arrow_down: |\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ce/deploy/worker/storage/PartitionFilesSorter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9QYXJ0aXRpb25GaWxlc1NvcnRlci5qYXZh) | `67.14% <0.00%> (ø)` | |\n| [...ploy/worker/storage/ReducePartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9SZWR1Y2VQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `48.28% <0.00%> (ø)` | |\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...born/service/deploy/worker/storage/FlushTask.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hUYXNrLnNjYWxh) | `62.50% <0.00%> (-8.92%)` | :arrow_down: |\n| [...leborn/service/deploy/worker/storage/Flusher.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRmx1c2hlci5zY2FsYQ==) | `52.78% <ø> (ø)` | |\n| [...service/deploy/worker/storage/StorageManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvU3RvcmFnZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| ... and [2 more](https://codecov.io/gh/apache/incubator-celeborn/pull/1065/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Ping @pan3793. How about now?

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1063?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1063](https://codecov.io/gh/apache/incubator-celeborn/pull/1063?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (098b7a3) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/84d67d019dff73580bd14aa489ce939e2f1fc58c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (84d67d0) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1063      +/-   ##\n============================================\n+ Coverage     25.26%   25.28%   +0.01%     \n- Complexity      772      774       +2     \n============================================\n  Files           212      212              \n  Lines         18027    18027              \n  Branches       2036     2036              \n============================================\n+ Hits           4555     4558       +3     \n  Misses        13162    13162              \n+ Partials        310      307       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1063?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...leborn/service/deploy/worker/PushDataHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/1063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL1B1c2hEYXRhSGFuZGxlci5zY2FsYQ==) | `0.00% <0.00%> (ø)` | |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.57% <0.00%> (-1.36%)` | :arrow_down: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

I see, the logic in branch-0.2 is right.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1062?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1062](https://codecov.io/gh/apache/incubator-celeborn/pull/1062?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8ce1846) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/84d67d019dff73580bd14aa489ce939e2f1fc58c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (84d67d0) will **increase** coverage by `0.16%`.\n> The diff coverage is `38.26%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1062      +/-   ##\n============================================\n+ Coverage     25.26%   25.43%   +0.16%     \n- Complexity      772      791      +19     \n============================================\n  Files           212      212              \n  Lines         18027    18141     +114     \n  Branches       2036     2053      +17     \n============================================\n+ Hits           4555     4614      +59     \n- Misses        13162    13207      +45     \n- Partials        310      320      +10     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1062?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../deploy/worker/storage/MapPartitionFileWriter.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS93b3JrZXIvc3RvcmFnZS9NYXBQYXJ0aXRpb25GaWxlV3JpdGVyLmphdmE=) | `41.73% <38.26%> (+41.73%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

@waitinfuture if we find a commit introduced issue, generally we should discuss on the original PR and evaluate if there is an opportunity to fix it by sending a followup PR before reverting, if we decide to revert it eventually, please leave comments on the original PR to clarify why should we do that, to avoid confusing the future explorers.

> \r\n\r\nThanks for pointing out, we discussed offline but I forgot to discuss here.\r\n\r\nThe reason to revert this pr is that this pr causes the main branch compiles error, to avoid blocking other prs I decided to revert. Looking back, it maybe better to fix by sending a followup PR instead of reverting. I will be more careful about reverting, thanks.

Pls create an jira ticket and use it in pr title `[CELEBORN-xx] xxxx`

If two thing, I prefer you can do these in separated pr\r\n```\r\nAdd optional heartbeat for idle connections in the client pool\r\nAdd optional write timeout timer for data clients (which already exists in rpc clients)\r\n```\r\n

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1061?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#1061](https://codecov.io/gh/apache/incubator-celeborn/pull/1061?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (af113fa) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/84d67d019dff73580bd14aa489ce939e2f1fc58c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (84d67d0) will **increase** coverage by `0.02%`.\n> The diff coverage is `30.30%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main    #1061      +/-   ##\n============================================\n+ Coverage     25.26%   25.29%   +0.02%     \n- Complexity      772      779       +7     \n============================================\n  Files           212      214       +2     \n  Lines         18027    18089      +62     \n  Branches       2036     2044       +8     \n============================================\n+ Hits           4555     4575      +20     \n- Misses        13162    13202      +40     \n- Partials        310      312       +2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/1061?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/celeborn/common/network/protocol/Ping.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9QaW5nLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/common/network/protocol/Pong.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9Qb25nLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...common/network/server/TransportChannelHandler.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9zZXJ2ZXIvVHJhbnNwb3J0Q2hhbm5lbEhhbmRsZXIuamF2YQ==) | `63.15% <30.00%> (-12.29%)` | :arrow_down: |\n| [...ache/celeborn/common/network/protocol/Message.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9wcm90b2NvbC9NZXNzYWdlLmphdmE=) | `51.19% <42.85%> (-1.38%)` | :arrow_down: |\n| [.../common/network/client/TransportClientFactory.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9jbGllbnQvVHJhbnNwb3J0Q2xpZW50RmFjdG9yeS5qYXZh) | `83.80% <50.00%> (-2.05%)` | :arrow_down: |\n| [...ache/celeborn/common/network/TransportContext.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay9UcmFuc3BvcnRDb250ZXh0LmphdmE=) | `78.04% <57.14%> (-5.29%)` | :arrow_down: |\n| [...he/celeborn/common/network/util/TransportConf.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL1RyYW5zcG9ydENvbmYuamF2YQ==) | `84.61% <100.00%> (+2.79%)` | :arrow_up: |\n| [...ice/deploy/master/clustermeta/ha/HARaftServer.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvY2x1c3Rlcm1ldGEvaGEvSEFSYWZ0U2VydmVyLmphdmE=) | `76.57% <0.00%> (-1.36%)` | :arrow_down: |\n| [...apache/celeborn/common/network/util/JavaUtils.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbmV0d29yay91dGlsL0phdmFVdGlscy5qYXZh) | `38.02% <0.00%> (+0.70%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/1061/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.72% <0.00%> (+2.45%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

Plz run ./dev/reformat to automatically fix style issues

> If two thing, I prefer you can do these in separated pr\r\n> \r\n> ```\r\n> Add optional heartbeat for idle connections in the client pool\r\n> Add optional write timeout timer for data clients (which already exists in rpc clients)\r\n> ```\r\n\r\nit should be so.

adding heartbeat seems to be a bad idea here. it should never be applied in global scope. especially for channels that use file region to transfer data.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1060?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> :exclamation: No coverage uploaded for pull request base (`main@c7258cf`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head edf2dfd differs from pull request most recent head 8aba542. Consider uploading reports for the commit 8aba542 to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1060   +/-   ##\n=======================================\n  Coverage        ?   25.11%           \n  Complexity      ?      770           \n=======================================\n  Files           ?      215           \n  Lines           ?    18125           \n  Branches        ?     2033           \n=======================================\n  Hits            ?     4552           \n  Misses          ?    13262           \n  Partials        ?      311           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

result link: https://github.com/apache/incubator-celeborn/actions/runs/3656345004 

how about current @AngersZhuuuu @waitinfuture 

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1059?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> :exclamation: No coverage uploaded for pull request base (`main@dac2ba6`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1059   +/-   ##\n=======================================\n  Coverage        ?   25.28%           \n  Complexity      ?      774           \n=======================================\n  Files           ?      212           \n  Lines           ?    18027           \n  Branches        ?     2036           \n=======================================\n  Hits            ?     4558           \n  Misses          ?    13162           \n  Partials        ?      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1055?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> :exclamation: No coverage uploaded for pull request base (`main@c924a4f`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1055   +/-   ##\n=======================================\n  Coverage        ?   25.17%           \n  Complexity      ?      774           \n=======================================\n  Files           ?      215           \n  Lines           ?    18154           \n  Branches        ?     2035           \n=======================================\n  Hits            ?     4571           \n  Misses          ?    13276           \n  Partials        ?      307           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @AngersZhuuuu @waitinfuture 

@boneanxs @waitinfuture

@waitinfuture I suppose currently Celeborn is during 0.2.0 release cycle, please take care which PR need to backport `branch-0.2` 

@FMX @waitinfuture 

@pan3793 @waitinfuture @FMX 

Docs are moved to  https://github.com/apache/incubator-celeborn-website.

> Docs are moved to https://github.com/apache/incubator-celeborn-website.\r\n\r\nGot it, let me check

ping @FMX @waitinfuture @nafiyAix @pan3793 

@FMX @waitinfuture 

As far as I know, the replication failed worker will not be added to the blacklist because the "PUSH_DATA_FAIL_SLAVE" is considered a network failure. There is no need to add because "PUSH_DATA_FAIL_MASTER" will added the failed node to the blacklist.

ok

@FMX @waitinfuture 

Can you create a ISSUE and change title like `[CELEBORN-xxx][PR_TYPE] xxxx`?

> Can you create a ISSUE and change title like `[CELEBORN-xxx][PR_TYPE] xxxx`\r\n\r\nThanks for the reminder, i will open issue and add some unit tests later.

@FMX @waitinfuture

Need resolve conflicts

Tested in prod env..can work

@FMX @waitinfuture @SzyWilliam 

@AngersZhuuuu Thanks for working on this! I think we should also transition the state from pause to running in `reinitialize` hook. See the pause / reinitialize doc in Ratis: https://github.com/apache/ratis/blob/9d1e9895666936d911758d04b4ea3f8386694abe/ratis-docs/src/site/markdown/snapshot.md?plain=1#L159 and Ozone usage: https://github.com/apache/ozone/blob/829dfce410d6d8801421a87ac21922c5f767acda/hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/ha/SCMStateMachine.java#L388

> @AngersZhuuuu Thanks for working on this! I think we should also transition the state from pause to running in `reinitialize` hook. See the pause / reinitialize doc in Ratis: https://github.com/apache/ratis/blob/9d1e9895666936d911758d04b4ea3f8386694abe/ratis-docs/src/site/markdown/snapshot.md?plain=1#L159 and Ozone usage: https://github.com/apache/ozone/blob/829dfce410d6d8801421a87ac21922c5f767acda/hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/ha/SCMStateMachine.java#L388\r\n\r\nUpdated! How about current.

@FMX @waitinfuture 

> LGTM. Thanks. This patch will need some tests.\r\n\r\nHave tested in our prod,,,, it can work

ping @waitinfuture 

Plz fix style issues by ./dev/reformat

done @waitinfuture @AngersZhuuuu 

Waiting for the Jira ticket \r\nhttps://issues.apache.org/jira/browse/INFRA-23972?orderby=cf%5B12313920%5D+ASC%2C+priority+DESC%2C+updated+DESC

It works without token but unstable. So I think this pr can be merged.

According the INFRA ticket comments, I think the codecov is configured and usable.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/1026?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> :exclamation: No coverage uploaded for pull request base (`main@5ad4415`). [Click here to learn what that means](https://docs.codecov.io/docs/error-reference?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#section-missing-base-commit).\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head d91cb44 differs from pull request most recent head b83fae8. Consider uploading reports for the commit b83fae8 to get more accurate results\n\n```diff\n@@           Coverage Diff           @@\n##             main    #1026   +/-   ##\n=======================================\n  Coverage        ?   25.76%           \n  Complexity      ?      760           \n=======================================\n  Files           ?      204           \n  Lines           ?    17229           \n  Branches        ?     1899           \n=======================================\n  Hits            ?     4439           \n  Misses          ?    12484           \n  Partials        ?      306           \n```\n\n\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

The JIRA is not closed correctly.

That is true and we don’t know why the Jira ticket won’t be closed after the pull request is merged.\n在 2022年12月13日 +0800 17:13，Cheng Pan ***@***.***>，写道：\n> The JIRA is not closed correctly.\n> —\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> You are receiving this because you authored the thread.Message ID: ***@***.***>\n

ping @FMX @RexXiong @FMX 

@waitinfuture @RexXiong 

@waitinfuture @FMX 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

cc @AngersZhuuuu I have refined some logic, plz have a look.

ping @waitinfuture @FMX 

kindly remind. for graceful worker shutdown/upgrade, worker will just return hard_split when handle push data message, So we may need wait a timeout if map partition region is not finished. @zhongqiangczq @waitinfuture 

plz resolve conflicts

pr title \r\n```\r\nChannel inActive may cause new client use old stream id to fetch data cause IllegalStateException\r\n```

duplicate  with https://github.com/apache/incubator-celeborn/pull/1000, close this one

@FMX @waitinfuture 

Why are there so many close logs here?

> Why are there so many close logs here?\r\n\r\nEach call to close partition will print one line

Plz migrate the issue to jira https://issues.apache.org/jira/projects/CELEBORN/issues

ping @waitinfuture 

> \r\n\r\nSorry for the delay, I have submitted several comments, thanks for the pr! @zy-jordan @AngersZhuuuu 

> \r\n\r\nHi @zy-jordan ,seems 2,3,4 related code is not submitted

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/993?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#993](https://codecov.io/gh/apache/incubator-celeborn/pull/993?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (79b31fd) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/13769f0f0a2401aacc66162a2f6006816a175ca6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (13769f0) will **increase** coverage by `0.24%`.\n> The diff coverage is `8.13%`.\n\n```diff\n@@             Coverage Diff              @@\n##               main     #993      +/-   ##\n============================================\n+ Coverage     25.08%   25.32%   +0.24%     \n- Complexity      770      788      +18     \n============================================\n  Files           215      214       -1     \n  Lines         18208    18118      -90     \n  Branches       2024     2050      +26     \n============================================\n+ Hits           4566     4586      +20     \n+ Misses        13331    13223     -108     \n+ Partials        311      309       -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/993?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/celeborn/client/read/DfsPartitionReader.java](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvcmVhZC9EZnNQYXJ0aXRpb25SZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/celeborn/client/write/DataPushQueue.java](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hRdWV1ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...a/org/apache/celeborn/client/write/DataPusher.java](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jbGllbnQvd3JpdGUvRGF0YVB1c2hlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/celeborn/client/LifecycleManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0xpZmVjeWNsZU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/celeborn/common/meta/FileInfo.java](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9jb21tb24vbWV0YS9GaWxlSW5mby5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...e/celeborn/common/meta/PartitionLocationInfo.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL21ldGEvUGFydGl0aW9uTG9jYXRpb25JbmZvLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...born/common/protocol/message/ControlMessages.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3Byb3RvY29sL21lc3NhZ2UvQ29udHJvbE1lc3NhZ2VzLnNjYWxh) | `0.14% <0.00%> (+0.01%)` | :arrow_up: |\n| [...he/celeborn/common/quota/DefaultQuotaManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL3F1b3RhL0RlZmF1bHRRdW90YU1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| ... and [22 more](https://codecov.io/gh/apache/incubator-celeborn/pull/993/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

ping @waitinfuture 

ping @FMX @waitinfuture 

ping @waitinfuture @FMX 

In this pr, multiple commitFiles requests among hard-split partitions are guaranteed non-overlap, which means no two requests commit the same PartitionLocation, guarded by sync on ShuffleCommittedInfo. But commitFiles requests between handleStageEnd and hard-split are not guaranteed, so two requests can commit the same PartitionLocation, which is error-prone.\r\nSo we should wait for all hard-split commitFiles request finish before trigger commitFiles in handleStageEnd.\r\n\r\nAnother issue is that we need a better policy to handle multiple commitFiles for a single shuffleId in server side, keep consistent with retryCommitFiles. I think we can give a unique epoch for each commitFiles request, ensuring that no overlap among any two epochs, and retryCommitFiles only impacts its epoch.

> \r\n\r\nFor the epoch thing, I will soon implement it [[CELEBORN-70]](https://issues.apache.org/jira/browse/CELEBORN-70)

All changed, double check again.

ping @waitinfuture 

Why need to override this?

/regression

Duplicate with https://github.com/apache/incubator-celeborn/pull/1011

Hi, Is this patch suitable for all JDK versions or some JDK versions?

> Hi, Is this patch suitable for all JDK versions or some JDK versions?\r\n\r\nI tested for JDK8 and 11 on my local machine. After referring to Java document, I think it also works for other versions 

Extra 2 questions to to confirmed:\r\n\r\n1. Does the log in the screencut consist with the real shuffle size? \r\n2. Has this pr been tested on HA mode with some master killed?\r\n\r\nThanks.

HA mode result:\r\nNOTE: Application 0417 and 0418 are a workflow that runs twice.\r\n<img width="1721" alt="截屏2022-11-16 19 47 07" src="https://user-images.githubusercontent.com/4150993/202175144-f155ba7a-adf2-461c-bab4-fc6915099875.png">\r\n

The JIRA ticket still open ...

> Could we directly use null as the empty value instead of empty hashmap?\r\n\r\nI think we could.\r\n\r\n```\r\nval builder = ...\r\n\r\nif (!eliminateUserResourceConsumption) {\r\n  builder.putAllUserResourceConsumption(...)\r\n}\r\n\r\nbuilder.build\r\n```

ping @FMX 

/regression

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

The user identifier object is for a feature under development. So maybe there is no need to remove it now.\r\n@AngersZhuuuu Can you help to review this pull request?

Yea, should not remove userIdentifier

> Yea, should not remove userIdentifier\r\n\r\ndone and kept it still.

You can run "./dev/reformat" to solved all format issues before commit.

> You can run "./dev/reformat" to solved all format issues before commit.\r\n\r\nDone, just forgot to run the script, I think we could put the instruction into `contributing guide`, but looks like we have no such website yet.

> > You can run "./dev/reformat" to solved all format issues before commit.\r\n> \r\n> Done, just forgot to run the script, I think we could put the instruction into `contributing guide`, but looks like we have no such website yet.\r\n\r\nNice suggestion, no website yet, still under construction.

> > > You can run "./dev/reformat" to solved all format issues before commit.\r\n> > \r\n> > \r\n> > Done, just forgot to run the script, I think we could put the instruction into `contributing guide`, but looks like we have no such website yet.\r\n> \r\n> Nice suggestion, no website yet, still under construction.\r\n\r\n@AngersZhuuuu is this PR ready to merge?

@waitinfuture 

> This configuration file should be removed.\r\n\r\nDone.\r\n

/regression

/regression

I would like to cc @AngersZhuuuu to review if there are other potential concurrent issues

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=926) <br/>All committers have signed the CLA.

+1

could you please add a little bit background about this issue?

+1\r\n

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

ping @waitinfuture 

Shade result:\r\n<img width="654" alt="截屏2022-11-02 15 21 01" src="https://user-images.githubusercontent.com/4150993/199424997-dd00ff28-e76c-4b49-9ccd-b862432c1aba.png">\r\nAs you can see,  the x86 native libraries are shaded.I assume that we won\

cc @pan3793 

Is it guaranteed that Celeborn will look for the shaded so file first place?

/regression

> Is it guaranteed that Celeborn will look for the shaded so file first place?\r\n\r\nInteresting question, I am wondering as well. Let me check.

/regression

The regression is completed with no error.\r\nhttps://github.com/alibaba/celeborn/actions/runs/3376487815/jobs/5604268464

@waitinfuture  How about current?

ping @waitinfuture @FMX \r\n

/regression

> /regression\r\n\r\nhttps://github.com/alibaba/celeborn/actions/runs/3374496032

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=896) <br/>All committers have signed the CLA.

Hi @leesf ,you need to run "./dev/reformat" first.

> Hi @leesf ,you need to run "./dev/reformat" first.\r\n\r\nDone.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

# [Codecov](https://codecov.io/gh/apache/incubator-celeborn/pull/895?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#895](https://codecov.io/gh/apache/incubator-celeborn/pull/895?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1e6981b) into [main](https://codecov.io/gh/apache/incubator-celeborn/commit/dc66369973c67d0c06250084aff8efb9aad96a4e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dc66369) will **increase** coverage by `0.09%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@             Coverage Diff              @@\n##               main     #895      +/-   ##\n============================================\n+ Coverage     25.03%   25.11%   +0.09%     \n- Complexity      770      774       +4     \n============================================\n  Files           215      215              \n  Lines         18195    18208      +13     \n  Branches       2035     2024      -11     \n============================================\n+ Hits           4553     4572      +19     \n+ Misses        13331    13329       -2     \n+ Partials        311      307       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-celeborn/pull/895?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../service/deploy/worker/storage/DeviceMonitor.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL3N0b3JhZ2UvRGV2aWNlTW9uaXRvci5zY2FsYQ==) | `4.11% <0.00%> (-0.34%)` | :arrow_down: |\n| [...ala/org/apache/celeborn/client/CommitManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NvbW1pdE1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [.../apache/celeborn/client/commit/CommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...pache/celeborn/client/ChangePartitionManager.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L0NoYW5nZVBhcnRpdGlvbk1hbmFnZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...he/celeborn/service/deploy/worker/Controller.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-d29ya2VyL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vc2VydmljZS9kZXBsb3kvd29ya2VyL0NvbnRyb2xsZXIuc2NhbGE=) | `0.00% <0.00%> (ø)` | |\n| [...born/client/commit/MapPartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9NYXBQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...n/client/commit/ReducePartitionCommitHandler.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY2xpZW50L2NvbW1pdC9SZWR1Y2VQYXJ0aXRpb25Db21taXRIYW5kbGVyLnNjYWxh) | `0.00% <0.00%> (ø)` | |\n| [...cala/org/apache/celeborn/common/CelebornConf.scala](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL3NjYWxhL29yZy9hcGFjaGUvY2VsZWJvcm4vY29tbW9uL0NlbGVib3JuQ29uZi5zY2FsYQ==) | `80.45% <0.00%> (+0.06%)` | :arrow_up: |\n| [...celeborn/service/deploy/master/SlotsAllocator.java](https://codecov.io/gh/apache/incubator-celeborn/pull/895/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bWFzdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9jZWxlYm9ybi9zZXJ2aWNlL2RlcGxveS9tYXN0ZXIvU2xvdHNBbGxvY2F0b3IuamF2YQ==) | `71.73% <0.00%> (+2.46%)` | :arrow_up: |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n

cc @FMX @zwangsheng 

Let us shade netty and rename the native libraries to keep the netty version under control because I have seen some performance gain and stability improvement after using the latest netty. And there will be more engines to support, a stable netty will be helpful for us to profile the performance.\r\nSo I think this might not be a good idea.

There is an example how to relocate Netty native libs in Gradle\r\nhttps://github.com/grpc/grpc-java/blob/master/netty/shaded/build.gradle

I found https://github.com/apache/flink-shaded done the job, thanks for the explanation, I agree with you as long as we can fully shade the Netty native libs, then close this PR.

cc @FMX 

`ARG celeborn_version=0.1.1` could be removed then?

And `docker/DEPLOY_ON_K8S.md` should be updated as well

\\regression

/regression

> /regression\r\n\r\nRegression passed\r\nhttps://github.com/alibaba/celeborn/actions/runs/3361161115/jobs/5571216042\r\nIt would be much better if we can auto-generate regression url :) @FMX 

Running regression

@waitinfuture I addressed all comments now, please take a look again

please run ./dev/reformat to automatically reformat style

I think we can add a config to CelebornConf in the constructor of RssShuffleManager and use the conf when create RpcEnv, so we can avoid adding the numCores through the call-chain. Like the following\r\n```\r\n  public RssShuffleManager(SparkConf conf) {\r\n    this.conf = conf;\r\n    this.celebornConf = SparkUtils.fromSparkConf(conf);\r\n    this.cores = conf.getInt(SparkLauncher.EXECUTOR_CORES, 1);\r\n    celebornConf.set(CLIENT_RPC_DISPATCHER_THREADS.key, numCores);\r\n    this.fallbackPolicyRunner = new RssShuffleFallbackPolicyRunner(celebornConf);\r\n  }\r\n```\r\n\r\ncc @pan3793 

> \r\n\r\nWe should first define a config in CelebornConf like the following before use the key\r\n```\r\n  val CLIENT_RPC_DISPATCHER_THREADS: ConfigEntry[Int] =\r\n    buildConf("celeborn.client.rpc.dispatcher.threads")\r\n      .categories("client")\r\n      .version("0.2.0")\r\n      .doc("xxxxx.")\r\n      .intConf\r\n      .createWithDefault(16)\r\n```

> > \r\n> \r\n> We should first define a config in CelebornConf like the following before use the key\r\n> \r\n> ```\r\n>   val CLIENT_RPC_DISPATCHER_THREADS: ConfigEntry[Int] =\r\n>     buildConf("celeborn.client.rpc.dispatcher.threads")\r\n>       .categories("client")\r\n>       .version("0.2.0")\r\n>       .doc("xxxxx.")\r\n>       .intConf\r\n>       .createWithDefault(16)\r\n> ```\r\n\r\n+1 to migrate conf to `CelebornConf`, for naming, I would suggest respecting Spark style, just simply change the `rss.` to `celeborn.`.

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

gentle ping @pan3793 @waitinfuture 

how about current? @FMX @pan3793 

Ping again

ping @waitinfuture @FMX 

build tarball and docker image success, merging to master.

@pan3793 @waitinfuture 

Should we move all quota configurations under `celeborn.shuffle.` namespace? or just under `celeborn.quota.`?

> \r\n\r\nIn future we might have quota on other resource types such as memory and network. I prefer not to specify shuffle

All done, how about current

ping @waitinfuture How about current.

all done

ping @pan3793 

ping @kerwin-zk 

LGTM except comment from @kerwin-zk 

addressed

ping @waitinfuture @FMX @pan3793 

/regression

cc @nafiyAix 

/regression

\\regression

ping @waitinfuture @FMX 

Please add the verb "fix" or "close" before the issue ref `#<number>` in your PR description, so that GitHub can auto-close the issue when PR got merged.

\r\nLike current? cc @nafiyAix 

yep

> Do we need to remove this part from `configuration.md`?\r\n\r\nwe can leave it now, and delete it after the migration is completed.

Please add the verb "fix" or "close" before the issue ref `#<number>` in your PR description, so that GitHub can auto-close the issue when PR got merged.

Resolve conflict

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=819) <br/>All committers have signed the CLA.

@FMX @waitinfuture 

ping @waitinfuture @pan3793 @AngersZhuuuu . I want to add an action to close stale pull requests.

@waitinfuture Conversation resolved. 

\\regression

Have you identified the root cause of the failure?

Fixed.\n在 2022年10月20日 +0800 14:23，Cheng Pan ***@***.***>，写道：\n> @pan3793 commented on this pull request.\n> In common/src/main/scala/org/apache/celeborn/common/RssConf.scala:\n> > @@ -712,7 +791,7 @@ object RssConf extends Logging {\n>\n>   val RESERVE_SLOTS_RETRY_WAIT: ConfigEntry[Long] =\n>     buildConf("celeborn.slot.reserve.retryWait")\n> -      .withAlternative("rss.reserve.slots.retry.wait")\n> +      .withAlternative("rss.reserve.slots.retry.timeout")\n> accident change? we must keep the original key as-is, for compatibility.\n> —\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> You are receiving this because you authored the thread.Message ID: ***@***.***>\n

ping @pan3793 @FMX 

Run `UPDATE=1 build/mvn test -pl common -am -Pspark-3.3 -Dtest=none -DwildcardSuites=org.apache.celeborn.ConfigurationSuite`\r\n

This pr will hold until #813 is done.

gentle ping @FMX @pan3793 

Thanks, merging to master

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=800) <br/>All committers have signed the CLA.

Do we have similar logic in spark-2 module?

> Do we have similar logic in spark-2 module?\r\n\r\nYes, I will fix it.

ping @pan3793  @waitinfuture @FMX @nafiyAix 

@FMX 

Has this pr been tested? How is the effect? @FMX 

With same workload, I recorded the spark driver heap memory usage under different test scenario.\r\n\r\nWith Cache:\r\n![lQLPJxbPhlJKc0HNBQTNCmSwmVIy1vSQME4DVRMgF4AFAA_2660_1284](https://user-images.githubusercontent.com/4150993/197699451-b0df2730-8d13-4d7f-ae57-43666f6c7df6.png)\r\n\r\nWithout Cache:\r\n![lQLPJxbPhlLjBLbNBNDNCaawXXPo0yS62UwDVRMgggDsAA_2470_1232](https://user-images.githubusercontent.com/4150993/197699470-5de40555-7030-46f9-89bb-cf2acad03ed8.png)\r\n

Sounds\xa0reasonable, I’ll change it later.\n在 2022年10月25日 +0800 18:08，Cheng Pan ***@***.***>，写道：\n> @pan3793 commented on this pull request.\n> In common/src/main/scala/org/apache/celeborn/common/CelebornConf.scala:\n> > +      .version("0.2.0")\n> +      .doc("The max cache items count for rpc cache.")\n> +      .intConf\n> +      .createWithDefault(256)\n> +\n> +  val RPC_CACHE_CONCURRENT_LEVEL: ConfigEntry[Int] =\n> +    buildConf("celeborn.rpcCache.concurrent.level")\n> +      .categories("client")\n> +      .withAlternative("rss.rpc.cache.concurrent.level")\n> +      .version("0.2.0")\n> +      .doc("The number of write locks to update rpc cache.")\n> +      .intConf\n> +      .createWithDefault(32)\n> +\n> +  val RPC_CACHE_EXPIRE: ConfigEntry[Long] =\n> +    buildConf("celeborn.rpcCache.expire")\n> Ref: Spark has configuration key named spark.rdd.checkpoint.cachePreferredLocsExpireTime\n> —\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> You are receiving this because you were mentioned.Message ID: ***@***.***>\n

Do we need to let more field get involved with overriding equals() and hashCode()?

ping @AngersZhuuuu @FMX 

> ping @AngersZhuuuu @FMX\r\n\r\nPls resolve conflicts first

> > ping @AngersZhuuuu @FMX\r\n> \r\n> Pls resolve conflicts first\r\n\r\nDone

I think the PbSerdeUtils can be merged into Utils because they have the same functionality. \r\nBut considering the purpose of this pull request, I think that can be done through some other pull request.\r\n@AngersZhuuuu @waitinfuture 

ping @FMX Could you hep to double check again?

cc @AngersZhuuuu 

`build/mvn versions:set -DnewVersion=$RELEASE_VERSION -DgenerateBackupPoms=false` is very useful...can we make it back...

Output of unit test `WorkerInfo toString output`\r\n<img width="251" alt="image" src="https://user-images.githubusercontent.com/30563796/195970970-ecf9b982-156e-4a82-ac57-4e753f323f6b.png">\r\n<img width="1463" alt="image" src="https://user-images.githubusercontent.com/30563796/195970980-cac1055d-5901-40eb-9e13-2f277f6d1d7c.png">\r\n

ping @AngersZhuuuu @waitinfuture 

cc @AngersZhuuuu @zwangsheng 

cc @AngersZhuuuu @waitinfuture @FMX thanks

ping @FMX @pan3793 @waitinfuture 

FYI: Besides revert previous openstream related change, also modify the logic of `userResourceConsumptionSnapshot()` after removing `userShuffleKeys` from StorageManager, and add a return to break loop when recovering data from levelDB and there is no more levelDB key could be matched .

ping @waitinfuture 

I think we can cache UserIdentifiers in the process of reloading from leveldb to  avoid too many duplicate objects of the same user.

> I think we can cache UserIdentifiers in the process of reloading from leveldb to avoid too many duplicate objects of the same user.\r\n\r\nAgree, will implement it in #774 

This PR is critical, plz run extensive e2e test to check stability and correctness @FMX .

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

ping @waitinfuture @FMX 

@waitinfuture updated

ping @waitinfuture 

ping @waitinfuture 

ping @waitinfuture 

ping @waitinfuture 

ping @waitinfuture 

cc @waitinfuture 

Current leveldb file is   \r\n```\r\nprivate val RECOVERY_FILE_INFOS_FILE_NAME = "fileInfos.ldb"\r\n```\r\nIf we change it to other name like `recover.ldb`, will it have potential compatibility issue?

> Current leveldb file is\r\n> \r\n> ```\r\n> private val RECOVERY_FILE_INFOS_FILE_NAME = "fileInfos.ldb"\r\n> ```\r\n> \r\n> If we change it to other name like `recover.ldb`, will it have potential compatibility issue?\r\n\r\nFYI: this file name has been changed to recovery.ldb, consider currently may not so many people is using this function, thus we can fix it before it gets tricky.

ping @waitinfuture 

> \r\n\r\nI think we should cleanup userShuffleKeys whenever shuffle data is cleaned, or the map will grow infinitely.

BTW, do we need the userShuffleKeys? Can we add UserIdentifier into FileInfo instead?

> > \r\n> \r\n> I think we should cleanup userShuffleKeys whenever shuffle data is cleaned, or the map will grow infinitely.\r\n\r\nSeems I forgot to submit the review record of the same comment..\r\n

> BTW, do we need the userShuffleKeys? Can we add UserIdentifier into FileInfo instead?\r\n\r\nAgree, will move it.

> BTW, do we need the userShuffleKeys? Can we add UserIdentifier into FileInfo instead?\r\n\r\nDo we need to create a new issue for this change? Because seems like there will be many chain reactions if we put UserIdentifier into FileInfo as its field, especially those logic related with PartitionFileSorter.openStream() cc: @waitinfuture \r\n```\r\npublic FileInfo openStream(\r\n      String shuffleKey, String fileName, FileInfo fileInfo, int startMapIndex, int endMapIndex)\r\n      throws IOException {\r\n```

> > BTW, do we need the userShuffleKeys? Can we add UserIdentifier into FileInfo instead?\r\n> \r\n> Do we need to create a new issue for this change? Because seems like there will be many chain reactions if we put UserIdentifier into FileInfo as its field, especially those logic related with PartitionFileSorter.openStream() cc: @waitinfuture\r\n> \r\n> ```\r\n> public FileInfo openStream(\r\n>       String shuffleKey, String fileName, FileInfo fileInfo, int startMapIndex, int endMapIndex)\r\n>       throws IOException {\r\n> ```\r\n\r\nAgree, we should further consider it.

ping @waitinfuture 

ping @waitinfuture @FMX Currently many job migration to RSS meet some oom issue, related to this patch

Plz avoid force push for sake of tracking commits.

@nafiyAix Hi, if a comment is addressed, resolve it. So I can tell there is no further discussion.

Since @pan3793 is removing all control messages and unify to pb https://github.com/alibaba/RemoteShuffleService/issues/673 , should we delete ResourceConsumption and just use pb? Maybe we can do it in later pr. cc @AngersZhuuuu 

CI failure is unrelated, cc @waitinfuture  

cc @waitinfuture, this fixes the main branch error

cc @FMX 

Plz resolve conflicts

I think this approach represents our discussion better, I prefer this one.

Close and in favor #680

ping @waitinfuture 

Skewed partition scenario.\r\n\r\nFilter off:\r\n<img width="1063" alt="截屏2022-09-23 17 05 43" src="https://user-images.githubusercontent.com/4150993/191929539-5ab07b27-5b32-4cdb-bb60-fb5b633f5cd1.png">\r\n\r\nFilter on:\r\n<img width="554" alt="截屏2022-09-23 17 13 02" src="https://user-images.githubusercontent.com/4150993/191929556-a59d6313-4e1f-4dc7-89da-fe40338592e9.png">\r\n

Should not new RoaringBitMap if not enabled.

ping @waitinfuture

ping @waitinfuture 

Should we use `CheckQuota` to replace `CheckAvailable`?

> \r\n\r\nI prefer CheckQuota

> > \r\n> \r\n> I prefer CheckQuota\r\n\r\nupdated

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=654) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=651) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/celeborn?pullRequest=651) before we can accept your contribution.<br/><hr/>**caojiaqing** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/celeborn?pullRequest=651) it.</sub>

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

@waitinfuture @pan3793 

ping @waitinfuture @FMX @RexXiong

ping @waitinfuture @RexXiong

ping @waitinfuture 

ping @waitinfuture @FMX @pan3793 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=620) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=620) before we can accept your contribution.<br/><hr/>**caojiaqing** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=620) it.</sub>

@JQ-Cao Hi, there are some ut failures to fix first.

We should add metrics about the size of the RoaringBitmap for very large partitions and post here.

ping @AngersZhuuuu 

LGTM, plz fix the style issue

FYI: I roll back the code which run inside the single thread `fileSorterSchedulerThread`. And put those original code which includes startTimer, stopTimer, memoryTracker release memory inside `fileSorterExecutors.submit()`  into the sort(), they should be still in the same thread. @waitinfuture 

How about current? @waitinfuture @FMX 

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=608) <br/>All committers have signed the CLA.

To let the UTs pass, plz also change the DeviceMonitorSuite\r\n```\r\n  val dfCmd = "df -h"\r\n```

Grafana dashboard should be updated as well

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

ping @waitinfuture @FMX 

<img width="972" alt="image" src="https://user-images.githubusercontent.com/26535726/189178207-fab126c9-338e-4b20-83a3-ca5badd9e2c3.png">\r\n<img width="1063" alt="image" src="https://user-images.githubusercontent.com/26535726/189178401-17c5c6d9-f160-4ea0-a1cc-74e60b931ffa.png">\r\nI propose two styles for configuration, please let me know which one the community is prefered.\r\n

After offline discussion, the table format is adopted.

ping @waitinfuture @AngersZhuuuu 

LGTM, thanks!

ping @waitinfuture 

ping @waitinfuture 

This PR is stale because it has been open 20 days with no activity. Remove stale label or comment or this will be closed in 10 days.

This issue was closed because it has been staled for 10 days with no activity.

LGTM, thanks! Plz resolve the conflicts

This is really useful!

FYI: Add a check about the existence of workingDir, because when the worker is first initialized on localFs/hdfs , no existed workingDir, which is the failure reason of previous workflows. @waitinfuture \r\n\r\n

ping @waitinfuture @FMX 

ping @waitinfuture @FMX 

Maybe we should add chunksBeingTransferred in our metric system, what do you think?

sgtm

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=528) <br/>All committers have signed the CLA.

ping @AngersZhuuuu @waitinfuture @FMX 

test result\r\n![image](https://user-images.githubusercontent.com/30563796/188262011-1335360a-da82-42f7-8b76-ce7a489f50e3.png)\r\n

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=514) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=514) before we can accept your contribution.<br/><hr/>**Yang Liu** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=514) it.</sub>

maybe arthas could be included in the docker image as well, WDYT? @waitinfuture @AngersZhuuuu 

ping @FMX @fanyilun 

Has this been tested?

> Has this been tested?\r\n\r\nI had build docker images by this Dockerfile.\r\n\r\nI will test in kubernetes env. And pause some screenshoot later.

I meet a problem in this Dockerfile:\r\n`/bin/sh: nslookup: command not found`\r\nshould we add `apt install dnsutils` ? 

![popo_2022-09-07  09-52-52](https://user-images.githubusercontent.com/52876270/188782825-44328791-6934-426f-a6e6-5eb2a3628f03.jpg)\r\n![popo_2022-09-07  11-32-31](https://user-images.githubusercontent.com/52876270/188782841-bbf2f6a5-1cbb-4179-a71e-fc636a2e3560.jpg)\r\nTested In Kubernetes Cluster\r\n- Dockerfile build success\r\n- Helm Install success 

Please have a test ping @fanyilun 

It looks good to me now, thanks.

ping @AngersZhuuuu 

cc @waitinfuture @FMX @AngersZhuuuu, please let me know what you think of this change.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=495) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=495) before we can accept your contribution.<br/><hr/>**jiadongdong** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=495) it.</sub>

ok\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人: "Kent ***@***.***&gt;; \r\n发送时间: 2022年9月1日(星期四) 下午3:20\r\n收件人: ***@***.***&gt;; \r\n抄送: ***@***.***&gt;; ***@***.***&gt;; \r\n主题: Re: [alibaba/RemoteShuffleService] Fix the problem of write loss when the buffer is too large (PR #495)\r\n\r\n\r\n\r\n\r\n\r\n \r\n@waitinfuture commented on this pull request.\r\n \r\n \r\nIn server-worker/src/main/scala/com/aliyun/emr/rss/service/deploy/worker/storage/FlushTask.scala:\r\n &gt; @@ -33,7 +33,12 @@ private[worker] class LocalFlushTask(      fileChannel: FileChannel,      notifier: FlushNotifier) extends FlushTask(buffer, notifier) {    override def flush(): Unit = { -    fileChannel.write(buffer.nioBuffers()) +    val buffers = buffer.nioBuffers() +    for (buffer <- buffers) { +      while(buffer.hasRemaining) {  \r\nPlz add a whitespace after while\r\n \r\n—\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\nYou are receiving this because you authored the thread.Message ID: ***@***.***&gt;

cc @waitinfuture 

ping @waitinfuture @FMX 

FYI @FMX @waitinfuture 

ping @AngersZhuuuu @waitinfuture 

Ping @waitinfuture @FMX, same idea issue as before\r\n\r\n<img width="829" alt="截屏2022-08-25 上午11 02 51" src="https://user-images.githubusercontent.com/46485123/186564727-acd63fb5-bc72-43b1-9216-d94a6e73965e.png">\r\n

ping @waitinfuture How about current?

ping @waitinfuture @FMX 

ping @waitinfuture @FMX 

ping @waitinfuture @FMX 

Lz4\r\n<img width="1785" alt="截屏2022-08-25 下午12 04 56" src="https://user-images.githubusercontent.com/46485123/186578344-c87f38c3-3e44-45a9-a948-0a46997153a7.png">\r\n\r\nZstd\r\n<img width="1774" alt="截屏2022-08-25 下午12 10 45" src="https://user-images.githubusercontent.com/46485123/186578317-a51da14a-47f4-4288-b020-ce39930792b1.png">\r\n\r\nzstd with compression level 16\r\n\r\n\r\n<img width="1790" alt="截屏2022-08-25 下午1 11 08" src="https://user-images.githubusercontent.com/46485123/186583937-afd26262-83e0-4b34-9dac-3226f8480eb2.png">\r\n\r\n

PTAL @waitinfuture @FMX @pan3793 

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=433) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you all sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=433) before we can accept your contribution.<br/>**1** out of **2** committers have signed the CLA.<br/><br/>:white_check_mark: liugs0213<br/>:x: liugaosheng@kanzhun.com<br/><hr/>**liugaosheng@kanzhun.com** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=433) it.</sub>

You can run the following commands locally and fix style issues before push\r\n```\r\nmvn -Pspark-3.2 -Plog4j-1 checkstyle:check\r\n```\r\nand \r\n```\r\nmvn -Pspark-3.2 -Plog4j-1 scalastyle:check\r\n```

ping @waitinfuture @FMX 

ping @waitinfuture @AngersZhuuuu 

ping @waitinfuture @FMX 

ping @waitinfuture @FMX 

ping @waitinfuture  @FMX 

gentle ping

ping @waitinfuture @FMX 

> ping @waitinfuture @FMX\r\n\r\nWorking on it

ping @waitinfuture Tested in our test prod env, work as expected.

LGTM. Thanks.

ping @waitinfuture @FMX 

pls update the exception stack in pr desc after this path

> pls update the exception stack in pr desc after this path\r\n\r\nupdated

ping @FMX @waitinfuture 

I think we might need to catch an exception at the ratis server starting function and terminate the master process if the ratis port is unavailable.\r\n\r\n``` \r\nMeta.scala\r\n metaSystem.getRatisServer().start();\r\n```\r\n\r\n\r\n

@nafiyAix  I think a raft server is essential for an RSS master to work as desired. If a raft server fails to start, the worker should not start either. So my solution is quite straightforward, I think changing a method of MetaHandler should be enough. \r\n\r\nHere is an example.\r\n\r\n```java\r\npublic void setUpMasterRatisServer(RssConf conf) throws IOException {\r\n    HANodeDetails haNodeDetails = HANodeDetails.loadHAConfig(conf);\r\n    metaSystem.setRatisServer(\r\n        HARaftServer.newMasterRatisServer(\r\n            this, conf,\r\n            haNodeDetails.getLocalNodeDetails(),\r\n            haNodeDetails.getPeerNodeDetails()));\r\n    try {\r\n      metaSystem.getRatisServer().start();\r\n    } catch (IOException e) {\r\n      if(e.getCause() instanceof BindException) {\r\n        LOG.error("Raft port is used, master will abort", e);\r\n        System.exit(-1);\r\n      }else{\r\n        LOG.error("Unknown exception occurred in starting raft server",e);\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nI tried on a host and I get the result.\r\n\r\n> 22/08/15 15:20:15,867 INFO [node1-impl-thread1] JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-085C98AE2908,id=node1\r\n> 22/08/15 15:20:15,870 INFO [main] RaftServer: node1: start RPC server\r\n> 22/08/15 15:20:15,871 ERROR [main] MetaHandler: Raft port is used, master will abort\r\n> java.io.IOException: node1: Failed to start NettyRpcService\r\n> \tat org.apache.ratis.netty.server.NettyRpcService.startImpl(NettyRpcService.java:141)\r\n> \tat org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:270)\r\n> \tat org.apache.ratis.server.RaftServerRpcWithProxy.start(RaftServerRpcWithProxy.java:72)\r\n> \tat org.apache.ratis.server.impl.RaftServerProxy.lambda$start$6(RaftServerProxy.java:383)\r\n> \tat org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:270)\r\n> \tat org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:381)\r\n> \tat com.aliyun.emr.rss.service.deploy.master.clustermeta.ha.HARaftServer.start(HARaftServer.java:280)\r\n> \tat com.aliyun.emr.rss.service.deploy.master.clustermeta.ha.MetaHandler.setUpMasterRatisServer(MetaHandler.java:56)\r\n> \tat com.aliyun.emr.rss.service.deploy.master.Master.<init>(Master.scala:53)\r\n> \tat com.aliyun.emr.rss.service.deploy.master.Master$.main(Master.scala:643)\r\n> \tat com.aliyun.emr.rss.service.deploy.master.Master.main(Master.scala)\r\n> Caused by: java.net.BindException: Address already in use\r\n> \tat sun.nio.ch.Net.bind0(Native Method)\r\n> \tat sun.nio.ch.Net.bind(Net.java:438)\r\n> \tat sun.nio.ch.Net.bind(Net.java:430)\r\n> \tat sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:225)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:134)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:562)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:491)\r\n> \tat org.apache.ratis.thirdparty.io.netty.handler.logging.LoggingHandler.bind(LoggingHandler.java:230)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:491)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260)\r\n> \tat org.apache.ratis.thirdparty.io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:356)\r\n> \tat org.apache.ratis.thirdparty.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\r\n> \tat org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)\r\n> \tat org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:503)\r\n> \tat org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\r\n> \tat org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n> \tat org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n> \tat java.lang.Thread.run(Thread.java:748)\r\n> \r\n> Process finished with exit code 255\r\n\r\n

@FMX Thanks, understand, my thinking was a bit redundant before. According to the exception stack, I mistakenly thought that Ratis had caught all exceptions by below methods during election process then just print them into log. :dizzy_face:\r\n```\r\n     catch(Exception e) {\r\n      final LifeCycle.State state = lifeCycle.getCurrentState();\r\n      if (state.isClosingOrClosed()) {\r\n        LOG.info("{}: {} is safely ignored since this is already {}",\r\n            this, JavaUtils.getClassSimpleName(e.getClass()), state, e);\r\n      } else {\r\n        if (!server.getInfo().isAlive()) {\r\n          LOG.info("{}: {} is safely ignored since the server is not alive: {}",\r\n              this, JavaUtils.getClassSimpleName(e.getClass()), server, e);\r\n        } else {\r\n          LOG.error("{}: Failed, state={}", this, state, e);\r\n        }\r\n        shutdown();\r\n      }\r\n    } \r\n```

ping @FMX @waitinfuture \r\nTo keep the method reusability, I move the logic of System.exit() to the code block of the Master.\r\nBelow is the test results from my side.\r\nwhen HA port is occupied and run start-master script\r\n>starting com.aliyun.emr.rss.service.deploy.master.Master, logging to /var/log/rss/rss-root-com.aliyun.emr.rss.service.deploy.master.Master-1-dev01-hadoop.data-infra.shopee.io.out\r\nfailed to launch: nice -n 0 /usr/share/rss/bin/rss-class com.aliyun.emr.rss.service.deploy.master.Master\r\nfull log in /var/log/rss/rss-root-com.aliyun.emr.rss.service.deploy.master.Master-1-dev01-hadoop.data-infra.shopee.io.out\r\n\r\nlast output inside rss.log\r\n>ERROR [main] Master: HA port 9872 of Ratis Server is occupied, please refer to configuration doc to modify the HA port in config file for each node\r\njava.io.IOException: master1: Failed to start NettyRpcService\r\n        at org.apache.ratis.netty.server.NettyRpcService.startImpl(NettyRpcService.java:141)\r\n        at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:270)\r\n        at org.apache.ratis.server.RaftServerRpcWithProxy.start(RaftServerRpcWithProxy.java:72)\r\n        at org.apache.ratis.server.impl.RaftServerProxy.lambda$start$5(RaftServerProxy.java:375)\r\n        at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:270)\r\n        at org.apache.ratis.server.impl.RaftServerProxy.start(RaftServerProxy.java:373)\r\n        at com.aliyun.emr.rss.service.deploy.master.clustermeta.ha.HARaftServer.start(HARaftServer.java:280)\r\n        at com.aliyun.emr.rss.service.deploy.master.clustermeta.ha.MetaHandler.setUpMasterRatisServer(MetaHandler.java:52)\r\n        at com.aliyun.emr.rss.service.deploy.master.Master.liftedTree1$1(Master.scala:58)\r\n        at com.aliyun.emr.rss.service.deploy.master.Master.<init>(Master.scala:57)\r\n        at com.aliyun.emr.rss.service.deploy.master.Master$.main(Master.scala:576)\r\n        at com.aliyun.emr.rss.service.deploy.master.Master.main(Master.scala)\r\nCaused by: java.net.BindException: Address already in use\r\n        at sun.nio.ch.Net.bind0(Native Method)\r\n        at sun.nio.ch.Net.bind(Net.java:433)\r\n        at sun.nio.ch.Net.bind(Net.java:425)\r\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:134)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:562)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:491)\r\n        at org.apache.ratis.thirdparty.io.netty.handler.logging.LoggingHandler.bind(LoggingHandler.java:221)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:506)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:491)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260)\r\n        at org.apache.ratis.thirdparty.io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:356)\r\n        at org.apache.ratis.thirdparty.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)\r\n        at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)\r\n        at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500)\r\n        at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n        at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.lang.Thread.run(Thread.java:748)

ping @waitinfuture 

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=309) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=309) before we can accept your contribution.<br/><hr/>**yilun.fyl** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=309) it.</sub>

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=307) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=299) <br/>All committers have signed the CLA.

LGTM.

ping @FMX @waitinfuture 

closes #290 

LGTM, thanks!

ping @waitinfuture @FMX 

@waitinfuture @FMX 

ping @waitinfuture 

I will run a e2e test.

ping @waitinfuture 

ping @waitinfuture @FMX 

ping @waitinfuture 

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=234) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/celeborn?pullRequest=234) before we can accept your contribution.<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/celeborn?pullRequest=234) it.</sub>

LGTM. Thanks.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=230) <br/>All committers have signed the CLA.

LGMT, thanks!

ping @FMX @waitinfuture 

ping @FMX @waitinfuture 

LGTM, thanks!

Close this since merged separately

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/celeborn?pullRequest=221) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/celeborn?pullRequest=221) before we can accept your contribution.<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/celeborn?pullRequest=221) it.</sub>

ping @FMX @waitinfuture 

LGTM, thanks!

LGTM.

Correctness has been verified.\r\nLGTM.

LGTM. Thanks!

Correctness is verified.\r\n\r\nLGTM.

resolve #206 

LGTM. Thanks.

Thanks @waitinfuture for the PR.👍🏻  I have some minor comments and please have a look when you are free.

> Thanks @waitinfuture for the PR.👍🏻 I have some minor comments and please have a look when you are free.\r\n\r\nHi @TanYuxin-tyx  I have addressed the comments, please take a look. Thanks!

LGTM. Thanks.

LGMT.

LGTM.

LGTM. Thanks.

LGTM. closes #172 .

LGTM.

LGTM. Thanks.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=165) <br/>All committers have signed the CLA.

LGTM. Thanks.

LGTM.

@FMX @waitinfuture 

LGTM.

LGTM.

@FMX @waitinfuture 

LGTM. Thanks.\r\n\r\nclose #149 .

LGTM.

LGTM. Thanks.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=125) <br/>All committers have signed the CLA.

pls list all new added metrics here

> pls list all new added metrics here\r\n\r\nupdated

@FMX @waitinfuture WDYT？

> @FMX @waitinfuture WDYT？\r\n\r\nLGTM. Thanks.

@waitinfuture @FMX 

LGTM. Thanks.

LGTM. Thanks.

#119 

LGMT. Thanks

LGTM. Thanks.

You need to fix checkstyle violations first.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=112) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=112) before we can accept your contribution.<br/><hr/>**Leo Cheng** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=112) it.</sub>

LGTM.Thanks.

@waitinfuture 

LGTM. Thanks.

LGTM. Thanks.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=105) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=105) before we can accept your contribution.<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=105) it.</sub>

这个 PR 做了三件事：\r\n1.pushdata 优化， 合并后在发送\r\n2.修复一处更新 partition location 过程中的并发异常，不会导致任务失败，可能会让部分 shuffle 分片大小超过预期\r\n3.调整日志级别，避免driver 因为日志问题卡住

As we discussed, we should re-design.

LGTM.

#98 

LGTM. Thanks.

LGTM. Thanks.

LGTM. Thanks.

LGTM. Thanks.

LGTM. Thanks.

@FMX @wangshengjie123 

LGTM. Thanks.

LGTM. Thanks.

merged to #67 

merged to #67 

LGTM.

Is there any user wechat group?

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=69) <br/>All committers have signed the CLA.

@lichaojacobs  Thanks. You need to sign the CLA first.\r\nCheck the checks tab on this page.

> @lichaojacobs Thanks. You need to sign the CLA first. Check the checks tab on this page.\r\n\r\ndone

LGTM.

LGTM. Thanks.

LGTM.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=64) <br/>All committers have signed the CLA.

@FMX 

LGTM.

Already fixed.

![AQE支持](https://user-images.githubusercontent.com/4150993/156099694-7bcbb3f0-cd70-44ee-8db2-92ff2dc27ab3.png)\r\n

LGTM.

LGTM.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=43) <br/>All committers have signed the CLA.

LGTM.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=42) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=39) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=35) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=30) <br/>All committers have signed the CLA.

LGTM

## RSS flow control\r\n\r\n![流控实现](https://user-images.githubusercontent.com/4150993/148015900-246d3f9e-ab26-4025-8a94-e476bf441df6.png)\r\n\r\n\r\n\r\nI added two components to achieve memory awareness. I modified the PUSH operation network stack and tracked memory usage for flush buffer and overall netty off-heap memory.\r\nMemoryTracker is monitoring flush buffer usage and netty off-heap memory usage. When memory consumption is beyond the limit, ChannelLimiter will take action to stop reading from all related channels. When the server`s TCP buffer is full, the sender channel will be blocked as well. In this way, I achieved worker memory-awareness flow control.

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=25) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=25) before we can accept your contribution.<br/><hr/>**wangshengjie3** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=25) it.</sub>

[![CLA assistant check](https://cla-assistant.io/pull/badge/not_signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=22) <br/>Thank you for your submission! We really appreciate it. Like many open source projects, we ask that you sign our [Contributor License Agreement](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=22) before we can accept your contribution.<br/><hr/>**wangshengjie3** seems not to be a GitHub user. You need a GitHub account to be able to sign the CLA. If you have already a GitHub account, please [add the email address used for this commit to your account](https://help.github.com/articles/why-are-my-commits-linked-to-the-wrong-user/#commits-are-not-linked-to-any-user).<br/><sub>You have signed the CLA already but the status is still pending? Let us [recheck](https://cla-assistant.io/check/alibaba/RemoteShuffleService?pullRequest=22) it.</sub>

test

retest

Should also update README

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=20) <br/>All committers have signed the CLA.

[![CLA assistant check](https://cla-assistant.io/pull/badge/signed)](https://cla-assistant.io/alibaba/RemoteShuffleService?pullRequest=16) <br/>All committers have signed the CLA.

LGTM.