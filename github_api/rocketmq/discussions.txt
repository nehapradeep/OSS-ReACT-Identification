Discussions: [{'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884707, 'node_id': 'DIC_kwDOBHrsl84CUVVj', 'repository_id': 75164823, 'emoji': ':speech_balloon:', 'name': 'General', 'description': 'Chat about anything and everything here', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'general', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6168', 'id': 4892281, 'node_id': 'D_kwDOBHrsl84ASqZ5', 'number': 6168, 'title': 'Whether a retry is necessary if there is an ACL verification failure', 'user': {'login': 'Oliverwqcwrw', 'id': 31796988, 'node_id': 'MDQ6VXNlcjMxNzk2OTg4', 'avatar_url': 'https://avatars.githubusercontent.com/u/31796988?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Oliverwqcwrw', 'html_url': 'https://github.com/Oliverwqcwrw', 'followers_url': 'https://api.github.com/users/Oliverwqcwrw/followers', 'following_url': 'https://api.github.com/users/Oliverwqcwrw/following{/other_user}', 'gists_url': 'https://api.github.com/users/Oliverwqcwrw/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Oliverwqcwrw/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Oliverwqcwrw/subscriptions', 'organizations_url': 'https://api.github.com/users/Oliverwqcwrw/orgs', 'repos_url': 'https://api.github.com/users/Oliverwqcwrw/repos', 'events_url': 'https://api.github.com/users/Oliverwqcwrw/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Oliverwqcwrw/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 5, 'created_at': '2023-02-24T01:41:33Z', 'updated_at': '2023-02-24T09:52:32Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': '> \r\n            org.apache.rocketmq.client.exception.MQClientException: Send [3] times, still failed, cost [798]ms, Topic: TopicTest, \r\n    BrokersSent: [broker-a, broker-a, broker-a]\r\n        See https://rocketmq.apache.org/docs/bestPractice/06FAQ for further details.\r\n\t        at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:706)\r\n\t        at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1407)\r\n\t        at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1349)\r\n\t        at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:351)\r\n\t        at org.apache.rocketmq.example.simple.AclClient.producer(AclClient.java:71)\r\n\t        at org.apache.rocketmq.example.simple.AclClient.main(AclClient.java:54)\r\n        Caused by: org.apache.rocketmq.client.exception.MQBrokerException: CODE: 1  DESC: \r\n    org.apache.rocketmq.acl.common.AclException: Check signature failed for accessKey=RocketMQ, \r\n    org.apache.rocketmq.acl.plain.PlainPermissionManager.validate(PlainPermissionManager.java:634) BROKER: 127.0.0.1:10909\r\n        For more information, please visit the url, https://rocketmq.apache.org/docs/bestPractice/06FAQ\r\n\t        at org.apache.rocketmq.client.impl.MQClientAPIImpl.processSendResponse(MQClientAPIImpl.java:779)\r\n\t        at org.apache.rocketmq.client.impl.MQClientAPIImpl.sendMessageSync(MQClientAPIImpl.java:619)\r\n\t        at org.apache.rocketmq.client.impl.MQClientAPIImpl.sendMessage(MQClientAPIImpl.java:601)\r\n\t        at org.apache.rocketmq.client.impl.MQClientAPIImpl.sendMessage(MQClientAPIImpl.java:545)\r\n\t        at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendKernelImpl(DefaultMQProducerImpl.java:899)\r\n\t        at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:642)\r\n\t        ... 5 more', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6168/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6168/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6172#discussioncomment-5096589', 'answer_chosen_at': '2023-02-24T07:20:12.000-08:00', 'answer_chosen_by': {'login': 'Hoxxx', 'id': 2639432, 'node_id': 'MDQ6VXNlcjI2Mzk0MzI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/2639432?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Hoxxx', 'html_url': 'https://github.com/Hoxxx', 'followers_url': 'https://api.github.com/users/Hoxxx/followers', 'following_url': 'https://api.github.com/users/Hoxxx/following{/other_user}', 'gists_url': 'https://api.github.com/users/Hoxxx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Hoxxx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Hoxxx/subscriptions', 'organizations_url': 'https://api.github.com/users/Hoxxx/orgs', 'repos_url': 'https://api.github.com/users/Hoxxx/repos', 'events_url': 'https://api.github.com/users/Hoxxx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Hoxxx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6172', 'id': 4892707, 'node_id': 'D_kwDOBHrsl84ASqgj', 'number': 6172, 'title': '[5.1.0]关于Dledger和controller疑问', 'user': {'login': 'Hoxxx', 'id': 2639432, 'node_id': 'MDQ6VXNlcjI2Mzk0MzI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/2639432?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Hoxxx', 'html_url': 'https://github.com/Hoxxx', 'followers_url': 'https://api.github.com/users/Hoxxx/followers', 'following_url': 'https://api.github.com/users/Hoxxx/following{/other_user}', 'gists_url': 'https://api.github.com/users/Hoxxx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Hoxxx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Hoxxx/subscriptions', 'organizations_url': 'https://api.github.com/users/Hoxxx/orgs', 'repos_url': 'https://api.github.com/users/Hoxxx/repos', 'events_url': 'https://api.github.com/users/Hoxxx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Hoxxx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 11, 'created_at': '2023-02-24T05:26:18Z', 'updated_at': '2023-12-28T10:12:57Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '看文档看得有点晕，这两个组件做的事是相同的？\r\n三节点，想做一个高可用、异步复制的mq集群，是不是用Dledger就够了？\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6172/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6172/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6176', 'id': 4896025, 'node_id': 'D_kwDOBHrsl84ASrUZ', 'number': 6176, 'title': 'Different implements about suporting S3 backend for tiered storage', 'user': {'login': 'TheR1sing3un', 'id': 87409330, 'node_id': 'MDQ6VXNlcjg3NDA5MzMw', 'avatar_url': 'https://avatars.githubusercontent.com/u/87409330?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/TheR1sing3un', 'html_url': 'https://github.com/TheR1sing3un', 'followers_url': 'https://api.github.com/users/TheR1sing3un/followers', 'following_url': 'https://api.github.com/users/TheR1sing3un/following{/other_user}', 'gists_url': 'https://api.github.com/users/TheR1sing3un/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/TheR1sing3un/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/TheR1sing3un/subscriptions', 'organizations_url': 'https://api.github.com/users/TheR1sing3un/orgs', 'repos_url': 'https://api.github.com/users/TheR1sing3un/repos', 'events_url': 'https://api.github.com/users/TheR1sing3un/events{/privacy}', 'received_events_url': 'https://api.github.com/users/TheR1sing3un/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 1, 'created_at': '2023-02-25T05:11:15Z', 'updated_at': '2023-02-25T16:36:38Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': "# Support S3 backend for TiredStorage\r\n\r\n## Target\r\n\r\n1. Implement Amazon S3 backend for TieredStorage.\r\n2. Optimize upload and download efficiency.\r\n\r\n## Implement\r\n>\r\n> Need to implement this two interface function\r\n\r\n![image.png](https://cdn.nlark.com/yuque/0/2023/png/22446956/1677229843427-8cc030fa-c6dd-4796-ab53-341fa722d2cc.png#averageHue=%231f2123&clientId=u5f535491-b955-4&from=paste&height=277&id=uf4a177a0&name=image.png&originHeight=554&originWidth=2116&originalType=binary&ratio=2&rotation=0&showTitle=false&size=57403&status=done&style=none&taskId=u756dfbe4-3489-41d2-9f90-8688893f868&title=&width=1058)\r\n\r\n### Elimated implement\r\n\r\nOne `Segment` maps to an object on s3.\r\n\r\n#### Trouble\r\n\r\nWhen we need to call `commit0` to write the stream into the Segment's `[position, position+length-1]`, since S3 uploaded objects don't support modification, nor do they support append writing like Alibaba Cloud OSS, we can only upload a new object to cover the old one if we want to update an object. Therefore, we need to get the data from `[0, position-1]`, concatenate it with the incoming stream, and then upload the entire object. This not only occupies bandwidth, but also occupies memory. Especially when the Segment is approaching the default value of 1G, committing the data will require downloading nearly 1G of data, concatenating it in memory, and then uploading 1G of data. Therefore, this approach has been eliminated.\r\n\r\n---\r\n\r\n### Implement-1\r\n\r\n#### new configuration\r\n\r\n| Configuration | Type | Unit | Default Value | Function |\r\n| --- | --- | --- | --- | --- |\r\n| s3Region | String |  |  | Region name about S3 service |\r\n| s3Bucket | String |  |  | object's store bucket in S3 |\r\n| s3AccessKey | String |  |  | IAM's accessKey |\r\n| s3SecretAccessKey | String |  |  | IAM's Secret AccessKey |\r\n| s3ChunkSize | long | bytes | `4 *1024* 1024` | `chunk` num in one `S3Segment` |\r\n| readaheadChunkNum | int |  | 8 | readahead `chunk` num in each `read0` calling |\r\n| s3ClientThreadNum | int |  | `tieredStoreGroupCommitSize`/`s3ChunkSize` | threads' num in S3Client's threadpool |\r\n\r\n\r\nA segment is treated as a logical file and is divided into multiple physical files, or multiple physical objects, in the S3 view. We assume that each physical object has a default size of 4 MB, which is named `chunk`.\r\n\r\nFor ease of process representation, we assume that readaheadChunkNum is 2 in the following.\r\n\r\n#### Process\r\n>\r\n> Create `S3SegmentFile` object。\r\n\r\nThis is done in the `S3Segment#S3Segment` constructor. The path of the logical segment file is constructed by concatenating the following components according to a set of rules: `clusterName/brokerName/topic/queue/type-baseOffset`. The path below this point is referred to as `baseDir`.\r\n> Create real logical `segment`\r\n\r\nThat is, the `S3Segment#createFile()` method is called. Since no data has been written yet, we need to create the first `chunk` object and allocate 4MB of memory to cache the data for this chunk. We request the creation of an object from S3 in the format `baseDir/chunk-startOffset`, which means creating a `baseDir/chunk-0` object in S3 now.\r\n> commit\r\n\r\nThe `Segment#commit0()` method is called.\r\nWe assume that wrting 2MB data this time.\r\n![](https://cdn.nlark.com/yuque/0/2023/jpeg/22446956/1677233255373-1cae7002-2e0d-477a-b759-052d286b9441.jpeg)\r\nThe data is directlly writed into `chunk-0`, and uploaded to S3.\r\n> read\r\n\r\nThat is, the `S3Segment#read0()` method is called. Suppose we are currently reading 1MB of data with `position = 0 and length = 1024`. Then it directly hits in the local `chunk-0` buffer and returns.\r\n> commit\r\n\r\nSuppose this time we write `position= 2048, length= 12 * 1024` data, that is, submit 12MB of data from 2MB position. \r\n![](https://cdn.nlark.com/yuque/0/2023/jpeg/22446956/1677233908540-ac9b8eec-3cb0-4e96-8eea-d81f5182ab92.jpeg)\r\nAt this point, the first 2MB of chunk-0 is cached locally, so we can directly concatenate the first 2MB of `chunk-0` with the first 2MB of the stream to form a complete `chunk-0`. Next, we correctly locate the first 2MB of `chunk-4096`, `chunk-8192`, and `chunk-12288`, and then upload them to S3. For the case of multiple chunks uploading at the same time, we use asynchronous/thread pool to upload them. If some chunks fail to upload, they are cached and then retried in the background asynchronously. If they fail multiple times, appropriate logical processing is performed.\r\n> read\r\n\r\nAfter the above commit, only the first 2MB of `chunk-12288` is cached locally. Now, we read 4096 bytes of data starting from `position = 2048`, which means reading the second half of `chunk-0` and the first half of `chunk-4096`. Since we have enabled the pre-reading mechanism and the parameter is 2, we need to read two more chunks. Considering that we only read half of `chunk-4096`, we only need to read one more chunk, which is `chunk-8192`.\r\n![](https://cdn.nlark.com/yuque/0/2023/jpeg/22446956/1677234407065-a8965fc7-f3d9-4d32-b583-4f98ea485df4.jpeg)\r\nThen we read `chunk-0`, `chunk-4096`, and `chunk-8192` from S3. According to the pre-reading mechanism, we do not save `chunk-0` and only save `chunk-4096` and `chunk-8192` in memory.\r\n![](https://cdn.nlark.com/yuque/0/2023/jpeg/22446956/1677234743263-325a8f2a-2958-45cb-912d-08843b827fb7.jpeg)\r\n> read\r\n\r\nNow, we read 4096 bytes of data starting from `position = 6144`, which means reading the second half of `chunk-4096` and the first half of `chunk-8192`. Since we have pre-loaded `chunk-4096` and `chunk-8192` into memory, we can directly return the data without reading from S3.\r\n> `Segment` is full\r\n\r\nAt this point, we can asynchronously trigger an `uploadPartCopy` operation to consolidate all the `chunks` into a single large `segment` object, and record the basic information of the `segment` in the object metadata. The object path is `clusterName/brokerName/topic/queue/type-baseOffset-seg`. After the copy operation is successful, we can asynchronously delete the parent path of the chunks.\r\n> restart with `segment`\r\n\r\nNow we concatenate the path `clusterName/brokerName/topic/queue/type-baseOffset-seg` and check whether the object exists. If it exists, it means it is the already organized large `Segment` object, then we record the corresponding metadata locally, and `read0()` can directly read the object based on the offset. Next, we check if there is an object under `.../type-baseOffset`. If it exists, it means the asynchronous deletion has not been successful, so we can re-attempt asynchronous deletion.\r\n> restart with unexist `segment`\r\n\r\nIf the path `.../type-baseOffset-seg` does not exist, it may be due to failed consolidation or the current `segment` has not been written to capacity. In this case, we can list all the chunk files under the path and then determine if the segment has been fully written (this can be checked by adding an interface that is called during recovery). If the `segment` has been fully written, we can consolidate the `chunks` asynchronously and then delete them. If the `segment` has not been fully written, we can simply recover the latest `chunk` by caching it.\r\n\r\n#### Advantages and disadvantages\r\n>\r\n> Advantages\r\n\r\n1. The pre-fetching mechanism and the caching of incomplete chunks can help reduce network requests.\r\n2. Optimal use case for this design is sequential read access, which fully utilizes the prefetching mechanism.\r\n\r\n> Disadvantages\r\n\r\n1.  `chunk` caches can lead to excessive memory usage. Suppose that 1000 queues, even if only one `chunk` is cached for one queue, can reach 4GB of memory usage.\r\n\r\n\r\n### Implment-2\r\n\r\nTo solve memory buffer ocupying problem, we can use a singleton `bufferPool` with limited buffer size to cache `chunk`.\r\n\r\n#### Advantages and disadvantages\r\n>\r\n> Advantages\r\n\r\n1. Prevent OOM problem\r\n2. Suitable for cases where the total number of queues is small\r\n\r\n> Disadvantages\r\n\r\n1. Not suitable for scenarios with a large number of queues, as there will be fierce cache competition between each queue, resulting in each queue actually pre-reading fewer or no `chunks`, which fails to achieve the desired effect of pre-reading.\r\n\r\n### Implment-3\r\n\r\nInstead of using the aforementioned chunking method, we can directly use S3's `multiPartUpload` to upload files in parts. In S3, a physical object corresponds to a `Segment`. When creating a `Segment`, start a multipart upload task and persist the upload task ID in S3 also. Every time `commit0()` is called, a `part` is created for uploading, and a `partID` is generated for represent this upload `part` and need to be persist to S3. When the entire `Segment` is full, the multipart upload is completed. \r\n\r\nFault recovery:\r\nAt this point, we can retrieve the current maximum upload number based on the persistent upload ID. The next time `commit0()` is called, uploading can start from the number immediately following the maximum upload number.\r\n\r\n#### Advantages and disadvantages\r\n>\r\n> Advantages\r\n\r\n1. The implementation is simple.\r\n2. This approach is suitable for cold data backup scenarios where a large amount of data is written once, and read requests are infrequent and dispersed. This is because it avoids prolonged read failures caused by invisibility during the multipart upload process.\r\n\r\n> Disadvantages\r\n\r\n1. It is not possible to access the object until the entire Segment has been successfully uploaded. In other words, the data in the `Segment` cannot be read while the Segment is being uploaded.\r\n\r\n### Plan\r\n\r\n1.  Implement `S3Segment` and corresponding methods to complete the basic storage requirements.\r\n2. Add more metrics about `S3Segment`\r\n3. Optimized based on the actual scenario\r\n", 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6176/reactions', 'total_count': 2, '+1': 2, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6176/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6191', 'id': 4900136, 'node_id': 'D_kwDOBHrsl84ASsUo', 'number': 6191, 'title': 'com.alibaba.fastjson.JSONException: expect \'[\', but {, pos 1, line 1, column 2{"name":"Sam Spade"}', 'user': {'login': 'yuluo-yx', 'id': 77964041, 'node_id': 'MDQ6VXNlcjc3OTY0MDQx', 'avatar_url': 'https://avatars.githubusercontent.com/u/77964041?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/yuluo-yx', 'html_url': 'https://github.com/yuluo-yx', 'followers_url': 'https://api.github.com/users/yuluo-yx/followers', 'following_url': 'https://api.github.com/users/yuluo-yx/following{/other_user}', 'gists_url': 'https://api.github.com/users/yuluo-yx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/yuluo-yx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/yuluo-yx/subscriptions', 'organizations_url': 'https://api.github.com/users/yuluo-yx/orgs', 'repos_url': 'https://api.github.com/users/yuluo-yx/repos', 'events_url': 'https://api.github.com/users/yuluo-yx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/yuluo-yx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 2, 'created_at': '2023-02-27T01:18:39Z', 'updated_at': '2023-02-27T06:59:02Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': 'github repository : https://github.com/waylau/spring-cloud-stream-tutorial/tree/main/samples/spring-cloud-stream-batch-demo\r\n```\r\n2023-02-24 12:53:04.290 ERROR 13984 --- [chDestination_1] o.s.integration.handler.LoggingHandler   : org.springframework.messaging.MessageHandlingException: error occurred in message handler [org.springframework.cloud.stream.function.FunctionConfiguration$FunctionToDestinationBinder$1@78cc5885]; nested exception is com.alibaba.fastjson.JSONException: expect \'[\', but {, pos 1, line 1, column 2{"name":"Sam Spade"}, failedMessage=GenericMessage [payload=byte[20], headers={ROCKET_MQ_BORN_TIMESTAMP=1677127641153, ROCKET_MQ_FLAG=0, ROCKET_MQ_MESSAGE_ID=7F00000125FC27C170F0740A70410003, ROCKET_MQ_TOPIC=logBatchDestination, ROCKET_MQ_BORN_HOST=172.29.16.1, id=c7330354-35ec-f97c-4c3a-2ec798fbccfa, ROCKET_MQ_SYS_FLAG=0, contentType=application/json, ROCKET_MQ_QUEUE_ID=0, target-protocol=kafka, timestamp=1677214381277}]\r\n\tat org.springframework.integration.support.utils.IntegrationUtils.wrapInHandlingExceptionIfNecessary(IntegrationUtils.java:191)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:65)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:166)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:47)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)\r\n\tat org.springframework.integration.endpoint.MessageProducerSupport.sendMessage(MessageProducerSupport.java:216)\r\n\tat com.alibaba.cloud.stream.binder.rocketmq.integration.inbound.RocketMQInboundChannelAdapter.lambda$consumeMessage$6(RocketMQInboundChannelAdapter.java:163)\r\n\tat org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329)\r\n\tat org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:225)\r\n\tat com.alibaba.cloud.stream.binder.rocketmq.integration.inbound.RocketMQInboundChannelAdapter.consumeMessage(RocketMQInboundChannelAdapter.java:162)\r\n\tat com.alibaba.cloud.stream.binder.rocketmq.integration.inbound.RocketMQInboundChannelAdapter.lambda$onInit$5(RocketMQInboundChannelAdapter.java:124)\r\n\tat org.apache.rocketmq.client.impl.consumer.ConsumeMessageConcurrentlyService$ConsumeRequest.run(ConsumeMessageConcurrentlyService.java:402)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.alibaba.fastjson.JSONException: expect \'[\', but {, pos 1, line 1, column 2{"name":"Sam Spade"}\r\n\tat com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:721)\r\n\tat com.alibaba.fastjson.serializer.CollectionCodec.deserialze(CollectionCodec.java:126)\r\n\tat com.alibaba.fastjson.parser.DefaultJSONParser.parseObject(DefaultJSONParser.java:688)\r\n\tat com.alibaba.fastjson.JSON.parseObject(JSON.java:396)\r\n\tat com.alibaba.fastjson.JSON.parseObject(JSON.java:461)\r\n\tat com.alibaba.fastjson.JSON.parseObject(JSON.java:429)\r\n\tat com.alibaba.fastjson.support.spring.messaging.MappingFastJsonMessageConverter.convertFromInternal(MappingFastJsonMessageConverter.java:69)\r\n\tat org.springframework.messaging.converter.AbstractMessageConverter.fromMessage(AbstractMessageConverter.java:185)\r\n\tat org.springframework.cloud.function.context.config.SmartCompositeMessageConverter.fromMessage(SmartCompositeMessageConverter.java:115)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.convertInputMessageIfNecessary(SimpleFunctionRegistry.java:1328)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.convertInputIfNecessary(SimpleFunctionRegistry.java:1089)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.doApply(SimpleFunctionRegistry.java:734)\r\n\tat org.springframework.cloud.function.context.catalog.SimpleFunctionRegistry$FunctionInvocationWrapper.apply(SimpleFunctionRegistry.java:589)\r\n\tat org.springframework.cloud.stream.function.PartitionAwareFunctionWrapper.apply(PartitionAwareFunctionWrapper.java:84)\r\n\tat org.springframework.cloud.stream.function.FunctionConfiguration$FunctionWrapper.apply(FunctionConfiguration.java:791)\r\n\tat org.springframework.cloud.stream.function.FunctionConfiguration$FunctionToDestinationBinder$1.handleMessageInternal(FunctionConfiguration.java:623)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56)\r\n\t... 22 more\r\n\r\n```', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6191/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6191/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6208#discussioncomment-5152947', 'answer_chosen_at': '2023-02-28T17:00:49.000-08:00', 'answer_chosen_by': {'login': 'Hoxxx', 'id': 2639432, 'node_id': 'MDQ6VXNlcjI2Mzk0MzI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/2639432?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Hoxxx', 'html_url': 'https://github.com/Hoxxx', 'followers_url': 'https://api.github.com/users/Hoxxx/followers', 'following_url': 'https://api.github.com/users/Hoxxx/following{/other_user}', 'gists_url': 'https://api.github.com/users/Hoxxx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Hoxxx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Hoxxx/subscriptions', 'organizations_url': 'https://api.github.com/users/Hoxxx/orgs', 'repos_url': 'https://api.github.com/users/Hoxxx/repos', 'events_url': 'https://api.github.com/users/Hoxxx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Hoxxx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6208', 'id': 4907741, 'node_id': 'D_kwDOBHrsl84ASuLd', 'number': 6208, 'title': 'rocketmq broker会占用多个端口？', 'user': {'login': 'Hoxxx', 'id': 2639432, 'node_id': 'MDQ6VXNlcjI2Mzk0MzI=', 'avatar_url': 'https://avatars.githubusercontent.com/u/2639432?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Hoxxx', 'html_url': 'https://github.com/Hoxxx', 'followers_url': 'https://api.github.com/users/Hoxxx/followers', 'following_url': 'https://api.github.com/users/Hoxxx/following{/other_user}', 'gists_url': 'https://api.github.com/users/Hoxxx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Hoxxx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Hoxxx/subscriptions', 'organizations_url': 'https://api.github.com/users/Hoxxx/orgs', 'repos_url': 'https://api.github.com/users/Hoxxx/repos', 'events_url': 'https://api.github.com/users/Hoxxx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Hoxxx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'closed', 'state_reason': 'resolved', 'locked': False, 'comments': 4, 'created_at': '2023-02-28T08:00:51Z', 'updated_at': '2023-03-21T08:03:53Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '在broker配置了listenPort=30911，启动后发现30909和30912都被rocketmq占用了，这是正常的吗？\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6208/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6208/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6210', 'id': 4907830, 'node_id': 'D_kwDOBHrsl84ASuM2', 'number': 6210, 'title': 'Inquiry about enriching 5.0 Proxy features', 'user': {'login': 'lyx2000', 'id': 56945247, 'node_id': 'MDQ6VXNlcjU2OTQ1MjQ3', 'avatar_url': 'https://avatars.githubusercontent.com/u/56945247?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/lyx2000', 'html_url': 'https://github.com/lyx2000', 'followers_url': 'https://api.github.com/users/lyx2000/followers', 'following_url': 'https://api.github.com/users/lyx2000/following{/other_user}', 'gists_url': 'https://api.github.com/users/lyx2000/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/lyx2000/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/lyx2000/subscriptions', 'organizations_url': 'https://api.github.com/users/lyx2000/orgs', 'repos_url': 'https://api.github.com/users/lyx2000/repos', 'events_url': 'https://api.github.com/users/lyx2000/events{/privacy}', 'received_events_url': 'https://api.github.com/users/lyx2000/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 4, 'created_at': '2023-02-28T08:29:04Z', 'updated_at': '2023-03-12T03:07:14Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': "We are using RocketMQ 5.0, but we encountered some problems when using the proxy, we can't create topic, get consumer & producer connections etc. through the grpc interface provided by the proxy, which causes a lot of trouble for us to get RocketMQ state.  Now we can only get some of it through the old MQAdmin, but this is not in line with the 5.0 Proxy design. Does the community have any plans to improve the proxy in the future? ", 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6210/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6210/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6218', 'id': 4913632, 'node_id': 'D_kwDOBHrsl84ASvng', 'number': 6218, 'title': '从节点不工作，监控面板上没有消费消息', 'user': {'login': 'xcfuu', 'id': 29519964, 'node_id': 'MDQ6VXNlcjI5NTE5OTY0', 'avatar_url': 'https://avatars.githubusercontent.com/u/29519964?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/xcfuu', 'html_url': 'https://github.com/xcfuu', 'followers_url': 'https://api.github.com/users/xcfuu/followers', 'following_url': 'https://api.github.com/users/xcfuu/following{/other_user}', 'gists_url': 'https://api.github.com/users/xcfuu/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/xcfuu/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/xcfuu/subscriptions', 'organizations_url': 'https://api.github.com/users/xcfuu/orgs', 'repos_url': 'https://api.github.com/users/xcfuu/repos', 'events_url': 'https://api.github.com/users/xcfuu/events{/privacy}', 'received_events_url': 'https://api.github.com/users/xcfuu/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 13, 'created_at': '2023-03-01T09:08:14Z', 'updated_at': '2023-06-16T06:25:59Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '![image](https://user-images.githubusercontent.com/29519964/222093620-cf94fea9-f80d-490f-b4de-7b6375b2f35c.png)\r\n![image](https://user-images.githubusercontent.com/29519964/222093795-899a08c4-1e07-4f42-81db-61acdefa8355.png)\r\n版本\r\nrocketmq-broker-4.2.0-incubating-SNAPSHOT.jar\r\n\r\n请问这种情况应该从什么方向去查问题？', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6218/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6218/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6225#discussioncomment-5175231', 'answer_chosen_at': '2023-03-02T17:35:41.000-08:00', 'answer_chosen_by': {'login': 'weihubeats', 'id': 42484192, 'node_id': 'MDQ6VXNlcjQyNDg0MTky', 'avatar_url': 'https://avatars.githubusercontent.com/u/42484192?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/weihubeats', 'html_url': 'https://github.com/weihubeats', 'followers_url': 'https://api.github.com/users/weihubeats/followers', 'following_url': 'https://api.github.com/users/weihubeats/following{/other_user}', 'gists_url': 'https://api.github.com/users/weihubeats/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/weihubeats/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/weihubeats/subscriptions', 'organizations_url': 'https://api.github.com/users/weihubeats/orgs', 'repos_url': 'https://api.github.com/users/weihubeats/repos', 'events_url': 'https://api.github.com/users/weihubeats/events{/privacy}', 'received_events_url': 'https://api.github.com/users/weihubeats/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6225', 'id': 4916935, 'node_id': 'D_kwDOBHrsl84ASwbH', 'number': 6225, 'title': 'rocketmq grpc sdk', 'user': {'login': 'weihubeats', 'id': 42484192, 'node_id': 'MDQ6VXNlcjQyNDg0MTky', 'avatar_url': 'https://avatars.githubusercontent.com/u/42484192?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/weihubeats', 'html_url': 'https://github.com/weihubeats', 'followers_url': 'https://api.github.com/users/weihubeats/followers', 'following_url': 'https://api.github.com/users/weihubeats/following{/other_user}', 'gists_url': 'https://api.github.com/users/weihubeats/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/weihubeats/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/weihubeats/subscriptions', 'organizations_url': 'https://api.github.com/users/weihubeats/orgs', 'repos_url': 'https://api.github.com/users/weihubeats/repos', 'events_url': 'https://api.github.com/users/weihubeats/events{/privacy}', 'received_events_url': 'https://api.github.com/users/weihubeats/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 1, 'created_at': '2023-03-02T05:41:58Z', 'updated_at': '2023-03-03T01:36:23Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': 'rocketmq grpc access I saw the demo in rocketmq-clients, do we have a grpc access sdk that can be used directly by reference', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6225/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6225/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6238', 'id': 4921620, 'node_id': 'D_kwDOBHrsl84ASxkU', 'number': 6238, 'title': '启动报错Expected the service PushConsumerImpl-0 [FAILED] to be RUNNING, but the service has FAILED', 'user': {'login': '1270045840', 'id': 57859911, 'node_id': 'MDQ6VXNlcjU3ODU5OTEx', 'avatar_url': 'https://avatars.githubusercontent.com/u/57859911?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/1270045840', 'html_url': 'https://github.com/1270045840', 'followers_url': 'https://api.github.com/users/1270045840/followers', 'following_url': 'https://api.github.com/users/1270045840/following{/other_user}', 'gists_url': 'https://api.github.com/users/1270045840/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/1270045840/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/1270045840/subscriptions', 'organizations_url': 'https://api.github.com/users/1270045840/orgs', 'repos_url': 'https://api.github.com/users/1270045840/repos', 'events_url': 'https://api.github.com/users/1270045840/events{/privacy}', 'received_events_url': 'https://api.github.com/users/1270045840/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 7, 'created_at': '2023-03-03T11:14:04Z', 'updated_at': '2024-06-05T11:59:59Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': 'Exception in thread "main" java.lang.IllegalStateException: Expected the service PushConsumerImpl-0 [FAILED] to be RUNNING, but the service has FAILED\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractService.checkCurrentState(AbstractService.java:381)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractService.awaitRunning(AbstractService.java:305)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractIdleService.awaitRunning(AbstractIdleService.java:165)\r\nat org.apache.rocketmq.client.java.impl.consumer.PushConsumerBuilderImpl.build(PushConsumerBuilderImpl.java:128)\r\nat com.dc.aimc.system.PushConsumerExample.main(PushConsumerExample.java:48)\r\nCaused by: java.util.concurrent.ExecutionException: org.apache.rocketmq.shaded.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:588)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:547)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.FluentFuture$TrustedFuture.get(FluentFuture.java:91)\r\nat org.apache.rocketmq.client.java.impl.ClientImpl.startUp(ClientImpl.java:188)\r\nat org.apache.rocketmq.client.java.impl.consumer.PushConsumerImpl.startUp(PushConsumerImpl.java:161)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.AbstractIdleService$DelegateService$1.run(AbstractIdleService.java:62)\r\nat org.apache.rocketmq.shaded.com.google.common.util.concurrent.Callables.lambda$threadRenaming$3(Callables.java:103)\r\nat java.lang.Thread.run(Thread.java:750)\r\nCaused by: org.apache.rocketmq.shaded.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\r\nat org.apache.rocketmq.shaded.io.grpc.Status.asRuntimeException(Status.java:539)\r\nat org.apache.rocketmq.shaded.io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:544)\r\nat org.apache.rocketmq.shaded.io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)\r\nat org.apache.rocketmq.shaded.io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)\r\nat org.apache.rocketmq.shaded.io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:563)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:70)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:744)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:723)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\nat org.apache.rocketmq.shaded.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n... 1 more\r\nCaused by: org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: /127.0.0.1:9876\r\nCaused by: java.net.ConnectException: Connection refused\r\nat sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\r\nat sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:715)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\nat org.apache.rocketmq.shaded.io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nat java.lang.Thread.run(Thread.java:750)\r\n\r\nspringcloud集成\r\n\r\norg.apache.rocketmq\r\nrocketmq-client-java\r\n5.0.4\r\n\r\n启动报错\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6238/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6238/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6261#discussioncomment-5236868', 'answer_chosen_at': '2023-03-07T23:50:19.000-08:00', 'answer_chosen_by': {'login': 'drpmma', 'id': 20906038, 'node_id': 'MDQ6VXNlcjIwOTA2MDM4', 'avatar_url': 'https://avatars.githubusercontent.com/u/20906038?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/drpmma', 'html_url': 'https://github.com/drpmma', 'followers_url': 'https://api.github.com/users/drpmma/followers', 'following_url': 'https://api.github.com/users/drpmma/following{/other_user}', 'gists_url': 'https://api.github.com/users/drpmma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/drpmma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/drpmma/subscriptions', 'organizations_url': 'https://api.github.com/users/drpmma/orgs', 'repos_url': 'https://api.github.com/users/drpmma/repos', 'events_url': 'https://api.github.com/users/drpmma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/drpmma/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6261', 'id': 4935690, 'node_id': 'D_kwDOBHrsl84AS1AK', 'number': 6261, 'title': 'v5.0.0 Pop消费模式下,很多消息显示重试次数达上千次', 'user': {'login': 'mz0113', 'id': 42512469, 'node_id': 'MDQ6VXNlcjQyNTEyNDY5', 'avatar_url': 'https://avatars.githubusercontent.com/u/42512469?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/mz0113', 'html_url': 'https://github.com/mz0113', 'followers_url': 'https://api.github.com/users/mz0113/followers', 'following_url': 'https://api.github.com/users/mz0113/following{/other_user}', 'gists_url': 'https://api.github.com/users/mz0113/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/mz0113/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/mz0113/subscriptions', 'organizations_url': 'https://api.github.com/users/mz0113/orgs', 'repos_url': 'https://api.github.com/users/mz0113/repos', 'events_url': 'https://api.github.com/users/mz0113/events{/privacy}', 'received_events_url': 'https://api.github.com/users/mz0113/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 1, 'created_at': '2023-03-07T03:38:52Z', 'updated_at': '2023-03-08T07:50:19Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '现象:\r\nconsumer.getReconsumeTimes() 返回值几百到几千之间 , 如图 . 正常应该是默认的16次, 但是这个Topic就很奇怪\r\n消费模式为并发消费,POP模式 。schedule queue-0队列因此堆积了几千万消息。revive队列也很大，但是实际上我消息量很小，tps也就几\r\n\r\n![image](https://user-images.githubusercontent.com/42512469/223314667-609cb3b0-b33d-4588-aae4-bab50ae5cdc6.png)', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6261/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6261/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6265#discussioncomment-5238800', 'answer_chosen_at': '2023-03-09T18:05:00.000-08:00', 'answer_chosen_by': {'login': 'echooymxq', 'id': 19860963, 'node_id': 'MDQ6VXNlcjE5ODYwOTYz', 'avatar_url': 'https://avatars.githubusercontent.com/u/19860963?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/echooymxq', 'html_url': 'https://github.com/echooymxq', 'followers_url': 'https://api.github.com/users/echooymxq/followers', 'following_url': 'https://api.github.com/users/echooymxq/following{/other_user}', 'gists_url': 'https://api.github.com/users/echooymxq/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/echooymxq/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/echooymxq/subscriptions', 'organizations_url': 'https://api.github.com/users/echooymxq/orgs', 'repos_url': 'https://api.github.com/users/echooymxq/repos', 'events_url': 'https://api.github.com/users/echooymxq/events{/privacy}', 'received_events_url': 'https://api.github.com/users/echooymxq/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6265', 'id': 4936560, 'node_id': 'D_kwDOBHrsl84AS1Nw', 'number': 6265, 'title': '关于过期文件删除问题', 'user': {'login': 'echooymxq', 'id': 19860963, 'node_id': 'MDQ6VXNlcjE5ODYwOTYz', 'avatar_url': 'https://avatars.githubusercontent.com/u/19860963?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/echooymxq', 'html_url': 'https://github.com/echooymxq', 'followers_url': 'https://api.github.com/users/echooymxq/followers', 'following_url': 'https://api.github.com/users/echooymxq/following{/other_user}', 'gists_url': 'https://api.github.com/users/echooymxq/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/echooymxq/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/echooymxq/subscriptions', 'organizations_url': 'https://api.github.com/users/echooymxq/orgs', 'repos_url': 'https://api.github.com/users/echooymxq/repos', 'events_url': 'https://api.github.com/users/echooymxq/events{/privacy}', 'received_events_url': 'https://api.github.com/users/echooymxq/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 3, 'created_at': '2023-03-07T09:28:16Z', 'updated_at': '2023-03-10T02:05:00Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': '对于长时间下线然后重新上线的Broker，因为CommitLog过期删除策略，始终会保存最后一个文件，如果当前Broker的phyOffset小于主节点的minOffset，这个时候会始终无法进行同步。通常解决办法是人工手动清理掉store文件再重启，我的疑问是能不能在Broker启动load的时候，先手动的检查一下CommitLog的最后一个文件，如果已经过期，那么就主动清空commitlog和consumeQueue。或者说是在主从同步时，发现主传过来的offset比从Broker当前的phyOffset要大，则主动设置同步位点为0(高危操作)。', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6265/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6265/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884711, 'node_id': 'DIC_kwDOBHrsl84CUVVn', 'repository_id': 75164823, 'emoji': ':ballot_box:', 'name': 'Polls', 'description': 'Take a vote from the community', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'polls', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6274', 'id': 4939327, 'node_id': 'D_kwDOBHrsl84AS14_', 'number': 6274, 'title': 'Whether the ForwardRequestProcessors are being used？', 'user': {'login': 'socutes', 'id': 7479320, 'node_id': 'MDQ6VXNlcjc0NzkzMjA=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7479320?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/socutes', 'html_url': 'https://github.com/socutes', 'followers_url': 'https://api.github.com/users/socutes/followers', 'following_url': 'https://api.github.com/users/socutes/following{/other_user}', 'gists_url': 'https://api.github.com/users/socutes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/socutes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/socutes/subscriptions', 'organizations_url': 'https://api.github.com/users/socutes/orgs', 'repos_url': 'https://api.github.com/users/socutes/repos', 'events_url': 'https://api.github.com/users/socutes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/socutes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 2, 'created_at': '2023-03-07T23:31:34Z', 'updated_at': '2023-03-08T13:00:47Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'org.apache.rocketmq.broker.processor.ForwardRequestProcessor in module Broker, does not appear to be used.\r\nWould like to initiate a discussion to see if it can be removed.', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6274/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6274/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6277', 'id': 4939712, 'node_id': 'D_kwDOBHrsl84AS1_A', 'number': 6277, 'title': 'Whether any time delay of 5.0.0 can be merged into the 4.9.x branch？', 'user': {'login': 'onejimmyboy', 'id': 57432151, 'node_id': 'MDQ6VXNlcjU3NDMyMTUx', 'avatar_url': 'https://avatars.githubusercontent.com/u/57432151?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/onejimmyboy', 'html_url': 'https://github.com/onejimmyboy', 'followers_url': 'https://api.github.com/users/onejimmyboy/followers', 'following_url': 'https://api.github.com/users/onejimmyboy/following{/other_user}', 'gists_url': 'https://api.github.com/users/onejimmyboy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/onejimmyboy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/onejimmyboy/subscriptions', 'organizations_url': 'https://api.github.com/users/onejimmyboy/orgs', 'repos_url': 'https://api.github.com/users/onejimmyboy/repos', 'events_url': 'https://api.github.com/users/onejimmyboy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/onejimmyboy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 5, 'created_at': '2023-03-08T02:27:04Z', 'updated_at': '2023-03-08T07:54:55Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': 'The current 5.0 version supports any length of delay, is it considered to be supported in the 4.9.x version? How feasible is it? Is there such a case？', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6277/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6277/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6298#discussioncomment-5275711', 'answer_chosen_at': '2023-03-13T23:00:57.000-07:00', 'answer_chosen_by': {'login': 'ShannonDing', 'id': 16487356, 'node_id': 'MDQ6VXNlcjE2NDg3MzU2', 'avatar_url': 'https://avatars.githubusercontent.com/u/16487356?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/ShannonDing', 'html_url': 'https://github.com/ShannonDing', 'followers_url': 'https://api.github.com/users/ShannonDing/followers', 'following_url': 'https://api.github.com/users/ShannonDing/following{/other_user}', 'gists_url': 'https://api.github.com/users/ShannonDing/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/ShannonDing/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/ShannonDing/subscriptions', 'organizations_url': 'https://api.github.com/users/ShannonDing/orgs', 'repos_url': 'https://api.github.com/users/ShannonDing/repos', 'events_url': 'https://api.github.com/users/ShannonDing/events{/privacy}', 'received_events_url': 'https://api.github.com/users/ShannonDing/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6298', 'id': 4944178, 'node_id': 'D_kwDOBHrsl84AS3Ey', 'number': 6298, 'title': 'What is the `flag` field in `Message` use for?', 'user': {'login': 'schneiderlin', 'id': 17421608, 'node_id': 'MDQ6VXNlcjE3NDIxNjA4', 'avatar_url': 'https://avatars.githubusercontent.com/u/17421608?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/schneiderlin', 'html_url': 'https://github.com/schneiderlin', 'followers_url': 'https://api.github.com/users/schneiderlin/followers', 'following_url': 'https://api.github.com/users/schneiderlin/following{/other_user}', 'gists_url': 'https://api.github.com/users/schneiderlin/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/schneiderlin/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/schneiderlin/subscriptions', 'organizations_url': 'https://api.github.com/users/schneiderlin/orgs', 'repos_url': 'https://api.github.com/users/schneiderlin/repos', 'events_url': 'https://api.github.com/users/schneiderlin/events{/privacy}', 'received_events_url': 'https://api.github.com/users/schneiderlin/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'closed', 'state_reason': 'resolved', 'locked': False, 'comments': 1, 'created_at': '2023-03-09T08:00:48Z', 'updated_at': '2023-03-21T08:03:15Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'I find that the `flag` was pass to `SendMessageRequestHeader`. but then no further usage was found', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6298/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6298/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6304', 'id': 4947225, 'node_id': 'D_kwDOBHrsl84AS30Z', 'number': 6304, 'title': 'Is rocketmq considering supporting HTTP Restful protocols?', 'user': {'login': 'socutes', 'id': 7479320, 'node_id': 'MDQ6VXNlcjc0NzkzMjA=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7479320?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/socutes', 'html_url': 'https://github.com/socutes', 'followers_url': 'https://api.github.com/users/socutes/followers', 'following_url': 'https://api.github.com/users/socutes/following{/other_user}', 'gists_url': 'https://api.github.com/users/socutes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/socutes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/socutes/subscriptions', 'organizations_url': 'https://api.github.com/users/socutes/orgs', 'repos_url': 'https://api.github.com/users/socutes/repos', 'events_url': 'https://api.github.com/users/socutes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/socutes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 5, 'created_at': '2023-03-10T01:35:54Z', 'updated_at': '2023-03-10T11:12:21Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': "Rocketmq 5.0 has an independent proxy module and supports both grpc and pop protocols. Both kafka and pulsar support http restful production and consumption.\r\nSupporting http restful in Proxy seems feasible.Whether the community has this plan and whether it needs to be discussed.\r\nIn my opinion, it is necessary in terms of ease of use and cost of development of the SDK.\r\nI'd like to hear from the experts.", 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6304/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6304/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6305', 'id': 4947263, 'node_id': 'D_kwDOBHrsl84AS30_', 'number': 6305, 'title': 'Windows环境运行SDK收发示例失败', 'user': {'login': 'yuluo-yx', 'id': 77964041, 'node_id': 'MDQ6VXNlcjc3OTY0MDQx', 'avatar_url': 'https://avatars.githubusercontent.com/u/77964041?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/yuluo-yx', 'html_url': 'https://github.com/yuluo-yx', 'followers_url': 'https://api.github.com/users/yuluo-yx/followers', 'following_url': 'https://api.github.com/users/yuluo-yx/following{/other_user}', 'gists_url': 'https://api.github.com/users/yuluo-yx/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/yuluo-yx/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/yuluo-yx/subscriptions', 'organizations_url': 'https://api.github.com/users/yuluo-yx/orgs', 'repos_url': 'https://api.github.com/users/yuluo-yx/repos', 'events_url': 'https://api.github.com/users/yuluo-yx/events{/privacy}', 'received_events_url': 'https://api.github.com/users/yuluo-yx/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 14, 'created_at': '2023-03-10T01:52:05Z', 'updated_at': '2025-02-11T08:47:08Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': '分别启动 mqnamesrv.cmd，mqbroker.cmd 和 mqproxy.cmd\r\n![image](https://user-images.githubusercontent.com/77964041/224202653-8a2ce107-56f6-4e88-be13-ab07bfd62e1f.png)\r\n![image](https://user-images.githubusercontent.com/77964041/224202670-d10e3f65-626a-42d8-98c1-1ee427961a6c.png)\r\n![image](https://user-images.githubusercontent.com/77964041/224202686-9696195a-7f7b-4175-8161-b6b26c53ffaf.png)\r\n显示启动成功，并没有报错。\r\n之后运行 sdk收发示例。\r\n![image](https://user-images.githubusercontent.com/77964041/224202806-cf2ec535-a82d-410e-8453-16359776bf2f.png)\r\n如图所示，控制台并没有任何输出。', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6305/reactions', 'total_count': 2, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 1, 'confused': 0, 'heart': 0, 'rocket': 1, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6305/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6309', 'id': 4947717, 'node_id': 'D_kwDOBHrsl84AS38F', 'number': 6309, 'title': 'Question about "Initial consumer offset"', 'user': {'login': 'yehaifeng', 'id': 12188412, 'node_id': 'MDQ6VXNlcjEyMTg4NDEy', 'avatar_url': 'https://avatars.githubusercontent.com/u/12188412?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/yehaifeng', 'html_url': 'https://github.com/yehaifeng', 'followers_url': 'https://api.github.com/users/yehaifeng/followers', 'following_url': 'https://api.github.com/users/yehaifeng/following{/other_user}', 'gists_url': 'https://api.github.com/users/yehaifeng/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/yehaifeng/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/yehaifeng/subscriptions', 'organizations_url': 'https://api.github.com/users/yehaifeng/orgs', 'repos_url': 'https://api.github.com/users/yehaifeng/repos', 'events_url': 'https://api.github.com/users/yehaifeng/events{/privacy}', 'received_events_url': 'https://api.github.com/users/yehaifeng/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 1, 'created_at': '2023-03-10T05:30:16Z', 'updated_at': '2023-03-12T02:07:01Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '> Apache RocketMQ uses the maximum offset of a message queue when a consumer obtains messages from the queue for the first time as the initial consumer offset. In other words, the consumer starts consuming from the latest message in the queue.\r\n\r\nWhy is `maximum offset`, while not `minimum offset`', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6309/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6309/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6323#discussioncomment-5286634', 'answer_chosen_at': '2023-03-28T04:40:49.000-07:00', 'answer_chosen_by': {'login': 'FantasyChen-DH', 'id': 71254954, 'node_id': 'MDQ6VXNlcjcxMjU0OTU0', 'avatar_url': 'https://avatars.githubusercontent.com/u/71254954?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/FantasyChen-DH', 'html_url': 'https://github.com/FantasyChen-DH', 'followers_url': 'https://api.github.com/users/FantasyChen-DH/followers', 'following_url': 'https://api.github.com/users/FantasyChen-DH/following{/other_user}', 'gists_url': 'https://api.github.com/users/FantasyChen-DH/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/FantasyChen-DH/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/FantasyChen-DH/subscriptions', 'organizations_url': 'https://api.github.com/users/FantasyChen-DH/orgs', 'repos_url': 'https://api.github.com/users/FantasyChen-DH/repos', 'events_url': 'https://api.github.com/users/FantasyChen-DH/events{/privacy}', 'received_events_url': 'https://api.github.com/users/FantasyChen-DH/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6323', 'id': 4953357, 'node_id': 'D_kwDOBHrsl84AS5UN', 'number': 6323, 'title': '关于RemotingClient异步请求后钩子函数的执行问题', 'user': {'login': 'FantasyChen-DH', 'id': 71254954, 'node_id': 'MDQ6VXNlcjcxMjU0OTU0', 'avatar_url': 'https://avatars.githubusercontent.com/u/71254954?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/FantasyChen-DH', 'html_url': 'https://github.com/FantasyChen-DH', 'followers_url': 'https://api.github.com/users/FantasyChen-DH/followers', 'following_url': 'https://api.github.com/users/FantasyChen-DH/following{/other_user}', 'gists_url': 'https://api.github.com/users/FantasyChen-DH/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/FantasyChen-DH/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/FantasyChen-DH/subscriptions', 'organizations_url': 'https://api.github.com/users/FantasyChen-DH/orgs', 'repos_url': 'https://api.github.com/users/FantasyChen-DH/repos', 'events_url': 'https://api.github.com/users/FantasyChen-DH/events{/privacy}', 'received_events_url': 'https://api.github.com/users/FantasyChen-DH/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 4, 'created_at': '2023-03-12T08:16:50Z', 'updated_at': '2023-03-28T11:40:49Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '在我最近阅读remoting包下的NettyRemotingClient和NettyRemotingAbstract时，发现在进行异步请求后，并不会对RPCHook进行进一步调用。我对此还使用test包下的RemotingServerTest进行测试：\r\n`  @Test\r\n    public void testInvokeAsync() throws InterruptedException, RemotingConnectException,\r\n        RemotingTimeoutException, RemotingTooMuchRequestException, RemotingSendRequestException {\r\n\r\n        final CountDownLatch latch = new CountDownLatch(1);\r\n        RPCHook rpcHook = new RPCHook() {\r\n            @Override\r\n            public void doBeforeRequest(String remoteAddr, RemotingCommand request) {\r\n                System.out.println("send Request");\r\n            }\r\n\r\n            @Override\r\n            public void doAfterResponse(String remoteAddr, RemotingCommand request,\r\n                                        RemotingCommand response) {\r\n                System.out.println("after response");\r\n            }\r\n        };\r\n        remotingClient.registerRPCHook(rpcHook);\r\n        RemotingCommand request = RemotingCommand.createRequestCommand(0, null);\r\n        request.setRemark("messi");\r\n        remotingClient.invokeAsync("localhost:8888", request, 1000 * 3, new InvokeCallback() {\r\n            @Override\r\n            public void operationComplete(ResponseFuture responseFuture) {\r\n                assertTrue(responseFuture != null);\r\n//                assertThat(responseFuture.getResponseCommand().getLanguage()).isEqualTo(LanguageCode.JAVA);\r\n//                assertThat(responseFuture.getResponseCommand().getExtFields()).hasSize(2);\r\n                System.out.println("收到回应");\r\n                latch.countDown();\r\n            }\r\n        });\r\n        latch.await();\r\n\r\n    }\r\n}`\r\n\r\n但未执行RPCHook中的doAfterResponse方法，所以对此有疑惑，这个钩子函数会在何时才会执行还是说异步请求无需进行，感谢解答！', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6323/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6323/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6325', 'id': 4956571, 'node_id': 'D_kwDOBHrsl84AS6Gb', 'number': 6325, 'title': 'RocketMQ4.9升级到rocketmq5.0后，线上业务怎么平滑升级啊，有方案吗？', 'user': {'login': 'onejimmyboy', 'id': 57432151, 'node_id': 'MDQ6VXNlcjU3NDMyMTUx', 'avatar_url': 'https://avatars.githubusercontent.com/u/57432151?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/onejimmyboy', 'html_url': 'https://github.com/onejimmyboy', 'followers_url': 'https://api.github.com/users/onejimmyboy/followers', 'following_url': 'https://api.github.com/users/onejimmyboy/following{/other_user}', 'gists_url': 'https://api.github.com/users/onejimmyboy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/onejimmyboy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/onejimmyboy/subscriptions', 'organizations_url': 'https://api.github.com/users/onejimmyboy/orgs', 'repos_url': 'https://api.github.com/users/onejimmyboy/repos', 'events_url': 'https://api.github.com/users/onejimmyboy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/onejimmyboy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 5, 'created_at': '2023-03-13T02:31:37Z', 'updated_at': '2023-03-16T09:58:18Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '升级到rocketmq5.0后，之前4.9的应该还可以继续连接namesrv吗？还是需要连接proxy？', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6325/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6325/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6330', 'id': 4957892, 'node_id': 'D_kwDOBHrsl84AS6bE', 'number': 6330, 'title': 'Optimize how MQClientAPIExt is obtained in the MQClientAPIFactory', 'user': {'login': 'socutes', 'id': 7479320, 'node_id': 'MDQ6VXNlcjc0NzkzMjA=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7479320?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/socutes', 'html_url': 'https://github.com/socutes', 'followers_url': 'https://api.github.com/users/socutes/followers', 'following_url': 'https://api.github.com/users/socutes/following{/other_user}', 'gists_url': 'https://api.github.com/users/socutes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/socutes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/socutes/subscriptions', 'organizations_url': 'https://api.github.com/users/socutes/orgs', 'repos_url': 'https://api.github.com/users/socutes/repos', 'events_url': 'https://api.github.com/users/socutes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/socutes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 3, 'created_at': '2023-03-13T12:03:01Z', 'updated_at': '2023-03-17T02:44:59Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'To discuss whether this problem needs to be optimized:\r\nThe getClient method in the current MQClientAPIFactory. The MQClientAPIExt is obtained by random seeds.In extreme cases, load imbalance on MQClientAPIExt may occur.\r\nYou are advised to change the obtaining mode from random to polling.\r\n![image](https://user-images.githubusercontent.com/7479320/224696328-4a8073db-6609-40e9-a726-493daa5e4904.png)\r\n\r\nhttps://github.com/apache/rocketmq/issues/6312\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6330/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6330/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6354', 'id': 4965851, 'node_id': 'D_kwDOBHrsl84AS8Xb', 'number': 6354, 'title': '自动主从切换部署不能选出master', 'user': {'login': 'weihubeats', 'id': 42484192, 'node_id': 'MDQ6VXNlcjQyNDg0MTky', 'avatar_url': 'https://avatars.githubusercontent.com/u/42484192?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/weihubeats', 'html_url': 'https://github.com/weihubeats', 'followers_url': 'https://api.github.com/users/weihubeats/followers', 'following_url': 'https://api.github.com/users/weihubeats/following{/other_user}', 'gists_url': 'https://api.github.com/users/weihubeats/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/weihubeats/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/weihubeats/subscriptions', 'organizations_url': 'https://api.github.com/users/weihubeats/orgs', 'repos_url': 'https://api.github.com/users/weihubeats/repos', 'events_url': 'https://api.github.com/users/weihubeats/events{/privacy}', 'received_events_url': 'https://api.github.com/users/weihubeats/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 9, 'created_at': '2023-03-15T09:19:28Z', 'updated_at': '2023-04-20T01:44:24Z', 'author_association': 'MEMBER', 'active_lock_reason': None, 'body': "- rocketmq版本: 5.1.0\r\n- nameserve: 2个节点\r\n- broker: 2个节点\r\n![image](https://user-images.githubusercontent.com/42484192/225263301-cb924262-f224-4c92-b9bc-a56d053690c0.png)\r\n\r\n重启broker、nameserve依旧报这个错\r\n\r\n执行\r\n```shell\r\nsh bin/mqadmin getBrokerEpoch -n localhost:9876 -b broker-a\r\n```\r\n没反应\r\n\r\n错误log\r\n```java\r\n2023-03-15 16:59:04 INFO ReplicasManager_ScheduledService_1 - Update controller leader address to x.x.x.1:9878\r\n2023-03-15 16:59:06 WARN ReplicasManager_ExecutorService_1 - Failed to start replicasManager, retry times:35, current state:FIRST_TIME_SYNC_CONTROLLER_METADATA_DONE, try it again\r\n2023-03-15 16:59:06 ERROR ReplicasManager_ExecutorService_1 - Failed to register broker to controller\r\norg.apache.rocketmq.client.exception.MQBrokerException: CODE: 2012  DESC: The broker has not master, and this new registered broker can't not be elected as master\r\nFor more information, please visit the url, https://rocketmq.apache.org/docs/bestPractice/06FAQ\r\n        at org.apache.rocketmq.broker.out.BrokerOuterAPI.registerBrokerToController(BrokerOuterAPI.java:1183)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.registerBrokerToController(ReplicasManager.java:302)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.startBasicService(ReplicasManager.java:151)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.lambda$start$0(ReplicasManager.java:133)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n2023-03-15 16:59:11 WARN ReplicasManager_ExecutorService_1 - Failed to start replicasManager, retry times:36, current state:FIRST_TIME_SYNC_CONTROLLER_METADATA_DONE, try it again\r\n2023-03-15 16:59:11 ERROR ReplicasManager_ExecutorService_1 - Failed to register broker to controller\r\norg.apache.rocketmq.client.exception.MQBrokerException: CODE: 2012  DESC: The broker has not master, and this new registered broker can't not be elected as master\r\nFor more information, please visit the url, https://rocketmq.apache.org/docs/bestPractice/06FAQ\r\n        at org.apache.rocketmq.broker.out.BrokerOuterAPI.registerBrokerToController(BrokerOuterAPI.java:1183)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.registerBrokerToController(ReplicasManager.java:302)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.startBasicService(ReplicasManager.java:151)\r\n        at org.apache.rocketmq.broker.controller.ReplicasManager.lambda$start$0(ReplicasManager.java:133)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n2023-03-15 16:59:14 INFO ReplicasManager_ScheduledService_2 - Update controller leader address to x.x.x.1:9878\r\n```", 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6354/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6354/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6360#discussioncomment-5328879', 'answer_chosen_at': '2023-03-16T20:32:23.000-07:00', 'answer_chosen_by': {'login': 'odbozhou', 'id': 14222167, 'node_id': 'MDQ6VXNlcjE0MjIyMTY3', 'avatar_url': 'https://avatars.githubusercontent.com/u/14222167?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/odbozhou', 'html_url': 'https://github.com/odbozhou', 'followers_url': 'https://api.github.com/users/odbozhou/followers', 'following_url': 'https://api.github.com/users/odbozhou/following{/other_user}', 'gists_url': 'https://api.github.com/users/odbozhou/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/odbozhou/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/odbozhou/subscriptions', 'organizations_url': 'https://api.github.com/users/odbozhou/orgs', 'repos_url': 'https://api.github.com/users/odbozhou/repos', 'events_url': 'https://api.github.com/users/odbozhou/events{/privacy}', 'received_events_url': 'https://api.github.com/users/odbozhou/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6360', 'id': 4968764, 'node_id': 'D_kwDOBHrsl84AS9E8', 'number': 6360, 'title': 'POP消费的性能', 'user': {'login': 'zhengw0426', 'id': 9390327, 'node_id': 'MDQ6VXNlcjkzOTAzMjc=', 'avatar_url': 'https://avatars.githubusercontent.com/u/9390327?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/zhengw0426', 'html_url': 'https://github.com/zhengw0426', 'followers_url': 'https://api.github.com/users/zhengw0426/followers', 'following_url': 'https://api.github.com/users/zhengw0426/following{/other_user}', 'gists_url': 'https://api.github.com/users/zhengw0426/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/zhengw0426/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/zhengw0426/subscriptions', 'organizations_url': 'https://api.github.com/users/zhengw0426/orgs', 'repos_url': 'https://api.github.com/users/zhengw0426/repos', 'events_url': 'https://api.github.com/users/zhengw0426/events{/privacy}', 'received_events_url': 'https://api.github.com/users/zhengw0426/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 2, 'created_at': '2023-03-16T02:20:34Z', 'updated_at': '2023-03-17T03:32:23Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '我在做性能压测的时候，发现同一个Topic，使用不同的消费组进行消费，POP消费的TPS只有Pull的一半，这种是否正常？', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6360/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6360/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6370', 'id': 4969834, 'node_id': 'D_kwDOBHrsl84AS9Vq', 'number': 6370, 'title': 'Create subscriptionGroup through the command line and set the maximum number of retries for retryMaxTimes, which does not take effect：RocketMQ4.9.4', 'user': {'login': 'onejimmyboy', 'id': 57432151, 'node_id': 'MDQ6VXNlcjU3NDMyMTUx', 'avatar_url': 'https://avatars.githubusercontent.com/u/57432151?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/onejimmyboy', 'html_url': 'https://github.com/onejimmyboy', 'followers_url': 'https://api.github.com/users/onejimmyboy/followers', 'following_url': 'https://api.github.com/users/onejimmyboy/following{/other_user}', 'gists_url': 'https://api.github.com/users/onejimmyboy/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/onejimmyboy/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/onejimmyboy/subscriptions', 'organizations_url': 'https://api.github.com/users/onejimmyboy/orgs', 'repos_url': 'https://api.github.com/users/onejimmyboy/repos', 'events_url': 'https://api.github.com/users/onejimmyboy/events{/privacy}', 'received_events_url': 'https://api.github.com/users/onejimmyboy/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 7, 'created_at': '2023-03-16T09:57:08Z', 'updated_at': '2023-03-21T08:02:39Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': 'create new group\r\n./mqadmin updateSubGroup -b localhost:10911 -n localhost:9876 -r 1 -w 1 -s true -i 0 -c DefaultCluster -g test100\r\n//consumer failed\r\nDefaultMQPushConsumer consumer = new DefaultMQPushConsumer("group003",getAcl(),new AllocateMessageQueueAveragely());\r\nconsumer.setNamesrvAddr("localhost:9876");\r\nconsumer.subscribe("topic003","*");\r\nconsumer.registerMessageListener(new MessageListenerConcurrently() {\r\n@OverRide\r\npublic ConsumeConcurrentlyStatus consumeMessage(List list,\r\nConsumeConcurrentlyContext consumeConcurrentlyContext) {\r\nSystem.out.println("接收到的消息内容为：+"+ list);\r\nreturn ConsumeConcurrentlyStatus.RECONSUME_LATER;\r\n}\r\n});\r\nconsumer.start();\r\n\r\nWhat is expected to see?\r\nRetry consumption 2 times\r\n\r\nWhat did you see instead?\r\nRetry consumption 16 times\r\nPlease tell us about your environment:\r\nRocketmq 4.9.4\r\n\r\n\r\nAfter looking at the source code, it should be judged wrong here，\r\nAlthough the maximum number of retries in the group is obtained here, it will be obtained from the header if the version is greater than 3.4.9. I don\'t know why this is done\r\n![image](https://user-images.githubusercontent.com/57432151/225581528-2761ad2f-ba36-434d-a240-6b8b27cc9a2b.png)\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6370/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6370/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884707, 'node_id': 'DIC_kwDOBHrsl84CUVVj', 'repository_id': 75164823, 'emoji': ':speech_balloon:', 'name': 'General', 'description': 'Chat about anything and everything here', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'general', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6388', 'id': 4976038, 'node_id': 'D_kwDOBHrsl84AS-2m', 'number': 6388, 'title': 'Prepare to release Apache RocketMQ 4.9.5', 'user': {'login': 'RongtongJin', 'id': 21963954, 'node_id': 'MDQ6VXNlcjIxOTYzOTU0', 'avatar_url': 'https://avatars.githubusercontent.com/u/21963954?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/RongtongJin', 'html_url': 'https://github.com/RongtongJin', 'followers_url': 'https://api.github.com/users/RongtongJin/followers', 'following_url': 'https://api.github.com/users/RongtongJin/following{/other_user}', 'gists_url': 'https://api.github.com/users/RongtongJin/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/RongtongJin/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/RongtongJin/subscriptions', 'organizations_url': 'https://api.github.com/users/RongtongJin/orgs', 'repos_url': 'https://api.github.com/users/RongtongJin/repos', 'events_url': 'https://api.github.com/users/RongtongJin/events{/privacy}', 'received_events_url': 'https://api.github.com/users/RongtongJin/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 2, 'created_at': '2023-03-18T01:41:58Z', 'updated_at': '2023-03-21T01:40:53Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'Hello RocketMQ Community,\r\n\r\nThis is the discussion for the release of Apache RocketMQ 4.9.5 Release.\r\n\r\nIf there are any important pull requests that need to be merged into the 4.9.x LTS branch, please let me know.', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6388/reactions', 'total_count': 3, '+1': 1, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 2, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6388/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884709, 'node_id': 'DIC_kwDOBHrsl84CUVVl', 'repository_id': 75164823, 'emoji': ':bulb:', 'name': 'Ideas', 'description': 'Share ideas for new features', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'ideas', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6405', 'id': 4982346, 'node_id': 'D_kwDOBHrsl84ATAZK', 'number': 6405, 'title': 'proxy module monitoring indicators are improved', 'user': {'login': 'socutes', 'id': 7479320, 'node_id': 'MDQ6VXNlcjc0NzkzMjA=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7479320?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/socutes', 'html_url': 'https://github.com/socutes', 'followers_url': 'https://api.github.com/users/socutes/followers', 'following_url': 'https://api.github.com/users/socutes/following{/other_user}', 'gists_url': 'https://api.github.com/users/socutes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/socutes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/socutes/subscriptions', 'organizations_url': 'https://api.github.com/users/socutes/orgs', 'repos_url': 'https://api.github.com/users/socutes/repos', 'events_url': 'https://api.github.com/users/socutes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/socutes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [{'id': 4364070645, 'node_id': 'LA_kwDOBHrsl88AAAABBB5u9Q', 'url': 'https://api.github.com/repos/apache/rocketmq/labels/module/proxy', 'name': 'module/proxy', 'color': '0E63B3', 'default': False, 'description': ''}, {'id': 5097709708, 'node_id': 'LA_kwDOBHrsl88AAAABL9jgjA', 'url': 'https://api.github.com/repos/apache/rocketmq/labels/metrics', 'name': 'metrics', 'color': '899C06', 'default': False, 'description': ''}], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 9, 'created_at': '2023-03-20T05:40:57Z', 'updated_at': '2023-03-28T10:25:46Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'Current proxy module monitoring indicators are not perfect, need to improve the monitoring indicators for connection, time, thread several dimensions.add metrics for both the node and Topic dimensions\r\n\r\nIt is recommended to add the following indicators:\r\n1. 【Node/Topic】Number of messages produced/consumed\r\n2.  【Node/Topic】Production/consumption message size /\r\n3.  【Node/Topic】Time spent on each interface request\r\n4.  【Node/Topic】Statistics on error codes of each interface\r\n5.  【Node】The number of calls to each interface\r\n6. 【Node】TCP(GRPC/Remoting) connection count statistics\r\n7. 【Node】Thread pool monitoring (total capacity, used capacity, free capacity of each thread pool) monitoring\r\n8. 【Node】Process status: indicates that the current process is started or stopped\r\n\r\nThe following table describes the labels of the metrics that are related to the Message Queue for Apache RocketMQ Proxy.\r\ncluster: RocketMQ cluster name.\r\nnode_type: the type of service node, whitch includes the following:proxy,broker,nameserver.\r\nnode_id:the ID of the service node.\r\ntopic: the topic of RocketMQ.\r\nthread_type: The use of thread pools. eg: sendMessage、pullMessage\r\nprotocol_type: Type of protocol. eg: grpc, remoting\r\nproxy_mode: cluster mode. eg: local, cluster\r\n\r\nIndicators of node dimension:\r\nType | Name | Unit | Description | Label\r\n-- | -- | -- | -- | --\r\ncounter | rocketmq_messages_in_total | count | The number of messages that are produced. | cluster,node_type,node_id,topic, protocol_type,proxy_mode\r\ncounter | rocketmq_messages_out_total | count | The number of messages that are consumed. | cluster,node_type,node_id,topic, protocol_type,proxy_mode\r\ncounter | rocketmq_throughput_in_total | byte | The write throughput that are produced. | cluster,node_type,node_id,topic, protocol_type,proxy_mode\r\ncounter | rocketmq_throughput_out_total | byte | The read throughput that are produced. | cluster,node_type,node_id,topic, protocol_type,proxy_mode\r\nhistogram | rocketmq_message_size | byte | The distribution of message sizes. This metric is counted only when messages are sent. The following shows the distribution ranges:le_1_kb: ≤ 1 KBle_4_kb: ≤ 4 KBle_512_kb: ≤ 512 KBle_1_mb: ≤ 1 MBle_2_mb: ≤ 2 MBle_4_mb: ≤ 4 MBle_overflow: > 4 MB | cluster,node_type,node_id,topic, protocol_type,proxy_mode\r\nhistogram | rocketmq_rpc_latency | millisecond | The rpc call latency.ranges:le_1_msle_5_msle_10_msle_100_msle_10000_msle_60000_msle_overflow | cluster,node_typ,node_id, request_code, response_code,proxy_mode\r\ncounter | rocketmq_producer_connections | count | Number of connections for the producer | cluster,node_typ,node_id,proxy_mode\r\ncounter | rocketmq_consumer_connections | count | The number of consumer connections | cluster,node_typ,node_id,proxy_mode\r\nguage | rocketmq_processor_watermark | count | High watermark information for the thread| cluster,node_typ,node_id,thread_type,proxy_mode\r\ngauge | rocketmq_proxy_up | value | Process running status | cluster,node_typ,node_id,proxy_mode\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6405/reactions', 'total_count': 1, '+1': 1, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6405/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884707, 'node_id': 'DIC_kwDOBHrsl84CUVVj', 'repository_id': 75164823, 'emoji': ':speech_balloon:', 'name': 'General', 'description': 'Chat about anything and everything here', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'general', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6415', 'id': 4983948, 'node_id': 'D_kwDOBHrsl84ATAyM', 'number': 6415, 'title': 'why using min queue nums between local default queue nums and remote default topic queue nums', 'user': {'login': 'miles-ton', 'id': 77013030, 'node_id': 'MDQ6VXNlcjc3MDEzMDMw', 'avatar_url': 'https://avatars.githubusercontent.com/u/77013030?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/miles-ton', 'html_url': 'https://github.com/miles-ton', 'followers_url': 'https://api.github.com/users/miles-ton/followers', 'following_url': 'https://api.github.com/users/miles-ton/following{/other_user}', 'gists_url': 'https://api.github.com/users/miles-ton/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/miles-ton/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/miles-ton/subscriptions', 'organizations_url': 'https://api.github.com/users/miles-ton/orgs', 'repos_url': 'https://api.github.com/users/miles-ton/repos', 'events_url': 'https://api.github.com/users/miles-ton/events{/privacy}', 'received_events_url': 'https://api.github.com/users/miles-ton/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 0, 'created_at': '2023-03-20T13:39:20Z', 'updated_at': '2023-03-20T13:39:21Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': '<img width="1157" alt="image" src="https://user-images.githubusercontent.com/77013030/226355608-6427584c-be70-4691-911e-1cd6cc42ac9b.png">\r\ndo anyone know why need to use min queue nums between local default queue nums and remote default topic queue nums when using default topic, i think it\'s more suitable to directly use remote default topic nums, what do you think?', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6415/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6415/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6425#discussioncomment-5377187', 'answer_chosen_at': '2023-03-20T23:27:16.000-07:00', 'answer_chosen_by': {'login': 'drpmma', 'id': 20906038, 'node_id': 'MDQ6VXNlcjIwOTA2MDM4', 'avatar_url': 'https://avatars.githubusercontent.com/u/20906038?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/drpmma', 'html_url': 'https://github.com/drpmma', 'followers_url': 'https://api.github.com/users/drpmma/followers', 'following_url': 'https://api.github.com/users/drpmma/following{/other_user}', 'gists_url': 'https://api.github.com/users/drpmma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/drpmma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/drpmma/subscriptions', 'organizations_url': 'https://api.github.com/users/drpmma/orgs', 'repos_url': 'https://api.github.com/users/drpmma/repos', 'events_url': 'https://api.github.com/users/drpmma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/drpmma/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6425', 'id': 4986017, 'node_id': 'D_kwDOBHrsl84ATBSh', 'number': 6425, 'title': 'updateSubGroup command set retryPolicy raise JSON Exception', 'user': {'login': 'orchidFang', 'id': 6478487, 'node_id': 'MDQ6VXNlcjY0Nzg0ODc=', 'avatar_url': 'https://avatars.githubusercontent.com/u/6478487?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/orchidFang', 'html_url': 'https://github.com/orchidFang', 'followers_url': 'https://api.github.com/users/orchidFang/followers', 'following_url': 'https://api.github.com/users/orchidFang/following{/other_user}', 'gists_url': 'https://api.github.com/users/orchidFang/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/orchidFang/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/orchidFang/subscriptions', 'organizations_url': 'https://api.github.com/users/orchidFang/orgs', 'repos_url': 'https://api.github.com/users/orchidFang/repos', 'events_url': 'https://api.github.com/users/orchidFang/events{/privacy}', 'received_events_url': 'https://api.github.com/users/orchidFang/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'closed', 'state_reason': 'resolved', 'locked': False, 'comments': 2, 'created_at': '2023-03-21T04:05:45Z', 'updated_at': '2023-03-21T08:24:22Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': '使用updateSubGroup设置重试策略时，经检查json配置没有问题，但报json解析错误。\r\n\r\nCOMMAND:\r\n\r\n./mqadmin updateSubGroup -n localhost:9876 -g system -p {"type":"EXPONENTIAL","exponentialRetryPolicy":{"initial":5000,"max":7200000,"multiplier":2}}\r\n\r\nERROR MSG:\r\n\r\norg.apache.rocketmq.tools.command.SubCommandException: UpdateSubGroupSubCommand command failed\r\nat org.apache.rocketmq.tools.command.consumer.UpdateSubGroupSubCommand.execute(UpdateSubGroupSubCommand.java:211)\r\nat org.apache.rocketmq.tools.command.MQAdminStartup.main0(MQAdminStartup.java:160)\r\nat org.apache.rocketmq.tools.command.MQAdminStartup.main(MQAdminStartup.java:110)\r\nCaused by: com.alibaba.fastjson.JSONException: error parse true\r\nat com.alibaba.fastjson.parser.JSONLexerBase.scanTrue(JSONLexerBase.java:4642)\r\nat com.alibaba.fastjson.parser.JSONLexerBase.nextToken(JSONLexerBase.java:148)\r\nat com.alibaba.fastjson.parser.DefaultJSONParser.(DefaultJSONParser.java:170)\r\nat com.alibaba.fastjson.parser.DefaultJSONParser.(DefaultJSONParser.java:141)\r\nat com.alibaba.fastjson.JSON.parseObject(JSON.java:378)\r\nat com.alibaba.fastjson.JSON.parseObject(JSON.java:298)\r\nat com.alibaba.fastjson.JSON.parseObject(JSON.java:588)\r\nat org.apache.rocketmq.tools.command.consumer.UpdateSubGroupSubCommand.execute(UpdateSubGroupSubCommand.java:159)\r\n... 2 more\r\n\r\n<img width="961" alt="15a59059e01c8990dc10cb917d8e9d9" src="https://user-images.githubusercontent.com/6478487/226515130-30725aeb-1375-40e0-b674-1668ded7089b.png">\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6425/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6425/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': 'https://github.com/apache/rocketmq/discussions/6432#discussioncomment-5390775', 'answer_chosen_at': '2023-03-22T20:05:30.000-07:00', 'answer_chosen_by': {'login': 'quattro-abc', 'id': 25142389, 'node_id': 'MDQ6VXNlcjI1MTQyMzg5', 'avatar_url': 'https://avatars.githubusercontent.com/u/25142389?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/quattro-abc', 'html_url': 'https://github.com/quattro-abc', 'followers_url': 'https://api.github.com/users/quattro-abc/followers', 'following_url': 'https://api.github.com/users/quattro-abc/following{/other_user}', 'gists_url': 'https://api.github.com/users/quattro-abc/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/quattro-abc/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/quattro-abc/subscriptions', 'organizations_url': 'https://api.github.com/users/quattro-abc/orgs', 'repos_url': 'https://api.github.com/users/quattro-abc/repos', 'events_url': 'https://api.github.com/users/quattro-abc/events{/privacy}', 'received_events_url': 'https://api.github.com/users/quattro-abc/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'html_url': 'https://github.com/apache/rocketmq/discussions/6432', 'id': 4990664, 'node_id': 'D_kwDOBHrsl84ATCbI', 'number': 6432, 'title': 'CODE: 2  DESC: [REJECTREQUEST]system busy, start flow control for a while BROKER', 'user': {'login': 'quattro-abc', 'id': 25142389, 'node_id': 'MDQ6VXNlcjI1MTQyMzg5', 'avatar_url': 'https://avatars.githubusercontent.com/u/25142389?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/quattro-abc', 'html_url': 'https://github.com/quattro-abc', 'followers_url': 'https://api.github.com/users/quattro-abc/followers', 'following_url': 'https://api.github.com/users/quattro-abc/following{/other_user}', 'gists_url': 'https://api.github.com/users/quattro-abc/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/quattro-abc/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/quattro-abc/subscriptions', 'organizations_url': 'https://api.github.com/users/quattro-abc/orgs', 'repos_url': 'https://api.github.com/users/quattro-abc/repos', 'events_url': 'https://api.github.com/users/quattro-abc/events{/privacy}', 'received_events_url': 'https://api.github.com/users/quattro-abc/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 5, 'created_at': '2023-03-22T07:32:33Z', 'updated_at': '2023-05-08T08:51:22Z', 'author_association': 'NONE', 'active_lock_reason': None, 'body': 'Hello everyone, when I used RocketMQ, the log file output the following exception.Please help me. How can I handle the exception?\r\n\r\n`org.springframework.messaging.MessagingException: CODE: 2  DESC: [REJECTREQUEST]system busy, start flow control for a while BROKER: 10.11.2.12:30911\r\nFor more information, please visit the url, http://rocketmq.apache.org/docs/faq/; nested exception is org.apache.rocketmq.client.exception.MQBrokerException: CODE: 2  DESC: [REJECTREQUEST]system busy, start flow control for a while BROKER: 10.11.2.12:30911\r\nFor more information, please visit the url, http://rocketmq.apache.org/docs/faq/\r\norg.springframework.messaging.MessagingException: CODE: 2  DESC: [REJECTREQUEST]system busy, start flow control for a while BROKER: 10.11.2.12:30911\r\nFor more information, please visit the url, http://rocketmq.apache.org/docs/faq/; nested exception is org.apache.rocketmq.client.exception.MQBrokerException: CODE: 2  DESC: [REJECTREQUEST]system busy, start flow control for a while BROKER: 10.11.2.12:30911\r\nFor more information, please visit the url, http://rocketmq.apache.org/docs/faq/\r\n\tat org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:563)\r\n\tat org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:484)\r\n\tat org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:472)\r\n\tat org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:886)\r\n\tat org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:57)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:108)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:150)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:128)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:121)`\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6432/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6432/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884708, 'node_id': 'DIC_kwDOBHrsl84CUVVk', 'repository_id': 75164823, 'emoji': ':pray:', 'name': 'Q&A', 'description': 'Ask the community for help', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'q-a', 'is_answerable': True}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6433', 'id': 4990681, 'node_id': 'D_kwDOBHrsl84ATCbZ', 'number': 6433, 'title': '搭建最新版本controller内嵌模式的自动failover集群时，broker启动后立即shutdown是怎么回事？', 'user': {'login': 'zhurunhua', 'id': 16618730, 'node_id': 'MDQ6VXNlcjE2NjE4NzMw', 'avatar_url': 'https://avatars.githubusercontent.com/u/16618730?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/zhurunhua', 'html_url': 'https://github.com/zhurunhua', 'followers_url': 'https://api.github.com/users/zhurunhua/followers', 'following_url': 'https://api.github.com/users/zhurunhua/following{/other_user}', 'gists_url': 'https://api.github.com/users/zhurunhua/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/zhurunhua/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/zhurunhua/subscriptions', 'organizations_url': 'https://api.github.com/users/zhurunhua/orgs', 'repos_url': 'https://api.github.com/users/zhurunhua/repos', 'events_url': 'https://api.github.com/users/zhurunhua/events{/privacy}', 'received_events_url': 'https://api.github.com/users/zhurunhua/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'closed', 'state_reason': 'resolved', 'locked': False, 'comments': 0, 'created_at': '2023-03-22T07:38:47Z', 'updated_at': '2023-03-22T09:26:46Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'broker启动日志如下：\r\n![](https://p.ipic.vip/05sce1.png)\r\n\r\nmaster都能正常启动成功，但是slave会闪退', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6433/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6433/timeline'}, {'repository_url': 'https://api.github.com/repos/apache/rocketmq', 'category': {'id': 38884707, 'node_id': 'DIC_kwDOBHrsl84CUVVj', 'repository_id': 75164823, 'emoji': ':speech_balloon:', 'name': 'General', 'description': 'Chat about anything and everything here', 'created_at': '2023-02-20T07:22:24.000-08:00', 'updated_at': '2023-02-20T07:22:24.000-08:00', 'slug': 'general', 'is_answerable': False}, 'answer_html_url': None, 'answer_chosen_at': None, 'answer_chosen_by': None, 'html_url': 'https://github.com/apache/rocketmq/discussions/6444', 'id': 4993789, 'node_id': 'D_kwDOBHrsl84ATDL9', 'number': 6444, 'title': 'Discuss the handling of unused function arguments', 'user': {'login': 'socutes', 'id': 7479320, 'node_id': 'MDQ6VXNlcjc0NzkzMjA=', 'avatar_url': 'https://avatars.githubusercontent.com/u/7479320?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/socutes', 'html_url': 'https://github.com/socutes', 'followers_url': 'https://api.github.com/users/socutes/followers', 'following_url': 'https://api.github.com/users/socutes/following{/other_user}', 'gists_url': 'https://api.github.com/users/socutes/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/socutes/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/socutes/subscriptions', 'organizations_url': 'https://api.github.com/users/socutes/orgs', 'repos_url': 'https://api.github.com/users/socutes/repos', 'events_url': 'https://api.github.com/users/socutes/events{/privacy}', 'received_events_url': 'https://api.github.com/users/socutes/received_events', 'type': 'User', 'user_view_type': 'public', 'site_admin': False}, 'labels': [], 'state': 'open', 'state_reason': None, 'locked': False, 'comments': 2, 'created_at': '2023-03-23T00:59:11Z', 'updated_at': '2023-03-23T01:28:13Z', 'author_association': 'CONTRIBUTOR', 'active_lock_reason': None, 'body': 'There are many functions in the current code that need to pass arguments, but the arguments are not used. The current discovery is mainly in the DefaultRequestProcessor in nameserver. It\'s a similar story elsewhere.\r\n\r\nFrom a coding point of view, I don\'t think this makes sense. I understand that this parameter should be passed for future use. But it has not been used for a long time.\r\n\r\nSo, I think from a code optimization point of view, invalid parameter passing should be removed. Pass parameters as needed.\r\n\r\nI\'d like to hear from the community.\r\n\r\neg:\r\n<img width="667" alt="image" src="https://user-images.githubusercontent.com/7479320/227072030-08eac5aa-3e1c-40f8-9e74-80d4ae7a7a1b.png">\r\n\r\n<img width="920" alt="image" src="https://user-images.githubusercontent.com/7479320/227072006-57373776-e26f-4ce0-b2cc-b5eb9079db08.png">\r\n', 'reactions': {'url': 'https://api.github.com/repos/apache/rocketmq/discussions/6444/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/apache/rocketmq/discussions/6444/timeline'}]
